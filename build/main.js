!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=60)}([function(t,e){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return Ol})),n.d(e,"c",(function(){return cl})),n.d(e,"d",(function(){return mc})),n.d(e,"e",(function(){return Js})),n.d(e,"f",(function(){return rc})),n.d(e,"g",(function(){return ic})),n.d(e,"h",(function(){return Jl})),n.d(e,"i",(function(){return Lc})),n.d(e,"j",(function(){return Wo})),n.d(e,"k",(function(){return et})),n.d(e,"l",(function(){return en})),n.d(e,"m",(function(){return Me})),n.d(e,"n",(function(){return Oe})),n.d(e,"o",(function(){return c})),n.d(e,"p",(function(){return be})),n.d(e,"q",(function(){return ba})),n.d(e,"r",(function(){return kl})),n.d(e,"s",(function(){return a})),n.d(e,"t",(function(){return Nt})),n.d(e,"u",(function(){return M})),n.d(e,"v",(function(){return ml})),n.d(e,"w",(function(){return Ee})),n.d(e,"x",(function(){return o})),n.d(e,"y",(function(){return ro})),n.d(e,"z",(function(){return Xl})),n.d(e,"A",(function(){return fo})),n.d(e,"B",(function(){return yo})),n.d(e,"C",(function(){return Ks})),n.d(e,"D",(function(){return g})),n.d(e,"E",(function(){return v})),n.d(e,"F",(function(){return aa})),n.d(e,"G",(function(){return ta})),n.d(e,"H",(function(){return ua})),n.d(e,"I",(function(){return ca})),n.d(e,"J",(function(){return _})),n.d(e,"K",(function(){return m})),n.d(e,"L",(function(){return f})),n.d(e,"M",(function(){return _l})),n.d(e,"N",(function(){return zl})),n.d(e,"O",(function(){return i})),n.d(e,"P",(function(){return de})),n.d(e,"Q",(function(){return B})),n.d(e,"R",(function(){return Rt})),n.d(e,"S",(function(){return $e})),n.d(e,"T",(function(){return xe})),n.d(e,"U",(function(){return Us})),n.d(e,"V",(function(){return Hs})),n.d(e,"W",(function(){return u})),n.d(e,"X",(function(){return p})),n.d(e,"Y",(function(){return d})),n.d(e,"Z",(function(){return h})),n.d(e,"ab",(function(){return rl})),n.d(e,"bb",(function(){return te})),n.d(e,"cb",(function(){return Wl})),n.d(e,"db",(function(){return Rs})),n.d(e,"eb",(function(){return Pn})),n.d(e,"fb",(function(){return ln})),n.d(e,"gb",(function(){return fn})),n.d(e,"hb",(function(){return xn})),n.d(e,"ib",(function(){return Dl})),n.d(e,"jb",(function(){return ma})),n.d(e,"kb",(function(){return pa})),n.d(e,"lb",(function(){return _c})),n.d(e,"mb",(function(){return K})),n.d(e,"nb",(function(){return al})),n.d(e,"ob",(function(){return y})),n.d(e,"pb",(function(){return gc})),n.d(e,"qb",(function(){return l})),n.d(e,"rb",(function(){return _o})),n.d(e,"sb",(function(){return an})),n.d(e,"tb",(function(){return Xo})),n.d(e,"ub",(function(){return Rc})),n.d(e,"vb",(function(){return Uo})),n.d(e,"wb",(function(){return bt})),n.d(e,"xb",(function(){return Ds})),n.d(e,"yb",(function(){return xc})),n.d(e,"zb",(function(){return El})),n.d(e,"Ab",(function(){return Do})),n.d(e,"Bb",(function(){return go})),n.d(e,"Cb",(function(){return r})),n.d(e,"Db",(function(){return w})),n.d(e,"Eb",(function(){return q})),n.d(e,"Fb",(function(){return vl})),n.d(e,"Gb",(function(){return ks})),n.d(e,"Hb",(function(){return x})),n.d(e,"Ib",(function(){return b})),n.d(e,"Jb",(function(){return j})),n.d(e,"Kb",(function(){return Q})),n.d(e,"Lb",(function(){return ll})),n.d(e,"Mb",(function(){return uo})),n.d(e,"Nb",(function(){return S}));
/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},r={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=2,s=2,l=1e3,c=1001,u=1002,p=1003,h=1004,d=1005,_=1006,f=1007,m=1008,y=1022,g=2300,v=2301,b=1,x=2,S=3001,w=0;class M{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const n=this._listeners[t];if(void 0!==n){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const n=e.slice(0);for(let e=0,i=n.length;e<i;e++)n[e].call(this,t);t.target=null}}}const T=[];for(let t=0;t<256;t++)T[t]=(t<16?"0":"")+t.toString(16);let C=1234567;const E=Math.PI/180,A=180/Math.PI;function R(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(T[255&t]+T[t>>8&255]+T[t>>16&255]+T[t>>24&255]+"-"+T[255&e]+T[e>>8&255]+"-"+T[e>>16&15|64]+T[e>>24&255]+"-"+T[63&n|128]+T[n>>8&255]+"-"+T[n>>16&255]+T[n>>24&255]+T[255&i]+T[i>>8&255]+T[i>>16&255]+T[i>>24&255]).toUpperCase()}function L(t,e,n){return Math.max(e,Math.min(n,t))}function P(t,e){return(t%e+e)%e}function D(t,e,n){return(1-n)*t+n*e}function I(t){return 0==(t&t-1)&&0!==t}function k(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function O(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var B=Object.freeze({__proto__:null,DEG2RAD:E,RAD2DEG:A,generateUUID:R,clamp:L,euclideanModulo:P,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:D,damp:function(t,e,n,i){return D(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(P(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(C=t%2147483647),C=16807*C%2147483647,(C-1)/2147483646},degToRad:function(t){return t*E},radToDeg:function(t){return t*A},isPowerOfTwo:I,ceilPowerOfTwo:k,floorPowerOfTwo:O,setQuaternionFromProperEuler:function(t,e,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+i)/2),u=a((e+i)/2),p=o((e-i)/2),h=a((e-i)/2),d=o((i-e)/2),_=a((i-e)/2);switch(r){case"XYX":t.set(s*u,l*p,l*h,s*c);break;case"YZY":t.set(l*h,s*u,l*p,s*c);break;case"ZXZ":t.set(l*p,l*h,s*u,s*c);break;case"XZX":t.set(s*u,l*_,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*_,s*c);break;case"ZYZ":t.set(l*_,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}});class j{constructor(t=0,e=0){this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}j.prototype.isVector2=!0;class F{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],p=n[2],h=n[5],d=n[8],_=i[0],f=i[3],m=i[6],y=i[1],g=i[4],v=i[7],b=i[2],x=i[5],S=i[8];return r[0]=o*_+a*y+s*b,r[3]=o*f+a*g+s*x,r[6]=o*m+a*v+s*S,r[1]=l*_+c*y+u*b,r[4]=l*f+c*g+u*x,r[7]=l*m+c*v+u*S,r[2]=p*_+h*y+d*b,r[5]=p*f+h*g+d*x,r[8]=p*m+h*v+d*S,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=c*o-a*l,p=a*s-c*r,h=l*r-o*s,d=e*u+n*p+i*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);const _=1/d;return t[0]=u*_,t[1]=(i*l-c*n)*_,t[2]=(a*n-i*o)*_,t[3]=p*_,t[4]=(c*e-i*s)*_,t[5]=(i*r-a*e)*_,t[6]=h*_,t[7]=(n*s-l*e)*_,t[8]=(o*e-n*r)*_,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<9;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}function N(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}F.prototype.isMatrix3=!0;const z={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function H(t,e){return new z[t](e)}function U(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}let W;class G{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===W&&(W=U("canvas")),W.width=t.width,W.height=t.height;const n=W.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=W}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}let V=0;class q extends M{constructor(t=q.DEFAULT_IMAGE,e=q.DEFAULT_MAPPING,n=c,i=c,r=_,o=m,a=1023,s=1009,l=1,u=3e3){super(),Object.defineProperty(this,"id",{value:V++}),this.uuid=R(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new j(0,0),this.repeat=new j(1,1),this.center=new j(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new F,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=R()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(X(i[t].image)):e.push(X(i[t]))}else e=X(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case l:t.x=t.x-Math.floor(t.x);break;case c:t.x=t.x<0?0:1;break;case u:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case l:t.y=t.y-Math.floor(t.y);break;case c:t.y=t.y<0?0:1;break;case u:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&this.version++}}function X(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?G.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}q.DEFAULT_IMAGE=void 0,q.DEFAULT_MAPPING=300,q.prototype.isTexture=!0;class Y{constructor(t=0,e=0,n=0,i=1){this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const o=t.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],p=o[9],h=o[2],d=o[6],_=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-h)<.01&&Math.abs(p-d)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+h)<.1&&Math.abs(p+d)<.1&&Math.abs(a+u+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const t=(a+1)/2,o=(u+1)/2,f=(_+1)/2,m=(s+c)/4,y=(l+h)/4,g=(p+d)/4;return t>o&&t>f?t<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=m/n,r=y/n):o>f?o<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=m/i,r=g/i):f<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(f),n=y/r,i=g/r),this.set(n,i,r,e),this}let f=Math.sqrt((d-p)*(d-p)+(l-h)*(l-h)+(c-s)*(c-s));return Math.abs(f)<.001&&(f=1),this.x=(d-p)/f,this.y=(l-h)/f,this.z=(c-s)/f,this.w=Math.acos((a+u+_-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Y.prototype.isVector4=!0;class Z extends M{constructor(t,e,n={}){super(),this.width=t,this.height=e,this.depth=1,this.scissor=new Y(0,0,t,e),this.scissorTest=!1,this.viewport=new Y(0,0,t,e),this.texture=new q(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:t,height:e,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:_,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}setSize(t,e,n=1){this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}Z.prototype.isWebGLRenderTarget=!0;(class extends Z{constructor(t,e,n){super(t,e);const i=this.texture;this.texture=[];for(let t=0;t<n;t++)this.texture[t]=i.clone()}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}copy(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(let e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}).prototype.isWebGLMultipleRenderTargets=!0;class J extends Z{constructor(t,e,n={}){super(t,e,n),this.samples=4,this.ignoreDepthForMultisampleCopy=void 0===n.ignoreDepth||n.ignoreDepth,this.useRenderToTexture=void 0!==n.useRenderToTexture&&n.useRenderToTexture,this.useRenderbuffer=!1===this.useRenderToTexture}copy(t){return super.copy.call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}J.prototype.isWebGLMultisampleRenderTarget=!0;class K{constructor(t=0,e=0,n=0,i=1){this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}static slerpFlat(t,e,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const p=r[o+0],h=r[o+1],d=r[o+2],_=r[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===a)return t[e+0]=p,t[e+1]=h,t[e+2]=d,void(t[e+3]=_);if(u!==_||s!==p||l!==h||c!==d){let t=1-a;const e=s*p+l*h+c*d+u*_,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,e*n);t=Math.sin(t*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*t+p*r,l=l*t+h*r,c=c*t+d*r,u=u*t+_*r,t===1-a){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],p=r[o+1],h=r[o+2],d=r[o+3];return t[e]=a*d+c*u+s*h-l*p,t[e+1]=s*d+c*p+l*u-a*h,t[e+2]=l*d+c*h+a*p-s*u,t[e+3]=c*d-a*u-s*p-l*h,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),p=s(n/2),h=s(i/2),d=s(r/2);switch(o){case"XYZ":this._x=p*c*u+l*h*d,this._y=l*h*u-p*c*d,this._z=l*c*d+p*h*u,this._w=l*c*u-p*h*d;break;case"YXZ":this._x=p*c*u+l*h*d,this._y=l*h*u-p*c*d,this._z=l*c*d-p*h*u,this._w=l*c*u+p*h*d;break;case"ZXY":this._x=p*c*u-l*h*d,this._y=l*h*u+p*c*d,this._z=l*c*d+p*h*u,this._w=l*c*u-p*h*d;break;case"ZYX":this._x=p*c*u-l*h*d,this._y=l*h*u+p*c*d,this._z=l*c*d-p*h*u,this._w=l*c*u+p*h*d;break;case"YZX":this._x=p*c*u+l*h*d,this._y=l*h*u+p*c*d,this._z=l*c*d-p*h*u,this._w=l*c*u-p*h*d;break;case"XZY":this._x=p*c*u-l*h*d,this._y=l*h*u-p*c*d,this._z=l*c*d+p*h*u,this._w=l*c*u+p*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],c=e[6],u=e[10],p=n+a+u;if(p>0){const t=.5/Math.sqrt(p+1);this._w=.25/t,this._x=(c-s)*t,this._y=(r-l)*t,this._z=(o-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-s)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-i)/t,this._x=(r+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(L(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,p=Math.sin(e*c)/l;return this._w=o*u+this._w*p,this._x=n*u+this._x*p,this._y=i*u+this._y*p,this._z=r*u+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,e,n){this.copy(t).slerp(e,n)}random(){const t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}K.prototype.isQuaternion=!0;class Q{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(tt.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(tt.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,p=-r*e-o*n-a*i;return this.x=l*s+p*-r+c*-a-u*-o,this.y=c*s+p*-o+u*-r-l*-a,this.z=u*s+p*-a+l*-o-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return $.copy(this).projectOnVector(t),this.sub($)}reflect(t){return this.sub($.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(L(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-t**2);return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Q.prototype.isVector3=!0;const $=new Q,tt=new K;class et{constructor(t=new Q(1/0,1/0,1/0),e=new Q(-1/0,-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],c=t[s+1],u=t[s+2];l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),c=t.getY(s),u=t.getZ(s);l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=it.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),rt.copy(e.boundingBox),rt.applyMatrix4(t.matrixWorld),this.union(rt));const n=t.children;for(let t=0,e=n.length;t<e;t++)this.expandByObject(n[t]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,it),it.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(pt),ht.subVectors(this.max,pt),ot.subVectors(t.a,pt),at.subVectors(t.b,pt),st.subVectors(t.c,pt),lt.subVectors(at,ot),ct.subVectors(st,at),ut.subVectors(ot,st);let e=[0,-lt.z,lt.y,0,-ct.z,ct.y,0,-ut.z,ut.y,lt.z,0,-lt.x,ct.z,0,-ct.x,ut.z,0,-ut.x,-lt.y,lt.x,0,-ct.y,ct.x,0,-ut.y,ut.x,0];return!!ft(e,ot,at,st,ht)&&(e=[1,0,0,0,1,0,0,0,1],!!ft(e,ot,at,st,ht)&&(dt.crossVectors(lt,ct),e=[dt.x,dt.y,dt.z],ft(e,ot,at,st,ht)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return it.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=.5*this.getSize(it).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(nt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),nt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),nt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),nt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),nt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),nt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),nt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),nt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(nt)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}et.prototype.isBox3=!0;const nt=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],it=new Q,rt=new et,ot=new Q,at=new Q,st=new Q,lt=new Q,ct=new Q,ut=new Q,pt=new Q,ht=new Q,dt=new Q,_t=new Q;function ft(t,e,n,i,r){for(let o=0,a=t.length-3;o<=a;o+=3){_t.fromArray(t,o);const a=r.x*Math.abs(_t.x)+r.y*Math.abs(_t.y)+r.z*Math.abs(_t.z),s=e.dot(_t),l=n.dot(_t),c=i.dot(_t);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const mt=new et,yt=new Q,gt=new Q,vt=new Q;class bt{constructor(t=new Q,e=-1){this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):mt.setFromPoints(t).getCenter(n);let i=0;for(let e=0,r=t.length;e<r;e++)i=Math.max(i,n.distanceToSquared(t[e]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){vt.subVectors(t,this.center);const e=vt.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),n=.5*(t-this.radius);this.center.add(vt.multiplyScalar(n/t)),this.radius+=n}return this}union(t){return!0===this.center.equals(t.center)?gt.set(0,0,1).multiplyScalar(t.radius):gt.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(yt.copy(t.center).add(gt)),this.expandByPoint(yt.copy(t.center).sub(gt)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const xt=new Q,St=new Q,wt=new Q,Mt=new Q,Tt=new Q,Ct=new Q,Et=new Q;class At{constructor(t=new Q,e=new Q(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,xt)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=xt.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(xt.copy(this.direction).multiplyScalar(e).add(this.origin),xt.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){St.copy(t).add(e).multiplyScalar(.5),wt.copy(e).sub(t).normalize(),Mt.copy(this.origin).sub(St);const r=.5*t.distanceTo(e),o=-this.direction.dot(wt),a=Mt.dot(this.direction),s=-Mt.dot(wt),l=Mt.lengthSq(),c=Math.abs(1-o*o);let u,p,h,d;if(c>0)if(u=o*s-a,p=o*a-s,d=r*c,u>=0)if(p>=-d)if(p<=d){const t=1/c;u*=t,p*=t,h=u*(u+o*p+2*a)+p*(o*u+p+2*s)+l}else p=r,u=Math.max(0,-(o*p+a)),h=-u*u+p*(p+2*s)+l;else p=-r,u=Math.max(0,-(o*p+a)),h=-u*u+p*(p+2*s)+l;else p<=-d?(u=Math.max(0,-(-o*r+a)),p=u>0?-r:Math.min(Math.max(-r,-s),r),h=-u*u+p*(p+2*s)+l):p<=d?(u=0,p=Math.min(Math.max(-r,-s),r),h=p*(p+2*s)+l):(u=Math.max(0,-(o*r+a)),p=u>0?r:Math.min(Math.max(-r,-s),r),h=-u*u+p*(p+2*s)+l);else p=o>0?-r:r,u=Math.max(0,-(o*p+a)),h=-u*u+p*(p+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(wt).multiplyScalar(p).add(St),h}intersectSphere(t,e){xt.subVectors(t.center,this.origin);const n=xt.dot(this.direction),i=xt.dot(xt)-n*n,r=t.radius*t.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;return t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,p=this.origin;return l>=0?(n=(t.min.x-p.x)*l,i=(t.max.x-p.x)*l):(n=(t.max.x-p.x)*l,i=(t.min.x-p.x)*l),c>=0?(r=(t.min.y-p.y)*c,o=(t.max.y-p.y)*c):(r=(t.max.y-p.y)*c,o=(t.min.y-p.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(t.min.z-p.z)*u,s=(t.max.z-p.z)*u):(a=(t.max.z-p.z)*u,s=(t.min.z-p.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,xt)}intersectTriangle(t,e,n,i,r){Tt.subVectors(e,t),Ct.subVectors(n,t),Et.crossVectors(Tt,Ct);let o,a=this.direction.dot(Et);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Mt.subVectors(this.origin,t);const s=o*this.direction.dot(Ct.crossVectors(Mt,Ct));if(s<0)return null;const l=o*this.direction.dot(Tt.cross(Mt));if(l<0)return null;if(s+l>a)return null;const c=-o*Mt.dot(Et);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Rt{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l,c,u,p,h,d,_,f){const m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=a,m[13]=s,m[2]=l,m[6]=c,m[10]=u,m[14]=p,m[3]=h,m[7]=d,m[11]=_,m[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Rt).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Lt.setFromMatrixColumn(t,0).length(),r=1/Lt.setFromMatrixColumn(t,1).length(),o=1/Lt.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*s,e[2]=r-t*l,e[6]=i+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-o*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=o*c,e[9]=r-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=o*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Dt,t,It)}lookAt(t,e,n){const i=this.elements;return Bt.subVectors(t,e),0===Bt.lengthSq()&&(Bt.z=1),Bt.normalize(),kt.crossVectors(n,Bt),0===kt.lengthSq()&&(1===Math.abs(n.z)?Bt.x+=1e-4:Bt.z+=1e-4,Bt.normalize(),kt.crossVectors(n,Bt)),kt.normalize(),Ot.crossVectors(Bt,kt),i[0]=kt.x,i[4]=Ot.x,i[8]=Bt.x,i[1]=kt.y,i[5]=Ot.y,i[9]=Bt.y,i[2]=kt.z,i[6]=Ot.z,i[10]=Bt.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],p=n[9],h=n[13],d=n[2],_=n[6],f=n[10],m=n[14],y=n[3],g=n[7],v=n[11],b=n[15],x=i[0],S=i[4],w=i[8],M=i[12],T=i[1],C=i[5],E=i[9],A=i[13],R=i[2],L=i[6],P=i[10],D=i[14],I=i[3],k=i[7],O=i[11],B=i[15];return r[0]=o*x+a*T+s*R+l*I,r[4]=o*S+a*C+s*L+l*k,r[8]=o*w+a*E+s*P+l*O,r[12]=o*M+a*A+s*D+l*B,r[1]=c*x+u*T+p*R+h*I,r[5]=c*S+u*C+p*L+h*k,r[9]=c*w+u*E+p*P+h*O,r[13]=c*M+u*A+p*D+h*B,r[2]=d*x+_*T+f*R+m*I,r[6]=d*S+_*C+f*L+m*k,r[10]=d*w+_*E+f*P+m*O,r[14]=d*M+_*A+f*D+m*B,r[3]=y*x+g*T+v*R+b*I,r[7]=y*S+g*C+v*L+b*k,r[11]=y*w+g*E+v*P+b*O,r[15]=y*M+g*A+v*D+b*B,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],p=t[10],h=t[14];return t[3]*(+r*s*u-i*l*u-r*a*p+n*l*p+i*a*h-n*s*h)+t[7]*(+e*s*h-e*l*p+r*o*p-i*o*h+i*l*c-r*s*c)+t[11]*(+e*l*u-e*a*h-r*o*u+n*o*h+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*u+e*a*p+i*o*u-n*o*p+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],p=t[10],h=t[11],d=t[12],_=t[13],f=t[14],m=t[15],y=u*f*l-_*p*l+_*s*h-a*f*h-u*s*m+a*p*m,g=d*p*l-c*f*l-d*s*h+o*f*h+c*s*m-o*p*m,v=c*_*l-d*u*l+d*a*h-o*_*h-c*a*m+o*u*m,b=d*u*s-c*_*s-d*a*p+o*_*p+c*a*f-o*u*f,x=e*y+n*g+i*v+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/x;return t[0]=y*S,t[1]=(_*p*r-u*f*r-_*i*h+n*f*h+u*i*m-n*p*m)*S,t[2]=(a*f*r-_*s*r+_*i*l-n*f*l-a*i*m+n*s*m)*S,t[3]=(u*s*r-a*p*r-u*i*l+n*p*l+a*i*h-n*s*h)*S,t[4]=g*S,t[5]=(c*f*r-d*p*r+d*i*h-e*f*h-c*i*m+e*p*m)*S,t[6]=(d*s*r-o*f*r-d*i*l+e*f*l+o*i*m-e*s*m)*S,t[7]=(o*p*r-c*s*r+c*i*l-e*p*l-o*i*h+e*s*h)*S,t[8]=v*S,t[9]=(d*u*r-c*_*r-d*n*h+e*_*h+c*n*m-e*u*m)*S,t[10]=(o*_*r-d*a*r+d*n*l-e*_*l-o*n*m+e*a*m)*S,t[11]=(c*a*r-o*u*r-c*n*l+e*u*l+o*n*h-e*a*h)*S,t[12]=b*S,t[13]=(c*_*i-d*u*i+d*n*p-e*_*p-c*n*f+e*u*f)*S,t[14]=(d*a*i-o*_*i-d*n*s+e*_*s+o*n*f-e*a*f)*S,t[15]=(o*u*i-c*a*i+c*n*s-e*u*s-o*n*p+e*a*p)*S,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,i,r,o){return this.set(1,n,r,0,t,1,o,0,e,i,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,p=r*l,h=r*c,d=r*u,_=o*c,f=o*u,m=a*u,y=s*l,g=s*c,v=s*u,b=n.x,x=n.y,S=n.z;return i[0]=(1-(_+m))*b,i[1]=(h+v)*b,i[2]=(d-g)*b,i[3]=0,i[4]=(h-v)*x,i[5]=(1-(p+m))*x,i[6]=(f+y)*x,i[7]=0,i[8]=(d+g)*S,i[9]=(f-y)*S,i[10]=(1-(p+_))*S,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=Lt.set(i[0],i[1],i[2]).length();const o=Lt.set(i[4],i[5],i[6]).length(),a=Lt.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Pt.copy(this);const s=1/r,l=1/o,c=1/a;return Pt.elements[0]*=s,Pt.elements[1]*=s,Pt.elements[2]*=s,Pt.elements[4]*=l,Pt.elements[5]*=l,Pt.elements[6]*=l,Pt.elements[8]*=c,Pt.elements[9]*=c,Pt.elements[10]*=c,e.setFromRotationMatrix(Pt),n.x=r,n.y=o,n.z=a,this}makePerspective(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),p=-(o+r)/(o-r),h=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,r,o){const a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,p=(n+i)*l,h=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let t=0;t<16;t++)if(e[t]!==n[t])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}Rt.prototype.isMatrix4=!0;const Lt=new Q,Pt=new Rt,Dt=new Q(0,0,0),It=new Q(1,1,1),kt=new Q,Ot=new Q,Bt=new Q,jt=new Rt,Ft=new K;class Nt{constructor(t=0,e=0,n=0,i=Nt.DefaultOrder){this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i=this._order){return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,n=!0){const i=t.elements,r=i[0],o=i[4],a=i[8],s=i[1],l=i[5],c=i[9],u=i[2],p=i[6],h=i[10];switch(e){case"XYZ":this._y=Math.asin(L(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(p,l),this._z=0);break;case"YXZ":this._x=Math.asin(-L(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(L(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-L(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,h),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(L(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-L(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return jt.makeRotationFromQuaternion(t),this.setFromRotationMatrix(jt,e,n)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Ft.setFromEuler(this),this.setFromQuaternion(Ft,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Q(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Nt.prototype.isEuler=!0,Nt.DefaultOrder="XYZ",Nt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class zt{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Ht=0;const Ut=new Q,Wt=new K,Gt=new Rt,Vt=new Q,qt=new Q,Xt=new Q,Yt=new K,Zt=new Q(1,0,0),Jt=new Q(0,1,0),Kt=new Q(0,0,1),Qt={type:"added"},$t={type:"removed"};class te extends M{constructor(){super(),Object.defineProperty(this,"id",{value:Ht++}),this.uuid=R(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=te.DefaultUp.clone();const t=new Q,e=new Nt,n=new K,i=new Q(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Rt},normalMatrix:{value:new F}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=te.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new zt,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return Wt.setFromAxisAngle(t,e),this.quaternion.multiply(Wt),this}rotateOnWorldAxis(t,e){return Wt.setFromAxisAngle(t,e),this.quaternion.premultiply(Wt),this}rotateX(t){return this.rotateOnAxis(Zt,t)}rotateY(t){return this.rotateOnAxis(Jt,t)}rotateZ(t){return this.rotateOnAxis(Kt,t)}translateOnAxis(t,e){return Ut.copy(t).applyQuaternion(this.quaternion),this.position.add(Ut.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Zt,t)}translateY(t){return this.translateOnAxis(Jt,t)}translateZ(t){return this.translateOnAxis(Kt,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Gt.copy(this.matrixWorld).invert())}lookAt(t,e,n){t.isVector3?Vt.copy(t):Vt.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),qt.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gt.lookAt(qt,Vt,this.up):Gt.lookAt(Vt,qt,this.up),this.quaternion.setFromRotationMatrix(Gt),i&&(Gt.extractRotation(i.matrixWorld),Wt.setFromRotationMatrix(Gt),this.quaternion.premultiply(Wt.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Qt)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent($t)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent($t)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Gt.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Gt.multiply(t.parent.matrixWorld)),t.applyMatrix4(Gt),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qt,t,Xt),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qt,Yt,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}updateWorldMatrix(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=o(t.geometries),i=o(t.materials),r=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),c=o(t.animations);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=i,n;function o(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const n=t.children[e];this.add(n.clone())}return this}}te.DefaultUp=new Q(0,1,0),te.DefaultMatrixAutoUpdate=!0,te.prototype.isObject3D=!0;const ee=new Q,ne=new Q,ie=new Q,re=new Q,oe=new Q,ae=new Q,se=new Q,le=new Q,ce=new Q,ue=new Q;class pe{constructor(t=new Q,e=new Q,n=new Q){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,i){i.subVectors(n,e),ee.subVectors(t,e),i.cross(ee);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){ee.subVectors(i,e),ne.subVectors(n,e),ie.subVectors(t,e);const o=ee.dot(ee),a=ee.dot(ne),s=ee.dot(ie),l=ne.dot(ne),c=ne.dot(ie),u=o*l-a*a;if(0===u)return r.set(-2,-1,-1);const p=1/u,h=(l*s-a*c)*p,d=(o*c-a*s)*p;return r.set(1-h-d,d,h)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,re),re.x>=0&&re.y>=0&&re.x+re.y<=1}static getUV(t,e,n,i,r,o,a,s){return this.getBarycoord(t,e,n,i,re),s.set(0,0),s.addScaledVector(r,re.x),s.addScaledVector(o,re.y),s.addScaledVector(a,re.z),s}static isFrontFacing(t,e,n,i){return ee.subVectors(n,e),ne.subVectors(t,e),ee.cross(ne).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return ee.subVectors(this.c,this.b),ne.subVectors(this.a,this.b),.5*ee.cross(ne).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return pe.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return pe.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return pe.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return pe.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return pe.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,i=this.b,r=this.c;let o,a;oe.subVectors(i,n),ae.subVectors(r,n),le.subVectors(t,n);const s=oe.dot(le),l=ae.dot(le);if(s<=0&&l<=0)return e.copy(n);ce.subVectors(t,i);const c=oe.dot(ce),u=ae.dot(ce);if(c>=0&&u<=c)return e.copy(i);const p=s*u-c*l;if(p<=0&&s>=0&&c<=0)return o=s/(s-c),e.copy(n).addScaledVector(oe,o);ue.subVectors(t,r);const h=oe.dot(ue),d=ae.dot(ue);if(d>=0&&h<=d)return e.copy(r);const _=h*l-s*d;if(_<=0&&l>=0&&d<=0)return a=l/(l-d),e.copy(n).addScaledVector(ae,a);const f=c*d-h*u;if(f<=0&&u-c>=0&&h-d>=0)return se.subVectors(r,i),a=(u-c)/(u-c+(h-d)),e.copy(i).addScaledVector(se,a);const m=1/(f+_+p);return o=_*m,a=p*m,e.copy(n).addScaledVector(oe,o).addScaledVector(ae,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let he=0;class de extends M{constructor(){super(),Object.defineProperty(this,"id",{value:he++}),this.uuid=R(),this.name="",this.type="Material",this.fog=!0,this.blending=1,this.side=o,this.vertexColors=!1,this.opacity=1,this.format=1023,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==o&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),1023!==this.format&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}de.prototype.isMaterial=!0;const _e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fe={h:0,s:0,l:0},me={h:0,s:0,l:0};function ye(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function ge(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ve(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class be{constructor(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=P(t,1),e=L(e,0,1),n=L(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=ye(r,i,t+1/3),this.g=ye(r,i,t),this.b=ye(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=_e[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ge(t.r),this.g=ge(t.g),this.b=ge(t.b),this}copyLinearToSRGB(t){return this.r=ve(t.r),this.g=ve(t.g),this.b=ve(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),o=Math.min(e,n,i);let a,s;const l=(o+r)/2;if(o===r)a=0,s=0;else{const t=r-o;switch(s=l<=.5?t/(r+o):t/(2-r-o),r){case e:a=(n-i)/t+(n<i?6:0);break;case n:a=(i-e)/t+2;break;case i:a=(e-n)/t+4}a/=6}return t.h=a,t.s=s,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(fe),fe.h+=t,fe.s+=e,fe.l+=n,this.setHSL(fe.h,fe.s,fe.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(fe),t.getHSL(me);const n=D(fe.h,me.h,e),i=D(fe.s,me.s,e),r=D(fe.l,me.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}be.NAMES=_e,be.prototype.isColor=!0,be.prototype.r=1,be.prototype.g=1,be.prototype.b=1;class xe extends de{constructor(t){super(),this.type="MeshBasicMaterial",this.color=new be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}xe.prototype.isMeshBasicMaterial=!0;const Se=new Q,we=new j;class Me{constructor(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new be),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this}copyVector2sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new j),e[n++]=r.x,e[n++]=r.y}return this}copyVector3sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Q),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this}copyVector4sArray(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new Y),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)we.fromBufferAttribute(this,e),we.applyMatrix3(t),this.setXY(e,we.x,we.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Se.fromBufferAttribute(this,e),Se.applyMatrix3(t),this.setXYZ(e,Se.x,Se.y,Se.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Se.x=this.getX(e),Se.y=this.getY(e),Se.z=this.getZ(e),Se.applyMatrix4(t),this.setXYZ(e,Se.x,Se.y,Se.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Se.x=this.getX(e),Se.y=this.getY(e),Se.z=this.getZ(e),Se.applyNormalMatrix(t),this.setXYZ(e,Se.x,Se.y,Se.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Se.x=this.getX(e),Se.y=this.getY(e),Se.z=this.getZ(e),Se.transformDirection(t),this.setXYZ(e,Se.x,Se.y,Se.z);return this}set(t,e=0){return this.array.set(t,e),this}getX(t){return this.array[t*this.itemSize]}setX(t,e){return this.array[t*this.itemSize]=e,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,e){return this.array[t*this.itemSize+1]=e,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,e){return this.array[t*this.itemSize+2]=e,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,e){return this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}Me.prototype.isBufferAttribute=!0;class Te extends Me{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class Ce extends Me{constructor(t,e,n){super(new Uint32Array(t),e,n)}}(class extends Me{constructor(t,e,n){super(new Uint16Array(t),e,n)}}).prototype.isFloat16BufferAttribute=!0;class Ee extends Me{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Ae=0;const Re=new Rt,Le=new te,Pe=new Q,De=new et,Ie=new et,ke=new Q;class Oe extends M{constructor(){super(),Object.defineProperty(this,"id",{value:Ae++}),this.uuid=R(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(N(t)>65535?Ce:Te)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new F).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Re.makeRotationFromQuaternion(t),this.applyMatrix4(Re),this}rotateX(t){return Re.makeRotationX(t),this.applyMatrix4(Re),this}rotateY(t){return Re.makeRotationY(t),this.applyMatrix4(Re),this}rotateZ(t){return Re.makeRotationZ(t),this.applyMatrix4(Re),this}translate(t,e,n){return Re.makeTranslation(t,e,n),this.applyMatrix4(Re),this}scale(t,e,n){return Re.makeScale(t,e,n),this.applyMatrix4(Re),this}lookAt(t){return Le.lookAt(t),Le.updateMatrix(),this.applyMatrix4(Le.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Pe).negate(),this.translate(Pe.x,Pe.y,Pe.z),this}setFromPoints(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Ee(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new et);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];De.setFromBufferAttribute(n),this.morphTargetsRelative?(ke.addVectors(this.boundingBox.min,De.min),this.boundingBox.expandByPoint(ke),ke.addVectors(this.boundingBox.max,De.max),this.boundingBox.expandByPoint(ke)):(this.boundingBox.expandByPoint(De.min),this.boundingBox.expandByPoint(De.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new bt);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Q,1/0);if(t){const n=this.boundingSphere.center;if(De.setFromBufferAttribute(t),e)for(let t=0,n=e.length;t<n;t++){const n=e[t];Ie.setFromBufferAttribute(n),this.morphTargetsRelative?(ke.addVectors(De.min,Ie.min),De.expandByPoint(ke),ke.addVectors(De.max,Ie.max),De.expandByPoint(ke)):(De.expandByPoint(Ie.min),De.expandByPoint(Ie.max))}De.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)ke.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(ke));if(e)for(let r=0,o=e.length;r<o;r++){const o=e[r],a=this.morphTargetsRelative;for(let e=0,r=o.count;e<r;e++)ke.fromBufferAttribute(o,e),a&&(Pe.fromBufferAttribute(t,e),ke.add(Pe)),i=Math.max(i,n.distanceToSquared(ke))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,o=e.uv.array,a=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new Me(new Float32Array(4*a),4));const s=e.tangent.array,l=[],c=[];for(let t=0;t<a;t++)l[t]=new Q,c[t]=new Q;const u=new Q,p=new Q,h=new Q,d=new j,_=new j,f=new j,m=new Q,y=new Q;function g(t,e,n){u.fromArray(i,3*t),p.fromArray(i,3*e),h.fromArray(i,3*n),d.fromArray(o,2*t),_.fromArray(o,2*e),f.fromArray(o,2*n),p.sub(u),h.sub(u),_.sub(d),f.sub(d);const r=1/(_.x*f.y-f.x*_.y);isFinite(r)&&(m.copy(p).multiplyScalar(f.y).addScaledVector(h,-_.y).multiplyScalar(r),y.copy(h).multiplyScalar(_.x).addScaledVector(p,-f.x).multiplyScalar(r),l[t].add(m),l[e].add(m),l[n].add(m),c[t].add(y),c[e].add(y),c[n].add(y))}let v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(let t=0,e=v.length;t<e;++t){const e=v[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)g(n[t+0],n[t+1],n[t+2])}const b=new Q,x=new Q,S=new Q,w=new Q;function M(t){S.fromArray(r,3*t),w.copy(S);const e=l[t];b.copy(e),b.sub(S.multiplyScalar(S.dot(e))).normalize(),x.crossVectors(w,e);const n=x.dot(c[t])<0?-1:1;s[4*t]=b.x,s[4*t+1]=b.y,s[4*t+2]=b.z,s[4*t+3]=n}for(let t=0,e=v.length;t<e;++t){const e=v[t],i=e.start;for(let t=i,r=i+e.count;t<r;t+=3)M(n[t+0]),M(n[t+1]),M(n[t+2])}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Me(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Q,r=new Q,o=new Q,a=new Q,s=new Q,l=new Q,c=new Q,u=new Q;if(t)for(let p=0,h=t.count;p<h;p+=3){const h=t.getX(p+0),d=t.getX(p+1),_=t.getX(p+2);i.fromBufferAttribute(e,h),r.fromBufferAttribute(e,d),o.fromBufferAttribute(e,_),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,h),s.fromBufferAttribute(n,d),l.fromBufferAttribute(n,_),a.add(c),s.add(c),l.add(c),n.setXYZ(h,a.x,a.y,a.z),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(_,l.x,l.y,l.z)}else for(let t=0,a=e.count;t<a;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i].array,o=t.attributes[i],a=o.array,s=o.itemSize*e,l=Math.min(a.length,r.length-s);for(let t=0,e=s;t<l;t++,e++)r[e]=a[t]}return this}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)ke.fromBufferAttribute(t,e),ke.normalize(),t.setXYZ(e,ke.x,ke.y,ke.z)}toNonIndexed(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,o=new n.constructor(e.length*i);let a=0,s=0;for(let r=0,l=e.length;r<l;r++){a=t.isInterleavedBufferAttribute?e[r]*t.data.stride+t.offset:e[r]*i;for(let t=0;t<i;t++)o[s++]=n[a++]}return new Me(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Oe,n=this.index.array,i=this.attributes;for(const r in i){const o=t(i[r],n);e.setAttribute(r,o)}const r=this.morphAttributes;for(const i in r){const o=[],a=r[i];for(let e=0,i=a.length;e<i;e++){const i=t(a[e],n);o.push(i)}e.morphAttributes[i]=o}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,n=o.length;t<n;t++){const n=o[t];e.addGroup(n.start,n.count,n.materialIndex)}return e}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const e in n){const i=n[e];t.data.attributes[e]=i.toJSON(t.data)}const i={};let r=!1;for(const e in this.morphAttributes){const n=this.morphAttributes[e],o=[];for(let e=0,i=n.length;e<i;e++){const i=n[e];o.push(i.toJSON(t.data))}o.length>0&&(i[e]=o,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const t in i){const n=i[t];this.setAttribute(t,n.clone(e))}const r=t.morphAttributes;for(const t in r){const n=[],i=r[t];for(let t=0,r=i.length;t<r;t++)n.push(i[t].clone(e));this.morphAttributes[t]=n}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let t=0,e=o.length;t<e;t++){const e=o[t];this.addGroup(e.start,e.count,e.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}Oe.prototype.isBufferGeometry=!0;const Be=new Rt,je=new At,Fe=new bt,Ne=new Q,ze=new Q,He=new Q,Ue=new Q,We=new Q,Ge=new Q,Ve=new Q,qe=new Q,Xe=new Q,Ye=new j,Ze=new j,Je=new j,Ke=new Q,Qe=new Q;class $e extends te{constructor(t=new Oe,e=new xe){super(),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Fe.copy(n.boundingSphere),Fe.applyMatrix4(r),!1===t.ray.intersectsSphere(Fe))return;if(Be.copy(r).invert(),je.copy(t.ray).applyMatrix4(Be),null!==n.boundingBox&&!1===je.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,p=n.groups,h=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,d=p.length;n<d;n++){const d=p[n],_=i[d.materialIndex];for(let n=Math.max(d.start,h.start),i=Math.min(r.count,Math.min(d.start+d.count,h.start+h.count));n<i;n+=3){const i=r.getX(n),p=r.getX(n+1),h=r.getX(n+2);o=tn(this,_,t,je,a,s,l,c,u,i,p,h),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=d.materialIndex,e.push(o))}}else{for(let n=Math.max(0,h.start),p=Math.min(r.count,h.start+h.count);n<p;n+=3){const p=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);o=tn(this,i,t,je,a,s,l,c,u,p,h,d),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(i))for(let n=0,r=p.length;n<r;n++){const r=p[n],d=i[r.materialIndex];for(let n=Math.max(r.start,h.start),i=Math.min(a.count,Math.min(r.start+r.count,h.start+h.count));n<i;n+=3){o=tn(this,d,t,je,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,e.push(o))}}else{for(let n=Math.max(0,h.start),r=Math.min(a.count,h.start+h.count);n<r;n+=3){o=tn(this,i,t,je,a,s,l,c,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),e.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function tn(t,e,n,i,r,o,s,l,c,u,p,h){Ne.fromBufferAttribute(r,u),ze.fromBufferAttribute(r,p),He.fromBufferAttribute(r,h);const d=t.morphTargetInfluences;if(o&&d){Ve.set(0,0,0),qe.set(0,0,0),Xe.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(Ue.fromBufferAttribute(n,u),We.fromBufferAttribute(n,p),Ge.fromBufferAttribute(n,h),s?(Ve.addScaledVector(Ue,e),qe.addScaledVector(We,e),Xe.addScaledVector(Ge,e)):(Ve.addScaledVector(Ue.sub(Ne),e),qe.addScaledVector(We.sub(ze),e),Xe.addScaledVector(Ge.sub(He),e)))}Ne.add(Ve),ze.add(qe),He.add(Xe)}t.isSkinnedMesh&&(t.boneTransform(u,Ne),t.boneTransform(p,ze),t.boneTransform(h,He));const _=function(t,e,n,i,r,o,s,l){let c;if(c=1===e.side?i.intersectTriangle(s,o,r,!0,l):i.intersectTriangle(r,o,s,e.side!==a,l),null===c)return null;Qe.copy(l),Qe.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(Qe);return u<n.near||u>n.far?null:{distance:u,point:Qe.clone(),object:t}}(t,e,n,i,Ne,ze,He,Ke);if(_){l&&(Ye.fromBufferAttribute(l,u),Ze.fromBufferAttribute(l,p),Je.fromBufferAttribute(l,h),_.uv=pe.getUV(Ke,Ne,ze,He,Ye,Ze,Je,new j)),c&&(Ye.fromBufferAttribute(c,u),Ze.fromBufferAttribute(c,p),Je.fromBufferAttribute(c,h),_.uv2=pe.getUV(Ke,Ne,ze,He,Ye,Ze,Je,new j));const t={a:u,b:p,c:h,normal:new Q,materialIndex:0};pe.getNormal(Ne,ze,He,t.normal),_.face=t}return _}$e.prototype.isMesh=!0;class en extends Oe{constructor(t=1,e=1,n=1,i=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],l=[],c=[],u=[];let p=0,h=0;function d(t,e,n,i,r,o,d,_,f,m,y){const g=o/f,v=d/m,b=o/2,x=d/2,S=_/2,w=f+1,M=m+1;let T=0,C=0;const E=new Q;for(let o=0;o<M;o++){const a=o*v-x;for(let s=0;s<w;s++){const p=s*g-b;E[t]=p*i,E[e]=a*r,E[n]=S,l.push(E.x,E.y,E.z),E[t]=0,E[e]=0,E[n]=_>0?1:-1,c.push(E.x,E.y,E.z),u.push(s/f),u.push(1-o/m),T+=1}}for(let t=0;t<m;t++)for(let e=0;e<f;e++){const n=p+e+w*t,i=p+e+w*(t+1),r=p+(e+1)+w*(t+1),o=p+(e+1)+w*t;s.push(n,i,o),s.push(i,r,o),C+=6}a.addGroup(h,C,y),h+=C,p+=T}d("z","y","x",-1,-1,n,e,t,o,r,0),d("z","y","x",1,-1,n,e,-t,o,r,1),d("x","z","y",1,1,t,n,e,i,o,2),d("x","z","y",1,-1,t,n,-e,i,o,3),d("x","y","z",1,-1,t,e,n,i,r,4),d("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Ee(l,3)),this.setAttribute("normal",new Ee(c,3)),this.setAttribute("uv",new Ee(u,2))}static fromJSON(t){return new en(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function nn(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function rn(t){const e={};for(let n=0;n<t.length;n++){const i=nn(t[n]);for(const t in i)e[t]=i[t]}return e}const on={clone:nn,merge:rn};class an extends de{constructor(t){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=nn(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const n in this.uniforms){const i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const t in this.extensions)!0===this.extensions[t]&&(n[t]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}an.prototype.isShaderMaterial=!0;class sn extends te{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}sn.prototype.isCamera=!0;class ln extends sn{constructor(t=50,e=1,n=.1,i=2e3){super(),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*A*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*E*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*A*Math.atan(Math.tan(.5*E*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*E*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/t,e-=o.offsetY*n/a,i*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}ln.prototype.isPerspectiveCamera=!0;class cn extends te{constructor(t,e,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new ln(90,1,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Q(1,0,0)),this.add(i);const r=new ln(90,1,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Q(-1,0,0)),this.add(r);const o=new ln(90,1,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Q(0,1,0)),this.add(o);const a=new ln(90,1,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Q(0,-1,0)),this.add(a);const s=new ln(90,1,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Q(0,0,1)),this.add(s);const l=new ln(90,1,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Q(0,0,-1)),this.add(l)}update(t,e){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,o,a,s,l]=this.children,c=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=p,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.xr.enabled=c}}class un extends q{constructor(t,e,n,i,r,o,a,s,l,c){super(t=void 0!==t?t:[],e=void 0!==e?e:301,n,i,r,o,a,s,l,c),this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}un.prototype.isCubeTexture=!0;class pn extends Z{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),e=e||{},this.texture=new un(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:_,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=1023,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new en(5,5,5),r=new an({name:"CubemapFromEquirect",uniforms:nn(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=e;const o=new $e(i,r),a=e.minFilter;e.minFilter===m&&(e.minFilter=_);return new cn(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let r=0;r<6;r++)t.setRenderTarget(this,r),t.clear(e,n,i);t.setRenderTarget(r)}}pn.prototype.isWebGLCubeRenderTarget=!0;const hn=new Q,dn=new Q,_n=new F;class fn{constructor(t=new Q(1,0,0),e=0){this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=hn.subVectors(n,e).cross(dn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){const n=t.delta(hn),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||_n.getNormalMatrix(t),i=this.coplanarPoint(hn).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}fn.prototype.isPlane=!0;const mn=new bt,yn=new Q;class gn{constructor(t=new fn,e=new fn,n=new fn,i=new fn,r=new fn,o=new fn){this.planes=[t,e,n,i,r,o]}set(t,e,n,i,r,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],p=n[8],h=n[9],d=n[10],_=n[11],f=n[12],m=n[13],y=n[14],g=n[15];return e[0].setComponents(a-i,u-s,_-p,g-f).normalize(),e[1].setComponents(a+i,u+s,_+p,g+f).normalize(),e[2].setComponents(a+r,u+l,_+h,g+m).normalize(),e[3].setComponents(a-r,u-l,_-h,g-m).normalize(),e[4].setComponents(a-o,u-c,_-d,g-y).normalize(),e[5].setComponents(a+o,u+c,_+d,g+y).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),mn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(mn)}intersectsSprite(t){return mn.center.set(0,0,0),mn.radius=.7071067811865476,mn.applyMatrix4(t.matrixWorld),this.intersectsSphere(mn)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let t=0;t<6;t++){if(e[t].distanceToPoint(n)<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(yn.x=i.normal.x>0?t.max.x:t.min.x,yn.y=i.normal.y>0?t.max.y:t.min.y,yn.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(yn)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function vn(){let t=null,e=!1,n=null,i=null;function r(e,o){n(e,o),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function bn(t,e){const n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){const t=i.get(e);return void((!t||t.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version}))}e.isInterleavedBufferAttribute&&(e=e.data);const o=i.get(e);void 0===o?i.set(e,function(e,i){const r=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(i,a),t.bufferData(i,r,o),e.onUploadCallback();let s=5126;return r instanceof Float32Array?s=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:r instanceof Int16Array?s=5122:r instanceof Uint32Array?s=5125:r instanceof Int32Array?s=5124:r instanceof Int8Array?s=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):o.version<e.version&&(!function(e,i,r){const o=i.array,a=i.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,e,r),o.version=e.version)}}}class xn extends Oe{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,o=e/2,a=Math.floor(n),s=Math.floor(i),l=a+1,c=s+1,u=t/a,p=e/s,h=[],d=[],_=[],f=[];for(let t=0;t<c;t++){const e=t*p-o;for(let n=0;n<l;n++){const i=n*u-r;d.push(i,-e,0),_.push(0,0,1),f.push(n/a),f.push(1-t/s)}}for(let t=0;t<s;t++)for(let e=0;e<a;e++){const n=e+l*t,i=e+l*(t+1),r=e+1+l*(t+1),o=e+1+l*t;h.push(n,i,o),h.push(i,r,o)}this.setIndex(h),this.setAttribute("position",new Ee(d,3)),this.setAttribute("normal",new Ee(_,3)),this.setAttribute("uv",new Ee(f,2))}static fromJSON(t){return new xn(t.width,t.height,t.widthSegments,t.heightSegments)}}const Sn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},wn={common:{diffuse:{value:new be(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new F},uv2Transform:{value:new F},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new j(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new be(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new be(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new F}},sprite:{diffuse:{value:new be(16777215)},opacity:{value:1},center:{value:new j(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new F}}},Mn={basic:{uniforms:rn([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.fog]),vertexShader:Sn.meshbasic_vert,fragmentShader:Sn.meshbasic_frag},lambert:{uniforms:rn([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.fog,wn.lights,{emissive:{value:new be(0)}}]),vertexShader:Sn.meshlambert_vert,fragmentShader:Sn.meshlambert_frag},phong:{uniforms:rn([wn.common,wn.specularmap,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,wn.lights,{emissive:{value:new be(0)},specular:{value:new be(1118481)},shininess:{value:30}}]),vertexShader:Sn.meshphong_vert,fragmentShader:Sn.meshphong_frag},standard:{uniforms:rn([wn.common,wn.envmap,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.roughnessmap,wn.metalnessmap,wn.fog,wn.lights,{emissive:{value:new be(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag},toon:{uniforms:rn([wn.common,wn.aomap,wn.lightmap,wn.emissivemap,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.gradientmap,wn.fog,wn.lights,{emissive:{value:new be(0)}}]),vertexShader:Sn.meshtoon_vert,fragmentShader:Sn.meshtoon_frag},matcap:{uniforms:rn([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,wn.fog,{matcap:{value:null}}]),vertexShader:Sn.meshmatcap_vert,fragmentShader:Sn.meshmatcap_frag},points:{uniforms:rn([wn.points,wn.fog]),vertexShader:Sn.points_vert,fragmentShader:Sn.points_frag},dashed:{uniforms:rn([wn.common,wn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Sn.linedashed_vert,fragmentShader:Sn.linedashed_frag},depth:{uniforms:rn([wn.common,wn.displacementmap]),vertexShader:Sn.depth_vert,fragmentShader:Sn.depth_frag},normal:{uniforms:rn([wn.common,wn.bumpmap,wn.normalmap,wn.displacementmap,{opacity:{value:1}}]),vertexShader:Sn.meshnormal_vert,fragmentShader:Sn.meshnormal_frag},sprite:{uniforms:rn([wn.sprite,wn.fog]),vertexShader:Sn.sprite_vert,fragmentShader:Sn.sprite_frag},background:{uniforms:{uvTransform:{value:new F},t2D:{value:null}},vertexShader:Sn.background_vert,fragmentShader:Sn.background_frag},cube:{uniforms:rn([wn.envmap,{opacity:{value:1}}]),vertexShader:Sn.cube_vert,fragmentShader:Sn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Sn.equirect_vert,fragmentShader:Sn.equirect_frag},distanceRGBA:{uniforms:rn([wn.common,wn.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Sn.distanceRGBA_vert,fragmentShader:Sn.distanceRGBA_frag},shadow:{uniforms:rn([wn.lights,wn.fog,{color:{value:new be(0)},opacity:{value:1}}]),vertexShader:Sn.shadow_vert,fragmentShader:Sn.shadow_frag}};function Tn(t,e,n,i,r){const a=new be(0);let s,l,c=0,u=null,p=0,h=null;function d(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return a},setClearColor:function(t,e=1){a.set(t),c=e,d(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,d(a,c)},render:function(n,r){let _=!1,f=!0===r.isScene?r.background:null;f&&f.isTexture&&(f=e.get(f));const m=t.xr,y=m.getSession&&m.getSession();y&&"additive"===y.environmentBlendMode&&(f=null),null===f?d(a,c):f&&f.isColor&&(d(f,1),_=!0),(t.autoClear||_)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),f&&(f.isCubeTexture||306===f.mapping)?(void 0===l&&(l=new $e(new en(1,1,1),new an({name:"BackgroundCubeMaterial",uniforms:nn(Mn.cube.uniforms),vertexShader:Mn.cube.vertexShader,fragmentShader:Mn.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),l.material.uniforms.envMap.value=f,l.material.uniforms.flipEnvMap.value=f.isCubeTexture&&!1===f.isRenderTargetTexture?-1:1,u===f&&p===f.version&&h===t.toneMapping||(l.material.needsUpdate=!0,u=f,p=f.version,h=t.toneMapping),n.unshift(l,l.geometry,l.material,0,0,null)):f&&f.isTexture&&(void 0===s&&(s=new $e(new xn(2,2),new an({name:"BackgroundMaterial",uniforms:nn(Mn.background.uniforms),vertexShader:Mn.background.vertexShader,fragmentShader:Mn.background.fragmentShader,side:o,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(s)),s.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),s.material.uniforms.uvTransform.value.copy(f.matrix),u===f&&p===f.version&&h===t.toneMapping||(s.material.needsUpdate=!0,u=f,p=f.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null))}}}function Cn(t,e,n,i){const r=t.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},l=h(null);let c=l;function u(e){return i.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function p(e){return i.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function h(t){const e=[],n=[],i=[];for(let t=0;t<r;t++)e[t]=0,n[t]=0,i[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function _(t){f(t,0)}function f(n,r){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==r){(i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function m(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,o,a,s):t.vertexAttribIPointer(e,n,r,a,s)}function g(){v(),c!==l&&(c=l,u(c.object))}function v(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,p,g,v){let b=!1;if(a){const e=function(e,n,r){const a=!0===r.wireframe;let l=s[e.id];void 0===l&&(l={},s[e.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=h(i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),c[a]=u);return u}(g,p,l);c!==e&&(c=e,u(c.object)),b=function(t,e){const n=c.attributes,i=t.attributes;let r=0;for(const t in i){const e=n[t],o=i[t];if(void 0===e)return!0;if(e.attribute!==o)return!0;if(e.data!==o.data)return!0;r++}return c.attributesNum!==r||c.index!==e}(g,v),b&&function(t,e){const n={},i=t.attributes;let r=0;for(const t in i){const e=i[t],o={};o.attribute=e,e.data&&(o.data=e.data),n[t]=o,r++}c.attributes=n,c.attributesNum=r,c.index=e}(g,v)}else{const t=!0===l.wireframe;c.geometry===g.id&&c.program===p.id&&c.wireframe===t||(c.geometry=g.id,c.program=p.id,c.wireframe=t,b=!0)}!0===r.isInstancedMesh&&(b=!0),null!==v&&n.update(v,34963),b&&(!function(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;d();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const e in c){const i=c[e];if(i.location>=0){let o=l[e];if(void 0===o&&("instanceMatrix"===e&&r.instanceMatrix&&(o=r.instanceMatrix),"instanceColor"===e&&r.instanceColor&&(o=r.instanceColor)),void 0!==o){const e=o.normalized,a=o.itemSize,l=n.get(o);if(void 0===l)continue;const c=l.buffer,u=l.type,p=l.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,l=n.stride,h=o.offset;if(n&&n.isInstancedInterleavedBuffer){for(let t=0;t<i.locationSize;t++)f(i.location+t,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let t=0;t<i.locationSize;t++)_(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)y(i.location+t,a/i.locationSize,u,e,l*p,(h+a/i.locationSize*t)*p)}else{if(o.isInstancedBufferAttribute){for(let t=0;t<i.locationSize;t++)f(i.location+t,o.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let t=0;t<i.locationSize;t++)_(i.location+t);t.bindBuffer(34962,c);for(let t=0;t<i.locationSize;t++)y(i.location+t,a/i.locationSize,u,e,a*p,a/i.locationSize*t*p)}}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i.location,n);break;case 3:t.vertexAttrib3fv(i.location,n);break;case 4:t.vertexAttrib4fv(i.location,n);break;default:t.vertexAttrib1fv(i.location,n)}}}}m()}(r,l,p,g),null!==v&&t.bindBuffer(34963,n.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){g();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)p(n[t].object),delete n[t];delete e[t]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0===s[t.id])return;const e=s[t.id];for(const t in e){const n=e[t];for(const t in n)p(n[t].object),delete n[t];delete e[t]}delete s[t.id]},releaseStatesOfProgram:function(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)p(i[t].object),delete i[t];delete n[t.id]}},initAttributes:d,enableAttribute:_,disableUnusedAttributes:m}}function En(t,e,n,i){const r=i.isWebGL2;let o;this.setMode=function(t){o=t},this.render=function(e,i){t.drawArrays(o,e,i),n.update(i,o,1)},this.renderInstances=function(i,a,s){if(0===s)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,a,s),n.update(a,o,s)}}function An(t,e,n){let i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=o||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),p=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),_=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),y=t.getParameter(36349),g=p>0,v=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:p,maxTextureSize:h,maxCubemapSize:d,maxAttributes:_,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:o?t.getParameter(36183):0}}function Rn(t){const e=this;let n=null,i=0,r=!1,o=!1;const a=new fn,s=new F,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,n,i,r){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const e=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let e=0,n=i;e!==o;++e,n+=4)a.copy(t[e]).applyMatrix4(r,s),a.normal.toArray(c,n),c[n+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==i||r;return r=e,n=u(t,o,0),i=t.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,a,s){const p=e.clippingPlanes,h=e.clipIntersection,d=e.clipShadows,_=t.get(e);if(!r||null===p||0===p.length||o&&!d)o?u(null):c();else{const t=o?0:i,e=4*t;let r=_.clippingState||null;l.value=r,r=u(p,a,e,s);for(let t=0;t!==e;++t)r[t]=n[t];_.clippingState=r,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=t}}}function Ln(t){let e=new WeakMap;function n(t,e){return 303===e?t.mapping=301:304===e&&(t.mapping=302),t}function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping;if(303===o||304===o){if(e.has(r)){return n(e.get(r).texture,r.mapping)}{const o=r.image;if(o&&o.height>0){const a=t.getRenderTarget(),s=new pn(o.height/2);return s.fromEquirectangularTexture(t,r),e.set(r,s),t.setRenderTarget(a),r.addEventListener("dispose",i),n(s.texture,r.mapping)}return null}}}return r},dispose:function(){e=new WeakMap}}}Mn.physical={uniforms:rn([Mn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new j(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new be(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new j},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new be(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new be(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Sn.meshphysical_vert,fragmentShader:Sn.meshphysical_frag};class Pn extends sn{constructor(t=-1,e=1,n=1,i=-1,r=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,o=r+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}Pn.prototype.isOrthographicCamera=!0;class Dn extends an{constructor(t){super(t),this.type="RawShaderMaterial"}}Dn.prototype.isRawShaderMaterial=!0;const In=Math.pow(2,8),kn=[.125,.215,.35,.446,.526,.582],On=5+kn.length,Bn={3e3:0,[S]:1},jn=new Pn,{_lodPlanes:Fn,_sizeLods:Nn,_sigmas:zn}=Xn(),Hn=new be;let Un=null;const Wn=(1+Math.sqrt(5))/2,Gn=1/Wn,Vn=[new Q(1,1,1),new Q(-1,1,1),new Q(1,1,-1),new Q(-1,1,-1),new Q(0,Wn,Gn),new Q(0,Wn,-Gn),new Q(Gn,0,Wn),new Q(-Gn,0,Wn),new Q(Wn,Gn,0),new Q(-Wn,Gn,0)];class qn{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){const e=new Float32Array(t),n=new Q(0,1,0);return new Dn({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:Qn(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${$n()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}(20),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){Un=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=Kn(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Jn(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<Fn.length;t++)Fn[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Un),t.scissorTest=!1,Zn(t,0,0,t.width,t.height)}_fromTexture(t){Un=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:_,minFilter:_,generateMipmaps:!1,type:1016,format:1023,encoding:3e3,depthBuffer:!1},n=Yn(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Yn(e),n}_compileMaterial(t){const e=new $e(Fn[0],t);this._renderer.compile(e,jn)}_sceneToCubeUV(t,e,n,i){const r=new ln(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(Hn),s.toneMapping=0,s.autoClear=!1;const u=new xe({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new $e(new en,u);let h=!1;const d=t.background;d?d.isColor&&(u.color.copy(d),t.background=null,h=!0):(u.color.copy(Hn),h=!0);for(let e=0;e<6;e++){const n=e%3;0==n?(r.up.set(0,o[e],0),r.lookAt(a[e],0,0)):1==n?(r.up.set(0,0,o[e]),r.lookAt(0,a[e],0)):(r.up.set(0,o[e],0),r.lookAt(0,0,a[e])),Zn(i,n*In,e>2?In:0,In,In),s.setRenderTarget(i),h&&s.render(p,r),s.render(t,r)}p.geometry.dispose(),p.material.dispose(),s.toneMapping=c,s.autoClear=l,t.background=d}_setEncoding(t,e){!0===this._renderer.capabilities.isWebGL2&&1023===e.format&&1009===e.type&&e.encoding===S?t.value=Bn[3e3]:t.value=Bn[e.encoding]}_textureToCubeUV(t,e){const n=this._renderer,i=301===t.mapping||302===t.mapping;i?null==this._cubemapShader&&(this._cubemapShader=Kn()):null==this._equirectShader&&(this._equirectShader=Jn());const r=i?this._cubemapShader:this._equirectShader,o=new $e(Fn[0],r),a=r.uniforms;a.envMap.value=t,i||a.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(a.inputEncoding,t),Zn(e,0,0,3*In,2*In),n.setRenderTarget(e),n.render(o,jn)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let e=1;e<On;e++){const n=Math.sqrt(zn[e]*zn[e]-zn[e-1]*zn[e-1]),i=Vn[(e-1)%Vn.length];this._blur(t,e-1,e,n,i)}e.autoClear=n}_blur(t,e,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,i,"latitudinal",r),this._halfBlur(o,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new $e(Fn[i],l),u=l.uniforms,p=Nn[n]-1,h=isFinite(r)?Math.PI/(2*p):2*Math.PI/39,d=r/h,_=isFinite(r)?1+Math.floor(3*d):20;_>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${_} samples when the maximum is set to 20`);const f=[];let m=0;for(let t=0;t<20;++t){const e=t/d,n=Math.exp(-e*e/2);f.push(n),0==t?m+=n:t<_&&(m+=2*n)}for(let t=0;t<f.length;t++)f[t]=f[t]/m;u.envMap.value=t.texture,u.samples.value=_,u.weights.value=f,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=h,u.mipInt.value=8-n;const y=Nn[i];Zn(e,3*Math.max(0,In-2*y),(0===i?0:2*In)+2*y*(i>4?i-8+4:0),3*y,2*y),s.setRenderTarget(e),s.render(c,jn)}}function Xn(){const t=[],e=[],n=[];let i=8;for(let r=0;r<On;r++){const o=Math.pow(2,i);e.push(o);let a=1/o;r>4?a=kn[r-8+4-1]:0==r&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],p=6,h=6,d=3,_=2,f=1,m=new Float32Array(d*h*p),y=new Float32Array(_*h*p),g=new Float32Array(f*h*p);for(let t=0;t<p;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];m.set(i,d*h*t),y.set(u,_*h*t);const r=[t,t,t,t,t,t];g.set(r,f*h*t)}const v=new Oe;v.setAttribute("position",new Me(m,d)),v.setAttribute("uv",new Me(y,_)),v.setAttribute("faceIndex",new Me(g,f)),t.push(v),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Yn(t){const e=new Z(3*In,3*In,t);return e.texture.mapping=306,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Zn(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Jn(){const t=new j(1,1);return new Dn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:Bn[3e3]}},vertexShader:Qn(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${$n()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Kn(){return new Dn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Bn[3e3]}},vertexShader:Qn(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${$n()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );\n\n\t\t\t}\n\t\t`,blending:0,depthTest:!1,depthWrite:!1})}function Qn(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function $n(){return"\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function ti(t){let e=new WeakMap,n=null;function i(t){const n=t.target;n.removeEventListener("dispose",i);const r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const o=r.mapping,a=303===o||304===o,s=301===o||302===o;if(a||s){if(e.has(r))return e.get(r).texture;{const o=r.image;if(a&&o&&o.height>0||s&&o&&function(t){let e=0;for(let n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(o)){const o=t.getRenderTarget();null===n&&(n=new qn(t));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,s),t.setRenderTarget(o),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function ei(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ni(t,e,n,i){const r={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const t in s.attributes)e.remove(s.attributes[t]);s.removeEventListener("dispose",a),delete r[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],o=t[e+2];n.push(i,r,r,o,o,i)}}else{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const s=new(N(n)>65535?Ce:Te)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++),e},update:function(t){const n=t.attributes;for(const t in n)e.update(n[t],34962);const i=t.morphAttributes;for(const t in i){const n=i[t];for(let t=0,i=n.length;t<i;t++)e.update(n[t],34962)}},getWireframeAttribute:function(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function ii(t,e,n,i){const r=i.isWebGL2;let o,a,s;this.setMode=function(t){o=t},this.setIndex=function(t){a=t.type,s=t.bytesPerElement},this.render=function(e,i){t.drawElements(o,i,a,e*s),n.update(i,o,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,p;if(r)u=t,p="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),p="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[p](o,l,a,i*s,c),n.update(l,o,c)}}function ri(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}class oi extends q{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=p,this.minFilter=p,this.wrapR=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function ai(t,e){return t[0]-e[0]}function si(t,e){return Math.abs(e[1])-Math.abs(t[1])}function li(t,e){let n=1;const i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function ci(t,e,n){const i={},r=new Float32Array(8),o=new WeakMap,a=new Q,s=[];for(let t=0;t<8;t++)s[t]=[t,0];return{update:function(l,c,u,p){const h=l.morphTargetInfluences;if(!0===e.isWebGL2){const i=c.morphAttributes.position.length;let r=o.get(c);if(void 0===r||r.count!==i){void 0!==r&&r.texture.dispose();const t=void 0!==c.morphAttributes.normal,n=c.morphAttributes.position,s=c.morphAttributes.normal||[],l=!0===t?2:1;let u=c.attributes.position.count*l,p=1;u>e.maxTextureSize&&(p=Math.ceil(u/e.maxTextureSize),u=e.maxTextureSize);const h=new Float32Array(u*p*4*i),d=new oi(h,u,p,i);d.format=1023,d.type=1015,d.needsUpdate=!0;const _=4*l;for(let e=0;e<i;e++){const i=n[e],r=s[e],o=u*p*4*e;for(let e=0;e<i.count;e++){a.fromBufferAttribute(i,e),!0===i.normalized&&li(a,i);const n=e*_;h[o+n+0]=a.x,h[o+n+1]=a.y,h[o+n+2]=a.z,h[o+n+3]=0,!0===t&&(a.fromBufferAttribute(r,e),!0===r.normalized&&li(a,r),h[o+n+4]=a.x,h[o+n+5]=a.y,h[o+n+6]=a.z,h[o+n+7]=0)}}r={count:i,texture:d,size:new j(u,p)},o.set(c,r)}let s=0;for(let t=0;t<h.length;t++)s+=h[t];const l=c.morphTargetsRelative?1:1-s;p.getUniforms().setValue(t,"morphTargetBaseInfluence",l),p.getUniforms().setValue(t,"morphTargetInfluences",h),p.getUniforms().setValue(t,"morphTargetsTexture",r.texture,n),p.getUniforms().setValue(t,"morphTargetsTextureSize",r.size)}else{const e=void 0===h?0:h.length;let n=i[c.id];if(void 0===n||n.length!==e){n=[];for(let t=0;t<e;t++)n[t]=[t,0];i[c.id]=n}for(let t=0;t<e;t++){const e=n[t];e[0]=t,e[1]=h[t]}n.sort(si);for(let t=0;t<8;t++)t<e&&n[t][1]?(s[t][0]=n[t][0],s[t][1]=n[t][1]):(s[t][0]=Number.MAX_SAFE_INTEGER,s[t][1]=0);s.sort(ai);const o=c.morphAttributes.position,a=c.morphAttributes.normal;let l=0;for(let t=0;t<8;t++){const e=s[t],n=e[0],i=e[1];n!==Number.MAX_SAFE_INTEGER&&i?(o&&c.getAttribute("morphTarget"+t)!==o[n]&&c.setAttribute("morphTarget"+t,o[n]),a&&c.getAttribute("morphNormal"+t)!==a[n]&&c.setAttribute("morphNormal"+t,a[n]),r[t]=i,l+=i):(o&&!0===c.hasAttribute("morphTarget"+t)&&c.deleteAttribute("morphTarget"+t),a&&!0===c.hasAttribute("morphNormal"+t)&&c.deleteAttribute("morphNormal"+t),r[t]=0)}const u=c.morphTargetsRelative?1:1-l;p.getUniforms().setValue(t,"morphTargetBaseInfluence",u),p.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function ui(t,e,n,i){let r=new WeakMap;function o(t){const e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){const a=i.render.frame,s=t.geometry,l=e.get(t,s);return r.get(l)!==a&&(e.update(l),r.set(l,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}oi.prototype.isDataTexture2DArray=!0;class pi extends q{constructor(t=null,e=1,n=1,i=1){super(null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=p,this.minFilter=p,this.wrapR=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}pi.prototype.isDataTexture3D=!0;const hi=new q,di=new oi,_i=new pi,fi=new un,mi=[],yi=[],gi=new Float32Array(16),vi=new Float32Array(9),bi=new Float32Array(4);function xi(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let o=mi[r];if(void 0===o&&(o=new Float32Array(r),mi[r]=o),0!==e){i.toArray(o,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(o,r)}return o}function Si(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function wi(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Mi(t,e){let n=yi[e];void 0===n&&(n=new Int32Array(e),yi[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Ti(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Ci(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Si(n,e))return;t.uniform2fv(this.addr,e),wi(n,e)}}function Ei(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Si(n,e))return;t.uniform3fv(this.addr,e),wi(n,e)}}function Ai(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Si(n,e))return;t.uniform4fv(this.addr,e),wi(n,e)}}function Ri(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Si(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),wi(n,e)}else{if(Si(n,i))return;bi.set(i),t.uniformMatrix2fv(this.addr,!1,bi),wi(n,i)}}function Li(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Si(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),wi(n,e)}else{if(Si(n,i))return;vi.set(i),t.uniformMatrix3fv(this.addr,!1,vi),wi(n,i)}}function Pi(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Si(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),wi(n,e)}else{if(Si(n,i))return;gi.set(i),t.uniformMatrix4fv(this.addr,!1,gi),wi(n,i)}}function Di(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ii(t,e){const n=this.cache;Si(n,e)||(t.uniform2iv(this.addr,e),wi(n,e))}function ki(t,e){const n=this.cache;Si(n,e)||(t.uniform3iv(this.addr,e),wi(n,e))}function Oi(t,e){const n=this.cache;Si(n,e)||(t.uniform4iv(this.addr,e),wi(n,e))}function Bi(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function ji(t,e){const n=this.cache;Si(n,e)||(t.uniform2uiv(this.addr,e),wi(n,e))}function Fi(t,e){const n=this.cache;Si(n,e)||(t.uniform3uiv(this.addr,e),wi(n,e))}function Ni(t,e){const n=this.cache;Si(n,e)||(t.uniform4uiv(this.addr,e),wi(n,e))}function zi(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||hi,r)}function Hi(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||_i,r)}function Ui(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||fi,r)}function Wi(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||di,r)}function Gi(t,e){t.uniform1fv(this.addr,e)}function Vi(t,e){const n=xi(e,this.size,2);t.uniform2fv(this.addr,n)}function qi(t,e){const n=xi(e,this.size,3);t.uniform3fv(this.addr,n)}function Xi(t,e){const n=xi(e,this.size,4);t.uniform4fv(this.addr,n)}function Yi(t,e){const n=xi(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Zi(t,e){const n=xi(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ji(t,e){const n=xi(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ki(t,e){t.uniform1iv(this.addr,e)}function Qi(t,e){t.uniform2iv(this.addr,e)}function $i(t,e){t.uniform3iv(this.addr,e)}function tr(t,e){t.uniform4iv(this.addr,e)}function er(t,e){t.uniform1uiv(this.addr,e)}function nr(t,e){t.uniform2uiv(this.addr,e)}function ir(t,e){t.uniform3uiv(this.addr,e)}function rr(t,e){t.uniform4uiv(this.addr,e)}function or(t,e,n){const i=e.length,r=Mi(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTexture2D(e[t]||hi,r[t])}function ar(t,e,n){const i=e.length,r=Mi(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture3D(e[t]||_i,r[t])}function sr(t,e,n){const i=e.length,r=Mi(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.safeSetTextureCube(e[t]||fi,r[t])}function lr(t,e,n){const i=e.length,r=Mi(n,i);t.uniform1iv(this.addr,r);for(let t=0;t!==i;++t)n.setTexture2DArray(e[t]||di,r[t])}function cr(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ti;case 35664:return Ci;case 35665:return Ei;case 35666:return Ai;case 35674:return Ri;case 35675:return Li;case 35676:return Pi;case 5124:case 35670:return Di;case 35667:case 35671:return Ii;case 35668:case 35672:return ki;case 35669:case 35673:return Oi;case 5125:return Bi;case 36294:return ji;case 36295:return Fi;case 36296:return Ni;case 35678:case 36198:case 36298:case 36306:case 35682:return zi;case 35679:case 36299:case 36307:return Hi;case 35680:case 36300:case 36308:case 36293:return Ui;case 36289:case 36303:case 36311:case 36292:return Wi}}(e.type)}function ur(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Gi;case 35664:return Vi;case 35665:return qi;case 35666:return Xi;case 35674:return Yi;case 35675:return Zi;case 35676:return Ji;case 5124:case 35670:return Ki;case 35667:case 35671:return Qi;case 35668:case 35672:return $i;case 35669:case 35673:return tr;case 5125:return er;case 36294:return nr;case 36295:return ir;case 36296:return rr;case 35678:case 36198:case 36298:case 36306:case 35682:return or;case 35679:case 36299:case 36307:return ar;case 35680:case 36300:case 36308:case 36293:return sr;case 36289:case 36303:case 36311:case 36292:return lr}}(e.type)}function pr(t){this.id=t,this.seq=[],this.map={}}ur.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),wi(e,t)},pr.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(t,e[o.id],n)}};const hr=/(\w+)(\])?(\[|\.)?/g;function dr(t,e){t.seq.push(e),t.map[e.id]=e}function _r(t,e,n){const i=t.name,r=i.length;for(hr.lastIndex=0;;){const o=hr.exec(i),a=hr.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){dr(n,void 0===c?new cr(s,t,e):new ur(s,t,e));break}{let t=n.map[s];void 0===t&&(t=new pr(s),dr(n,t)),n=t}}}function fr(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i);_r(n,t.getUniformLocation(e,n.name),this)}}function mr(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}fr.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},fr.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},fr.upload=function(t,e,n,i){for(let r=0,o=e.length;r!==o;++r){const o=e[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,i)}},fr.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let yr=0;function gr(t){switch(t){case 3e3:return["Linear","( value )"];case S:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function vr(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(t){const e=t.split("\n");for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}(t.getShaderSource(e))}function br(t,e){const n=gr(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function xr(t,e){const n=gr(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Sr(t,e){let n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function wr(t){return""!==t}function Mr(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Tr(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Cr=/^[ \t]*#include +<([\w\d./]+)>/gm;function Er(t){return t.replace(Cr,Ar)}function Ar(t,e){const n=Sn[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Er(n)}const Rr=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Lr=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Pr(t){return t.replace(Lr,Ir).replace(Rr,Dr)}function Dr(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ir(t,e,n,i)}function Ir(t,e,n,i){let r="";for(let t=parseInt(e);t<parseInt(n);t++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return r}function kr(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Or(t,e,n,i){const r=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(t){let e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),c=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:case 307:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),u=function(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case 302:case 307:e="ENVMAP_MODE_REFRACTION"}return e}(n),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),h=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wr).join("\n")}(n),d=function(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(o),_=r.createProgram();let f,m,g=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(f=[d].filter(wr).join("\n"),f.length>0&&(f+="\n"),m=[h,d].filter(wr).join("\n"),m.length>0&&(m+="\n")):(f=[kr(n),"#define SHADER_NAME "+n.shaderName,d,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(wr).join("\n"),m=[h,kr(n),"#define SHADER_NAME "+n.shaderName,d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Sn.tonemapping_pars_fragment:"",0!==n.toneMapping?Sr("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===y?"#define OPAQUE":"",Sn.encodings_pars_fragment,n.map?br("mapTexelToLinear",n.mapEncoding):"",n.matcap?br("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?br("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?br("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?br("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?br("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?br("lightMapTexelToLinear",n.lightMapEncoding):"",xr("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(wr).join("\n")),a=Er(a),a=Mr(a,n),a=Tr(a,n),s=Er(s),s=Mr(s,n),s=Tr(s,n),a=Pr(a),s=Pr(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(g="#version 300 es\n",f=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+f,m=["#define varying in","300 es"===n.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===n.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+m);const v=g+m+s,b=mr(r,35633,g+f+a),x=mr(r,35632,v);if(r.attachShader(_,b),r.attachShader(_,x),void 0!==n.index0AttributeName?r.bindAttribLocation(_,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(_).trim(),e=r.getShaderInfoLog(b).trim(),n=r.getShaderInfoLog(x).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(_,35714)){i=!1;const e=vr(r,b,"vertex"),n=vr(r,x,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,35715)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+n)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:f},fragmentShader:{log:n,prefix:m}})}let S,w;return r.deleteShader(b),r.deleteShader(x),this.getUniforms=function(){return void 0===S&&(S=new fr(r,_)),S},this.getAttributes=function(){return void 0===w&&(w=function(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),o=i.name;let a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),n[o]={type:i.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}(r,_)),w},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=yr++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=b,this.fragmentShader=x,this}let Br=0;class jr{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}_getShaderStage(t){const e=this.shaderCache;if(!1===e.has(t)){const n=new Fr;e.set(t,n)}return e.get(t)}}class Fr{constructor(){this.id=Br++,this.usedTimes=0}}function Nr(t,e,n,i,r,o,s){const l=new zt,c=new jr,u=[],p=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.floatVertexTextures,_=r.maxVertexUniforms,f=r.vertexTextures;let m=r.precision;const y={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=3e3,p&&t&&t.isTexture&&1023===t.format&&1009===t.type&&t.encoding===S&&(e=3e3),e}return{getParameters:function(o,l,u,v,b){const x=v.fog,S=o.isMeshStandardMaterial?v.environment:null,M=(o.isMeshStandardMaterial?n:e).get(o.envMap||S),T=y[o.type],C=b.isSkinnedMesh?function(t){const e=t.skeleton.bones;if(d)return 1024;{const t=_,n=Math.floor((t-20)/4),i=Math.min(n,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}}(b):0;let E,A,R,L;if(null!==o.precision&&(m=r.getMaxPrecision(o.precision),m!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead.")),T){const t=Mn[T];E=t.vertexShader,A=t.fragmentShader}else E=o.vertexShader,A=o.fragmentShader,c.update(o),R=c.getVertexShaderID(o),L=c.getFragmentShaderID(o);const P=t.getRenderTarget(),D=o.alphaTest>0,I=o.clearcoat>0;return{isWebGL2:p,shaderID:T,shaderName:o.type,vertexShader:E,fragmentShader:A,defines:o.defines,customVertexShaderID:R,customFragmentShaderID:L,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:f,outputEncoding:null!==P?g(P.texture):t.outputEncoding,map:!!o.map,mapEncoding:g(o.map),matcap:!!o.matcap,matcapEncoding:g(o.matcap),envMap:!!M,envMapMode:M&&M.mapping,envMapEncoding:g(M),envMapCubeUV:!!M&&(306===M.mapping||307===M.mapping),lightMap:!!o.lightMap,lightMapEncoding:g(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:g(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:o.normalMapType===w,clearcoat:I,clearcoatMap:I&&!!o.clearcoatMap,clearcoatRoughnessMap:I&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:I&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:g(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:D,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:g(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!b.geometry&&!!b.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!b.geometry&&!!b.geometry.attributes.color&&4===b.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!x,useFog:o.fog,fogExp2:x&&x.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===b.isSkinnedMesh&&C>0,maxBones:C,useVertexTexture:d,morphTargets:!!b.geometry&&!!b.geometry.morphAttributes.position,morphNormals:!!b.geometry&&!!b.geometry.morphAttributes.normal,morphTargetsCount:b.geometry&&b.geometry.morphAttributes.position?b.geometry.morphAttributes.position.length:0,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===a,flipSided:1===o.side,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:p||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||i.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.mapEncoding),t.push(e.matcapEncoding),t.push(e.envMapMode),t.push(e.envMapEncoding),t.push(e.lightMapEncoding),t.push(e.emissiveMapEncoding),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.maxBones),t.push(e.morphTargetsCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.format),t.push(e.specularColorMapEncoding),t.push(e.sheenColorMapEncoding)}(n,e),function(t,e){l.disableAll(),e.isWebGL2&&l.enable(0);e.supportsVertexTextures&&l.enable(1);e.instancing&&l.enable(2);e.instancingColor&&l.enable(3);e.map&&l.enable(4);e.matcap&&l.enable(5);e.envMap&&l.enable(6);e.envMapCubeUV&&l.enable(7);e.lightMap&&l.enable(8);e.aoMap&&l.enable(9);e.emissiveMap&&l.enable(10);e.bumpMap&&l.enable(11);e.normalMap&&l.enable(12);e.objectSpaceNormalMap&&l.enable(13);e.tangentSpaceNormalMap&&l.enable(14);e.clearcoat&&l.enable(15);e.clearcoatMap&&l.enable(16);e.clearcoatRoughnessMap&&l.enable(17);e.clearcoatNormalMap&&l.enable(18);e.displacementMap&&l.enable(19);e.specularMap&&l.enable(20);e.roughnessMap&&l.enable(21);e.metalnessMap&&l.enable(22);e.gradientMap&&l.enable(23);e.alphaMap&&l.enable(24);e.alphaTest&&l.enable(25);e.vertexColors&&l.enable(26);e.vertexAlphas&&l.enable(27);e.vertexUvs&&l.enable(28);e.vertexTangents&&l.enable(29);e.uvsVertexOnly&&l.enable(30);e.fog&&l.enable(31);t.push(l.mask),l.disableAll(),e.useFog&&l.enable(0);e.flatShading&&l.enable(1);e.logarithmicDepthBuffer&&l.enable(2);e.skinning&&l.enable(3);e.useVertexTexture&&l.enable(4);e.morphTargets&&l.enable(5);e.morphNormals&&l.enable(6);e.premultipliedAlpha&&l.enable(7);e.shadowMapEnabled&&l.enable(8);e.physicallyCorrectLights&&l.enable(9);e.doubleSided&&l.enable(10);e.flipSided&&l.enable(11);e.depthPacking&&l.enable(12);e.dithering&&l.enable(13);e.specularIntensityMap&&l.enable(14);e.specularColorMap&&l.enable(15);e.transmission&&l.enable(16);e.transmissionMap&&l.enable(17);e.thicknessMap&&l.enable(18);e.sheen&&l.enable(19);e.sheenColorMap&&l.enable(20);e.sheenRoughnessMap&&l.enable(21);t.push(l.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){const e=y[t.type];let n;if(e){const t=Mn[e];n=on.clone(t.uniforms)}else n=t.uniforms;return n},acquireProgram:function(e,n){let i;for(let t=0,e=u.length;t<e;t++){const e=u[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Or(t,n,e,o),u.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){const e=u.indexOf(t);u[e]=u[u.length-1],u.pop(),t.destroy()}},releaseShaderCache:function(t){c.remove(t)},programs:u,dispose:function(){c.dispose()}}}function zr(){let t=new WeakMap;return{get:function(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Hr(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ur(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Wr(){const t=[];let e=0;const n=[],i=[],r=[];function o(n,i,r,o,a,s){let l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,a,s,l,c){const u=o(t,e,a,s,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(t,e,a,s,l,c){const u=o(t,e,a,s,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=e,i=t.length;n<i;n++){const e=t[n];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Hr),i.length>1&&i.sort(e||Ur),r.length>1&&r.sort(e||Ur)}}}function Gr(){let t=new WeakMap;return{get:function(e,n){let i;return!1===t.has(e)?(i=new Wr,t.set(e,[i])):n>=t.get(e).length?(i=new Wr,t.get(e).push(i)):i=t.get(e)[n],i},dispose:function(){t=new WeakMap}}}function Vr(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Q,color:new be};break;case"SpotLight":n={position:new Q,direction:new Q,color:new be,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Q,color:new be,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Q,skyColor:new be,groundColor:new be};break;case"RectAreaLight":n={color:new be,position:new Q,halfWidth:new Q,halfHeight:new Q}}return t[e.id]=n,n}}}let qr=0;function Xr(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Yr(t,e){const n=new Vr,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new j,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let t=0;t<9;t++)r.probe.push(new Q);const o=new Q,a=new Rt,s=new Rt;return{setup:function(o,a){let s=0,l=0,c=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let u=0,p=0,h=0,d=0,_=0,f=0,m=0,y=0;o.sort(Xr);const g=!0!==a?Math.PI:1;for(let t=0,e=o.length;t<e;t++){const e=o[t],a=e.color,v=e.intensity,b=e.distance,x=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)s+=a.r*v*g,l+=a.g*v*g,c+=a.b*v*g;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],v);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*g),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=x,r.directionalShadowMatrix[u]=e.shadow.matrix,f++}r.directional[u]=t,u++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(a).multiplyScalar(v*g),t.distance=b,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[h]=n,r.spotShadowMap[h]=x,r.spotShadowMatrix[h]=e.shadow.matrix,y++}r.spot[h]=t,h++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(a).multiplyScalar(v),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[d]=t,d++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity*g),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[p]=n,r.pointShadowMap[p]=x,r.pointShadowMatrix[p]=e.shadow.matrix,m++}r.point[p]=t,p++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(v*g),t.groundColor.copy(e.groundColor).multiplyScalar(v*g),r.hemi[_]=t,_++}}d>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=wn.LTC_FLOAT_1,r.rectAreaLTC2=wn.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=wn.LTC_HALF_1,r.rectAreaLTC2=wn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=c;const v=r.hash;v.directionalLength===u&&v.pointLength===p&&v.spotLength===h&&v.rectAreaLength===d&&v.hemiLength===_&&v.numDirectionalShadows===f&&v.numPointShadows===m&&v.numSpotShadows===y||(r.directional.length=u,r.spot.length=h,r.rectArea.length=d,r.point.length=p,r.hemi.length=_,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=y,r.spotShadowMap.length=y,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=m,r.spotShadowMatrix.length=y,v.directionalLength=u,v.pointLength=p,v.spotLength=h,v.rectAreaLength=d,v.hemiLength=_,v.numDirectionalShadows=f,v.numPointShadows=m,v.numSpotShadows=y,r.version=qr++)},setupView:function(t,e){let n=0,i=0,l=0,c=0,u=0;const p=e.matrixWorldInverse;for(let e=0,h=t.length;e<h;e++){const h=t[e];if(h.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(p),n++}else if(h.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(h.matrixWorld),t.position.applyMatrix4(p),t.direction.setFromMatrixPosition(h.matrixWorld),o.setFromMatrixPosition(h.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(p),l++}else if(h.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(h.matrixWorld),t.position.applyMatrix4(p),s.identity(),a.copy(h.matrixWorld),a.premultiply(p),s.extractRotation(a),t.halfWidth.set(.5*h.width,0,0),t.halfHeight.set(0,.5*h.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),c++}else if(h.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(h.matrixWorld),t.position.applyMatrix4(p),i++}else if(h.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(h.matrixWorld),t.direction.transformDirection(p),t.direction.normalize(),u++}}},state:r}}function Zr(t,e){const n=new Yr(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function Jr(t,e){let n=new WeakMap;return{get:function(i,r=0){let o;return!1===n.has(i)?(o=new Zr(t,e),n.set(i,[o])):r>=n.get(i).length?(o=new Zr(t,e),n.get(i).push(o)):o=n.get(i)[r],o},dispose:function(){n=new WeakMap}}}class Kr extends de{constructor(t){super(),this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}Kr.prototype.isMeshDepthMaterial=!0;class Qr extends de{constructor(t){super(),this.type="MeshDistanceMaterial",this.referencePosition=new Q,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}Qr.prototype.isMeshDistanceMaterial=!0;function $r(t,e,n){let i=new gn;const r=new j,s=new j,l=new Y,c=new Kr({depthPacking:3201}),u=new Qr,h={},d=n.maxTextureSize,f={0:1,1:o,2:a},m=new an({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new j},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),y=m.clone();y.defines.HORIZONTAL_PASS=1;const g=new Oe;g.setAttribute("position",new Me(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new $e(g,m),b=this;function x(n,i){const r=e.update(v);m.defines.VSM_SAMPLES!==n.blurSamples&&(m.defines.VSM_SAMPLES=n.blurSamples,y.defines.VSM_SAMPLES=n.blurSamples,m.needsUpdate=!0,y.needsUpdate=!0),m.uniforms.shadow_pass.value=n.map.texture,m.uniforms.resolution.value=n.mapSize,m.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,m,v,null),y.uniforms.shadow_pass.value=n.mapPass.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,y,v,null)}function S(e,n,i,r,o,a,s){let l=null;const p=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(l=void 0!==p?p:!0===r.isPointLight?u:c,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const t=l.uuid,e=i.uuid;let n=h[t];void 0===n&&(n={},h[t]=n);let r=n[e];void 0===r&&(r=l.clone(),n[e]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=3===s?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:f[i.side],l.alphaMap=i.alphaMap,l.alphaTest=i.alphaTest,l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.displacementMap=i.displacementMap,l.displacementScale=i.displacementScale,l.displacementBias=i.displacementBias,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function w(n,r,o,a,s){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=r[c.materialIndex];if(u&&u.visible){const e=S(n,0,u,a,o.near,o.far,s);t.renderBufferDirect(o,null,i,e,n,c)}}}else if(r.visible){const e=S(n,0,r,a,o.near,o.far,s);t.renderBufferDirect(o,null,i,e,n,null)}}const l=n.children;for(let t=0,e=l.length;t<e;t++)w(l[t],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,o){if(!1===b.enabled)return;if(!1===b.autoUpdate&&!1===b.needsUpdate)return;if(0===e.length)return;const a=t.getRenderTarget(),c=t.getActiveCubeFace(),u=t.getActiveMipmapLevel(),h=t.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(let a=0,c=e.length;a<c;a++){const c=e[a],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const f=u.getFrameExtents();if(r.multiply(f),s.copy(u.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/f.x),r.x=s.x*f.x,u.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/f.y),r.y=s.y*f.y,u.mapSize.y=s.y)),null===u.map&&!u.isPointLightShadow&&3===this.type){const t={minFilter:_,magFilter:_,format:1023};u.map=new Z(r.x,r.y,t),u.map.texture.name=c.name+".shadowMap",u.mapPass=new Z(r.x,r.y,t),u.camera.updateProjectionMatrix()}if(null===u.map){const t={minFilter:p,magFilter:p,format:1023};u.map=new Z(r.x,r.y,t),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const m=u.getViewportCount();for(let t=0;t<m;t++){const e=u.getViewport(t);l.set(s.x*e.x,s.y*e.y,s.x*e.z,s.y*e.w),h.viewport(l),u.updateMatrices(c,t),i=u.getFrustum(),w(n,o,u.camera,c,this.type)}u.isPointLightShadow||3!==this.type||x(u,o),u.needsUpdate=!1}b.needsUpdate=!1,t.setRenderTarget(a,c,u)}}function to(t,e,n){const i=n.isWebGL2;const r=new function(){let e=!1;const n=new Y;let i=null;const r=new Y(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},o=new function(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?F(2929):N(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},l=new function(){let e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?F(2960):N(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}};let c={},u={},p=null,h=!1,d=null,_=null,f=null,m=null,y=null,g=null,v=null,b=!1,x=null,S=null,w=null,M=null,T=null;const C=t.getParameter(35661);let E=!1,A=0;const R=t.getParameter(7938);-1!==R.indexOf("WebGL")?(A=parseFloat(/^WebGL (\d)/.exec(R)[1]),E=A>=1):-1!==R.indexOf("OpenGL ES")&&(A=parseFloat(/^OpenGL ES (\d)/.exec(R)[1]),E=A>=2);let L=null,P={};const D=t.getParameter(3088),I=t.getParameter(2978),k=(new Y).fromArray(D),O=(new Y).fromArray(I);function B(e,n,i){const r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let e=0;e<i;e++)t.texImage2D(n+e,0,6408,1,1,0,6408,5121,r);return o}const j={};function F(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function N(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}j[3553]=B(3553,3553,1),j[34067]=B(34067,34069,6),r.setClear(0,0,0,1),o.setClear(1),l.setClear(0),F(2929),o.setFunc(3),W(!1),G(1),F(2884),U(0);const z={100:32774,101:32778,102:32779};if(i)z[103]=32775,z[104]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(z[103]=t.MIN_EXT,z[104]=t.MAX_EXT)}const H={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function U(e,n,i,r,o,a,l,c){if(0!==e){if(!1===h&&(F(3042),h=!0),5===e)o=o||n,a=a||i,l=l||r,n===_&&o===y||(t.blendEquationSeparate(z[n],z[o]),_=n,y=o),i===f&&r===m&&a===g&&l===v||(t.blendFuncSeparate(H[i],H[r],H[a],H[l]),f=i,m=r,g=a,v=l),d=e,b=null;else if(e!==d||c!==b){if(100===_&&100===y||(t.blendEquation(32774),_=100,y=100),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case s:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case s:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}f=null,m=null,g=null,v=null,d=e,b=c}}else!0===h&&(N(3042),h=!1)}function W(e){x!==e&&(e?t.frontFace(2304):t.frontFace(2305),x=e)}function G(e){0!==e?(F(2884),e!==S&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):N(2884),S=e}function V(e,n,i){e?(F(32823),M===n&&T===i||(t.polygonOffset(n,i),M=n,T=i)):N(32823)}function q(e){void 0===e&&(e=33984+C-1),L!==e&&(t.activeTexture(e),L=e)}return{buffers:{color:r,depth:o,stencil:l},enable:F,disable:N,bindFramebuffer:function(e,n){return u[e]!==n&&(t.bindFramebuffer(e,n),u[e]=n,i&&(36009===e&&(u[36160]=n),36160===e&&(u[36009]=n)),!0)},useProgram:function(e){return p!==e&&(t.useProgram(e),p=e,!0)},setBlending:U,setMaterial:function(t,e){t.side===a?N(2884):F(2884);let n=1===t.side;e&&(n=!n),W(n),1===t.blending&&!1===t.transparent?U(0):U(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),r.setMask(t.colorWrite);const i=t.stencilWrite;l.setTest(i),i&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),V(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?F(32926):N(32926)},setFlipSided:W,setCullFace:G,setLineWidth:function(e){e!==w&&(E&&t.lineWidth(e),w=e)},setPolygonOffset:V,setScissorTest:function(t){t?F(3089):N(3089)},activeTexture:q,bindTexture:function(e,n){null===L&&q();let i=P[L];void 0===i&&(i={type:void 0,texture:void 0},P[L]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||j[e]),i.type=e,i.texture=n)},unbindTexture:function(){const e=P[L];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===k.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),k.copy(e))},viewport:function(e){!1===O.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),O.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===i&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},L=null,P={},u={},p=null,h=!1,d=null,_=null,f=null,m=null,y=null,g=null,v=null,b=!1,x=null,S=null,w=null,M=null,T=null,k.set(0,0,t.canvas.width,t.canvas.height),O.set(0,0,t.canvas.width,t.canvas.height),r.reset(),o.reset(),l.reset()}}}function eo(t,e,n,i,r,o,a){const s=r.isWebGL2,g=r.maxTextures,v=r.maxCubemapSize,b=r.maxTextureSize,x=r.maxSamples,w=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,M=new WeakMap;let T,C=!1;try{C="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function E(t,e){return C?new OffscreenCanvas(t,e):U("canvas")}function A(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?O:Math.floor,o=i(r*t.width),a=i(r*t.height);void 0===T&&(T=E(o,a));const s=n?E(o,a):T;s.width=o,s.height=a;return s.getContext("2d").drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function R(t){return I(t.width)&&I(t.height)}function L(t,e){return t.generateMipmaps&&e&&t.minFilter!==p&&t.minFilter!==_}function P(e){t.generateMipmap(e)}function D(n,i,r,o){if(!1===s)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=o===S?35907:32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function k(t,e,n){return!0===L(t,n)||t.isFramebufferTexture&&t.minFilter!==p&&t.minFilter!==_?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function B(t){return t===p||t===h||t===d?9728:9729}function j(e){const n=e.target;n.removeEventListener("dispose",j),function(e){const n=i.get(e);if(void 0===n.__webglInit)return;t.deleteTexture(n.__webglTexture),i.remove(e)}(n),n.isVideoTexture&&M.delete(n),a.memory.textures--}function F(e){const n=e.target;n.removeEventListener("dispose",F),function(e){const n=e.texture,r=i.get(e),o=i.get(n);if(!e)return;void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(r.__webglFramebuffer[e]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[e]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);r.__webglTexture&&(t.deleteTexture(r.__webglTexture),a.memory.textures--),i.remove(n[e])}i.remove(n),i.remove(e)}(n)}let N=0;function z(t,e){const r=i.get(t);if(t.isVideoTexture&&function(t){const e=a.render.frame;M.get(t)!==e&&(M.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void X(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function H(e,r){const a=i.get(e);e.version>0&&a.__version!==e.version?function(e,i,r){if(6!==i.image.length)return;q(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const a=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,c=[];for(let t=0;t<6;t++)c[t]=a||l?l?i.image[t].image:i.image[t]:A(i.image[t],!1,!0,v);const u=c[0],p=R(u)||s,h=o.convert(i.format),d=o.convert(i.type),_=D(i.internalFormat,h,d,i.encoding),f=s&&!0!==i.isVideoTexture,m=void 0===e.__version;let g,b=k(i,u,p);if(V(34067,i,p),a){f&&m&&n.texStorage2D(34067,b,_,u.width,u.height);for(let t=0;t<6;t++){g=c[t].mipmaps;for(let e=0;e<g.length;e++){const r=g[e];1023!==i.format&&i.format!==y?null!==h?f?n.compressedTexSubImage2D(34069+t,e,0,0,r.width,r.height,h,r.data):n.compressedTexImage2D(34069+t,e,_,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):f?n.texSubImage2D(34069+t,e,0,0,r.width,r.height,h,d,r.data):n.texImage2D(34069+t,e,_,r.width,r.height,0,h,d,r.data)}}}else{g=i.mipmaps,f&&m&&(g.length>0&&b++,n.texStorage2D(34067,b,_,c[0].width,c[0].height));for(let t=0;t<6;t++)if(l){f?n.texSubImage2D(34069+t,0,0,0,c[t].width,c[t].height,h,d,c[t].data):n.texImage2D(34069+t,0,_,c[t].width,c[t].height,0,h,d,c[t].data);for(let e=0;e<g.length;e++){const i=g[e].image[t].image;f?n.texSubImage2D(34069+t,e+1,0,0,i.width,i.height,h,d,i.data):n.texImage2D(34069+t,e+1,_,i.width,i.height,0,h,d,i.data)}}else{f?n.texSubImage2D(34069+t,0,0,0,h,d,c[t]):n.texImage2D(34069+t,0,_,h,d,c[t]);for(let e=0;e<g.length;e++){const i=g[e];f?n.texSubImage2D(34069+t,e+1,0,0,h,d,i.image[t]):n.texImage2D(34069+t,e+1,_,h,d,i.image[t])}}}L(i,p)&&P(34067);e.__version=i.version,i.onUpdate&&i.onUpdate(i)}(a,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture))}const W={[l]:10497,[c]:33071,[u]:33648},G={[p]:9728,[h]:9984,[d]:9986,[_]:9729,[f]:9985,[m]:9987};function V(n,o,a){if(a?(t.texParameteri(n,10242,W[o.wrapS]),t.texParameteri(n,10243,W[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,W[o.wrapR]),t.texParameteri(n,10240,G[o.magFilter]),t.texParameteri(n,10241,G[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===c&&o.wrapT===c||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,B(o.magFilter)),t.texParameteri(n,10241,B(o.minFilter)),o.minFilter!==p&&o.minFilter!==_&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const a=e.get("EXT_texture_filter_anisotropic");if(1015===o.type&&!1===e.has("OES_texture_float_linear"))return;if(!1===s&&1016===o.type&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function q(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",j),e.__webglTexture=t.createTexture(),a.memory.textures++)}function X(e,i,r){let a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),q(e,i),n.activeTexture(33984+r),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);const l=function(t){return!s&&(t.wrapS!==c||t.wrapT!==c||t.minFilter!==p&&t.minFilter!==_)}(i)&&!1===R(i.image),u=A(i.image,l,!1,b),h=R(u)||s,d=o.convert(i.format);let f,m=o.convert(i.type),g=D(i.internalFormat,d,m,i.encoding);V(a,i,h);const v=i.mipmaps,x=s&&!0!==i.isVideoTexture,S=void 0===e.__version,w=k(i,u,h);if(i.isDepthTexture)g=6402,s?g=1015===i.type?36012:1014===i.type?33190:1020===i.type?35056:33189:1015===i.type&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),1026===i.format&&6402===g&&1012!==i.type&&1014!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=1012,m=o.convert(i.type)),1027===i.format&&6402===g&&(g=34041,1020!==i.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=1020,m=o.convert(i.type))),x&&S?n.texStorage2D(3553,1,g,u.width,u.height):n.texImage2D(3553,0,g,u.width,u.height,0,d,m,null);else if(i.isDataTexture)if(v.length>0&&h){x&&S&&n.texStorage2D(3553,w,g,v[0].width,v[0].height);for(let t=0,e=v.length;t<e;t++)f=v[t],x?n.texSubImage2D(3553,0,0,0,f.width,f.height,d,m,f.data):n.texImage2D(3553,t,g,f.width,f.height,0,d,m,f.data);i.generateMipmaps=!1}else x?(S&&n.texStorage2D(3553,w,g,u.width,u.height),n.texSubImage2D(3553,0,0,0,u.width,u.height,d,m,u.data)):n.texImage2D(3553,0,g,u.width,u.height,0,d,m,u.data);else if(i.isCompressedTexture){x&&S&&n.texStorage2D(3553,w,g,v[0].width,v[0].height);for(let t=0,e=v.length;t<e;t++)f=v[t],1023!==i.format&&i.format!==y?null!==d?x?n.compressedTexSubImage2D(3553,t,0,0,f.width,f.height,d,f.data):n.compressedTexImage2D(3553,t,g,f.width,f.height,0,f.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):x?n.texSubImage2D(3553,t,0,0,f.width,f.height,d,m,f.data):n.texImage2D(3553,t,g,f.width,f.height,0,d,m,f.data)}else if(i.isDataTexture2DArray)x?(S&&n.texStorage3D(35866,w,g,u.width,u.height,u.depth),n.texSubImage3D(35866,0,0,0,0,u.width,u.height,u.depth,d,m,u.data)):n.texImage3D(35866,0,g,u.width,u.height,u.depth,0,d,m,u.data);else if(i.isDataTexture3D)x?(S&&n.texStorage3D(32879,w,g,u.width,u.height,u.depth),n.texSubImage3D(32879,0,0,0,0,u.width,u.height,u.depth,d,m,u.data)):n.texImage3D(32879,0,g,u.width,u.height,u.depth,0,d,m,u.data);else if(i.isFramebufferTexture)x&&S?n.texStorage2D(3553,w,g,u.width,u.height):n.texImage2D(3553,0,g,u.width,u.height,0,d,m,null);else if(v.length>0&&h){x&&S&&n.texStorage2D(3553,w,g,v[0].width,v[0].height);for(let t=0,e=v.length;t<e;t++)f=v[t],x?n.texSubImage2D(3553,t,0,0,d,m,f):n.texImage2D(3553,t,g,d,m,f);i.generateMipmaps=!1}else x?(S&&n.texStorage2D(3553,w,g,u.width,u.height),n.texSubImage2D(3553,0,0,0,d,m,u)):n.texImage2D(3553,0,g,d,m,u);L(i,h)&&P(a),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function Y(e,r,a,s,l){const c=o.convert(a.format),u=o.convert(a.type),p=D(a.internalFormat,c,u,a.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,p,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,p,r.width,r.height,0,c,u,null)),n.bindFramebuffer(36160,e),r.useRenderToTexture?w.framebufferTexture2DMultisampleEXT(36160,s,l,i.get(a).__webglTexture,0,K(r)):t.framebufferTexture2D(36160,s,l,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function Z(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||n.useRenderToTexture){const e=n.depthTexture;e&&e.isDepthTexture&&(1015===e.type?r=36012:1014===e.type&&(r=33190));const i=K(n);n.useRenderToTexture?w.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){const r=K(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):n.useRenderToTexture?w.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,r=o.convert(e.format),a=o.convert(e.type),s=D(e.internalFormat,r,a,e.encoding),l=K(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,l,s,n.width,n.height):n.useRenderToTexture?w.renderbufferStorageMultisampleEXT(36161,l,s,n.width,n.height):t.renderbufferStorage(36161,s,n.width,n.height)}t.bindRenderbuffer(36161,null)}function J(e){const r=i.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),z(r.depthTexture,0);const o=i.get(r.depthTexture).__webglTexture,a=K(r);if(1026===r.depthTexture.format)r.useRenderToTexture?w.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(1027!==r.depthTexture.format)throw new Error("Unknown depthTexture format");r.useRenderToTexture?w.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):t.framebufferTexture2D(36160,33306,3553,o,0)}}(r.__webglFramebuffer,e)}else if(o){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=t.createRenderbuffer(),Z(r.__webglDepthbuffer[i],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),Z(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function K(t){return s&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(x,t.samples):0}let Q=!1,$=!1;this.allocateTextureUnit=function(){const t=N;return t>=g&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+g),N+=1,t},this.resetTextureUnits=function(){N=0},this.setTexture2D=z,this.setTexture2DArray=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?X(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?X(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=H,this.rebindTextures=function(t,e,n){const r=i.get(t);void 0!==e&&Y(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&J(t)},this.setupRenderTarget=function(e){const l=e.texture,c=i.get(e),u=i.get(l);e.addEventListener("dispose",F),!0!==e.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=t.createTexture()),u.__version=l.version,a.memory.textures++);const p=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultipleRenderTargets,d=l.isDataTexture3D||l.isDataTexture2DArray,_=R(e)||s;if(!s||l.format!==y||1015!==l.type&&1016!==l.type||(l.format=1023,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),p){c.__webglFramebuffer=[];for(let e=0;e<6;e++)c.__webglFramebuffer[e]=t.createFramebuffer()}else if(c.__webglFramebuffer=t.createFramebuffer(),h)if(r.drawBuffers){const n=e.texture;for(let e=0,r=n.length;e<r;e++){const r=i.get(n[e]);void 0===r.__webglTexture&&(r.__webglTexture=t.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(e.useRenderbuffer)if(s){c.__webglMultisampledFramebuffer=t.createFramebuffer(),c.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,c.__webglColorRenderbuffer);const i=o.convert(l.format),r=o.convert(l.type),a=D(l.internalFormat,i,r,l.encoding),s=K(e);t.renderbufferStorageMultisample(36161,s,a,e.width,e.height),n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,c.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(c.__webglDepthRenderbuffer=t.createRenderbuffer(),Z(c.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(p){n.bindTexture(34067,u.__webglTexture),V(34067,l,_);for(let t=0;t<6;t++)Y(c.__webglFramebuffer[t],e,l,36064,34069+t);L(l,_)&&P(34067),n.unbindTexture()}else if(h){const t=e.texture;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=i.get(o);n.bindTexture(3553,a.__webglTexture),V(3553,o,_),Y(c.__webglFramebuffer,e,o,36064+r,3553),L(o,_)&&P(3553)}n.unbindTexture()}else{let t=3553;if(d)if(s){t=l.isDataTexture3D?32879:35866}else console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(t,u.__webglTexture),V(t,l,_),Y(c.__webglFramebuffer,e,l,36064,t),L(l,_)&&P(t),n.unbindTexture()}e.depthBuffer&&J(e)},this.updateRenderTargetMipmap=function(t){const e=R(t)||s,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let o=0,a=r.length;o<a;o++){const a=r[o];if(L(a,e)){const e=t.isWebGLCubeRenderTarget?34067:3553,r=i.get(a).__webglTexture;n.bindTexture(e,r),P(e),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.useRenderbuffer)if(s){const r=e.width,o=e.height;let a=16384;const s=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&s.push(l),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024));const c=i.get(e);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),t.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=J,this.setupFrameBufferTexture=Y,this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===Q&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),Q=!0),t=t.texture),z(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===$&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),$=!0),t=t.texture),H(t,e)}}function no(t,e,n){const i=n.isWebGL2;return{convert:function(t){let n;if(1009===t)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(1012===t)return 5123;if(1013===t)return 5124;if(1014===t)return 5125;if(1015===t)return 5126;if(1016===t)return i?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(1021===t)return 6406;if(t===y)return 6407;if(1023===t)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(1026===t)return 6402;if(1027===t)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(33776===t||33777===t||33778===t||33779===t){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(33776===t)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===t)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===t)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===t)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===t||35841===t||35842===t||35843===t){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(35840===t)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===t)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===t)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===t)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((37492===t||37496===t)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(37492===t)return n.COMPRESSED_RGB8_ETC2;if(37496===t)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):36492===t?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):1020===t?i?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class io extends ln{constructor(t=[]){super(),this.cameras=t}}io.prototype.isArrayCamera=!0;class ro extends te{constructor(){super(),this.type="Group"}}ro.prototype.isGroup=!0;const oo={type:"move"};class ao{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ro,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ro,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ro,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(oo))),l&&t.hand){o=!0;for(const i of t.hand.values()){const t=e.getJointPose(i,n);if(void 0===l.joints[i.jointName]){const t=new ro;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[i.jointName]=t,l.add(t)}const r=l.joints[i.jointName];null!==t&&(r.matrix.fromArray(t.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.jointRadius=t.radius),r.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}}class so extends q{constructor(t,e,n,i,r,o,a,s,l,c){if(1026!==(c=void 0!==c?c:1026)&&1027!==c)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&1026===c&&(n=1012),void 0===n&&1027===c&&(n=1020),super(null,i,r,o,a,s,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:p,this.minFilter=void 0!==s?s:p,this.flipY=!1,this.generateMipmaps=!1}}so.prototype.isDepthTexture=!0;class lo extends M{constructor(t,e){super();const n=this;let i=null,r=1,o=null,a="local-floor";const s=t.extensions.has("WEBGL_multisampled_render_to_texture");let l=null,c=null,u=null,p=null,h=!1,d=null;const _=e.getContextAttributes();let f=null,m=null;const g=[],v=new Map,b=new ln;b.layers.enable(1),b.viewport=new Y;const x=new ln;x.layers.enable(2),x.viewport=new Y;const S=[b,x],w=new io;w.layers.enable(1),w.layers.enable(2);let M=null,T=null;function C(t){const e=v.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function E(){v.forEach((function(t,e){t.disconnect(e)})),v.clear(),M=null,T=null,t.setRenderTarget(f),p=null,u=null,c=null,i=null,m=null,I.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function A(t){const e=i.inputSources;for(let t=0;t<g.length;t++)v.set(e[t],g[t]);for(let e=0;e<t.removed.length;e++){const n=t.removed[e],i=v.get(n);i&&(i.dispatchEvent({type:"disconnected",data:n}),v.delete(n))}for(let e=0;e<t.added.length;e++){const n=t.added[e],i=v.get(n);i&&i.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=g[t];return void 0===e&&(e=new ao,g[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=g[t];return void 0===e&&(e=new ao,g[t]=e),e.getGripSpace()},this.getHand=function(t){let e=g[t];return void 0===e&&(e=new ao,g[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getBaseLayer=function(){return null!==u?u:p},this.getBinding=function(){return c},this.getFrame=function(){return d},this.getSession=function(){return i},this.setSession=async function(l){if(i=l,null!==i){if(f=t.getRenderTarget(),i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",E),i.addEventListener("inputsourceschange",A),!0!==_.xrCompatible&&await e.makeXRCompatible(),void 0===i.renderState.layers||!1===t.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||_.antialias,alpha:_.alpha,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:r};p=new XRWebGLLayer(i,e,n),i.updateRenderState({baseLayer:p}),m=new Z(p.framebufferWidth,p.framebufferHeight,{format:1023,type:1009,encoding:t.outputEncoding})}else{h=_.antialias;let n=null,o=null,a=null;_.depth&&(a=_.stencil?35056:33190,n=_.stencil?1027:1026,o=_.stencil?1020:1012);const l={colorFormat:_.alpha||h?32856:32849,depthFormat:a,scaleFactor:r};c=new XRWebGLBinding(i,e),u=c.createProjectionLayer(l),i.updateRenderState({layers:[u]}),m=h?new J(u.textureWidth,u.textureHeight,{format:1023,type:1009,depthTexture:new so(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:_.stencil,ignoreDepth:u.ignoreDepthValues,useRenderToTexture:s,encoding:t.outputEncoding}):new Z(u.textureWidth,u.textureHeight,{format:_.alpha?1023:y,type:1009,depthTexture:new so(u.textureWidth,u.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:_.stencil,ignoreDepth:u.ignoreDepthValues,encoding:t.outputEncoding})}this.setFoveation(1),o=await i.requestReferenceSpace(a),I.setContext(i),I.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const R=new Q,L=new Q;function P(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===i)return;w.near=x.near=b.near=t.near,w.far=x.far=b.far=t.far,M===w.near&&T===w.far||(i.updateRenderState({depthNear:w.near,depthFar:w.far}),M=w.near,T=w.far);const e=t.parent,n=w.cameras;P(w,e);for(let t=0;t<n.length;t++)P(n[t],e);w.matrixWorld.decompose(w.position,w.quaternion,w.scale),t.position.copy(w.position),t.quaternion.copy(w.quaternion),t.scale.copy(w.scale),t.matrix.copy(w.matrix),t.matrixWorld.copy(w.matrixWorld);const r=t.children;for(let t=0,e=r.length;t<e;t++)r[t].updateMatrixWorld(!0);2===n.length?function(t,e,n){R.setFromMatrixPosition(e.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=R.distanceTo(L),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],p=(o[8]+1)/o[0],h=a*u,d=a*p,_=i/(-u+p),f=_*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(_),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const m=a+_,y=s+_,g=h-f,v=d+(i-f),b=l*s/y*m,x=c*s/y*m;t.projectionMatrix.makePerspective(g,v,b,x,m,y)}(w,b,x):w.projectionMatrix.copy(b.projectionMatrix)},this.getCamera=function(){return w},this.getFoveation=function(){return null!==u?u.fixedFoveation:null!==p?p.fixedFoveation:void 0},this.setFoveation=function(t){null!==u&&(u.fixedFoveation=t),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=t)};let D=null;const I=new vn;I.setAnimationLoop((function(e,n){if(l=n.getViewerPose(o),d=n,null!==l){const e=l.views;null!==p&&(t.setRenderTargetFramebuffer(m,p.framebuffer),t.setRenderTarget(m));let n=!1;e.length!==w.cameras.length&&(w.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const r=e[i];let o=null;if(null!==p)o=p.getViewport(r);else{const e=c.getViewSubImage(u,r);o=e.viewport,0===i&&(t.setRenderTargetTextures(m,e.colorTexture,u.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(m))}const a=S[i];a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===i&&w.matrix.copy(a.matrix),!0===n&&w.cameras.push(a)}}const r=i.inputSources;for(let t=0;t<g.length;t++){const e=g[t],i=r[t];e.update(i,n,o)}D&&D(e,n),d=null})),this.setAnimationLoop=function(t){D=t},this.dispose=function(){}}}function co(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);const i=t.get(n).envMap;let r,o;i&&(e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&!1===i.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,o,a){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,a):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let r;e.map?r=e.map:e.alphaMap&&(r=e.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,o):i.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);let n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function uo(t={}){const e=void 0!==t.canvas?t.canvas:function(){const t=U("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,s=void 0===t.stencil||t.stencil,l=void 0!==t.antialias&&t.antialias,u=void 0===t.premultipliedAlpha||t.premultipliedAlpha,h=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,d=void 0!==t.powerPreference?t.powerPreference:"default",_=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let f=null,y=null;const g=[],v=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=3e3,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;const b=this;let x=!1,S=0,w=0,M=null,T=-1,C=null;const E=new Y,A=new Y;let R=null,L=e.width,P=e.height,D=1,I=null,k=null;const O=new Y(0,0,L,P),B=new Y(0,0,L,P);let j=!1;const F=[],N=new gn;let z=!1,H=!1,W=null;const G=new Rt,V=new Q,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function X(){return null===M?D:1}let K,$,tt,et,nt,it,rt,ot,at,st,lt,ct,ut,pt,ht,dt,_t,ft,mt,yt,gt,vt,bt,xt=n;function St(t,n){for(let i=0;i<t.length;i++){const r=t[i],o=e.getContext(r,n);if(null!==o)return o}return null}try{const t={alpha:i,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:h,powerPreference:d,failIfMajorPerformanceCaveat:_};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r136"),e.addEventListener("webglcontextlost",Tt,!1),e.addEventListener("webglcontextrestored",Ct,!1),null===xt){const e=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&e.shift(),xt=St(e,t),null===xt)throw St(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===xt.getShaderPrecisionFormat&&(xt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function wt(){K=new ei(xt),$=new An(xt,K,t),K.init($),vt=new no(xt,K,$),tt=new to(xt,K,$),F[0]=1029,et=new ri(xt),nt=new zr,it=new eo(xt,K,tt,nt,$,vt,et),rt=new Ln(b),ot=new ti(b),at=new bn(xt,$),bt=new Cn(xt,K,at,$),st=new ni(xt,at,et,bt),lt=new ui(xt,st,at,et),mt=new ci(xt,$,it),dt=new Rn(nt),ct=new Nr(b,rt,ot,K,$,bt,dt),ut=new co(nt),pt=new Gr,ht=new Jr(K,$),ft=new Tn(b,rt,tt,lt,u),_t=new $r(b,lt,$),yt=new En(xt,K,et,$),gt=new ii(xt,K,et,$),et.programs=ct.programs,b.capabilities=$,b.extensions=K,b.properties=nt,b.renderLists=pt,b.shadowMap=_t,b.state=tt,b.info=et}wt();const Mt=new lo(b,xt);function Tt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),x=!0}function Ct(){console.log("THREE.WebGLRenderer: Context Restored."),x=!1;const t=et.autoReset,e=_t.enabled,n=_t.autoUpdate,i=_t.needsUpdate,r=_t.type;wt(),et.autoReset=t,_t.enabled=e,_t.autoUpdate=n,_t.needsUpdate=i,_t.type=r}function Et(t){const e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){const e=nt.get(t).programs;void 0!==e&&(e.forEach((function(t){ct.releaseProgram(t)})),t.isShaderMaterial&&ct.releaseShaderCache(t))})(t),nt.remove(t)}(e)}this.xr=Mt,this.getContext=function(){return xt},this.getContextAttributes=function(){return xt.getContextAttributes()},this.forceContextLoss=function(){const t=K.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=K.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return D},this.setPixelRatio=function(t){void 0!==t&&(D=t,this.setSize(L,P,!1))},this.getSize=function(t){return t.set(L,P)},this.setSize=function(t,n,i){Mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=t,P=n,e.width=Math.floor(t*D),e.height=Math.floor(n*D),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(L*D,P*D).floor()},this.setDrawingBufferSize=function(t,n,i){L=t,P=n,D=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(E)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),tt.viewport(E.copy(O).multiplyScalar(D).floor())},this.getScissor=function(t){return t.copy(B)},this.setScissor=function(t,e,n,i){t.isVector4?B.set(t.x,t.y,t.z,t.w):B.set(t,e,n,i),tt.scissor(A.copy(B).multiplyScalar(D).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(t){tt.setScissorTest(j=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){k=t},this.getClearColor=function(t){return t.copy(ft.getClearColor())},this.setClearColor=function(){ft.setClearColor.apply(ft,arguments)},this.getClearAlpha=function(){return ft.getClearAlpha()},this.setClearAlpha=function(){ft.setClearAlpha.apply(ft,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),xt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Tt,!1),e.removeEventListener("webglcontextrestored",Ct,!1),pt.dispose(),ht.dispose(),nt.dispose(),rt.dispose(),ot.dispose(),lt.dispose(),bt.dispose(),ct.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",Lt),Mt.removeEventListener("sessionend",Pt),W&&(W.dispose(),W=null),Dt.stop()},this.renderBufferDirect=function(t,e,n,i,r,o){null===e&&(e=q);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=function(t,e,n,i,r){!0!==e.isScene&&(e=q);it.resetTextureUnits();const o=e.fog,a=i.isMeshStandardMaterial?e.environment:null,s=null===M?b.outputEncoding:M.texture.encoding,l=(i.isMeshStandardMaterial?ot:rt).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,p=!!n.morphAttributes.position,h=!!n.morphAttributes.normal,d=n.morphAttributes.position?n.morphAttributes.position.length:0,_=i.toneMapped?b.toneMapping:0,f=nt.get(i),m=y.state.lights;if(!0===z&&(!0===H||t!==C)){const e=t===C&&i.id===T;dt.setState(i,t,e)}let g=!1;i.version===f.__version?f.needsLights&&f.lightsStateVersion!==m.state.version||f.outputEncoding!==s||r.isInstancedMesh&&!1===f.instancing?g=!0:r.isInstancedMesh||!0!==f.instancing?r.isSkinnedMesh&&!1===f.skinning?g=!0:r.isSkinnedMesh||!0!==f.skinning?f.envMap!==l||i.fog&&f.fog!==o?g=!0:void 0===f.numClippingPlanes||f.numClippingPlanes===dt.numPlanes&&f.numIntersection===dt.numIntersection?(f.vertexAlphas!==c||f.vertexTangents!==u||f.morphTargets!==p||f.morphNormals!==h||f.toneMapping!==_||!0===$.isWebGL2&&f.morphTargetsCount!==d)&&(g=!0):g=!0:g=!0:g=!0:(g=!0,f.__version=i.version);let v=f.currentProgram;!0===g&&(v=Bt(i,e,r));let x=!1,S=!1,w=!1;const E=v.getUniforms(),A=f.uniforms;tt.useProgram(v.program)&&(x=!0,S=!0,w=!0);i.id!==T&&(T=i.id,S=!0);if(x||C!==t){if(E.setValue(xt,"projectionMatrix",t.projectionMatrix),$.logarithmicDepthBuffer&&E.setValue(xt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),C!==t&&(C=t,S=!0,w=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const e=E.map.cameraPosition;void 0!==e&&e.setValue(xt,V.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&E.setValue(xt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&E.setValue(xt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){E.setOptional(xt,r,"bindMatrix"),E.setOptional(xt,r,"bindMatrixInverse");const t=r.skeleton;t&&($.floatVertexTextures?(null===t.boneTexture&&t.computeBoneTexture(),E.setValue(xt,"boneTexture",t.boneTexture,it),E.setValue(xt,"boneTextureSize",t.boneTextureSize)):E.setOptional(xt,t,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||mt.update(r,n,i,v);(S||f.receiveShadow!==r.receiveShadow)&&(f.receiveShadow=r.receiveShadow,E.setValue(xt,"receiveShadow",r.receiveShadow));S&&(E.setValue(xt,"toneMappingExposure",b.toneMappingExposure),f.needsLights&&(L=w,(R=A).ambientLightColor.needsUpdate=L,R.lightProbe.needsUpdate=L,R.directionalLights.needsUpdate=L,R.directionalLightShadows.needsUpdate=L,R.pointLights.needsUpdate=L,R.pointLightShadows.needsUpdate=L,R.spotLights.needsUpdate=L,R.spotLightShadows.needsUpdate=L,R.rectAreaLights.needsUpdate=L,R.hemisphereLights.needsUpdate=L),o&&i.fog&&ut.refreshFogUniforms(A,o),ut.refreshMaterialUniforms(A,i,D,P,W),fr.upload(xt,f.uniformsList,A,it));var R,L;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(fr.upload(xt,f.uniformsList,A,it),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&E.setValue(xt,"center",r.center);return E.setValue(xt,"modelViewMatrix",r.modelViewMatrix),E.setValue(xt,"normalMatrix",r.normalMatrix),E.setValue(xt,"modelMatrix",r.matrixWorld),v}(t,e,n,i,r);tt.setMaterial(i,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,p=1;!0===i.wireframe&&(l=st.getWireframeAttribute(n),p=2),bt.setup(r,i,s,n,l);let h=yt;null!==l&&(u=at.get(l),h=gt,h.setIndex(u));const d=null!==l?l.count:c.count,_=n.drawRange.start*p,f=n.drawRange.count*p,m=null!==o?o.start*p:0,g=null!==o?o.count*p:1/0,v=Math.max(_,m),x=Math.min(d,_+f,m+g)-1,S=Math.max(0,x-v+1);if(0!==S){if(r.isMesh)!0===i.wireframe?(tt.setLineWidth(i.wireframeLinewidth*X()),h.setMode(1)):h.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),tt.setLineWidth(t*X()),r.isLineSegments?h.setMode(1):r.isLineLoop?h.setMode(2):h.setMode(3)}else r.isPoints?h.setMode(0):r.isSprite&&h.setMode(4);if(r.isInstancedMesh)h.renderInstances(v,S,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);h.renderInstances(v,S,t)}else h.render(v,S)}},this.compile=function(t,e){y=ht.get(t),y.init(),v.push(y),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(y.pushLight(t),t.castShadow&&y.pushShadow(t))})),y.setupLights(b.physicallyCorrectLights),t.traverse((function(e){const n=e.material;if(n)if(Array.isArray(n))for(let i=0;i<n.length;i++){Bt(n[i],t,e)}else Bt(n,t,e)})),v.pop(),y=null};let At=null;function Lt(){Dt.stop()}function Pt(){Dt.start()}const Dt=new vn;function It(t,e,n,i){const r=t.opaque,o=t.transmissive,a=t.transparent;y.setupLightsView(n),o.length>0&&function(t,e,n){if(null===W){const t=!0===l&&!0===$.isWebGL2;W=new(t?J:Z)(1024,1024,{generateMipmaps:!0,type:null!==vt.convert(1016)?1016:1009,minFilter:m,magFilter:p,wrapS:c,wrapT:c,useRenderToTexture:K.has("WEBGL_multisampled_render_to_texture")})}const i=b.getRenderTarget();b.setRenderTarget(W),b.clear();const r=b.toneMapping;b.toneMapping=0,kt(t,e,n),b.toneMapping=r,it.updateMultisampleRenderTarget(W),it.updateRenderTargetMipmap(W),b.setRenderTarget(i)}(r,e,n),i&&tt.viewport(E.copy(i)),r.length>0&&kt(r,e,n),o.length>0&&kt(o,e,n),a.length>0&&kt(a,e,n)}function kt(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=o.object,s=o.geometry,l=null===i?o.material:i,c=o.group;a.layers.test(n.layers)&&Ot(a,e,n,s,l,c)}}function Ot(t,e,n,i,r,s){t.onBeforeRender(b,e,n,i,r,s),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(b,e,n,i,t,s),!0===r.transparent&&r.side===a?(r.side=1,r.needsUpdate=!0,b.renderBufferDirect(n,e,i,r,t,s),r.side=o,r.needsUpdate=!0,b.renderBufferDirect(n,e,i,r,t,s),r.side=a):b.renderBufferDirect(n,e,i,r,t,s),t.onAfterRender(b,e,n,i,r,s)}function Bt(t,e,n){!0!==e.isScene&&(e=q);const i=nt.get(t),r=y.state.lights,o=y.state.shadowsArray,a=r.state.version,s=ct.getParameters(t,r.state,o,e,n),l=ct.getProgramCacheKey(s);let c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?ot:rt).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",Et),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return jt(t,s),u}else s.uniforms=ct.getUniforms(t),t.onBuild(n,s,b),t.onBeforeCompile(s,b),u=ct.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;const p=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(p.clippingPlanes=dt.uniform),jt(t,s),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(p.ambientLightColor.value=r.state.ambient,p.lightProbe.value=r.state.probe,p.directionalLights.value=r.state.directional,p.directionalLightShadows.value=r.state.directionalShadow,p.spotLights.value=r.state.spot,p.spotLightShadows.value=r.state.spotShadow,p.rectAreaLights.value=r.state.rectArea,p.ltc_1.value=r.state.rectAreaLTC1,p.ltc_2.value=r.state.rectAreaLTC2,p.pointLights.value=r.state.point,p.pointLightShadows.value=r.state.pointShadow,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);const h=u.getUniforms(),d=fr.seqWithValue(h.seq,p);return i.currentProgram=u,i.uniformsList=d,u}function jt(t,e){const n=nt.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Dt.setAnimationLoop((function(t){At&&At(t)})),"undefined"!=typeof window&&Dt.setContext(window),this.setAnimationLoop=function(t){At=t,Mt.setAnimationLoop(t),null===t?Dt.stop():Dt.start()},Mt.addEventListener("sessionstart",Lt),Mt.addEventListener("sessionend",Pt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===x)return;!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===Mt.enabled&&!0===Mt.isPresenting&&(!0===Mt.cameraAutoUpdate&&Mt.updateCamera(e),e=Mt.getCamera()),!0===t.isScene&&t.onBeforeRender(b,t,e,M),y=ht.get(t,v.length),y.init(),v.push(y),G.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),N.setFromProjectionMatrix(G),H=this.localClippingEnabled,z=dt.init(this.clippingPlanes,H,e),f=pt.get(t,g.length),f.init(),g.push(f),function t(e,n,i,r){if(!1===e.visible)return;if(e.layers.test(n.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)y.pushLight(e),e.castShadow&&y.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||N.intersectsSprite(e)){r&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=lt.update(e),n=e.material;n.visible&&f.push(e,t,n,i,V.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==et.render.frame&&(e.skeleton.update(),e.skeleton.frame=et.render.frame),!e.frustumCulled||N.intersectsObject(e))){r&&V.setFromMatrixPosition(e.matrixWorld).applyMatrix4(G);const t=lt.update(e),n=e.material;if(Array.isArray(n)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=n[a.materialIndex];s&&s.visible&&f.push(e,t,s,i,V.z,a)}}else n.visible&&f.push(e,t,n,i,V.z,null)}const o=e.children;for(let e=0,a=o.length;e<a;e++)t(o[e],n,i,r)}(t,e,0,b.sortObjects),f.finish(),!0===b.sortObjects&&f.sort(I,k),!0===z&&dt.beginShadows();const n=y.state.shadowsArray;if(_t.render(n,t,e),!0===z&&dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),ft.render(f,t),y.setupLights(b.physicallyCorrectLights),e.isArrayCamera){const n=e.cameras;for(let e=0,i=n.length;e<i;e++){const i=n[e];It(f,t,i,i.viewport)}}else It(f,t,e);null!==M&&(it.updateMultisampleRenderTarget(M),it.updateRenderTargetMipmap(M)),!0===t.isScene&&t.onAfterRender(b,t,e),tt.buffers.depth.setTest(!0),tt.buffers.depth.setMask(!0),tt.buffers.color.setMask(!0),tt.setPolygonOffset(!1),bt.resetDefaultState(),T=-1,C=null,v.pop(),y=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(t,e,n){nt.get(t.texture).__webglTexture=e,nt.get(t.depthTexture).__webglTexture=n;const i=nt.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){const n=nt.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t,e=0,n=0){M=t,S=e,w=n;let i=!0;if(t){const e=nt.get(t);void 0!==e.__useDefaultFramebuffer?(tt.bindFramebuffer(36160,null),i=!1):void 0===e.__webglFramebuffer?it.setupRenderTarget(t):e.__hasExternalTextures&&it.rebindTextures(t,nt.get(t.texture).__webglTexture,nt.get(t.depthTexture).__webglTexture)}let r=null,o=!1,a=!1;if(t){const n=t.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(a=!0);const i=nt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=i[e],o=!0):r=t.useRenderbuffer?nt.get(t).__webglMultisampledFramebuffer:i,E.copy(t.viewport),A.copy(t.scissor),R=t.scissorTest}else E.copy(O).multiplyScalar(D).floor(),A.copy(B).multiplyScalar(D).floor(),R=j;if(tt.bindFramebuffer(36160,r)&&$.drawBuffers&&i){let e=!1;if(t)if(t.isWebGLMultipleRenderTargets){const n=t.texture;if(F.length!==n.length||36064!==F[0]){for(let t=0,e=n.length;t<e;t++)F[t]=36064+t;F.length=n.length,e=!0}}else 1===F.length&&36064===F[0]||(F[0]=36064,F.length=1,e=!0);else 1===F.length&&1029===F[0]||(F[0]=1029,F.length=1,e=!0);e&&($.isWebGL2?xt.drawBuffers(F):K.get("WEBGL_draw_buffers").drawBuffersWEBGL(F))}if(tt.viewport(E),tt.scissor(A),tt.setScissorTest(R),o){const i=nt.get(t.texture);xt.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}else if(a){const i=nt.get(t.texture),r=e||0;xt.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}T=-1},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=nt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){tt.bindFramebuffer(36160,s);try{const a=t.texture,s=a.format,l=a.type;if(1023!==s&&vt.convert(s)!==xt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=1016===l&&(K.has("EXT_color_buffer_half_float")||$.isWebGL2&&K.has("EXT_color_buffer_float"));if(!(1009===l||vt.convert(l)===xt.getParameter(35738)||1015===l&&($.isWebGL2||K.has("OES_texture_float")||K.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===xt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&xt.readPixels(e,n,i,r,vt.convert(s),vt.convert(l),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const t=null!==M?nt.get(M).__webglFramebuffer:null;tt.bindFramebuffer(36160,t)}}},this.copyFramebufferToTexture=function(t,e,n=0){if(!0!==e.isFramebufferTexture)return void console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.");const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i);it.setTexture2D(e,0),xt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,r,o),tt.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,o=e.image.height,a=vt.convert(n.format),s=vt.convert(n.type);it.setTexture2D(n,0),xt.pixelStorei(37440,n.flipY),xt.pixelStorei(37441,n.premultiplyAlpha),xt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?xt.texSubImage2D(3553,i,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?xt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):xt.texSubImage2D(3553,i,t.x,t.y,a,s,e.image),0===i&&n.generateMipmaps&&xt.generateMipmap(3553),tt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i,r=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=t.max.x-t.min.x+1,a=t.max.y-t.min.y+1,s=t.max.z-t.min.z+1,l=vt.convert(i.format),c=vt.convert(i.type);let u;if(i.isDataTexture3D)it.setTexture3D(i,0),u=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");it.setTexture2DArray(i,0),u=35866}xt.pixelStorei(37440,i.flipY),xt.pixelStorei(37441,i.premultiplyAlpha),xt.pixelStorei(3317,i.unpackAlignment);const p=xt.getParameter(3314),h=xt.getParameter(32878),d=xt.getParameter(3316),_=xt.getParameter(3315),f=xt.getParameter(32877),m=n.isCompressedTexture?n.mipmaps[0]:n.image;xt.pixelStorei(3314,m.width),xt.pixelStorei(32878,m.height),xt.pixelStorei(3316,t.min.x),xt.pixelStorei(3315,t.min.y),xt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?xt.texSubImage3D(u,r,e.x,e.y,e.z,o,a,s,l,c,m.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),xt.compressedTexSubImage3D(u,r,e.x,e.y,e.z,o,a,s,l,m.data)):xt.texSubImage3D(u,r,e.x,e.y,e.z,o,a,s,l,c,m),xt.pixelStorei(3314,p),xt.pixelStorei(32878,h),xt.pixelStorei(3316,d),xt.pixelStorei(3315,_),xt.pixelStorei(32877,f),0===r&&i.generateMipmaps&&xt.generateMipmap(u),tt.unbindTexture()},this.initTexture=function(t){it.setTexture2D(t,0),tt.unbindTexture()},this.resetState=function(){S=0,w=0,M=null,tt.reset(),bt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}uo.prototype.isWebGLRenderer=!0;(class extends uo{}).prototype.isWebGL1Renderer=!0;class po{constructor(t,e=25e-5){this.name="",this.color=new be(t),this.density=e}clone(){return new po(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}po.prototype.isFogExp2=!0;class ho{constructor(t,e=1,n=1e3){this.name="",this.color=new be(t),this.near=e,this.far=n}clone(){return new ho(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}ho.prototype.isFog=!0;class _o extends te{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}_o.prototype.isScene=!0;class fo{constructor(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=R()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=R()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=R()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}fo.prototype.isInterleavedBuffer=!0;const mo=new Q;class yo{constructor(t,e,n,i=!1){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)mo.x=this.getX(e),mo.y=this.getY(e),mo.z=this.getZ(e),mo.applyMatrix4(t),this.setXYZ(e,mo.x,mo.y,mo.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)mo.x=this.getX(e),mo.y=this.getY(e),mo.z=this.getZ(e),mo.applyNormalMatrix(t),this.setXYZ(e,mo.x,mo.y,mo.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)mo.x=this.getX(e),mo.y=this.getY(e),mo.z=this.getZ(e),mo.transformDirection(t),this.setXYZ(e,mo.x,mo.y,mo.z);return this}setX(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}setXYZW(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Me(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new yo(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}yo.prototype.isInterleavedBufferAttribute=!0;class go extends de{constructor(t){super(),this.type="SpriteMaterial",this.color=new be(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}let vo;go.prototype.isSpriteMaterial=!0;const bo=new Q,xo=new Q,So=new Q,wo=new j,Mo=new j,To=new Rt,Co=new Q,Eo=new Q,Ao=new Q,Ro=new j,Lo=new j,Po=new j;class Do extends te{constructor(t){if(super(),this.type="Sprite",void 0===vo){vo=new Oe;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new fo(t,5);vo.setIndex([0,1,2,0,2,3]),vo.setAttribute("position",new yo(e,3,0,!1)),vo.setAttribute("uv",new yo(e,2,3,!1))}this.geometry=vo,this.material=void 0!==t?t:new go,this.center=new j(.5,.5)}raycast(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),xo.setFromMatrixScale(this.matrixWorld),To.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),So.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&xo.multiplyScalar(-So.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Io(Co.set(-.5,-.5,0),So,o,xo,i,r),Io(Eo.set(.5,-.5,0),So,o,xo,i,r),Io(Ao.set(.5,.5,0),So,o,xo,i,r),Ro.set(0,0),Lo.set(1,0),Po.set(1,1);let a=t.ray.intersectTriangle(Co,Eo,Ao,!1,bo);if(null===a&&(Io(Eo.set(-.5,.5,0),So,o,xo,i,r),Lo.set(0,1),a=t.ray.intersectTriangle(Co,Ao,Eo,!1,bo),null===a))return;const s=t.ray.origin.distanceTo(bo);s<t.near||s>t.far||e.push({distance:s,point:bo.clone(),uv:pe.getUV(bo,Co,Eo,Ao,Ro,Lo,Po,new j),face:null,object:this})}copy(t){return super.copy(t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}function Io(t,e,n,i,r,o){wo.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(Mo.x=o*wo.x-r*wo.y,Mo.y=r*wo.x+o*wo.y):Mo.copy(wo),t.copy(e),t.x+=Mo.x,t.y+=Mo.y,t.applyMatrix4(To)}Do.prototype.isSprite=!0;const ko=new Q,Oo=new Q;class Bo extends te{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(t){super.copy(t,!1);const e=t.levels;for(let t=0,n=e.length;t<n;t++){const n=e[t];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=t.autoUpdate,this}addLevel(t,e=0){e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null}raycast(t,e){if(this.levels.length>0){ko.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(ko);this.getObjectForDistance(n).raycast(t,e)}}update(t){const e=this.levels;if(e.length>1){ko.setFromMatrixPosition(t.matrixWorld),Oo.setFromMatrixPosition(this.matrixWorld);const n=ko.distanceTo(Oo)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r&&n>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}}toJSON(t){const e=super.toJSON(t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let t=0,i=n.length;t<i;t++){const i=n[t];e.object.levels.push({object:i.object.uuid,distance:i.distance})}return e}}const jo=new Q,Fo=new Y,No=new Y,zo=new Q,Ho=new Rt;class Uo extends $e{constructor(t,e){super(t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt}copy(t){return super.copy(t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Y,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,e){const n=this.skeleton,i=this.geometry;Fo.fromBufferAttribute(i.attributes.skinIndex,t),No.fromBufferAttribute(i.attributes.skinWeight,t),jo.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let t=0;t<4;t++){const i=No.getComponent(t);if(0!==i){const r=Fo.getComponent(t);Ho.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),e.addScaledVector(zo.copy(jo).applyMatrix4(Ho),i)}}return e.applyMatrix4(this.bindMatrixInverse)}}Uo.prototype.isSkinnedMesh=!0;class Wo extends te{constructor(){super(),this.type="Bone"}}Wo.prototype.isBone=!0;class Go extends q{constructor(t=null,e=1,n=1,i,r,o,a,s,l=p,c=p,u,h){super(null,o,a,s,l,c,i,r,u,h),this.image={data:t,width:e,height:n},this.magFilter=l,this.minFilter=c,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}Go.prototype.isDataTexture=!0;const Vo=new Rt,qo=new Rt;class Xo{constructor(t=[],e=[]){this.uuid=R(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Rt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Rt;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let i=0,r=t.length;i<r;i++){const r=t[i]?t[i].matrixWorld:qo;Vo.multiplyMatrices(r,e[i]),Vo.toArray(n,16*i)}null!==i&&(i.needsUpdate=!0)}clone(){return new Xo(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=k(t),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new Go(e,t,t,1023,1015);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Wo),this.bones.push(r),this.boneInverses.push((new Rt).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const o=n[i];t.boneInverses.push(o.toArray())}return t}}class Yo extends Me{constructor(t,e,n,i=1){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(t,e,n),this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}Yo.prototype.isInstancedBufferAttribute=!0;const Zo=new Rt,Jo=new Rt,Ko=[],Qo=new $e;class $o extends $e{constructor(t,e,n){super(t,e),this.instanceMatrix=new Yo(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(t){return super.copy(t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}raycast(t,e){const n=this.matrixWorld,i=this.count;if(Qo.geometry=this.geometry,Qo.material=this.material,void 0!==Qo.material)for(let r=0;r<i;r++){this.getMatrixAt(r,Zo),Jo.multiplyMatrices(n,Zo),Qo.matrixWorld=Jo,Qo.raycast(t,Ko);for(let t=0,n=Ko.length;t<n;t++){const n=Ko[t];n.instanceId=r,n.object=this,e.push(n)}Ko.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Yo(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}$o.prototype.isInstancedMesh=!0;class ta extends de{constructor(t){super(),this.type="LineBasicMaterial",this.color=new be(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}ta.prototype.isLineBasicMaterial=!0;const ea=new Q,na=new Q,ia=new Rt,ra=new At,oa=new bt;class aa extends te{constructor(t=new Oe,e=new ta){super(),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)ea.fromBufferAttribute(e,t-1),na.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=ea.distanceTo(na);t.setAttribute("lineDistance",new Ee(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),oa.copy(n.boundingSphere),oa.applyMatrix4(i),oa.radius+=r,!1===t.ray.intersectsSphere(oa))return;ia.copy(i).invert(),ra.copy(t.ray).applyMatrix4(ia);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Q,c=new Q,u=new Q,p=new Q,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),a=Math.min(i.count,o.start+o.count)-1;n<a;n+=h){const o=i.getX(n),a=i.getX(n+1);l.fromBufferAttribute(r,o),c.fromBufferAttribute(r,a);if(ra.distanceSqToSegment(l,c,p,u)>s)continue;p.applyMatrix4(this.matrixWorld);const h=t.ray.origin.distanceTo(p);h<t.near||h>t.far||e.push({distance:h,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),i=Math.min(r.count,o.start+o.count)-1;n<i;n+=h){l.fromBufferAttribute(r,n),c.fromBufferAttribute(r,n+1);if(ra.distanceSqToSegment(l,c,p,u)>s)continue;p.applyMatrix4(this.matrixWorld);const i=t.ray.origin.distanceTo(p);i<t.near||i>t.far||e.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}aa.prototype.isLine=!0;const sa=new Q,la=new Q;class ca extends aa{constructor(t,e){super(t,e),this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)sa.fromBufferAttribute(e,t),la.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+sa.distanceTo(la);t.setAttribute("lineDistance",new Ee(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}ca.prototype.isLineSegments=!0;class ua extends aa{constructor(t,e){super(t,e),this.type="LineLoop"}}ua.prototype.isLineLoop=!0;class pa extends de{constructor(t){super(),this.type="PointsMaterial",this.color=new be(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}pa.prototype.isPointsMaterial=!0;const ha=new Rt,da=new At,_a=new bt,fa=new Q;class ma extends te{constructor(t=new Oe,e=new pa){super(),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t){return super.copy(t),this.material=t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_a.copy(n.boundingSphere),_a.applyMatrix4(i),_a.radius+=r,!1===t.ray.intersectsSphere(_a))return;ha.copy(i).invert(),da.copy(t.ray).applyMatrix4(ha);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),l=Math.min(r.count,o.start+o.count);n<l;n++){const o=r.getX(n);fa.fromBufferAttribute(a,o),ya(fa,o,s,i,t,e,this)}}else{for(let n=Math.max(0,o.start),r=Math.min(a.count,o.start+o.count);n<r;n++)fa.fromBufferAttribute(a,n),ya(fa,n,s,i,t,e,this)}}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function ya(t,e,n,i,r,o,a){const s=da.distanceSqToPoint(t);if(s<n){const n=new Q;da.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}ma.prototype.isPoints=!0;(class extends q{constructor(t,e,n,i,r,o,a,s,l){super(t,e,n,i,r,o,a,s,l),this.format=void 0!==a?a:y,this.minFilter=void 0!==o?o:_,this.magFilter=void 0!==r?r:_,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){c.needsUpdate=!0,t.requestVideoFrameCallback(e)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}).prototype.isVideoTexture=!0;(class extends q{constructor(t,e,n){super({width:t,height:e}),this.format=n,this.magFilter=p,this.minFilter=p,this.generateMipmaps=!1,this.needsUpdate=!0}}).prototype.isFramebufferTexture=!0;class ga extends q{constructor(t,e,n,i,r,o,a,s,l,c,u,p){super(null,o,a,s,l,c,i,r,u,p),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}ga.prototype.isCompressedTexture=!0;(class extends q{constructor(t,e,n,i,r,o,a,s,l){super(t,e,n,i,r,o,a,s,l),this.needsUpdate=!0}}).prototype.isCanvasTexture=!0;class va extends Oe{constructor(t=1,e=8,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],o=[],a=[],s=[],l=new Q,c=new j;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let r=0,u=3;r<=e;r++,u+=3){const p=n+r/e*i;l.x=t*Math.cos(p),l.y=t*Math.sin(p),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[u]/t+1)/2,c.y=(o[u+1]/t+1)/2,s.push(c.x,c.y)}for(let t=1;t<=e;t++)r.push(t,t+1,0);this.setIndex(r),this.setAttribute("position",new Ee(o,3)),this.setAttribute("normal",new Ee(a,3)),this.setAttribute("uv",new Ee(s,2))}static fromJSON(t){return new va(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class ba extends Oe{constructor(t=1,e=1,n=1,i=8,r=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],p=[],h=[];let d=0;const _=[],f=n/2;let m=0;function y(n){const r=d,o=new j,_=new Q;let y=0;const g=!0===n?t:e,v=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,f*v,0),p.push(0,v,0),h.push(.5,.5),d++;const b=d;for(let t=0;t<=i;t++){const e=t/i*s+a,n=Math.cos(e),r=Math.sin(e);_.x=g*r,_.y=f*v,_.z=g*n,u.push(_.x,_.y,_.z),p.push(0,v,0),o.x=.5*n+.5,o.y=.5*r*v+.5,h.push(o.x,o.y),d++}for(let t=0;t<i;t++){const e=r+t,i=b+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),y+=3}l.addGroup(m,y,!0===n?1:2),m+=y}!function(){const o=new Q,y=new Q;let g=0;const v=(e-t)/n;for(let l=0;l<=r;l++){const c=[],m=l/r,g=m*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*s+a,l=Math.sin(r),_=Math.cos(r);y.x=g*l,y.y=-m*n+f,y.z=g*_,u.push(y.x,y.y,y.z),o.set(l,v,_).normalize(),p.push(o.x,o.y,o.z),h.push(e,1-m),c.push(d++)}_.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=_[e][t],i=_[e+1][t],r=_[e+1][t+1],o=_[e][t+1];c.push(n,i,o),c.push(i,r,o),g+=6}l.addGroup(m,g,0),m+=g}(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Ee(u,3)),this.setAttribute("normal",new Ee(p,3)),this.setAttribute("uv",new Ee(h,2))}static fromJSON(t){return new ba(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class xa extends ba{constructor(t=1,e=1,n=8,i=1,r=!1,o=0,a=2*Math.PI){super(0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}static fromJSON(t){return new xa(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Sa extends Oe{constructor(t=[],e=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],o=[];function a(t,e,n,i){const r=i+1,o=[];for(let i=0;i<=r;i++){o[i]=[];const a=t.clone().lerp(n,i/r),s=e.clone().lerp(n,i/r),l=r-i;for(let t=0;t<=l;t++)o[i][t]=0===t&&i===r?a:a.clone().lerp(s,t/l)}for(let t=0;t<r;t++)for(let e=0;e<2*(r-t)-1;e++){const n=Math.floor(e/2);e%2==0?(s(o[t][n+1]),s(o[t+1][n]),s(o[t][n])):(s(o[t][n+1]),s(o[t+1][n+1]),s(o[t+1][n]))}}function s(t){r.push(t.x,t.y,t.z)}function l(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function c(t,e,n,i){i<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=i/2/Math.PI+.5)}function u(t){return Math.atan2(t.z,-t.x)}!function(t){const n=new Q,i=new Q,r=new Q;for(let o=0;o<e.length;o+=3)l(e[o+0],n),l(e[o+1],i),l(e[o+2],r),a(n,i,r,t)}(i),function(t){const e=new Q;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}(n),function(){const t=new Q;for(let n=0;n<r.length;n+=3){t.x=r[n+0],t.y=r[n+1],t.z=r[n+2];const i=u(t)/2/Math.PI+.5,a=(e=t,Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5);o.push(i,1-a)}var e;(function(){const t=new Q,e=new Q,n=new Q,i=new Q,a=new j,s=new j,l=new j;for(let p=0,h=0;p<r.length;p+=9,h+=6){t.set(r[p+0],r[p+1],r[p+2]),e.set(r[p+3],r[p+4],r[p+5]),n.set(r[p+6],r[p+7],r[p+8]),a.set(o[h+0],o[h+1]),s.set(o[h+2],o[h+3]),l.set(o[h+4],o[h+5]),i.copy(t).add(e).add(n).divideScalar(3);const d=u(i);c(a,h+0,t,d),c(s,h+2,e,d),c(l,h+4,n,d)}})(),function(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],i=o[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Ee(r,3)),this.setAttribute("normal",new Ee(r.slice(),3)),this.setAttribute("uv",new Ee(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(t){return new Sa(t.vertices,t.indices,t.radius,t.details)}}class wa extends Sa{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new wa(t.radius,t.detail)}}const Ma=new Q,Ta=new Q,Ca=new Q,Ea=new pe;class Aa extends Oe{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const n=4,i=Math.pow(10,n),r=Math.cos(E*e),o=t.getIndex(),a=t.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),p={},h=[];for(let t=0;t<s;t+=3){o?(l[0]=o.getX(t),l[1]=o.getX(t+1),l[2]=o.getX(t+2)):(l[0]=t,l[1]=t+1,l[2]=t+2);const{a:e,b:n,c:s}=Ea;if(e.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),Ea.getNormal(Ca),u[0]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,u[1]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,u[2]=`${Math.round(s.x*i)},${Math.round(s.y*i)},${Math.round(s.z*i)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let t=0;t<3;t++){const e=(t+1)%3,n=u[t],i=u[e],o=Ea[c[t]],a=Ea[c[e]],s=`${n}_${i}`,d=`${i}_${n}`;d in p&&p[d]?(Ca.dot(p[d].normal)<=r&&(h.push(o.x,o.y,o.z),h.push(a.x,a.y,a.z)),p[d]=null):s in p||(p[s]={index0:l[t],index1:l[e],normal:Ca.clone()})}}for(const t in p)if(p[t]){const{index0:e,index1:n}=p[t];Ma.fromBufferAttribute(a,e),Ta.fromBufferAttribute(a,n),h.push(Ma.x,Ma.y,Ma.z),h.push(Ta.x,Ta.y,Ta.z)}this.setAttribute("position",new Ee(h,3))}}}class Ra{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let i=0;const r=n.length;let o;o=e||t*n[r-1];let a,s=0,l=r-1;for(;s<=l;)if(i=Math.floor(s+(l-s)/2),a=n[i]-o,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i];return(i+(o-c)/(n[i+1]-c))/(r-1)}getTangent(t,e){let n=t-1e-4,i=t+1e-4;n<0&&(n=0),i>1&&(i=1);const r=this.getPoint(n),o=this.getPoint(i),a=e||(r.isVector2?new j:new Q);return a.copy(o).sub(r).normalize(),a}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new Q,i=[],r=[],o=[],a=new Q,s=new Rt;for(let e=0;e<=t;e++){const n=e/t;i[e]=this.getTangentAt(n,new Q)}r[0]=new Q,o[0]=new Q;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),p=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),p<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let e=1;e<=t;e++){if(r[e]=r[e-1].clone(),o[e]=o[e-1].clone(),a.crossVectors(i[e-1],i[e]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(L(i[e-1].dot(i[e]),-1,1));r[e].applyMatrix4(s.makeRotationAxis(a,t))}o[e].crossVectors(i[e],r[e])}if(!0===e){let e=Math.acos(L(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],e*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class La extends Ra{constructor(t=0,e=0,n=1,i=1,r=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(t,e){const n=e||new j,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,i=l-this.aY;s=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(s,l)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}La.prototype.isEllipseCurve=!0;class Pa extends La{constructor(t,e,n,i,r,o){super(t,e,n,n,i,r,o),this.type="ArcCurve"}}function Da(){let t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){let l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+s)+(i-n)/s;l*=a,c*=a,r(e,n,l,c)},calc:function(r){const o=r*r;return t+e*r+n*o+i*(o*r)}}}Pa.prototype.isArcCurve=!0;const Ia=new Q,ka=new Da,Oa=new Da,Ba=new Da;class ja extends Ra{constructor(t=[],e=!1,n="centripetal",i=.5){super(),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}getPoint(t,e=new Q){const n=e,i=this.points,r=i.length,o=(r-(this.closed?0:1))*t;let a,s,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Ia.subVectors(i[0],i[1]).add(i[0]),a=Ia);const u=i[l%r],p=i[(l+1)%r];if(this.closed||l+2<r?s=i[(l+2)%r]:(Ia.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=Ia),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(p),t),i=Math.pow(p.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),ka.initNonuniformCatmullRom(a.x,u.x,p.x,s.x,e,n,i),Oa.initNonuniformCatmullRom(a.y,u.y,p.y,s.y,e,n,i),Ba.initNonuniformCatmullRom(a.z,u.z,p.z,s.z,e,n,i)}else"catmullrom"===this.curveType&&(ka.initCatmullRom(a.x,u.x,p.x,s.x,this.tension),Oa.initCatmullRom(a.y,u.y,p.y,s.y,this.tension),Ba.initCatmullRom(a.z,u.z,p.z,s.z,this.tension));return n.set(ka.calc(c),Oa.calc(c),Ba.calc(c)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Q).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}function Fa(t,e,n,i,r){const o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function Na(t,e,n,i){return function(t,e){const n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function za(t,e,n,i,r){return function(t,e){const n=1-t;return n*n*n*e}(t,e)+function(t,e){const n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}ja.prototype.isCatmullRomCurve3=!0;class Ha extends Ra{constructor(t=new j,e=new j,n=new j,i=new j){super(),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new j){const n=e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(za(t,i.x,r.x,o.x,a.x),za(t,i.y,r.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Ha.prototype.isCubicBezierCurve=!0;class Ua extends Ra{constructor(t=new Q,e=new Q,n=new Q,i=new Q){super(),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}getPoint(t,e=new Q){const n=e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(za(t,i.x,r.x,o.x,a.x),za(t,i.y,r.y,o.y,a.y),za(t,i.z,r.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}Ua.prototype.isCubicBezierCurve3=!0;class Wa extends Ra{constructor(t=new j,e=new j){super(),this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new j){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e){const n=e||new j;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Wa.prototype.isLineCurve=!0;class Ga extends Ra{constructor(t=new j,e=new j,n=new j){super(),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new j){const n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Na(t,i.x,r.x,o.x),Na(t,i.y,r.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Ga.prototype.isQuadraticBezierCurve=!0;class Va extends Ra{constructor(t=new Q,e=new Q,n=new Q){super(),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new Q){const n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Na(t,i.x,r.x,o.x),Na(t,i.y,r.y,o.y),Na(t,i.z,r.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}Va.prototype.isQuadraticBezierCurve3=!0;class qa extends Ra{constructor(t=[]){super(),this.type="SplineCurve",this.points=t}getPoint(t,e=new j){const n=e,i=this.points,r=(i.length-1)*t,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Fa(a,s.x,l.x,c.x,u.x),Fa(a,s.y,l.y,c.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new j).fromArray(n))}return this}}qa.prototype.isSplineCurve=!0;var Xa=Object.freeze({__proto__:null,ArcCurve:Pa,CatmullRomCurve3:ja,CubicBezierCurve:Ha,CubicBezierCurve3:Ua,EllipseCurve:La,LineCurve:Wa,LineCurve3:class extends Ra{constructor(t=new Q,e=new Q){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=t,this.v2=e}getPoint(t,e=new Q){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:Ga,QuadraticBezierCurve3:Va,SplineCurve:qa});class Ya extends Ra{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Wa(e,t))}getPoint(t,e){const n=t*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const t=i[r]-n,o=this.curves[r],a=o.getLength(),s=0===a?0:1-t/a;return o.getPointAt(s,e)}r++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const i=s[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Xa[n.type]).fromJSON(n))}return this}}class Za extends Ya{constructor(t){super(),this.type="Path",this.currentPoint=new j,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new Wa(this.currentPoint.clone(),new j(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,i){const r=new Ga(this.currentPoint.clone(),new j(t,e),new j(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(t,e,n,i,r,o){const a=new Ha(this.currentPoint.clone(),new j(t,e),new j(n,i),new j(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new qa(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,i,r,o),this}absarc(t,e,n,i,r,o){return this.absellipse(t,e,n,n,i,r,o),this}ellipse(t,e,n,i,r,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,o,a,s),this}absellipse(t,e,n,i,r,o,a,s){const l=new La(t,e,n,i,r,o,a,s);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Ja extends Za{constructor(t){super(t),this.uuid=R(),this.type="Shape",this.holes=[]}getPointsHoles(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}extractPoints(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}copy(t){super.copy(t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this}toJSON(){const t=super.toJSON();t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t}fromJSON(t){super.fromJSON(t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new Za).fromJSON(n))}return this}}const Ka=function(t,e,n=2){const i=e&&e.length,r=i?e[0]*n:t.length;let o=Qa(t,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,p,h,d;if(i&&(o=function(t,e,n,i){const r=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;o++)s=e[o]*i,l=o<a-1?e[o+1]*i:t.length,c=Qa(t,s,l,i,!1),c===c.next&&(c.steiner=!0),r.push(cs(c));for(r.sort(os),o=0;o<r.length;o++)as(r[o],n),n=$a(n,n.next);return n}(t,e,o,n)),t.length>80*n){s=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)p=t[e],h=t[e+1],p<s&&(s=p),h<l&&(l=h),p>c&&(c=p),h>u&&(u=h);d=Math.max(c-s,u-l),d=0!==d?1/d:0}return ts(o,a,n,s,l,d),a};function Qa(t,e,n,i,r){let o,a;if(r===function(t,e,n,i){let r=0;for(let o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,n,i)>0)for(o=e;o<n;o+=i)a=vs(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=vs(o,t[o],t[o+1],a);return a&&ds(a,a.next)&&(bs(a),a=a.next),a}function $a(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!ds(i,i.next)&&0!==hs(i.prev,i,i.next))i=i.next;else{if(bs(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function ts(t,e,n,i,r,o,a){if(!t)return;!a&&o&&function(t,e,n,i){let r=t;do{null===r.z&&(r.z=ls(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){let e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ,i);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,o);let s,l,c=t;for(;t.prev!==t.next;)if(s=t.prev,l=t.next,o?ns(t,i,r,o):es(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),bs(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?ts(t=is($a(t),e,n),e,n,i,r,o,2):2===a&&rs(t,e,n,i,r,o):ts($a(t),e,n,i,r,o,1);break}}function es(t){const e=t.prev,n=t,i=t.next;if(hs(e,n,i)>=0)return!1;let r=t.next.next;for(;r!==t.prev;){if(us(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&hs(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function ns(t,e,n,i){const r=t.prev,o=t,a=t.next;if(hs(r,o,a)>=0)return!1;const s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,p=ls(s,l,e,n,i),h=ls(c,u,e,n,i);let d=t.prevZ,_=t.nextZ;for(;d&&d.z>=p&&_&&_.z<=h;){if(d!==t.prev&&d!==t.next&&us(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&hs(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,_!==t.prev&&_!==t.next&&us(r.x,r.y,o.x,o.y,a.x,a.y,_.x,_.y)&&hs(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&us(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&hs(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;_&&_.z<=h;){if(_!==t.prev&&_!==t.next&&us(r.x,r.y,o.x,o.y,a.x,a.y,_.x,_.y)&&hs(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function is(t,e,n){let i=t;do{const r=i.prev,o=i.next.next;!ds(r,o)&&_s(r,i,i.next,o)&&ys(r,o)&&ys(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),bs(i),bs(i.next),i=t=o),i=i.next}while(i!==t);return $a(i)}function rs(t,e,n,i,r,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.i!==t.i&&ps(a,t)){let s=gs(a,t);return a=$a(a,a.next),s=$a(s,s.next),ts(a,e,n,i,r,o),void ts(s,e,n,i,r,o)}t=t.next}a=a.next}while(a!==t)}function os(t,e){return t.x-e.x}function as(t,e){if(e=function(t,e){let n=e;const i=t.x,r=t.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>a){if(a=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o;const s=o,l=o.x,c=o.y;let u,p=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&us(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),ys(n,t)&&(u<p||u===p&&(n.x>o.x||n.x===o.x&&ss(o,n)))&&(o=n,p=u)),n=n.next}while(n!==s);return o}(t,e)){const n=gs(e,t);$a(e,e.next),$a(n,n.next)}}function ss(t,e){return hs(t.prev,t,e.prev)<0&&hs(e.next,t,t.next)<0}function ls(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function cs(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function us(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function ps(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_s(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ys(t,e)&&ys(e,t)&&function(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(hs(t.prev,t,e.prev)||hs(t,e.prev,e))||ds(t,e)&&hs(t.prev,t,t.next)>0&&hs(e.prev,e,e.next)>0)}function hs(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ds(t,e){return t.x===e.x&&t.y===e.y}function _s(t,e,n,i){const r=ms(hs(t,e,n)),o=ms(hs(t,e,i)),a=ms(hs(n,i,t)),s=ms(hs(n,i,e));return r!==o&&a!==s||(!(0!==r||!fs(t,n,e))||(!(0!==o||!fs(t,i,e))||(!(0!==a||!fs(n,t,i))||!(0!==s||!fs(n,e,i)))))}function fs(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ms(t){return t>0?1:t<0?-1:0}function ys(t,e){return hs(t.prev,t,t.next)<0?hs(t,e,t.next)>=0&&hs(t,t.prev,e)>=0:hs(t,e,t.prev)<0||hs(t,t.next,e)<0}function gs(t,e){const n=new xs(t.i,t.x,t.y),i=new xs(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function vs(t,e,n,i){const r=new xs(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bs(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xs(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Ss{static area(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}static isClockWise(t){return Ss.area(t)<0}static triangulateShape(t,e){const n=[],i=[],r=[];ws(t),Ms(n,t);let o=t.length;e.forEach(ws);for(let t=0;t<e.length;t++)i.push(o),o+=e[t].length,Ms(n,e[t]);const a=Ka(n,i);for(let t=0;t<a.length;t+=3)r.push(a.slice(t,t+3));return r}}function ws(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ms(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Ts extends Oe{constructor(t=new Ja([new j(.5,.5),new j(-.5,.5),new j(-.5,-.5),new j(.5,-.5)]),e={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let e=0,n=t.length;e<n;e++){o(t[e])}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:1,c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:.2,p=void 0!==e.bevelSize?e.bevelSize:u-.1,h=void 0!==e.bevelOffset?e.bevelOffset:0,d=void 0!==e.bevelSegments?e.bevelSegments:3;const _=e.extrudePath,f=void 0!==e.UVGenerator?e.UVGenerator:Cs;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let m,y,g,v,b,x=!1;_&&(m=_.getSpacedPoints(s),x=!0,c=!1,y=_.computeFrenetFrames(s,!1),g=new Q,v=new Q,b=new Q),c||(d=0,u=0,p=0,h=0);const S=t.extractPoints(a);let w=S.shape;const M=S.holes;if(!Ss.isClockWise(w)){w=w.reverse();for(let t=0,e=M.length;t<e;t++){const e=M[t];Ss.isClockWise(e)&&(M[t]=e.reverse())}}const T=Ss.triangulateShape(w,M),C=w;for(let t=0,e=M.length;t<e;t++){const e=M[t];w=w.concat(e)}function E(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const A=w.length,R=T.length;function L(t,e,n){let i,r,o;const a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+s*s,p=a*c-s*l;if(Math.abs(p)>Number.EPSILON){const p=Math.sqrt(u),h=Math.sqrt(l*l+c*c),d=e.x-s/p,_=e.y+a/p,f=((n.x-c/h-d)*c-(n.y+l/h-_)*l)/(a*c-s*l);i=d+a*f-t.x,r=_+s*f-t.y;const m=i*i+r*r;if(m<=2)return new j(i,r);o=Math.sqrt(m/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(c)&&(t=!0),t?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new j(i/o,r/o)}const P=[];for(let t=0,e=C.length,n=e-1,i=t+1;t<e;t++,n++,i++)n===e&&(n=0),i===e&&(i=0),P[t]=L(C[t],C[n],C[i]);const D=[];let I,k=P.concat();for(let t=0,e=M.length;t<e;t++){const e=M[t];I=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),I[t]=L(e[t],e[i],e[r]);D.push(I),k=k.concat(I)}for(let t=0;t<d;t++){const e=t/d,n=u*Math.cos(e*Math.PI/2),i=p*Math.sin(e*Math.PI/2)+h;for(let t=0,e=C.length;t<e;t++){const e=E(C[t],P[t],i);F(e.x,e.y,-n)}for(let t=0,e=M.length;t<e;t++){const e=M[t];I=D[t];for(let t=0,r=e.length;t<r;t++){const r=E(e[t],I[t],i);F(r.x,r.y,-n)}}}const O=p+h;for(let t=0;t<A;t++){const e=c?E(w[t],k[t],O):w[t];x?(v.copy(y.normals[0]).multiplyScalar(e.x),g.copy(y.binormals[0]).multiplyScalar(e.y),b.copy(m[0]).add(v).add(g),F(b.x,b.y,b.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<A;e++){const n=c?E(w[e],k[e],O):w[e];x?(v.copy(y.normals[t]).multiplyScalar(n.x),g.copy(y.binormals[t]).multiplyScalar(n.y),b.copy(m[t]).add(v).add(g),F(b.x,b.y,b.z)):F(n.x,n.y,l/s*t)}for(let t=d-1;t>=0;t--){const e=t/d,n=u*Math.cos(e*Math.PI/2),i=p*Math.sin(e*Math.PI/2)+h;for(let t=0,e=C.length;t<e;t++){const e=E(C[t],P[t],i);F(e.x,e.y,l+n)}for(let t=0,e=M.length;t<e;t++){const e=M[t];I=D[t];for(let t=0,r=e.length;t<r;t++){const r=E(e[t],I[t],i);x?F(r.x,r.y+m[s-1].y,m[s-1].x+n):F(r.x,r.y,l+n)}}}function B(t,e){let n=t.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=s+2*d;t<n;t++){const n=A*t,o=A*(t+1);z(e+i+n,e+r+n,e+r+o,e+i+o)}}}function F(t,e,n){o.push(t),o.push(e),o.push(n)}function N(t,e,r){H(t),H(e),H(r);const o=i.length/3,a=f.generateTopUV(n,i,o-3,o-2,o-1);U(a[0]),U(a[1]),U(a[2])}function z(t,e,r,o){H(t),H(e),H(o),H(e),H(r),H(o);const a=i.length/3,s=f.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);U(s[0]),U(s[1]),U(s[3]),U(s[1]),U(s[2]),U(s[3])}function H(t){i.push(o[3*t+0]),i.push(o[3*t+1]),i.push(o[3*t+2])}function U(t){r.push(t.x),r.push(t.y)}!function(){const t=i.length/3;if(c){let t=0,e=A*t;for(let t=0;t<R;t++){const n=T[t];N(n[2]+e,n[1]+e,n[0]+e)}t=s+2*d,e=A*t;for(let t=0;t<R;t++){const n=T[t];N(n[0]+e,n[1]+e,n[2]+e)}}else{for(let t=0;t<R;t++){const e=T[t];N(e[2],e[1],e[0])}for(let t=0;t<R;t++){const e=T[t];N(e[0]+A*s,e[1]+A*s,e[2]+A*s)}}n.addGroup(t,i.length/3-t,0)}(),function(){const t=i.length/3;let e=0;B(C,e),e+=C.length;for(let t=0,n=M.length;t<n;t++){const n=M[t];B(n,e),e+=n.length}n.addGroup(t,i.length/3-t,1)}()}this.setAttribute("position",new Ee(i,3)),this.setAttribute("uv",new Ee(r,2)),this.computeVertexNormals()}toJSON(){const t=super.toJSON();return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(let e=0,i=t.length;e<i;e++){const i=t[e];n.shapes.push(i.uuid)}else n.shapes.push(t.uuid);void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}const i=t.options.extrudePath;return void 0!==i&&(t.options.extrudePath=(new Xa[i.type]).fromJSON(i)),new Ts(n,t.options)}}const Cs={generateTopUV:function(t,e,n,i,r){const o=e[3*n],a=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new j(o,a),new j(s,l),new j(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){const a=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],p=e[3*i+2],h=e[3*r],d=e[3*r+1],_=e[3*r+2],f=e[3*o],m=e[3*o+1],y=e[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new j(a,1-l),new j(c,1-p),new j(h,1-_),new j(f,1-y)]:[new j(s,1-l),new j(u,1-p),new j(d,1-_),new j(m,1-y)]}};class Es extends Sa{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Es(t.radius,t.detail)}}class As extends Oe{constructor(t=[new j(0,.5),new j(.5,0),new j(0,-.5)],e=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=L(i,0,2*Math.PI);const r=[],o=[],a=[],s=[],l=[],c=1/e,u=new Q,p=new j,h=new Q,d=new Q,_=new Q;let f=0,m=0;for(let e=0;e<=t.length-1;e++)switch(e){case 0:f=t[e+1].x-t[e].x,m=t[e+1].y-t[e].y,h.x=1*m,h.y=-f,h.z=0*m,_.copy(h),h.normalize(),s.push(h.x,h.y,h.z);break;case t.length-1:s.push(_.x,_.y,_.z);break;default:f=t[e+1].x-t[e].x,m=t[e+1].y-t[e].y,h.x=1*m,h.y=-f,h.z=0*m,d.copy(h),h.x+=_.x,h.y+=_.y,h.z+=_.z,h.normalize(),s.push(h.x,h.y,h.z),_.copy(d)}for(let r=0;r<=e;r++){const h=n+r*c*i,d=Math.sin(h),_=Math.cos(h);for(let n=0;n<=t.length-1;n++){u.x=t[n].x*d,u.y=t[n].y,u.z=t[n].x*_,o.push(u.x,u.y,u.z),p.x=r/e,p.y=n/(t.length-1),a.push(p.x,p.y);const i=s[3*n+0]*d,c=s[3*n+1],h=s[3*n+0]*_;l.push(i,c,h)}}for(let n=0;n<e;n++)for(let e=0;e<t.length-1;e++){const i=e+n*t.length,o=i,a=i+t.length,s=i+t.length+1,l=i+1;r.push(o,a,l),r.push(a,s,l)}this.setIndex(r),this.setAttribute("position",new Ee(o,3)),this.setAttribute("uv",new Ee(a,2)),this.setAttribute("normal",new Ee(l,3))}static fromJSON(t){return new As(t.points,t.segments,t.phiStart,t.phiLength)}}class Rs extends Sa{constructor(t=1,e=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Rs(t.radius,t.detail)}}class Ls extends Oe{constructor(t=.5,e=1,n=8,i=1,r=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},n=Math.max(3,n);const a=[],s=[],l=[],c=[];let u=t;const p=(e-t)/(i=Math.max(1,i)),h=new Q,d=new j;for(let t=0;t<=i;t++){for(let t=0;t<=n;t++){const i=r+t/n*o;h.x=u*Math.cos(i),h.y=u*Math.sin(i),s.push(h.x,h.y,h.z),l.push(0,0,1),d.x=(h.x/e+1)/2,d.y=(h.y/e+1)/2,c.push(d.x,d.y)}u+=p}for(let t=0;t<i;t++){const e=t*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,o=i+n+1,s=i+n+2,l=i+1;a.push(r,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Ee(s,3)),this.setAttribute("normal",new Ee(l,3)),this.setAttribute("uv",new Ee(c,2))}static fromJSON(t){return new Ls(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}class Ps extends Oe{constructor(t=new Ja([new j(0,.5),new j(-.5,-.5),new j(.5,-.5)]),e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))l(t);else for(let e=0;e<t.length;e++)l(t[e]),this.addGroup(a,s,e),a+=s,s=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===Ss.isClockWise(c)&&(c=c.reverse());for(let t=0,e=u.length;t<e;t++){const e=u[t];!0===Ss.isClockWise(e)&&(u[t]=e.reverse())}const p=Ss.triangulateShape(c,u);for(let t=0,e=u.length;t<e;t++){const e=u[t];c=c.concat(e)}for(let t=0,e=c.length;t<e;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),o.push(e.x,e.y)}for(let t=0,e=p.length;t<e;t++){const e=p[t],i=e[0]+a,r=e[1]+a,o=e[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Ee(i,3)),this.setAttribute("normal",new Ee(r,3)),this.setAttribute("uv",new Ee(o,2))}toJSON(){const t=super.toJSON();return function(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}static fromJSON(t,e){const n=[];for(let i=0,r=t.shapes.length;i<r;i++){const r=e[t.shapes[i]];n.push(r)}return new Ps(n,t.curveSegments)}}class Ds extends Oe{constructor(t=1,e=32,n=16,i=0,r=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Q,p=new Q,h=[],d=[],_=[],f=[];for(let h=0;h<=n;h++){const m=[],y=h/n;let g=0;0==h&&0==o?g=.5/e:h==n&&s==Math.PI&&(g=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(i+s*r)*Math.sin(o+y*a),u.y=t*Math.cos(o+y*a),u.z=t*Math.sin(i+s*r)*Math.sin(o+y*a),d.push(u.x,u.y,u.z),p.copy(u).normalize(),_.push(p.x,p.y,p.z),f.push(s+g,1-y),m.push(l++)}c.push(m)}for(let t=0;t<n;t++)for(let i=0;i<e;i++){const e=c[t][i+1],r=c[t][i],a=c[t+1][i],l=c[t+1][i+1];(0!==t||o>0)&&h.push(e,r,l),(t!==n-1||s<Math.PI)&&h.push(r,a,l)}this.setIndex(h),this.setAttribute("position",new Ee(d,3)),this.setAttribute("normal",new Ee(_,3)),this.setAttribute("uv",new Ee(f,2))}static fromJSON(t){return new Ds(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Is extends Sa{constructor(t=1,e=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new Is(t.radius,t.detail)}}class ks extends Oe{constructor(t=1,e=.4,n=8,i=6,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],s=[],l=[],c=new Q,u=new Q,p=new Q;for(let o=0;o<=n;o++)for(let h=0;h<=i;h++){const d=h/i*r,_=o/n*Math.PI*2;u.x=(t+e*Math.cos(_))*Math.cos(d),u.y=(t+e*Math.cos(_))*Math.sin(d),u.z=e*Math.sin(_),a.push(u.x,u.y,u.z),c.x=t*Math.cos(d),c.y=t*Math.sin(d),p.subVectors(u,c).normalize(),s.push(p.x,p.y,p.z),l.push(h/i),l.push(o/n)}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*t+e-1,r=(i+1)*(t-1)+e-1,a=(i+1)*(t-1)+e,s=(i+1)*t+e;o.push(n,r,s),o.push(r,a,s)}this.setIndex(o),this.setAttribute("position",new Ee(a,3)),this.setAttribute("normal",new Ee(s,3)),this.setAttribute("uv",new Ee(l,2))}static fromJSON(t){return new ks(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}class Os extends Oe{constructor(t=1,e=.4,n=64,i=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],l=[],c=[],u=new Q,p=new Q,h=new Q,d=new Q,_=new Q,f=new Q,m=new Q;for(let a=0;a<=n;++a){const g=a/n*r*Math.PI*2;y(g,r,o,t,h),y(g+.01,r,o,t,d),f.subVectors(d,h),m.addVectors(d,h),_.crossVectors(f,m),m.crossVectors(_,f),_.normalize(),m.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,o=-e*Math.cos(r),d=e*Math.sin(r);u.x=h.x+(o*m.x+d*_.x),u.y=h.y+(o*m.y+d*_.y),u.z=h.z+(o*m.z+d*_.z),s.push(u.x,u.y,u.z),p.subVectors(u,h).normalize(),l.push(p.x,p.y,p.z),c.push(a/n),c.push(t/i)}}for(let t=1;t<=n;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),o=(i+1)*t+e,s=(i+1)*(t-1)+e;a.push(n,r,s),a.push(r,o,s)}function y(t,e,n,i,r){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Ee(s,3)),this.setAttribute("normal",new Ee(l,3)),this.setAttribute("uv",new Ee(c,2))}static fromJSON(t){return new Os(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}class Bs extends Oe{constructor(t=new Va(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),e=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Q,s=new Q,l=new j;let c=new Q;const u=[],p=[],h=[],d=[];function _(r){c=t.getPointAt(r/e,c);const l=o.normals[r],h=o.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),o=-Math.cos(e);s.x=o*l.x+r*h.x,s.y=o*l.y+r*h.y,s.z=o*l.z+r*h.z,s.normalize(),p.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let t=0;t<e;t++)_(t);_(!1===r?e:0),function(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,h.push(l.x,l.y)}(),function(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),o=(i+1)*t+e,a=(i+1)*(t-1)+e;d.push(n,r,a),d.push(r,o,a)}}()}(),this.setIndex(d),this.setAttribute("position",new Ee(u,3)),this.setAttribute("normal",new Ee(p,3)),this.setAttribute("uv",new Ee(h,2))}toJSON(){const t=super.toJSON();return t.path=this.parameters.path.toJSON(),t}static fromJSON(t){return new Bs((new Xa[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}class js extends Oe{constructor(t=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:t},null!==t){const e=[],n=new Set,i=new Q,r=new Q;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,l=s.length;t<l;++t){const l=s[t],c=l.start;for(let t=c,s=c+l.count;t<s;t+=3)for(let s=0;s<3;s++){const l=a.getX(t+s),c=a.getX(t+(s+1)%3);i.fromBufferAttribute(o,l),r.fromBufferAttribute(o,c),!0===Fs(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}}else{const o=t.attributes.position;for(let t=0,a=o.count/3;t<a;t++)for(let a=0;a<3;a++){const s=3*t+a,l=3*t+(a+1)%3;i.fromBufferAttribute(o,s),r.fromBufferAttribute(o,l),!0===Fs(i,r,n)&&(e.push(i.x,i.y,i.z),e.push(r.x,r.y,r.z))}}this.setAttribute("position",new Ee(e,3))}}}function Fs(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i,r),!0)}var Ns=Object.freeze({__proto__:null,BoxGeometry:en,BoxBufferGeometry:en,CircleGeometry:va,CircleBufferGeometry:va,ConeGeometry:xa,ConeBufferGeometry:xa,CylinderGeometry:ba,CylinderBufferGeometry:ba,DodecahedronGeometry:wa,DodecahedronBufferGeometry:wa,EdgesGeometry:Aa,ExtrudeGeometry:Ts,ExtrudeBufferGeometry:Ts,IcosahedronGeometry:Es,IcosahedronBufferGeometry:Es,LatheGeometry:As,LatheBufferGeometry:As,OctahedronGeometry:Rs,OctahedronBufferGeometry:Rs,PlaneGeometry:xn,PlaneBufferGeometry:xn,PolyhedronGeometry:Sa,PolyhedronBufferGeometry:Sa,RingGeometry:Ls,RingBufferGeometry:Ls,ShapeGeometry:Ps,ShapeBufferGeometry:Ps,SphereGeometry:Ds,SphereBufferGeometry:Ds,TetrahedronGeometry:Is,TetrahedronBufferGeometry:Is,TorusGeometry:ks,TorusBufferGeometry:ks,TorusKnotGeometry:Os,TorusKnotBufferGeometry:Os,TubeGeometry:Bs,TubeBufferGeometry:Bs,WireframeGeometry:js});class zs extends de{constructor(t){super(),this.type="ShadowMaterial",this.color=new be(0),this.transparent=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this}}zs.prototype.isShadowMaterial=!0;class Hs extends de{constructor(t){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new be(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=w,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Hs.prototype.isMeshStandardMaterial=!0;class Us extends Hs{constructor(t){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new j(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return L(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.sheenColor=new be(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new be(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new be(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}Us.prototype.isMeshPhysicalMaterial=!0;class Ws extends de{constructor(t){super(),this.type="MeshPhongMaterial",this.color=new be(16777215),this.specular=new be(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=w,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}Ws.prototype.isMeshPhongMaterial=!0;class Gs extends de{constructor(t){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new be(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=w,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}Gs.prototype.isMeshToonMaterial=!0;class Vs extends de{constructor(t){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=w,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}Vs.prototype.isMeshNormalMaterial=!0;class qs extends de{constructor(t){super(),this.type="MeshLambertMaterial",this.color=new be(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new be(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}qs.prototype.isMeshLambertMaterial=!0;class Xs extends de{constructor(t){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new be(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=w,this.normalScale=new j(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}Xs.prototype.isMeshMatcapMaterial=!0;class Ys extends ta{constructor(t){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}Ys.prototype.isLineDashedMaterial=!0;var Zs=Object.freeze({__proto__:null,ShadowMaterial:zs,SpriteMaterial:go,RawShaderMaterial:Dn,ShaderMaterial:an,PointsMaterial:pa,MeshPhysicalMaterial:Us,MeshStandardMaterial:Hs,MeshPhongMaterial:Ws,MeshToonMaterial:Gs,MeshNormalMaterial:Vs,MeshLambertMaterial:qs,MeshDepthMaterial:Kr,MeshDistanceMaterial:Qr,MeshBasicMaterial:xe,MeshMatcapMaterial:Xs,LineDashedMaterial:Ys,LineBasicMaterial:ta,Material:de});const Js={arraySlice:function(t,e,n){return Js.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){const e=t.length,n=new Array(e);for(let t=0;t!==e;++t)n[t]=t;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,o=t[0];for(;void 0!==o&&void 0===o[i];)o=t[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)},subclip:function(t,e,n,i,r=30){const o=t.clone();o.name=e;const a=[];for(let t=0;t<o.tracks.length;++t){const e=o.tracks[t],s=e.getValueSize(),l=[],c=[];for(let t=0;t<e.times.length;++t){const o=e.times[t]*r;if(!(o<n||o>=i)){l.push(e.times[t]);for(let n=0;n<s;++n)c.push(e.values[t*s+n])}}0!==l.length&&(e.times=Js.convertArray(l,e.times.constructor),e.values=Js.convertArray(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let t=0;t<o.tracks.length;++t)s>o.tracks[t].times[0]&&(s=o.tracks[t].times[0]);for(let t=0;t<o.tracks.length;++t)o.tracks[t].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,o=e/i;for(let e=0;e<r;++e){const i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)continue;const a=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===a)continue;let s=0;const l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const p=i.times.length-1;let h;if(o<=i.times[0]){const t=s,e=l-s;h=Js.arraySlice(i.values,t,e)}else if(o>=i.times[p]){const t=p*l+s,e=t+l-s;h=Js.arraySlice(i.values,t,e)}else{const t=i.createInterpolant(),e=s,n=l-s;t.evaluate(o),h=Js.arraySlice(t.resultBuffer,e,n)}if("quaternion"===r){(new K).fromArray(h).normalize().conjugate().toArray(h)}const d=a.times.length;for(let t=0;t<d;++t){const e=t*u+c;if("quaternion"===r)K.multiplyQuaternionsFlat(a.values,e,h,0,a.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)a.values[e+n]-=h[n]}}}return t.blendMode=2501,t}};class Ks{constructor(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let o;n:{i:if(!(t<i)){for(let o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}if(t>=r)break t;{const a=e[1];t<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}}for(;n<o;){const i=n+o>>>1;t<e[i]?o=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let t=0;t!==i;++t)e[t]=n[r+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Ks.prototype.beforeStart_=Ks.prototype.copySampleValue_,Ks.prototype.afterEnd_=Ks.prototype.copySampleValue_;class Qs extends Ks{constructor(t,e,n,i){super(t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const i=this.parameterPositions;let r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-n;break;case 2402:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,p=this._weightPrev,h=this._weightNext,d=(n-e)/(i-e),_=d*d,f=_*d,m=-p*f+2*p*_-p*d,y=(1+p)*f+(-1.5-2*p)*_+(-.5+p)*d+1,g=(-1-h)*f+(1.5+h)*_+.5*d,v=h*f-h*_;for(let t=0;t!==a;++t)r[t]=m*o[c+t]+y*o[l+t]+g*o[s+t]+v*o[u+t];return r}}class $s extends Ks{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c;for(let t=0;t!==a;++t)r[t]=o[l+t]*u+o[s+t]*c;return r}}class tl extends Ks{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t){return this.copySampleValue_(t-1)}}class el{constructor(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Js.convertArray(e,this.TimeBufferType),this.values=Js.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Js.convertArray(t.times,Array),values:Js.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new tl(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new $s(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new Qs(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case g:e=this.InterpolantFactoryMethodDiscrete;break;case v:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return g;case this.InterpolantFactoryMethodLinear:return v;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this}trim(t,e){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const t=this.getValueSize();this.times=Js.arraySlice(n,r,o),this.values=Js.arraySlice(this.values,r*t,o*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==r;e++){const i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==o&&o>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,o),t=!1;break}o=i}if(void 0!==i&&Js.isTypedArray(i))for(let e=0,n=i.length;e!==n;++e){const n=i[e];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,n),t=!1;break}}return t}optimize(){const t=Js.arraySlice(this.times),e=Js.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=t.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=t[a];if(s!==t[a+1]&&(1!==a||s!==t[0]))if(i)r=!0;else{const t=a*n,i=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[o+a]){r=!0;break}}}if(r){if(a!==o){t[o]=t[a];const i=a*n,r=o*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++o}}if(r>0){t[o]=t[r];for(let t=r*n,i=o*n,a=0;a!==n;++a)e[i+a]=e[t+a];++o}return o!==t.length?(this.times=Js.arraySlice(t,0,o),this.values=Js.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}clone(){const t=Js.arraySlice(this.times,0),e=Js.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}el.prototype.TimeBufferType=Float32Array,el.prototype.ValueBufferType=Float32Array,el.prototype.DefaultInterpolation=v;class nl extends el{}nl.prototype.ValueTypeName="bool",nl.prototype.ValueBufferType=Array,nl.prototype.DefaultInterpolation=g,nl.prototype.InterpolantFactoryMethodLinear=void 0,nl.prototype.InterpolantFactoryMethodSmooth=void 0;class il extends el{}il.prototype.ValueTypeName="color";class rl extends el{}rl.prototype.ValueTypeName="number";class ol extends Ks{constructor(t,e,n,i){super(t,e,n,i)}interpolate_(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(i-e);let l=t*a;for(let t=l+a;l!==t;l+=4)K.slerpFlat(r,0,o,l-a,o,l,s);return r}}class al extends el{InterpolantFactoryMethodLinear(t){return new ol(this.times,this.values,this.getValueSize(),t)}}al.prototype.ValueTypeName="quaternion",al.prototype.DefaultInterpolation=v,al.prototype.InterpolantFactoryMethodSmooth=void 0;class sl extends el{}sl.prototype.ValueTypeName="string",sl.prototype.ValueBufferType=Array,sl.prototype.DefaultInterpolation=g,sl.prototype.InterpolantFactoryMethodLinear=void 0,sl.prototype.InterpolantFactoryMethodSmooth=void 0;class ll extends el{}ll.prototype.ValueTypeName="vector";class cl{constructor(t,e=-1,n,i=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=R(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let t=0,r=n.length;t!==r;++t)e.push(ul(n[t]).scale(i));const r=new this(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r}static toJSON(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let t=0,i=n.length;t!==i;++t)e.push(el.toJSON(n[t]));return i}static CreateFromMorphTargetSequence(t,e,n,i){const r=e.length,o=[];for(let t=0;t<r;t++){let a=[],s=[];a.push((t+r-1)%r,t,(t+1)%r),s.push(0,1,0);const l=Js.getKeyframeOrder(a);a=Js.sortedArray(a,1,l),s=Js.sortedArray(s,1,l),i||0!==a[0]||(a.push(r),s.push(s[0])),o.push(new rl(".morphTargetInfluences["+e[t].name+"]",a,s).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let t=0;t<n.length;t++)if(n[t].name===e)return n[t];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let e=0,n=t.length;e<n;e++){const n=t[e],o=n.name.match(r);if(o&&o.length>1){const t=o[1];let e=i[t];e||(i[t]=e=[]),e.push(n)}}const o=[];for(const t in i)o.push(this.CreateFromMorphTargetSequence(t,i[t],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const o=[],a=[];Js.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let t=0;t<l.length;t++){const r=l[t].keys;if(r&&0!==r.length)if(r[0].morphTargets){const t={};let e;for(e=0;e<r.length;e++)if(r[e].morphTargets)for(let n=0;n<r[e].morphTargets.length;n++)t[r[e].morphTargets[n]]=-1;for(const n in t){const t=[],o=[];for(let i=0;i!==r[e].morphTargets.length;++i){const i=r[e];t.push(i.time),o.push(i.morphTarget===n?1:0)}i.push(new rl(".morphTargetInfluence["+n+"]",t,o))}s=t.length*(o||1)}else{const o=".bones["+e[t].name+"]";n(ll,o+".position",r,"pos",i),n(al,o+".quaternion",r,"rot",i),n(ll,o+".scale",r,"scl",i)}}if(0===i.length)return null;return new this(r,s,i,a)}resetDuration(){let t=0;for(let e=0,n=this.tracks.length;e!==n;++e){const n=this.tracks[e];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function ul(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rl;case"vector":case"vector2":case"vector3":case"vector4":return ll;case"color":return il;case"quaternion":return al;case"bool":case"boolean":return nl;case"string":return sl}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){const e=[],n=[];Js.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const pl={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class hl{constructor(t,e,n){const i=this;let r=!1,o=0,a=0,s=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}}const dl=new hl;class _l{constructor(t){this.manager=void 0!==t?t:dl,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const fl={};class ml extends _l{constructor(t){super(t)}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=pl.get(t);if(void 0!==r)return this.manager.itemStart(t),setTimeout(()=>{e&&e(r),this.manager.itemEnd(t)},0),r;if(void 0!==fl[t])return void fl[t].push({onLoad:e,onProgress:n,onError:i});fl[t]=[],fl[t].push({onLoad:e,onProgress:n,onError:i});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then(e=>{if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body.getReader)return e;const n=fl[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),o=r?parseInt(r):0,a=0!==o;let s=0;const l=new ReadableStream({start(t){!function e(){i.read().then(({done:i,value:r})=>{if(i)t.close();else{s+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let t=0,e=n.length;t<e;t++){const e=n[t];e.onProgress&&e.onProgress(i)}t.enqueue(r),e()}})}()}});return new Response(l)}throw Error(`fetch for "${e.url}" responded with ${e.status}: ${e.statusText}`)}).then(t=>{switch(this.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then(t=>(new DOMParser).parseFromString(t,this.mimeType));case"json":return t.json();default:return t.text()}}).then(e=>{pl.add(t,e);const n=fl[t];delete fl[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onLoad&&i.onLoad(e)}}).catch(e=>{const n=fl[t];if(void 0===n)throw this.manager.itemError(t),e;delete fl[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class yl extends _l{constructor(t){super(t)}load(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=pl.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;const a=U("img");function s(){c(),pl.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}class gl extends _l{constructor(t){super(t)}load(t,e,n,i){const r=new un,o=new yl(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],(function(t){r.images[n]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(let e=0;e<t.length;++e)s(e);return r}}class vl extends _l{constructor(t){super(t)}load(t,e,n,i){const r=new q,o=new yl(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}class bl extends te{constructor(t,e=1){super(),this.type="Light",this.color=new be(t),this.intensity=e}dispose(){}copy(t){return super.copy(t),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}bl.prototype.isLight=!0;class xl extends bl{constructor(t,e,n){super(t,n),this.type="HemisphereLight",this.position.copy(te.DefaultUp),this.updateMatrix(),this.groundColor=new be(e)}copy(t){return bl.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}xl.prototype.isHemisphereLight=!0;const Sl=new Rt,wl=new Q,Ml=new Q;class Tl{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new j(512,512),this.map=null,this.mapPass=null,this.matrix=new Rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new gn,this._frameExtents=new j(1,1),this._viewportCount=1,this._viewports=[new Y(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;wl.setFromMatrixPosition(t.matrixWorld),e.position.copy(wl),Ml.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Ml),e.updateMatrixWorld(),Sl.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sl),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Cl extends Tl{constructor(){super(new ln(50,1,.5,500)),this.focus=1}updateMatrices(t){const e=this.camera,n=2*A*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}Cl.prototype.isSpotLightShadow=!0;class El extends bl{constructor(t,e,n=0,i=Math.PI/3,r=0,o=1){super(t,e),this.type="SpotLight",this.position.copy(te.DefaultUp),this.updateMatrix(),this.target=new te,this.distance=n,this.angle=i,this.penumbra=r,this.decay=o,this.shadow=new Cl}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}El.prototype.isSpotLight=!0;const Al=new Rt,Rl=new Q,Ll=new Q;class Pl extends Tl{constructor(){super(new ln(90,1,.5,500)),this._frameExtents=new j(4,2),this._viewportCount=6,this._viewports=[new Y(2,1,1,1),new Y(0,1,1,1),new Y(3,1,1,1),new Y(1,1,1,1),new Y(3,0,1,1),new Y(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Rl.setFromMatrixPosition(t.matrixWorld),n.position.copy(Rl),Ll.copy(n.position),Ll.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Ll),n.updateMatrixWorld(),i.makeTranslation(-Rl.x,-Rl.y,-Rl.z),Al.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Al)}}Pl.prototype.isPointLightShadow=!0;class Dl extends bl{constructor(t,e,n=0,i=1){super(t,e),this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new Pl}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}Dl.prototype.isPointLight=!0;class Il extends Tl{constructor(){super(new Pn(-5,5,5,-5,.5,500))}}Il.prototype.isDirectionalLightShadow=!0;class kl extends bl{constructor(t,e){super(t,e),this.type="DirectionalLight",this.position.copy(te.DefaultUp),this.updateMatrix(),this.target=new te,this.shadow=new Il}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}kl.prototype.isDirectionalLight=!0;class Ol extends bl{constructor(t,e){super(t,e),this.type="AmbientLight"}}Ol.prototype.isAmbientLight=!0;class Bl extends bl{constructor(t,e,n=10,i=10){super(t,e),this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(t){this.intensity=t/(this.width*this.height*Math.PI)}copy(t){return super.copy(t),this.width=t.width,this.height=t.height,this}toJSON(t){const e=super.toJSON(t);return e.object.width=this.width,e.object.height=this.height,e}}Bl.prototype.isRectAreaLight=!0;class jl{constructor(){this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Q)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*i),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*i*1.092548),e.addScaledVector(o[5],i*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],n*r*1.092548),e.addScaledVector(o[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*i),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*i),e.addScaledVector(o[5],.858086*i*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*n*r),e.addScaledVector(o[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}jl.prototype.isSphericalHarmonics3=!0;class Fl extends bl{constructor(t=new jl,e=1){super(void 0,e),this.sh=t}copy(t){return super.copy(t),this.sh.copy(t.sh),this}fromJSON(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}toJSON(t){const e=super.toJSON(t);return e.object.sh=this.sh.toArray(),e}}Fl.prototype.isLightProbe=!0;class Nl extends _l{constructor(t){super(t),this.textures={}}load(t,e,n,i){const r=this,o=new ml(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=new Zs[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new be).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.format&&(i.format=t.format),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const e in t.uniforms){const r=t.uniforms[e];switch(i.uniforms[e]={},r.type){case"t":i.uniforms[e].value=n(r.value);break;case"c":i.uniforms[e].value=(new be).setHex(r.value);break;case"v2":i.uniforms[e].value=(new j).fromArray(r.value);break;case"v3":i.uniforms[e].value=(new Q).fromArray(r.value);break;case"v4":i.uniforms[e].value=(new Y).fromArray(r.value);break;case"m3":i.uniforms[e].value=(new F).fromArray(r.value);break;case"m4":i.uniforms[e].value=(new Rt).fromArray(r.value);break;default:i.uniforms[e].value=r.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const e in t.extensions)i.extensions[e]=t.extensions[e];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new j).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new j).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}setTextures(t){return this.textures=t,this}}class zl{static decodeText(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class Hl extends Oe{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(t){return super.copy(t),this.instanceCount=t.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const t=super.toJSON(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}Hl.prototype.isInstancedBufferGeometry=!0;class Ul extends _l{constructor(t){super(t)}load(t,e,n,i){const r=this,o=new ml(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}parse(t){const e={},n={};function i(t,i){if(void 0!==e[i])return e[i];const r=t.interleavedBuffers[i],o=function(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers[e],r=new Uint32Array(i).buffer;return n[e]=r,r}(t,r.buffer),a=H(r.type,o),s=new fo(a,r.stride);return s.uuid=r.uuid,e[i]=s,s}const r=t.isInstancedBufferGeometry?new Hl:new Oe,o=t.data.index;if(void 0!==o){const t=H(o.type,o.array);r.setIndex(new Me(t,1))}const a=t.data.attributes;for(const e in a){const n=a[e];let o;if(n.isInterleavedBufferAttribute){const e=i(t.data,n.data);o=new yo(e,n.itemSize,n.offset,n.normalized)}else{const t=H(n.type,n.array);o=new(n.isInstancedBufferAttribute?Yo:Me)(t,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),void 0!==n.usage&&o.setUsage(n.usage),void 0!==n.updateRange&&(o.updateRange.offset=n.updateRange.offset,o.updateRange.count=n.updateRange.count),r.setAttribute(e,o)}const s=t.data.morphAttributes;if(s)for(const e in s){const n=s[e],o=[];for(let e=0,r=n.length;e<r;e++){const r=n[e];let a;if(r.isInterleavedBufferAttribute){const e=i(t.data,r.data);a=new yo(e,r.itemSize,r.offset,r.normalized)}else{const t=H(r.type,r.array);a=new Me(t,r.itemSize,r.normalized)}void 0!==r.name&&(a.name=r.name),o.push(a)}r.morphAttributes[e]=o}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==l)for(let t=0,e=l.length;t!==e;++t){const e=l[t];r.addGroup(e.start,e.count,e.materialIndex)}const c=t.data.boundingSphere;if(void 0!==c){const t=new Q;void 0!==c.center&&t.fromArray(c.center),r.boundingSphere=new bt(t,c.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}class Wl extends _l{constructor(t){super(t)}load(t,e,n,i){const r=this,o=""===this.path?zl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new ml(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){let o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)}async loadAsync(t,e){const n=""===this.path?zl.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||n;const i=new ml(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(t,e),o=JSON.parse(r),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+t);return await this.parseAsync(o)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),o=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,r,s,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in o)if(o[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}async parseAsync(t){const e=this.parseAnimations(t.animations),n=this.parseShapes(t.shapes),i=this.parseGeometries(t.geometries,n),r=await this.parseImagesAsync(t.images),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a,o,e),l=this.parseSkeletons(t.skeletons,s);return this.bindSkeletons(s,l),s}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new Ja).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(let e=0,r=t.length;e<r;e++){const r=(new Xo).fromJSON(t[e],i);n[r.uuid]=r}return n}parseGeometries(t,e){const n={};if(void 0!==t){const i=new Ul;for(let r=0,o=t.length;r<o;r++){let o;const a=t[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:a.type in Ns?o=Ns[a.type].fromJSON(a,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),!0===o.isBufferGeometry&&void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new Nl;r.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];if("MultiMaterial"===o.type){const t=[];for(let e=0;e<o.materials.length;e++){const i=o.materials[e];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),t.push(n[i.uuid])}i[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=cl.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function o(t){if("string"==typeof t){const e=t;return function(t){return n.manager.itemStart(t),r.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e)}return t.data?{data:H(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new hl(e);r=new yl(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,n=t.length;e<n;e++){const n=t[e],r=n.url;if(Array.isArray(r)){i[n.uuid]=[];for(let t=0,e=r.length;t<e;t++){const e=o(r[t]);null!==e&&(e instanceof HTMLImageElement?i[n.uuid].push(e):i[n.uuid].push(new Go(e.data,e.width,e.height)))}}else{const t=o(n.url);null!==t&&(i[n.uuid]=t)}}}return i}async parseImagesAsync(t){const e=this,n={};let i;async function r(t){if("string"==typeof t){const n=t,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:e.resourcePath+n;return await i.loadAsync(r)}return t.data?{data:H(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){i=new yl(this.manager),i.setCrossOrigin(this.crossOrigin);for(let e=0,i=t.length;e<i;e++){const i=t[e],o=i.url;if(Array.isArray(o)){n[i.uuid]=[];for(let t=0,e=o.length;t<e;t++){const e=o[t],a=await r(e);null!==a&&(a instanceof HTMLImageElement?n[i.uuid].push(a):n[i.uuid].push(new Go(a.data,a.width,a.height)))}}else{const t=await r(i.url);null!==t&&(n[i.uuid]=t)}}}return n}parseTextures(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,o=t.length;r<o;r++){const o=t[r];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=e[o.image];Array.isArray(s)?(a=new un(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new Go(s.data,s.width,s.height):new q(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Gl)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],Vl),a.wrapT=n(o.wrap[1],Vl)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,ql)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,ql)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(a.userData=o.userData),i[o.uuid]=a}return i}parseObject(t,e,n,i,r){let o,a,s;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function u(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":o=new _o,void 0!==t.background&&(Number.isInteger(t.background)?o.background=new be(t.background):o.background=u(t.background)),void 0!==t.environment&&(o.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new ho(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new po(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new ln(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Pn(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new Ol(t.color,t.intensity);break;case"DirectionalLight":o=new kl(t.color,t.intensity);break;case"PointLight":o=new Dl(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new Bl(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new El(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new xl(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new Fl).fromJSON(t);break;case"SkinnedMesh":a=l(t.geometry),s=c(t.material),o=new Uo(a,s),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":a=l(t.geometry),s=c(t.material),o=new $e(a,s);break;case"InstancedMesh":a=l(t.geometry),s=c(t.material);const e=t.count,n=t.instanceMatrix,i=t.instanceColor;o=new $o(a,s,e),o.instanceMatrix=new Yo(new Float32Array(n.array),16),void 0!==i&&(o.instanceColor=new Yo(new Float32Array(i.array),i.itemSize));break;case"LOD":o=new Bo;break;case"Line":o=new aa(l(t.geometry),c(t.material));break;case"LineLoop":o=new ua(l(t.geometry),c(t.material));break;case"LineSegments":o=new ca(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":o=new ma(l(t.geometry),c(t.material));break;case"Sprite":o=new Do(c(t.material));break;case"Group":o=new ro;break;case"Bone":o=new Wo;break;default:o=new te}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children){const a=t.children;for(let t=0;t<a.length;t++)o.add(this.parseObject(a[t],e,n,i,r))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];o.animations.push(r[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=o.getObjectByProperty("uuid",n.object);void 0!==i&&o.addLevel(i,n.distance)}}return o}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const Gl={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Vl={RepeatWrapping:l,ClampToEdgeWrapping:c,MirroredRepeatWrapping:u},ql={NearestFilter:p,NearestMipmapNearestFilter:h,NearestMipmapLinearFilter:d,LinearFilter:_,LinearMipmapNearestFilter:f,LinearMipmapLinearFilter:m};class Xl extends _l{constructor(t){super(t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=pl.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){pl.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}let Yl;Xl.prototype.isImageBitmapLoader=!0;const Zl=function(){return void 0===Yl&&(Yl=new(window.AudioContext||window.webkitAudioContext)),Yl};class Jl extends _l{constructor(t){super(t)}load(t,e,n,i){const r=this,o=new ml(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{const t=n.slice(0);Zl().decodeAudioData(t,(function(t){e(t)}))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}}(class extends Fl{constructor(t,e,n=1){super(void 0,n);const i=(new be).set(t),r=(new be).set(e),o=new Q(i.r,i.g,i.b),a=new Q(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}}).prototype.isHemisphereLightProbe=!0;(class extends Fl{constructor(t,e=1){super(void 0,e);const n=(new be).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}).prototype.isAmbientLightProbe=!0;class Kl{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Ql(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Ql();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Ql(){return("undefined"==typeof performance?Date:performance).now()}const $l=new Q,tc=new K,ec=new Q,nc=new Q;class ic extends te{constructor(){super(),this.type="AudioListener",this.context=Zl(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Kl}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose($l,tc,ec),nc.set(0,0,-1).applyQuaternion(tc),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime($l.x,t),e.positionY.linearRampToValueAtTime($l.y,t),e.positionZ.linearRampToValueAtTime($l.z,t),e.forwardX.linearRampToValueAtTime(nc.x,t),e.forwardY.linearRampToValueAtTime(nc.y,t),e.forwardZ.linearRampToValueAtTime(nc.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition($l.x,$l.y,$l.z),e.setOrientation(nc.x,nc.y,nc.z,n.x,n.y,n.z)}}class rc extends te{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}class oc{constructor(t,e,n){let i,r,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==i;++t)n[r+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=o}accumulateAdditive(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}apply(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let t=e,r=e+e;t!==r;++t)if(n[t]!==n[t+e]){a.setValue(n,i);break}}saveOriginalState(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let t=n,r=i;t!==r;++t)e[t]=e[i+t%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)}_setAdditiveIdentityNumeric(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}_select(t,e,n,i,r){if(i>=.5)for(let i=0;i!==r;++i)t[e+i]=t[n+i]}_slerp(t,e,n,i){K.slerpFlat(t,e,t,e,t,n,i)}_slerpAdditive(t,e,n,i,r){const o=this._workIndex*r;K.multiplyQuaternionsFlat(t,o,t,e,t,n),K.slerpFlat(t,e,t,e,t,o,i)}_lerp(t,e,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*o+t[n+a]*i}}_lerpAdditive(t,e,n,i,r){for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]+t[n+o]*i}}}const ac=new RegExp("[\\[\\]\\.:\\/]","g"),sc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",lc=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),cc=/(WCOD+)?/.source.replace("WCOD",sc),uc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),pc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),hc=new RegExp("^"+lc+cc+uc+pc+"$"),dc=["material","materials","bones"];class _c{constructor(t,e,n){this.path=e,this.parsedPath=n||_c.parseTrackName(e),this.node=_c.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,n){return t&&t.isAnimationObjectGroup?new _c.Composite(t,e,n):new _c(t,e,n)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(ac,"")}static parseTrackName(t){const e=hc.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==dc.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}static findNode(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},i=n(t.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=_c.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const o=t[i];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_c.Composite=class{constructor(t,e,n){const i=n||_c.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}getValue(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},_c.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},_c.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},_c.prototype.GetterByBindingType=[_c.prototype._getValue_direct,_c.prototype._getValue_array,_c.prototype._getValue_arrayElement,_c.prototype._getValue_toArray],_c.prototype.SetterByBindingTypeAndVersioning=[[_c.prototype._setValue_direct,_c.prototype._setValue_direct_setNeedsUpdate,_c.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_c.prototype._setValue_array,_c.prototype._setValue_array_setNeedsUpdate,_c.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_c.prototype._setValue_arrayElement,_c.prototype._setValue_arrayElement_setNeedsUpdate,_c.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_c.prototype._setValue_fromArray,_c.prototype._setValue_fromArray_setNeedsUpdate,_c.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];(class{constructor(){this.uuid=R(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}add(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a=void 0,s=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],p=u.uuid;let h=e[p];if(void 0===h){h=s++,e[p]=h,t.push(u);for(let t=0,e=o;t!==e;++t)r[t].push(new _c(u,n[t],i[t]))}else if(h<l){a=t[h];const s=--l,c=t[s];e[c.uuid]=h,t[h]=c,e[p]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=r[t],o=e[s];let a=e[h];e[h]=o,void 0===a&&(a=new _c(u,n[t],i[t])),e[s]=a}}else t[h]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=e[s];if(void 0!==l&&l>=r){const o=r++,c=t[o];e[c.uuid]=l,t[l]=c,e[s]=o,t[o]=a;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[o],r=e[l];e[l]=i,e[o]=r}}}this.nCachedObjects_=r}uncache(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=e[s];if(void 0!==l)if(delete e[s],l<r){const a=--r,s=t[a],c=--o,u=t[c];e[s.uuid]=l,t[l]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[c];e[l]=i,e[a]=r,e.pop()}}else{const r=--o,a=t[r];r>0&&(e[a.uuid]=l),t[l]=a,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[l]=e[r],e.pop()}}}this.nCachedObjects_=r}subscribe_(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(let n=c,i=s.length;n!==i;++n){const i=s[n];u[n]=new _c(i,t,e)}return u}unsubscribe_(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}).prototype.isAnimationObjectGroup=!0;class fc{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,o=r.length,a=new Array(o),s={endingStart:2400,endingEnd:2400};for(let t=0;t!==o;++t){const e=r[t].createInterpolant(null);a[t]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,o=n/i;t.warp(1,r,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case 2501:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case 2500:default:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulate(i,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const o=2202===n;if(0===t)return-1===r?i:o&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1==(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:2400:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:2400:2402)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}class mc extends M{constructor(t){super(),this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let t=0;t!==r;++t){const r=i[t],l=r.name;let u=c[l];if(void 0!==u)o[t]=u;else{if(u=o[t],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,l));continue}const i=e&&e._propertyBindings[t].binding.parsedPath;u=new oc(_c.create(n,l,i),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,l),o[t]=u}a[t].resultBuffer=u.buffer}}_activateAction(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}}_deactivateAction(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}_isActiveAction(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions}_addInactiveAction(t,e,n){const i=this._actions,r=this._actionsByClip;let o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t}_removeInactiveAction(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null;delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)}_removeInactiveBindingsForAction(t){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackAction(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_addInactiveBinding(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[e];void 0===o&&(o={},i[e]=o),o[n]=t,t._cacheIndex=r.length,r.push(t)}_removeInactiveBinding(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]}_lendBinding(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_takeBackBinding(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}_lendControlInterpolant(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new $s(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n}_takeBackControlInterpolant(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}clipAction(t,e,n){const i=e||this._root,r=i.uuid;let o="string"==typeof t?cl.findByName(i,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){const t=s.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new fc(this,o,e,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(t,e){const n=e||this._root,i=n.uuid,r="string"==typeof t?cl.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const t=this._actions;for(let e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}update(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let a=0;a!==n;++a){e[a]._update(i,t,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let t=0;t!==s;++t)a[t].apply(o);return this}setTime(t){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(t)}getRoot(){return this._root}uncacheClip(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,o=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(t){const e=t.uuid,n=this._actionsByClip;for(const t in n){const i=n[t].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName[e];if(void 0!==i)for(const t in i){const e=i[t];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}mc.prototype._controlInterpolantsResultBuffer=new Float32Array(1);class yc{constructor(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new yc(void 0===this.value.clone?this.value:this.value.clone())}}(class extends fo{constructor(t,e,n=1){super(t,e),this.meshPerAttribute=n}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}).prototype.isInstancedInterleavedBuffer=!0;(class{constructor(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(t){!0===t&&this.version++}setBuffer(t){return this.buffer=t,this}setType(t,e){return this.type=t,this.elementSize=e,this}setItemSize(t){return this.itemSize=t,this}setCount(t){return this.count=t,this}}).prototype.isGLBufferAttribute=!0;class gc{constructor(t,e,n=0,i=1/0){this.ray=new At(t,e),this.near=n,this.far=i,this.camera=null,this.layers=new zt,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}intersectObject(t,e=!0,n=[]){return bc(t,this,n,e),n.sort(vc),n}intersectObjects(t,e=!0,n=[]){for(let i=0,r=t.length;i<r;i++)bc(t[i],this,n,e);return n.sort(vc),n}}function vc(t,e){return t.distance-e.distance}function bc(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)bc(i[t],e,n,!0)}}class xc{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(L(e/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const Sc=new j;class wc{constructor(t=new j(1/0,1/0),e=new j(-1/0,-1/0)){this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Sc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Sc.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}wc.prototype.isBox2=!0;const Mc=new Q,Tc=new Q;const Cc=new Q,Ec=new Rt,Ac=new Rt;class Rc extends ca{constructor(t){const e=function t(e){const n=[];e&&e.isBone&&n.push(e);for(let i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new Oe,i=[],r=[],o=new be(0,0,1),a=new be(0,1,0);for(let t=0;t<e.length;t++){const n=e[t];n.parent&&n.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Ee(i,3)),n.setAttribute("color",new Ee(r,3));super(n,new ta({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");Ac.copy(this.root.matrixWorld).invert();for(let t=0,n=0;t<e.length;t++){const r=e[t];r.parent&&r.parent.isBone&&(Ec.multiplyMatrices(Ac,r.matrixWorld),Cc.setFromMatrixPosition(Ec),i.setXYZ(n,Cc.x,Cc.y,Cc.z),Ec.multiplyMatrices(Ac,r.parent.matrixWorld),Cc.setFromMatrixPosition(Ec),i.setXYZ(n+1,Cc.x,Cc.y,Cc.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}class Lc extends ca{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Oe;n.setAttribute("position",new Ee(e,3)),n.setAttribute("color",new Ee([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new ta({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(t,e,n){const i=new be,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}const Pc=new Float32Array(1);new Int32Array(Pc.buffer);Ra.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ra.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Za.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},class extends ca{constructor(t=10,e=10,n=4473924,i=8947848){n=new be(n),i=new be(i);const r=e/2,o=t/e,a=t/2,s=[],l=[];for(let t=0,c=0,u=-a;t<=e;t++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const e=t===r?n:i;e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3,e.toArray(l,c),c+=3}const c=new Oe;c.setAttribute("position",new Ee(s,3)),c.setAttribute("color",new Ee(l,3));super(c,new ta({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Rc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},_l.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),zl.extractUrlBase(t)},_l.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},wc.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},wc.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},wc.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},wc.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},et.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},et.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},et.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},et.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},et.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},bt.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},gn.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},class{constructor(t=new Q,e=new Q){this.start=t,this.end=e}set(t,e){return this.start.copy(t),this.end.copy(e),this}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Mc.subVectors(t,this.start),Tc.subVectors(this.end,this.start);const n=Tc.dot(Tc);let i=Tc.dot(Mc)/n;return e&&(i=L(i,0,1)),i}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},F.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},F.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},F.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},F.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},F.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},F.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Rt.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Rt.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Rt.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Q).setFromMatrixColumn(this,3)},Rt.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},Rt.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Rt.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Rt.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Rt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Rt.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Rt.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Rt.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Rt.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Rt.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Rt.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Rt.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Rt.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Rt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Rt.prototype.makeFrustum=function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)},Rt.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},fn.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},K.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},K.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},At.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},At.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},At.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},pe.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},pe.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},pe.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},pe.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},pe.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},pe.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),pe.getBarycoord(t,e,n,i,r)},pe.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),pe.getNormal(t,e,n,i)},Ja.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Ja.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ts(this,t)},Ja.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ps(this,t)},j.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},j.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},j.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Q.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Q.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Q.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Q.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Q.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Q.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Q.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Q.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Q.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Y.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Y.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},te.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},te.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},te.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},te.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},te.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(te.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),$e.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties($e.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Uo.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},ln.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(bl.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Me.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),35048===this.usage},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(35048)}}}),Me.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},Me.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Me.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Oe.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Oe.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Me(arguments[1],arguments[2])))},Oe.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Oe.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Oe.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Oe.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Oe.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Oe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),fo.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?35048:35044),this},fo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Ts.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Ts.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Ts.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},_o.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},yc.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(de.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new be}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(an.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),uo.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},uo.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},uo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},uo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},uo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},uo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},uo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},uo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},uo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},uo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},uo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},uo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},uo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},uo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},uo.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},uo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},uo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},uo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},uo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},uo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},uo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},uo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},uo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},uo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},uo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(uo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?S:3e3}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties($r.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Z.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),rc.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this;return(new Jl).load(t,(function(t){e.setBuffer(t)})),this},class{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},cn.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},cn.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},G.crossOrigin=void 0,G.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new vl;r.setCrossOrigin(this.crossOrigin);const o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},G.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new gl;r.setCrossOrigin(this.crossOrigin);const o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},G.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},G.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"136"}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="136")},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(61);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&i(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(67);function r(){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=r=Reflect.get,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=r=function(t,e,n){var r=i(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},t.exports.__esModule=!0,t.exports.default=t.exports),r.apply(this,arguments)}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";(function(t){n.d(e,"e",(function(){return i})),n.d(e,"p",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"o",(function(){return l})),n.d(e,"q",(function(){return c})),n.d(e,"t",(function(){return u})),n.d(e,"i",(function(){return p})),n.d(e,"r",(function(){return h})),n.d(e,"s",(function(){return d})),n.d(e,"k",(function(){return _})),n.d(e,"m",(function(){return f})),n.d(e,"j",(function(){return m})),n.d(e,"l",(function(){return y})),n.d(e,"g",(function(){return g})),n.d(e,"f",(function(){return v})),n.d(e,"h",(function(){return b})),n.d(e,"n",(function(){return x})),n.d(e,"b",(function(){return S}));var i="1.13.2",r="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||Function("return this")()||{},o=Array.prototype,a=Object.prototype,s="undefined"!=typeof Symbol?Symbol.prototype:null,l=o.push,c=o.slice,u=a.toString,p=a.hasOwnProperty,h="undefined"!=typeof ArrayBuffer,d="undefined"!=typeof DataView,_=Array.isArray,f=Object.keys,m=Object.create,y=h&&ArrayBuffer.isView,g=isNaN,v=isFinite,b=!{toString:null}.propertyIsEnumerable("toString"),x=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1}).call(this,n(20))},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";(function(t){var i,r=n(13),o=n.n(r),a=n(1),s=(i={GameWidth:t.innerWidth,GameHeight:t.innerHeight,TextureDivisor:1e3,TownModel:"ChinaTown_01",GunModel:"Gun_M249_02",HandModel:"Hand_M249_01",ZombieModel:"Zombie_Homeless_04",Sight:"sight",Fire:"fire",AudioShoot:"gun-shot",AudioBackground:"background-music",AudioBulletImpact:"bullet-impact",AudioZombieDie:"zombie-die",ParticleBullet:{Size:.1,Alpha:1,MaxLife:.1,Rotation:2,Velocity:new a.Kb(0,0,0),IsRotation:!1,Num:3,SpriteLink:"./assets/textures/fire.png"}},o()(i,"HandModel","Hand_M249_01"),o()(i,"ZombieModel","Zombie_Homeless_04"),o()(i,"Sight","sight"),o()(i,"ZombieAnimationState","Bip001|Take 001|BaseLayer"),o()(i,"HandAnimationState","CP_Hand_Mesh|Take 001|BaseLayer.007"),o()(i,"PlayerPositionX",70),o()(i,"LoseEscapeNumber",50),o()(i,"ScorePerEnemy",5),i);e.a=s}).call(this,n(20))},function(t,e,n){var i=n(0).default,r=n(8);t.exports=function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return r(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i={};new(n(26).a)(i,["PlayerShoot","EnemyEscape","EnterEndScene","UpdateLife","UpdateScore","GainScore","Replay","Play","EnterLoadingScene"]),e.a=i},function(t,e,n){"use strict";var i={};new(n(26).a)(i,["CreateScene","PauseGame","GameOver","GameStart","LoadScene","Resize"]),e.a=i},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){t.exports=n(62)},function(t,e,n){"use strict";var i=n(29),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s);n(1);function c(t){const e=new Map,n=new Map,i=t.clone();return function t(e,n,i){i(e,n);for(let r=0;r<e.children.length;r++)t(e.children[r],n.children[r],i)}(t,i,(function(t,i){e.set(i,t),n.set(t,i)})),i.traverse((function(t){if(!t.isSkinnedMesh)return;const i=t,r=e.get(t),o=r.skeleton.bones;i.skeleton=r.skeleton.clone(),i.bindMatrix.copy(r.bindMatrix),i.skeleton.bones=o.map((function(t){return n.get(t)})),i.bind(i.skeleton,i.bindMatrix)})),i}var u=function(){function t(){a()(this,t);this.models=[],this.textures=[],this.sounds=[]}return l()(t,[{key:"AddModel",value:function(t,e){this.models[t]=e}},{key:"AddTexture",value:function(t,e){this.textures[t]=e}},{key:"AddSound",value:function(t,e){this.sounds[t]=e}},{key:"GetModel",value:function(t){var e,n=c(this.models[t]);return(e=n.animations).push.apply(e,r()(this.models[t].animations)),n}},{key:"GetTexture",value:function(t){return this.textures[t].clone()}},{key:"GetSound",value:function(t){return this.sounds[t]}}]),t}();e.a=new u},function(t,e,n){"use strict";e.a={MainScene:"MainScene",MenuScene:"MenuScene",LoadingScene:"LoadingScene",EndScene:"EndScene"}},function(t,e,n){"use strict";var i={};new(n(26).a)(i,["Model","Texture","Sound","TPS"]),e.a=i},function(t,e,n){"use strict";var i=n(3),r=n.n(i),o=n(2),a=n.n(o),s=n(4),l=n.n(s),c=n(10),u=n.n(c),p=n(5),h=n.n(p);function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=h()(t);if(e){var r=h()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u()(this,n)}}var _=function(t){l()(n,t);var e=d(n);function n(){return a()(this,n),e.call(this)}return r()(n)}(n(32).a);e.a=new _},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(18),l=function(){function t(){r()(this,t)}return a()(t,[{key:"notify",value:function(t,e){s.a.Notify(t,this,e)}},{key:"register",value:function(t){s.a.Register(t,this)}},{key:"unregister",value:function(t){s.a.Unregister(t,this)}},{key:"RemoveAllEvents",value:function(){s.a.UnregisterAll(this)}}]),t}();e.a=l},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){function n(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(i,r)}t.exports=function(t){return function(){var e=this,i=arguments;return new Promise((function(r,o){var a=t.apply(e,i);function s(t){n(a,r,o,s,l,"next",t)}function l(t){n(a,r,o,s,l,"throw",t)}s(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(18);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var y=function(t){u()(n,t);var e=m(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.addEventListener("removed",i.onDestroy.bind(i)),t}return a()(n,[{key:"notify",value:function(t,e){f.a.Notify(t,this,e)}},{key:"register",value:function(t){f.a.Register(t,this)}},{key:"unregister",value:function(t){f.a.Unregister(t,this)}},{key:"onDestroy",value:function(){f.a.UnregisterAll(this)}}]),n}(n(1).bb);e.a=y},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(35),m=n(18);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var g=function(t){u()(n,t);var e=y(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.addEventListener("removed",i.onDestroy.bind(i)),t}return a()(n,[{key:"notify",value:function(t,e){m.a.Notify(t,this,e)}},{key:"register",value:function(t){m.a.Register(t,this)}},{key:"unregister",value:function(t){m.a.Unregister(t,this)}},{key:"onDestroy",value:function(){m.a.UnregisterAll(this)}}]),n}(f.a);e.a=g},function(t,e,n){"use strict";e.a={}},function(t,e,n){"use strict";(function(t){var i=n(24),r=n(17),o=n(16);t.USING_EMBEDDED_ASSETS=!0,i.a.BackgroundURL="./assets/textures/background.jpg",i.a[o.a.MainScene]=[{name:"ChinaTown_01",type:r.a.Model,path:"./assets/models/ChinaTown_01.glb"},{name:"Gun_M249_02",type:r.a.Model,path:"./assets/models/Gun_M249_02.glb"},{name:"Hand_M249_01",type:r.a.Model,path:"./assets/models/Hand_M249_01.glb"},{name:"Zombie_Homeless_04",type:r.a.Model,path:"./assets/models/Zombie_Homeless_04.glb"},{name:"sight",type:r.a.Texture,path:"./assets/textures/sight.png"},{name:"fire",type:r.a.Texture,path:"./assets/textures/fire.png"},{name:"gun-shot",type:r.a.Sound,path:"./assets/sounds/gun-shot.mp3"},{name:"bullet-impact",type:r.a.Sound,path:"./assets/sounds/bullet-impact.mp3"},{name:"zombie-die",type:r.a.Sound,path:"./assets/sounds/zombie-die.mp3"},{name:"background-music",type:r.a.Sound,path:"./assets/sounds/background-music.mp3"}],e.a=i.a}).call(this,n(20))},function(t,e,n){"use strict";var i=n(3),r=n.n(i),o=n(2),a=n.n(o),s=r()((function t(e,n){a()(this,t),n.forEach((function(t){e[t]=t})),Object.freeze(e)}));e.a=s},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=function(){function t(e,n){r()(this,t);this.availabels=[],this.usings=[];for(var i=0;i<n;i++)this.availabels.push(new e)}return a()(t,[{key:"Pop",value:function(){var t=this.availabels.shift();return t&&(t.visible=!0,this.usings.push(t)),t}},{key:"Push",value:function(t){this.usings.includes(t)&&(this.usings.Remove(t),this.availabels.push(t),t.visible=!1,t.Reset&&t.Reset())}}]),t}();e.a=s},function(t,e,n){"use strict";(function(t){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(1),m=n(19),y=n(12),g=n(33),v=n(57),b=n(58);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}t.DEBUG=!0;var S=function(e){u()(i,e);var n=x(i);function i(e,o){var a;r()(this,i),a=n.call(this);var s=l()(a);return s.frameCount=0,s.then=performance.now(),s.elapsed=0,s.fps=60,s.fpsInterval=1e3/s.fps,s.startTime=s.then,s.scene=null,s.canvas=document.querySelector("canvas.webgl"),s.canvas.width=e,s.canvas.height=o,s.renderer=new f.Mb({canvas:s.canvas,alpha:!1,antialias:!0}),s.renderer.setPixelRatio(window.devicePixelRatio),s.renderer.outputEncoding=f.Nb,s.renderer.shadowMap.enabled=!0,s.renderer.setSize(e,o),document.body.appendChild(s.renderer.domElement),s.forceHideCursor=!1,t.addEventListener("resize",s.onResize.bind(s)),s.sceneManager=new g.a,s.register(y.a.CreateScene),s.register(y.a.GameOver),s.register(y.a.GameStart),s.register(y.a.LoadScene),s.addScenes(),s.addKeyEvent(),a}return a()(i,[{key:"addKeyEvent",value:function(){var e=this;t.DEBUG&&(t.addEventListener("keydown",(function(t){"Control"==t.key&&(e.controls.enabled=!0,e.transformControls.enabled=!1)})),t.addEventListener("keyup",(function(t){"Control"==t.key&&(e.controls.enabled=!1,e.transformControls.enabled=!0)})))}},{key:"addHelper",value:function(){t.DEBUG&&(this.controls=new v.a(this.scene.camera,this.renderer.domElement),this.transformControls=new b.a(this.scene.camera,this.renderer.domElement),this.controls.enabled=!1,this.transformControls.attach(this.scene.light),this.scene.add(this.transformControls),this.scene.add(new f.i(500)))}},{key:"onCreateScene",value:function(t){this.scene=t.scene,this.pause=!1,this.addHelper()}},{key:"onGameOver",value:function(){document.body.style.cursor="auto",this.pause=!0,this.forceHideCursor=!1}},{key:"onGameStart",value:function(){this.pause=!1,this.forceHideCursor=!0}},{key:"onLoadScene",value:function(t){this.sceneManager.LoadScene(t)}},{key:"addScenes",value:function(){}},{key:"resetTime",value:function(){this.startTime=performance.now(),this.then=performance.now(),this.frameCount=0,this.isLostFocus=!1,this.forceHideCursor&&(document.body.style.cursor="none")}},{key:"onLostFocus",value:function(){this.isLostFocus=!0,this.forceHideCursor&&(document.body.style.cursor="auto")}},{key:"StartAnimating",value:function(){t.addEventListener("focus",this.resetTime.bind(this)),t.addEventListener("blur",this.onLostFocus.bind(this)),this.resetTime(),this.update()}},{key:"update",value:function(){if(requestAnimationFrame(this.update.bind(this)),!this.isLostFocus&&!this.pause){var t=performance.now();this.elapsed=t-this.then;var e=t-this.startTime,n=Math.round(e/++this.frameCount)/1e3;this.controls&&this.controls.update(),this.scene&&(this.scene.Update(n),this.scene.UpdateChildren(n)),this.elapsed>this.fpsInterval&&(this.then=t-this.elapsed%this.fpsInterval,this.scene&&this.render())}}},{key:"render",value:function(){if(this.resizeRendererToDisplaySize()){var t=this.renderer.domElement;this.scene.camera.aspect=t.clientWidth/t.clientHeight,this.scene.camera.updateProjectionMatrix()}this.renderer.render(this.scene,this.scene.camera)}},{key:"onResize",value:function(){this.notify(y.a.Resize,{width:window.innerWidth,height:window.innerHeight})}},{key:"resizeRendererToDisplaySize",value:function(){var t=this.renderer.domElement,e=t.clientWidth,n=t.clientHeight,i=t.width!==e||t.height!==n;return i&&this.renderer.setSize(e,n,!1),i}}]),i}(m.a);e.a=S}).call(this,n(20))},function(t,e,n){var i=n(63),r=n(64),o=n(53),a=n(65);t.exports=function(t){return i(t)||r(t)||o(t)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));const i=2200,r=2201},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(1),m=n(15),y=n(9);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var v=function(t){u()(n,t);var e=g(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.display=new f.S(new f.xb(.02,8,8),new f.T({color:16777215})),i.add(i.display),i.velocity=new f.Kb,i.DestroyBullet=function(){},i.audioListener=new f.g,i.add(i.audioListener),i.soundShoot=new f.f(i.audioListener),i.soundShoot.setBuffer(m.a.GetSound(y.a.AudioBulletImpact)),i.soundShoot.setVolume(.5),t}return a()(n,[{key:"Update",value:function(t){this.position.add(this.velocity.clone().multiplyScalar(t))}},{key:"start",value:function(){this.canCollide=!0}},{key:"OnCollisionEnter",value:function(){(this.visible||this.canCollide)&&(this.canCollide=!1,this.soundShoot.play(),this.DestroyBullet(this))}}]),n}(f.bb);e.a=v},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=function(){function t(){r()(this,t);this.nodes={},this.isNotifying=!1,this.queueEvents=[]}return a()(t,[{key:"Notify",value:function(t,e,n){this.isNotifying?this.enqueue(t,e,n):(this.isNotifying=!0,this.nodes[t].forEach((function(t){t.source[t.onEvent](n,e)})),this.isNotifying=!1,this.queueEvents.length>0&&this.dequeue())}},{key:"enqueue",value:function(t,e,n){this.queueEvents.push({event:t,source:e,data:n})}},{key:"dequeue",value:function(){var t=this.queueEvents.shift();this.Notify(t.event,t.source,t.data)}},{key:"Register",value:function(t,e){var n=this.nodes[t];null==n&&(n=[],this.nodes[t]=n),n.includes(e)||n.push({source:e,onEvent:"on"+t})}},{key:"Unregister",value:function(t,e){var n=this.nodes[t]||[];n.forEach((function(t){t.source==e&&n.Remove(t)}))}},{key:"UnregisterAll",value:function(t){var e=this;Object.keys(e.nodes).forEach((function(n){e.Unregister(n,t)}))}}]),t}();e.a=s},function(t,e,n){"use strict";var i=n(21),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),c=n(8),u=n.n(c),p=n(4),h=n.n(p),d=n(10),_=n.n(d),f=n(5),m=n.n(f),y=n(14),g=n.n(y),v=n(19),b=n(12),x=n(51);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=m()(t);if(e){var r=m()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _()(this,n)}}var w=function(t){h()(i,t);var e,n=S(i);function i(){var t;a()(this,i),t=n.call(this);var e=u()(t);return e.templates={},e.currentScene=null,e.prevScene=null,e.assetsLoader=new x.a,t}return l()(i,[{key:"createScene",value:function(t){var e=new t;this.prevScene=this.currentScene,this.prevScene&&this.prevScene.Destroy(!1),this.prevScene=null,this.currentScene=e,this.currentScene.SetVisible(!0),this.notify(b.a.CreateScene,{scene:this.currentScene})}},{key:"AddScene",value:function(t,e){this.templates[e]=t}},{key:"LoadScene",value:(e=r()(g.a.mark((function t(e){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.next=3,n.assetsLoader.LoadAssets(e);case 3:n.LoadSceneComplete(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"LoadSceneComplete",value:function(t){this.createScene(this.templates[t])}}]),i}(v.a);e.a=w},function(t,e){},function(t,e,n){"use strict";(function(t){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(1);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var y=function(e){u()(i,e);var n=m(i);function i(){var e;r()(this,i),e=n.call(this);var o=l()(e);return o.camera=new f.fb(50,t.innerWidth/t.innerHeight,.1,1e3),o.background=new f.p(11184810),e}return a()(i,[{key:"SetVisible",value:function(t){this.visible=t}},{key:"Destroy",value:function(){this.SetVisible(!1)}}]),i}(f.rb);e.a=y}).call(this,n(20))},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=function(){function t(){r()(this,t)}return a()(t,null,[{key:"DetectCollisionCubes",value:function(t,e){t.geometry.computeBoundingBox(),e.geometry.computeBoundingBox(),t.updateMatrixWorld(),e.updateMatrixWorld();var n=t.geometry.boundingBox.clone();n.applyMatrix4(t.matrixWorld);var i=e.geometry.boundingBox.clone();return i.applyMatrix4(e.matrixWorld),n.intersectsBox(i)}}]),t}();e.a=s},function(t,e,n){"use strict";(function(t){var i=n(29),r=n.n(i),o=n(2),a=n.n(o),s=n(3),l=n.n(s),c=n(8),u=n.n(c),p=n(6),h=n.n(p),d=n(4),_=n.n(d),f=n(10),m=n.n(f),y=n(5),g=n.n(y),v=n(23),b=n(1),x=n(9),S=n(15),w=n(38),M=n(11),T=(n(27),n(31),n(39)),C=n(40),E=n(42),A=n(36),R=n(12),L=n(16);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}var D=function(e){_()(i,e);var n=P(i);function i(){var t;a()(this,i),t=n.call(this);var e=u()(t);return e.town=null,e.player=null,e.poolBullet=null,e.particleFire=null,e.totalEnemyEscaped=0,e.soundShoot=null,e.audioListener=null,e.score=0,e.init(),e.addLights(),e.register(M.a.PlayerShoot),e.register(M.a.EnemyEscape),e.register(M.a.GainScore),e.notify(R.a.GameStart),t}return l()(i,[{key:"init",value:function(){this.camera=new b.fb(50,x.a.GameWidth/x.a.GameHeight,.1,1e3),this.camera.position.set(69.14515045582493,7.410359567433639,-26.747926079875867),this.camera.rotation.set(-1.9148102974773085,1.4031673300296512,1.9193167100106272),this.town=S.a.GetModel(x.a.TownModel),this.add(this.town),this.player=new w.a,this.player.position.set(68.55,7,-27.2),this.player.rotation.x=Math.PI/15,this.player.rotation.y=-Math.PI/2,this.add(this.player),this.raycaster=new b.pb,t.raycaster=this.raycaster,this.mouse=new b.Jb,this.plane=new b.gb(new b.Kb(1,0,0),0),this.intersectPoint=new b.Kb;var e=S.a.GetTexture(x.a.Sight);this.sight=new b.Ab(e),this.sight.position.set(this.camera.position.x-2,this.camera.position.y,this.camera.position.z),this.sight.scale.set(e.map.image.width/x.a.TextureDivisor/5,e.map.image.height/x.a.TextureDivisor/5,1),this.add(this.sight),t.addEventListener("mousemove",this.onMouseMove.bind(this)),this.bulletSpawner=new T.a(this),this.add(this.bulletSpawner),this.enemySpawner=new C.a([new b.Kb(-19.115,0,-26),new b.Kb(-19.115,0,-27),new b.Kb(-19.115,0,-28),new b.Kb(-19.115,0,-29),new b.Kb(-19.115,0,-30),new b.Kb(-19.115,0,-31),new b.Kb(-19.115,0,-32)]),this.add(this.enemySpawner),this.particleFire=new E.a({parent:this,camera:this.camera,info:x.a.ParticleBullet,texture:S.a.GetTexture(x.a.Fire).map}),this.audioListener=new b.g,this.player.add(this.audioListener),this.soundShoot=new b.f(this.audioListener),this.soundShoot.setBuffer(S.a.GetSound(x.a.AudioShoot)),this.soundShoot.setVolume(.5),this.backgroundMusic=new b.f(this.audioListener),this.backgroundMusic.setBuffer(S.a.GetSound(x.a.AudioBackground)),this.backgroundMusic.setVolume(.5),this.backgroundMusic.setLoop(!0),this.backgroundMusic.play()}},{key:"Destroy",value:function(){h()(g()(i.prototype),"Destroy",this).call(this);this.onDestroy(),this.player.Reset(),this.totalEnemyEscaped=0,this.backgroundMusic.stop(),this.remove(this.enemySpawner),this.remove(this.bulletSpawner),this.remove(this.player)}},{key:"onPlayerShoot",value:function(){this.soundShoot.isPlaying=!1,this.particleFire.AddParticles(this.player.GetSpawnBulletPosition()),this.soundShoot.play()}},{key:"onEnemyEscape",value:function(){this.totalEnemyEscaped++,this.totalEnemyEscaped>=x.a.LoseEscapeNumber?(this.notify(R.a.GameOver),this.notify(R.a.LoadScene,L.a.EndScene)):this.notify(M.a.UpdateLife,x.a.LoseEscapeNumber-this.totalEnemyEscaped)}},{key:"onGainScore",value:function(t){this.score+=t,this.notify(M.a.UpdateScore,this.score)}},{key:"Update",value:function(t){this.updateRaycast(),this.particleFire.Update(t),this.checkCollision()}},{key:"checkCollision",value:function(){for(var t=this.bulletSpawner.children,e=this.enemySpawner.children,n=0;n<t.length;n++)for(var i=t[n],r=0;r<e.length;r++){var o=e[r];if(i.canCollide&&o.canCollide&&A.a.DetectCollisionCubes(i.display,o.cube)){n--,i.OnCollisionEnter(o),o.OnCollisionEnter(i);break}}}},{key:"updateRaycast",value:function(){this.raycaster.setFromCamera(this.mouse,this.camera);var t=[];this.raycaster.intersectObjects([this.town].concat(r()(this.enemySpawner.children)),!0,t),t.length>0?this.intersectPoint=t[0].point.clone():this.raycaster.ray.intersectPlane(this.plane,this.intersectPoint),this.sight.position.copy(this.camera.position.clone().add(this.raycaster.ray.direction.normalize().multiplyScalar(2))),this.player.lookAt(this.intersectPoint)}},{key:"onMouseMove",value:function(e){this.mouse.x=e.clientX/t.innerWidth*2-1,this.mouse.y=-e.clientY/t.innerHeight*2+1}},{key:"addLights",value:function(){var t=new b.r(16777215,2);t.shadow.camera.bottom=window.innerWidth,t.shadow.camera.top=window.innerWidth,t.shadow.camera.left=window.innerHeight,t.shadow.camera.right=window.innerHeight,t.target=this;var e=new b.b(16777215,2);this.add(e),this.add(t)}}]),i}(v.a);e.a=D}).call(this,n(20))},function(t,e,n){"use strict";(function(t){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(15),m=n(22),y=n(9),g=n(11),v=n(1),b=n(30);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var S=function(e){u()(i,e);var n=x(i);function i(){var e;r()(this,i),e=n.call(this);var o=l()(e);return o.gun=f.a.GetModel(y.a.GunModel),o.add(o.gun),o.hand=f.a.GetModel(y.a.HandModel),o.hand.position.set(-.03,-1.45,-.09),o.hand.children[0].children[3].frustumCulled=!1,o.add(o.hand),o.spawnTarget=new v.bb,o.spawnTarget.position.set(0,.12,.7),o.spawnTarget.visible=!1,o.add(o.spawnTarget),o.mixer=new v.d(o.hand),o.handClip=o.hand.animations[0],o.animation=o.mixer.clipAction(o.handClip),o.animation.setLoop(b.a,1),o.bindingMouseDown=o.startShooting.bind(o),o.bindingMouseUp=o.stopShooting.bind(o),t.addEventListener("mousedown",o.bindingMouseDown),t.addEventListener("mouseup",o.bindingMouseUp),e}return a()(i,[{key:"Update",value:function(t){this.mixer.update(t)}},{key:"Reset",value:function(){clearTimeout(this.shootingTimeOut),t.removeEventListener("mousedown",this.bindingMouseDown),t.removeEventListener("mouseup",this.bindingMouseUp)}},{key:"stopShooting",value:function(){clearTimeout(this.shootingTimeOut)}},{key:"GetSpawnBulletPosition",value:function(){return this.localToWorld(this.spawnTarget.position.clone())}},{key:"GetFireBulletPosition",value:function(){return this.spawnTarget.position.clone()}},{key:"startShooting",value:function(){var t=this;t.notify(g.a.PlayerShoot),t.animation.stop(),t.animation.play(),t.gun.position.set(-.002,.002,0),setTimeout((function(){t.gun.position.set(0,0,0)}),50),t.shootingTimeOut=setTimeout((function(){t.startShooting()}),100)}}]),i}(m.a);e.a=S}).call(this,n(20))},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(22),m=n(11),y=n(27),g=n(31);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var b=function(t){u()(n,t);var e=v(n);function n(t){var i;r()(this,n),i=e.call(this);var o=l()(i);return o.scene=t,o.poolBullet=new y.a(g.a,100),o.register(m.a.PlayerShoot),i}return a()(n,[{key:"onPlayerShoot",value:function(){this.spawn()}},{key:"spawn",value:function(){var t=this,e=t.poolBullet.Pop();if(e){var n=t.worldToLocal(t.scene.player.GetSpawnBulletPosition());e.position.copy(n),e.DestroyBullet=t.DestroyBullet.bind(t),e.velocity=t.scene.intersectPoint.clone().sub(e.position).normalize().multiplyScalar(1e4),e.start(),t.add(e),setTimeout((function(){t.remove(e),t.poolBullet.Push(e)}),5e3)}}},{key:"DestroyBullet",value:function(t){this.poolBullet.Push(t),this.remove(t)}}]),n}(f.a);e.a=b},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(22),m=n(27),y=n(41),g=n(1),v=n(11);n(9);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var x=function(t){u()(n,t);var e=b(n);function n(t){var i;r()(this,n),i=e.call(this);var o=l()(i);return o.spawnPositions=t,o.pool=new m.a(y.a,200),o.scheduleSpawn(),i}return a()(n,[{key:"scheduleSpawn",value:function(){var t=this;setTimeout((function(){t.spawn(),t.scheduleSpawn()}),300)}},{key:"spawn",value:function(){var t=this.pool.Pop();if(t){var e=this.spawnPositions[Math.floor(Math.random()*this.spawnPositions.length)];t.velocity=new g.Kb(5,0,0),t.position.copy(e),t.start(),t.EnemyEscape=this.EnemyEscape.bind(this),t.EnemyDied=this.DestroyEnemy.bind(this),this.add(t)}}},{key:"EnemyEscape",value:function(){this.notify(v.a.EnemyEscape),this.DestroyEnemy()}},{key:"DestroyEnemy",value:function(t){this.pool.Push(t),this.remove(t)}}]),n}(f.a);e.a=x},function(t,e,n){"use strict";(function(t){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(1),m=n(15),y=n(22),g=n(9),v=n(30),b=n(11);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var S=function(e){u()(i,e);var n=x(i);function i(){var e;r()(this,i),e=n.call(this);var o=l()(e);return o.escaped=!1,o.PlayerAttacked=function(t){},o.display=m.a.GetModel(g.a.ZombieModel),o.display.rotation.y=Math.PI/2,o.add(o.display),o.mixer=new f.d(o.display),o.runClip=f.e.subclip(o.display.animations[0],g.a.ZombieAnimationState,0,26),o.dieClip=f.e.subclip(o.display.animations[0],g.a.ZombieAnimationState,26,63),t.a=o.display.animations[0].clone(),t.b=o.display.animations[0].clone(),o.createGhostMesh(),o.EnemyEscape=function(){},o.audioListener=new f.g,o.add(o.audioListener),o.soundShoot=new f.f(o.audioListener),o.soundShoot.setBuffer(m.a.GetSound(g.a.AudioZombieDie)),o.soundShoot.setVolume(.5),e}return a()(i,[{key:"start",value:function(){this.animation=this.mixer.clipAction(this.runClip),this.animation.setLoop(v.b,1/0),this.animation.play(),this.canCollide=!0,this.escaped=!1}},{key:"createGhostMesh",value:function(){var t=new f.l(1,3.5,1),e=new f.T({color:65280});this.cube=new f.S(t,e),this.cube.visible=!1,this.add(this.cube)}},{key:"Update",value:function(t){this.escaped||(this.mixer.update(t),this.position.add(this.velocity.clone().multiplyScalar(t)),this.position.x>=g.a.PlayerPositionX&&(this.escaped=!0,this.EnemyEscape(this)))}},{key:"OnCollisionEnter",value:function(){var t=this;(t.visible||t.canCollide)&&(t.animation.stop(),t.animation=t.mixer.clipAction(t.dieClip),t.animation.setLoop(v.a,1),t.animation.clampWhenFinished=!0,t.animation.play(),t.velocity.set(0,0,0),t.canCollide=!1,t.notify(b.a.GainScore,g.a.ScorePerEnemy),t.soundShoot.play(),setTimeout((function(){t.Reset(),t.EnemyDied(t)}),3e3))}},{key:"Reset",value:function(){this.animation.stop()}}]),i}(y.a);e.a=S}).call(this,n(20))},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(1);function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u=function(){function t(e){r()(this,t),this._points=[],this._lerp=e}return a()(t,[{key:"AddPoint",value:function(t,e){this._points.push([t,e])}},{key:"Get",value:function(t){for(var e=0,n=0;n<this._points.length&&!(this._points[n][0]>=t);n++)e=n;var i=Math.min(this._points.length-1,e+1);return e==i?this._points[e][1]:this._lerp((t-this._points[e][0])/(this._points[i][0]-this._points[e][0]),this._points[e][1],this._points[i][1])}}]),t}(),p=function(){function t(e,n){r()(this,t);this.info=e.info,this.texture=e.texture;var i={diffuseTexture:{value:this.texture},pointMultiplier:{value:window.innerHeight/(2*Math.tan(30*Math.PI/180))}};this._material=new s.sb({uniforms:i,vertexShader:"\nuniform float pointMultiplier;\n\nattribute float size;\nattribute float angle;\nattribute vec4 colour;\n\nvarying vec4 vColour;\nvarying vec2 vAngle;\n\nvoid main() {\n  vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\n  gl_Position = projectionMatrix * mvPosition;\n  gl_PointSize = size * pointMultiplier / gl_Position.w;\n\n  vAngle = vec2(cos(angle), sin(angle));\n  vColour = colour;\n}",fragmentShader:"\n\nuniform sampler2D diffuseTexture;\n\nvarying vec4 vColour;\nvarying vec2 vAngle;\n\nvoid main() {\n  vec2 coords = (gl_PointCoord - 0.5) * mat2(vAngle.x, vAngle.y, -vAngle.y, vAngle.x) + 0.5;\n  gl_FragColor = texture2D(diffuseTexture, coords) * vColour;\n}",blending:s.a,depthTest:!0,depthWrite:!1,transparent:!0,vertexColors:!0}),this._camera=e.camera,this._particles=[],this._geometry=new s.n,this._geometry.setAttribute("position",new s.w([],3)),this._geometry.setAttribute("size",new s.w([],1)),this._geometry.setAttribute("colour",new s.w([],4)),this._geometry.setAttribute("angle",new s.w([],1)),this._points=new s.jb(this._geometry,this._material),e.parent.add(this._points),this._alphaSpline=new u((function(t,e,n){return e+t*(n-e)})),this._alphaSpline.AddPoint(0,0),this._alphaSpline.AddPoint(.1,1),this._alphaSpline.AddPoint(.6,1),this._alphaSpline.AddPoint(1,0),this._colourSpline=new u((function(t,e,n){return e.clone().lerp(n,t)})),this._colourSpline.AddPoint(0,new s.p(16777088)),this._colourSpline.AddPoint(1,new s.p(16744576)),this._sizeSpline=new u((function(t,e,n){return e+t*(n-e)})),this._sizeSpline.AddPoint(0,1),this._sizeSpline.AddPoint(.5,5),this._sizeSpline.AddPoint(1,1),this._UpdateGeometry()}return a()(t,[{key:"AddParticles",value:function(t){for(var e=Math.random()*this.info.Num,n=0;n<e;n++){var i=Math.random()*this.info.MaxLife;this._particles.push({position:new s.Kb(t.x,t.y,t.z),size:this.info.Size,colour:new s.p,alpha:this.info.Alpha,life:i,maxLife:i,rotation:Math.random()*this.info.Rotation*Math.PI,velocity:this.info.Velocity})}}},{key:"_UpdateGeometry",value:function(){var t,e=[],n=[],i=[],r=[],o=l(this._particles);try{for(o.s();!(t=o.n()).done;){var a=t.value;e.push(a.position.x,a.position.y,a.position.z),i.push(a.colour.r,a.colour.g,a.colour.b,a.alpha),n.push(a.currentSize),r.push(a.rotation)}}catch(t){o.e(t)}finally{o.f()}this._geometry.setAttribute("position",new s.w(e,3)),this._geometry.setAttribute("size",new s.w(n,1)),this._geometry.setAttribute("colour",new s.w(i,4)),this._geometry.setAttribute("angle",new s.w(r,1)),this._geometry.attributes.position.needsUpdate=!0,this._geometry.attributes.size.needsUpdate=!0,this._geometry.attributes.colour.needsUpdate=!0,this._geometry.attributes.angle.needsUpdate=!0}},{key:"_UpdateParticles",value:function(t){var e,n=this,i=l(this._particles);try{for(i.s();!(e=i.n()).done;){e.value.life-=t}}catch(t){i.e(t)}finally{i.f()}this._particles=this._particles.filter((function(t){return t.life>0}));var r,o=l(this._particles);try{for(o.s();!(r=o.n()).done;){var a=r.value,s=1-a.life/a.maxLife;this.info.IsRotation&&(a.rotation+=.5*t),a.alpha=this._alphaSpline.Get(s),a.currentSize=a.size*this._sizeSpline.Get(s),a.colour.copy(this._colourSpline.Get(s)),a.position.add(a.velocity.clone().multiplyScalar(t));var c=a.velocity.clone();c.multiplyScalar(.1*t),c.x=Math.sign(a.velocity.x)*Math.min(Math.abs(c.x),Math.abs(a.velocity.x)),c.y=Math.sign(a.velocity.y)*Math.min(Math.abs(c.y),Math.abs(a.velocity.y)),c.z=Math.sign(a.velocity.z)*Math.min(Math.abs(c.z),Math.abs(a.velocity.z)),a.velocity.sub(c)}}catch(t){o.e(t)}finally{o.f()}this._particles.sort((function(t,e){var i=n._camera.position.distanceTo(t.position),r=n._camera.position.distanceTo(e.position);return i>r?-1:i<r?1:0}))}},{key:"Update",value:function(t){this._UpdateParticles(t),this._UpdateGeometry()}}]),t}();e.a=p},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(12),m=n(23),y=n(11),g=n(16);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var b=function(t){u()(n,t);var e=v(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.notify(y.a.EnterEndScene),i.register(y.a.Replay),t}return a()(n,[{key:"onReplay",value:function(){this.notify(f.a.LoadScene,g.a.MainScene)}}]),n}(m.a);e.a=b},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(23),m=n(12),y=n(16),g=n(11),v=n(45),b=n(46);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var S=function(t){u()(n,t);var e=x(n);function n(){var t;return r()(this,n),t=e.call(this),l()(t).register(g.a.Play),new v.a,new b.a,document.body.style.cursor="auto",t}return a()(n,[{key:"onPlay",value:function(){this.notify(m.a.LoadScene,y.a.LoadingScene)}}]),n}(f.a);e.a=S},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(19),m=(n(12),n(11)),y=n(25),g=n(9);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var b=function(t){u()(n,t);var e=v(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.register(m.a.EnterLoadingScene),i.container=document.createElement("div"),i.container.className="menu-panel",i.container.style.position="fixed",i.container.style.width=g.a.GameWidth+"px",i.container.style.height=g.a.GameHeight+"px",document.body.appendChild(i.container),i.background=new Image,i.background.style.width=g.a.GameWidth+"px",i.background.style.height=g.a.GameHeight+"px",i.background.src=y.a.BackgroundURL,i.container.appendChild(i.background),i.playButton=document.createElement("button"),i.playButton.style.width="200px",i.playButton.style.height="70px",i.playButton.style.position="fixed",i.playButton.style.top="500px",i.playButton.style.left=g.a.GameWidth/2-100+"px",i.playButton.style.color="red",i.playButton.style.fontFamily="fantasy",i.playButton.textContent="PLAY",i.playButton.style.fontSize="40px",i.playButton.onclick=i.play.bind(i),i.container.appendChild(i.playButton),i.gameName=document.createElement("div"),i.gameName.style.position="fixed",i.gameName.style.width="800px",i.gameName.style.height="200px",i.gameName.style.fontSize="100px",i.gameName.style.color="red",i.gameName.style.left=g.a.GameWidth/2-400+"px",i.gameName.style.top="50px",i.gameName.textContent="ZOMBIE ATTACK",i.gameName.style.fontFamily="fantasy",i.gameName.style.userSelect="none",i.centerText(i.gameName),i.container.appendChild(i.gameName),t}return a()(n,[{key:"centerText",value:function(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center"}},{key:"onEnterLoadingScene",value:function(){this.setVisible(!1)}},{key:"play",value:function(){this.notify(m.a.Play)}},{key:"setVisible",value:function(t){this.container.style.display=t?"block":"none"}}]),n}(f.a);e.a=b},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(19),m=n(12),y=n(11),g=(n(25),n(9));function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var b=function(t){u()(n,t);var e=v(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.register(m.a.GameStart),i.register(y.a.EnterLoadingScene),i.container=document.createElement("div"),i.container.className="loading-panel",i.container.style.position="fixed",i.container.style.width=g.a.GameWidth+"px",i.container.style.height=g.a.GameHeight+"px",i.container.style.backgroundColor="#131B34",document.body.appendChild(i.container),i.loadingText=document.createElement("div"),i.loadingText.style.position="fixed",i.loadingText.style.width="300px",i.loadingText.style.height="100px",i.loadingText.style.fontSize="50px",i.loadingText.style.color="red",i.loadingText.style.left=g.a.GameWidth/2-150+"px",i.loadingText.style.top=g.a.GameHeight/2-50+"px",i.loadingText.textContent="LOADING...",i.loadingText.style.fontFamily="fantasy",i.loadingText.style.userSelect="none",i.centerText(i.loadingText),i.container.appendChild(i.loadingText),i.setVisible(!1),t}return a()(n,[{key:"onEnterLoadingScene",value:function(){this.setVisible(!0)}},{key:"onGameStart",value:function(){this.setVisible(!1)}},{key:"play",value:function(){this.notify(y.a.Play)}},{key:"centerText",value:function(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center"}},{key:"setVisible",value:function(t){this.container.style.display=t?"block":"none"}}]),n}(f.a);e.a=b},function(t,e,n){"use strict";var i=n(3),r=n.n(i),o=n(2),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(12),m=n(16),y=n(23),g=n(48),v=n(49),b=n(11);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var S=function(t){u()(n,t);var e=x(n);function n(){var t;a()(this,n),t=e.call(this);var i=l()(t);return new g.a,new v.a,i.notify(b.a.EnterLoadingScene),i.notify(f.a.LoadScene,m.a.MainScene),t}return r()(n)}(y.a);e.a=S},function(t,e,n){"use strict";(function(t){var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(19),m=n(12),y=n(11),g=n(9);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var b=function(e){u()(i,e);var n=v(i);function i(){var e;r()(this,i),e=n.call(this);var o=l()(e);return o.register(m.a.GameStart),o.register(y.a.EnterEndScene),o.register(y.a.UpdateLife),o.register(y.a.UpdateScore),o.container=document.createElement("div"),o.container.className="main-panel",o.container.style.position="fixed",o.container.style.width=g.a.GameHeight+"px",o.container.style.height=g.a.GameHeight+"px",document.body.appendChild(o.container),o.totalEscapedPanel=document.createElement("div"),o.totalEscapedPanel.style.position="fixed",o.totalEscapedPanel.style.width="300px",o.totalEscapedPanel.style.height="100px",o.totalEscapedPanel.style.fontSize="50px",o.totalEscapedPanel.style.color="red",o.totalEscapedPanel.style.left="100px",o.totalEscapedPanel.style.top="0px",o.totalEscapedPanel.textContent="LIFE: 50",o.totalEscapedPanel.style.fontFamily="fantasy",o.totalEscapedPanel.style.userSelect="none",o.centerText(o.totalEscapedPanel),o.container.appendChild(o.totalEscapedPanel),o.scorePanel=document.createElement("div"),o.scorePanel.style.position="fixed",o.scorePanel.style.width="300px",o.scorePanel.style.height="100px",o.scorePanel.style.fontSize="50px",o.scorePanel.style.color="red",o.scorePanel.style.left=t.innerWidth/2-150+"px",o.scorePanel.style.top="0px",o.scorePanel.textContent="SCORE: 50",o.scorePanel.style.fontFamily="fantasy",o.scorePanel.style.userSelect="none",o.centerText(o.scorePanel),o.container.appendChild(o.scorePanel),o.setVisible(!1),e}return a()(i,[{key:"setVisible",value:function(t){this.container.style.display=t?"block":"none"}},{key:"centerText",value:function(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center"}},{key:"onGameStart",value:function(){this.updateLife(g.a.LoseEscapeNumber),this.updateScore(0),this.setVisible(!0)}},{key:"onEnterEndScene",value:function(){this.setVisible(!1)}},{key:"onUpdateLife",value:function(t){this.updateLife(t)}},{key:"onUpdateScore",value:function(t){this.updateScore(t)}},{key:"updateLife",value:function(t){this.totalEscapedPanel.textContent="LIFE: "+t}},{key:"updateScore",value:function(t){this.scorePanel.textContent="SCORE: "+t}}]),i}(f.a);e.a=b}).call(this,n(20))},function(t,e,n){"use strict";var i=n(2),r=n.n(i),o=n(3),a=n.n(o),s=n(8),l=n.n(s),c=n(4),u=n.n(c),p=n(10),h=n.n(p),d=n(5),_=n.n(d),f=n(19),m=n(12),y=n(11),g=n(25),v=n(9);function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=_()(t);if(e){var r=_()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var x=function(t){u()(n,t);var e=b(n);function n(){var t;r()(this,n),t=e.call(this);var i=l()(t);return i.register(y.a.EnterEndScene),i.register(m.a.GameStart),i.register(y.a.UpdateScore),i.container=document.createElement("div"),i.container.className="end-panel",i.container.style.position="fixed",i.container.style.width=v.a.GameWidth+"px",i.container.style.height=v.a.GameHeight+"px",document.body.appendChild(i.container),i.background=new Image,i.background.style.width=v.a.GameWidth+"px",i.background.style.height=v.a.GameHeight+"px",i.background.src=g.a.BackgroundURL,i.container.appendChild(i.background),i.scorePanel=document.createElement("div"),i.scorePanel.style.position="fixed",i.scorePanel.style.width="800px",i.scorePanel.style.height="200px",i.scorePanel.style.fontSize="70px",i.scorePanel.style.color="red",i.scorePanel.style.left=v.a.GameWidth/2-400+"px",i.scorePanel.style.top="50px",i.scorePanel.textContent="YOUR SCORE: 0",i.scorePanel.style.fontFamily="fantasy",i.scorePanel.style.userSelect="none",i.centerText(i.scorePanel),i.container.appendChild(i.scorePanel),i.replayButton=document.createElement("button"),i.replayButton.style.width="200px",i.replayButton.style.height="70px",i.replayButton.style.position="fixed",i.replayButton.style.top="500px",i.replayButton.style.left=v.a.GameWidth/2-100+"px",i.replayButton.style.color="red",i.replayButton.style.fontFamily="fantasy",i.replayButton.textContent="REPLAY",i.replayButton.style.fontSize="40px",i.replayButton.onclick=i.replay.bind(i),i.container.appendChild(i.replayButton),i.setVisible(!1),t}return a()(n,[{key:"replay",value:function(){this.notify(y.a.Replay)}},{key:"setVisible",value:function(t){this.container.style.display=t?"block":"none"}},{key:"centerText",value:function(t){t.style.display="flex",t.style.justifyContent="center",t.style.alignItems="center"}},{key:"onUpdateScore",value:function(t){this.updateScore(t)}},{key:"onEnterEndScene",value:function(){this.setVisible(!0)}},{key:"onGameStart",value:function(){this.setVisible(!1)}},{key:"updateScore",value:function(t){this.scorePanel.textContent="YOUR SCORE: "+t}}]),n}(f.a);e.a=x},function(t,e,n){"use strict";var i={};n.r(i),n.d(i,"VERSION",(function(){return l.e})),n.d(i,"restArguments",(function(){return c})),n.d(i,"isObject",(function(){return u})),n.d(i,"isNull",(function(){return p})),n.d(i,"isUndefined",(function(){return h})),n.d(i,"isBoolean",(function(){return d})),n.d(i,"isElement",(function(){return _})),n.d(i,"isString",(function(){return m})),n.d(i,"isNumber",(function(){return y})),n.d(i,"isDate",(function(){return g})),n.d(i,"isRegExp",(function(){return v})),n.d(i,"isError",(function(){return b})),n.d(i,"isSymbol",(function(){return x})),n.d(i,"isArrayBuffer",(function(){return S})),n.d(i,"isDataView",(function(){return L})),n.d(i,"isArray",(function(){return P})),n.d(i,"isFunction",(function(){return T})),n.d(i,"isArguments",(function(){return k})),n.d(i,"isFinite",(function(){return O})),n.d(i,"isNaN",(function(){return B})),n.d(i,"isTypedArray",(function(){return W})),n.d(i,"isEmpty",(function(){return X})),n.d(i,"isMatch",(function(){return Y})),n.d(i,"isEqual",(function(){return Q})),n.d(i,"isMap",(function(){return st})),n.d(i,"isWeakMap",(function(){return lt})),n.d(i,"isSet",(function(){return ct})),n.d(i,"isWeakSet",(function(){return ut})),n.d(i,"keys",(function(){return q})),n.d(i,"allKeys",(function(){return $})),n.d(i,"values",(function(){return pt})),n.d(i,"pairs",(function(){return ht})),n.d(i,"invert",(function(){return dt})),n.d(i,"functions",(function(){return _t})),n.d(i,"methods",(function(){return _t})),n.d(i,"extend",(function(){return mt})),n.d(i,"extendOwn",(function(){return yt})),n.d(i,"assign",(function(){return yt})),n.d(i,"defaults",(function(){return gt})),n.d(i,"create",(function(){return bt})),n.d(i,"clone",(function(){return xt})),n.d(i,"tap",(function(){return St})),n.d(i,"get",(function(){return Ct})),n.d(i,"has",(function(){return Et})),n.d(i,"mapObject",(function(){return Ot})),n.d(i,"identity",(function(){return At})),n.d(i,"constant",(function(){return j})),n.d(i,"noop",(function(){return Bt})),n.d(i,"toPath",(function(){return wt})),n.d(i,"property",(function(){return Lt})),n.d(i,"propertyOf",(function(){return jt})),n.d(i,"matcher",(function(){return Rt})),n.d(i,"matches",(function(){return Rt})),n.d(i,"times",(function(){return Ft})),n.d(i,"random",(function(){return Nt})),n.d(i,"now",(function(){return zt})),n.d(i,"escape",(function(){return Wt})),n.d(i,"unescape",(function(){return Gt})),n.d(i,"templateSettings",(function(){return Vt})),n.d(i,"template",(function(){return Kt})),n.d(i,"result",(function(){return Qt})),n.d(i,"uniqueId",(function(){return te})),n.d(i,"chain",(function(){return ee})),n.d(i,"iteratee",(function(){return It})),n.d(i,"partial",(function(){return re})),n.d(i,"bind",(function(){return oe})),n.d(i,"bindAll",(function(){return le})),n.d(i,"memoize",(function(){return ce})),n.d(i,"delay",(function(){return ue})),n.d(i,"defer",(function(){return pe})),n.d(i,"throttle",(function(){return he})),n.d(i,"debounce",(function(){return de})),n.d(i,"wrap",(function(){return _e})),n.d(i,"negate",(function(){return fe})),n.d(i,"compose",(function(){return me})),n.d(i,"after",(function(){return ye})),n.d(i,"before",(function(){return ge})),n.d(i,"once",(function(){return ve})),n.d(i,"findKey",(function(){return be})),n.d(i,"findIndex",(function(){return Se})),n.d(i,"findLastIndex",(function(){return we})),n.d(i,"sortedIndex",(function(){return Me})),n.d(i,"indexOf",(function(){return Ce})),n.d(i,"lastIndexOf",(function(){return Ee})),n.d(i,"find",(function(){return Ae})),n.d(i,"detect",(function(){return Ae})),n.d(i,"findWhere",(function(){return Re})),n.d(i,"each",(function(){return Le})),n.d(i,"forEach",(function(){return Le})),n.d(i,"map",(function(){return Pe})),n.d(i,"collect",(function(){return Pe})),n.d(i,"reduce",(function(){return Ie})),n.d(i,"foldl",(function(){return Ie})),n.d(i,"inject",(function(){return Ie})),n.d(i,"reduceRight",(function(){return ke})),n.d(i,"foldr",(function(){return ke})),n.d(i,"filter",(function(){return Oe})),n.d(i,"select",(function(){return Oe})),n.d(i,"reject",(function(){return Be})),n.d(i,"every",(function(){return je})),n.d(i,"all",(function(){return je})),n.d(i,"some",(function(){return Fe})),n.d(i,"any",(function(){return Fe})),n.d(i,"contains",(function(){return Ne})),n.d(i,"includes",(function(){return Ne})),n.d(i,"include",(function(){return Ne})),n.d(i,"invoke",(function(){return ze})),n.d(i,"pluck",(function(){return He})),n.d(i,"where",(function(){return Ue})),n.d(i,"max",(function(){return We})),n.d(i,"min",(function(){return Ge})),n.d(i,"shuffle",(function(){return Ye})),n.d(i,"sample",(function(){return Xe})),n.d(i,"sortBy",(function(){return Ze})),n.d(i,"groupBy",(function(){return Ke})),n.d(i,"indexBy",(function(){return Qe})),n.d(i,"countBy",(function(){return $e})),n.d(i,"partition",(function(){return tn})),n.d(i,"toArray",(function(){return qe})),n.d(i,"size",(function(){return en})),n.d(i,"pick",(function(){return rn})),n.d(i,"omit",(function(){return on})),n.d(i,"first",(function(){return sn})),n.d(i,"head",(function(){return sn})),n.d(i,"take",(function(){return sn})),n.d(i,"initial",(function(){return an})),n.d(i,"last",(function(){return cn})),n.d(i,"rest",(function(){return ln})),n.d(i,"tail",(function(){return ln})),n.d(i,"drop",(function(){return ln})),n.d(i,"compact",(function(){return un})),n.d(i,"flatten",(function(){return pn})),n.d(i,"without",(function(){return dn})),n.d(i,"uniq",(function(){return _n})),n.d(i,"unique",(function(){return _n})),n.d(i,"union",(function(){return fn})),n.d(i,"intersection",(function(){return mn})),n.d(i,"difference",(function(){return hn})),n.d(i,"unzip",(function(){return yn})),n.d(i,"transpose",(function(){return yn})),n.d(i,"zip",(function(){return gn})),n.d(i,"object",(function(){return vn})),n.d(i,"range",(function(){return bn})),n.d(i,"chunk",(function(){return xn})),n.d(i,"mixin",(function(){return wn})),n.d(i,"default",(function(){return Mn}));var r=n(3),o=n.n(r),a=n(2),s=n.n(a),l=n(7);function c(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+e];switch(e){case 0:return t.call(this,i);case 1:return t.call(this,arguments[0],i);case 2:return t.call(this,arguments[0],arguments[1],i)}var o=Array(e+1);for(r=0;r<e;r++)o[r]=arguments[r];return o[e]=i,t.apply(this,o)}}function u(t){var e=typeof t;return"function"===e||"object"===e&&!!t}function p(t){return null===t}function h(t){return void 0===t}function d(t){return!0===t||!1===t||"[object Boolean]"===l.t.call(t)}function _(t){return!(!t||1!==t.nodeType)}function f(t){var e="[object "+t+"]";return function(t){return l.t.call(t)===e}}var m=f("String"),y=f("Number"),g=f("Date"),v=f("RegExp"),b=f("Error"),x=f("Symbol"),S=f("ArrayBuffer"),w=f("Function"),M=l.p.document&&l.p.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof M&&(w=function(t){return"function"==typeof t||!1});var T=w,C=f("Object"),E=l.s&&C(new DataView(new ArrayBuffer(8))),A="undefined"!=typeof Map&&C(new Map),R=f("DataView");var L=E?function(t){return null!=t&&T(t.getInt8)&&S(t.buffer)}:R,P=l.k||f("Array");function D(t,e){return null!=t&&l.i.call(t,e)}var I=f("Arguments");!function(){I(arguments)||(I=function(t){return D(t,"callee")})}();var k=I;function O(t){return!x(t)&&Object(l.f)(t)&&!isNaN(parseFloat(t))}function B(t){return y(t)&&Object(l.g)(t)}function j(t){return function(){return t}}function F(t){return function(e){var n=t(e);return"number"==typeof n&&n>=0&&n<=l.b}}function N(t){return function(e){return null==e?void 0:e[t]}}var z=N("byteLength"),H=F(z),U=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var W=l.r?function(t){return l.l?Object(l.l)(t)&&!L(t):H(t)&&U.test(l.t.call(t))}:j(!1),G=N("length");function V(t,e){e=function(t){for(var e={},n=t.length,i=0;i<n;++i)e[t[i]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=l.n.length,i=t.constructor,r=T(i)&&i.prototype||l.c,o="constructor";for(D(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=l.n[n])in t&&t[o]!==r[o]&&!e.contains(o)&&e.push(o)}function q(t){if(!u(t))return[];if(l.m)return Object(l.m)(t);var e=[];for(var n in t)D(t,n)&&e.push(n);return l.h&&V(t,e),e}function X(t){if(null==t)return!0;var e=G(t);return"number"==typeof e&&(P(t)||m(t)||k(t))?0===e:0===G(q(t))}function Y(t,e){var n=q(e),i=n.length;if(null==t)return!i;for(var r=Object(t),o=0;o<i;o++){var a=n[o];if(e[a]!==r[a]||!(a in r))return!1}return!0}function Z(t){return t instanceof Z?t:this instanceof Z?void(this._wrapped=t):new Z(t)}function J(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,z(t))}Z.VERSION=l.e,Z.prototype.value=function(){return this._wrapped},Z.prototype.valueOf=Z.prototype.toJSON=Z.prototype.value,Z.prototype.toString=function(){return String(this._wrapped)};function K(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var r=typeof t;return("function"===r||"object"===r||"object"==typeof e)&&function t(e,n,i,r){e instanceof Z&&(e=e._wrapped);n instanceof Z&&(n=n._wrapped);var o=l.t.call(e);if(o!==l.t.call(n))return!1;if(E&&"[object Object]"==o&&L(e)){if(!L(n))return!1;o="[object DataView]"}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return l.d.valueOf.call(e)===l.d.valueOf.call(n);case"[object ArrayBuffer]":case"[object DataView]":return t(J(e),J(n),i,r)}var a="[object Array]"===o;if(!a&&W(e)){if(z(e)!==z(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;a=!0}if(!a){if("object"!=typeof e||"object"!=typeof n)return!1;var s=e.constructor,c=n.constructor;if(s!==c&&!(T(s)&&s instanceof s&&T(c)&&c instanceof c)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];var u=(i=i||[]).length;for(;u--;)if(i[u]===e)return r[u]===n;if(i.push(e),r.push(n),a){if((u=e.length)!==n.length)return!1;for(;u--;)if(!K(e[u],n[u],i,r))return!1}else{var p,h=q(e);if(u=h.length,q(n).length!==u)return!1;for(;u--;)if(p=h[u],!D(n,p)||!K(e[p],n[p],i,r))return!1}return i.pop(),r.pop(),!0}(t,e,n,i)}function Q(t,e){return K(t,e)}function $(t){if(!u(t))return[];var e=[];for(var n in t)e.push(n);return l.h&&V(t,e),e}function tt(t){var e=G(t);return function(n){if(null==n)return!1;var i=$(n);if(G(i))return!1;for(var r=0;r<e;r++)if(!T(n[t[r]]))return!1;return t!==ot||!T(n[et])}}var et="forEach",nt=["clear","delete"],it=["get","has","set"],rt=nt.concat(et,it),ot=nt.concat(it),at=["add"].concat(nt,et,"has"),st=A?tt(rt):f("Map"),lt=A?tt(ot):f("WeakMap"),ct=A?tt(at):f("Set"),ut=f("WeakSet");function pt(t){for(var e=q(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=t[e[r]];return i}function ht(t){for(var e=q(t),n=e.length,i=Array(n),r=0;r<n;r++)i[r]=[e[r],t[e[r]]];return i}function dt(t){for(var e={},n=q(t),i=0,r=n.length;i<r;i++)e[t[n[i]]]=n[i];return e}function _t(t){var e=[];for(var n in t)T(t[n])&&e.push(n);return e.sort()}function ft(t,e){return function(n){var i=arguments.length;if(e&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=t(o),s=a.length,l=0;l<s;l++){var c=a[l];e&&void 0!==n[c]||(n[c]=o[c])}return n}}var mt=ft($),yt=ft(q),gt=ft($,!0);function vt(t){if(!u(t))return{};if(l.j)return Object(l.j)(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function bt(t,e){var n=vt(t);return e&&yt(n,e),n}function xt(t){return u(t)?P(t)?t.slice():mt({},t):t}function St(t,e){return e(t),t}function wt(t){return P(t)?t:[t]}function Mt(t){return Z.toPath(t)}function Tt(t,e){for(var n=e.length,i=0;i<n;i++){if(null==t)return;t=t[e[i]]}return n?t:void 0}function Ct(t,e,n){var i=Tt(t,Mt(e));return h(i)?n:i}function Et(t,e){for(var n=(e=Mt(e)).length,i=0;i<n;i++){var r=e[i];if(!D(t,r))return!1;t=t[r]}return!!n}function At(t){return t}function Rt(t){return t=yt({},t),function(e){return Y(e,t)}}function Lt(t){return t=Mt(t),function(e){return Tt(e,t)}}function Pt(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,r){return t.call(e,n,i,r)};case 4:return function(n,i,r,o){return t.call(e,n,i,r,o)}}return function(){return t.apply(e,arguments)}}function Dt(t,e,n){return null==t?At:T(t)?Pt(t,e,n):u(t)&&!P(t)?Rt(t):Lt(t)}function It(t,e){return Dt(t,e,1/0)}function kt(t,e,n){return Z.iteratee!==It?Z.iteratee(t,e):Dt(t,e,n)}function Ot(t,e,n){e=kt(e,n);for(var i=q(t),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=e(t[s],s,t)}return o}function Bt(){}function jt(t){return null==t?Bt:function(e){return Ct(t,e)}}function Ft(t,e,n){var i=Array(Math.max(0,t));e=Pt(e,n,1);for(var r=0;r<t;r++)i[r]=e(r);return i}function Nt(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}Z.toPath=wt,Z.iteratee=It;var zt=Date.now||function(){return(new Date).getTime()};function Ht(t){var e=function(e){return t[e]},n="(?:"+q(t).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(t){return t=null==t?"":""+t,i.test(t)?t.replace(r,e):t}}var Ut={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Wt=Ht(Ut),Gt=Ht(dt(Ut)),Vt=Z.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},qt=/(.)^/,Xt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Yt=/\\|'|\r|\n|\u2028|\u2029/g;function Zt(t){return"\\"+Xt[t]}var Jt=/^\s*(\w|\$)+\s*$/;function Kt(t,e,n){!e&&n&&(e=n),e=gt({},e,Z.templateSettings);var i=RegExp([(e.escape||qt).source,(e.interpolate||qt).source,(e.evaluate||qt).source].join("|")+"|$","g"),r=0,o="__p+='";t.replace(i,(function(e,n,i,a,s){return o+=t.slice(r,s).replace(Yt,Zt),r=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?o+="'+\n((__t=("+i+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e})),o+="';\n";var a,s=e.variable;if(s){if(!Jt.test(s))throw new Error("variable is not a bare identifier: "+s)}else o="with(obj||{}){\n"+o+"}\n",s="obj";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{a=new Function(s,"_",o)}catch(t){throw t.source=o,t}var l=function(t){return a.call(this,t,Z)};return l.source="function("+s+"){\n"+o+"}",l}function Qt(t,e,n){var i=(e=Mt(e)).length;if(!i)return T(n)?n.call(t):n;for(var r=0;r<i;r++){var o=null==t?void 0:t[e[r]];void 0===o&&(o=n,r=i),t=T(o)?o.call(t):o}return t}var $t=0;function te(t){var e=++$t+"";return t?t+e:e}function ee(t){var e=Z(t);return e._chain=!0,e}function ne(t,e,n,i,r){if(!(i instanceof e))return t.apply(n,r);var o=vt(t.prototype),a=t.apply(o,r);return u(a)?a:o}var ie=c((function(t,e){var n=ie.placeholder,i=function(){for(var r=0,o=e.length,a=Array(o),s=0;s<o;s++)a[s]=e[s]===n?arguments[r++]:e[s];for(;r<arguments.length;)a.push(arguments[r++]);return ne(t,i,this,this,a)};return i}));ie.placeholder=Z;var re=ie,oe=c((function(t,e,n){if(!T(t))throw new TypeError("Bind must be called on a function");var i=c((function(r){return ne(t,i,e,this,n.concat(r))}));return i})),ae=F(G);function se(t,e,n,i){if(i=i||[],e||0===e){if(e<=0)return i.concat(t)}else e=1/0;for(var r=i.length,o=0,a=G(t);o<a;o++){var s=t[o];if(ae(s)&&(P(s)||k(s)))if(e>1)se(s,e-1,n,i),r=i.length;else for(var l=0,c=s.length;l<c;)i[r++]=s[l++];else n||(i[r++]=s)}return i}var le=c((function(t,e){var n=(e=se(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=e[n];t[i]=oe(t[i],t)}return t}));function ce(t,e){var n=function(i){var r=n.cache,o=""+(e?e.apply(this,arguments):i);return D(r,o)||(r[o]=t.apply(this,arguments)),r[o]};return n.cache={},n}var ue=c((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),pe=re(ue,Z,1);function he(t,e,n){var i,r,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:zt(),i=null,a=t.apply(r,o),i||(r=o=null)},c=function(){var c=zt();s||!1!==n.leading||(s=c);var u=e-(c-s);return r=this,o=arguments,u<=0||u>e?(i&&(clearTimeout(i),i=null),s=c,a=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(i),s=0,i=r=o=null},c}function de(t,e,n){var i,r,o,a,s,l=function(){var c=zt()-r;e>c?i=setTimeout(l,e-c):(i=null,n||(a=t.apply(s,o)),i||(o=s=null))},u=c((function(c){return s=this,o=c,r=zt(),i||(i=setTimeout(l,e),n&&(a=t.apply(s,o))),a}));return u.cancel=function(){clearTimeout(i),i=o=s=null},u}function _e(t,e){return re(e,t)}function fe(t){return function(){return!t.apply(this,arguments)}}function me(){var t=arguments,e=t.length-1;return function(){for(var n=e,i=t[e].apply(this,arguments);n--;)i=t[n].call(this,i);return i}}function ye(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function ge(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}var ve=re(ge,2);function be(t,e,n){e=kt(e,n);for(var i,r=q(t),o=0,a=r.length;o<a;o++)if(e(t[i=r[o]],i,t))return i}function xe(t){return function(e,n,i){n=kt(n,i);for(var r=G(e),o=t>0?0:r-1;o>=0&&o<r;o+=t)if(n(e[o],o,e))return o;return-1}}var Se=xe(1),we=xe(-1);function Me(t,e,n,i){for(var r=(n=kt(n,i,1))(e),o=0,a=G(t);o<a;){var s=Math.floor((o+a)/2);n(t[s])<r?o=s+1:a=s}return o}function Te(t,e,n){return function(i,r,o){var a=0,s=G(i);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=e(l.q.call(i,a,s),B))>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&o<s;o+=t)if(i[o]===r)return o;return-1}}var Ce=Te(1,Se,Me),Ee=Te(-1,we);function Ae(t,e,n){var i=(ae(t)?Se:be)(t,e,n);if(void 0!==i&&-1!==i)return t[i]}function Re(t,e){return Ae(t,Rt(e))}function Le(t,e,n){var i,r;if(e=Pt(e,n),ae(t))for(i=0,r=t.length;i<r;i++)e(t[i],i,t);else{var o=q(t);for(i=0,r=o.length;i<r;i++)e(t[o[i]],o[i],t)}return t}function Pe(t,e,n){e=kt(e,n);for(var i=!ae(t)&&q(t),r=(i||t).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=e(t[s],s,t)}return o}function De(t){var e=function(e,n,i,r){var o=!ae(e)&&q(e),a=(o||e).length,s=t>0?0:a-1;for(r||(i=e[o?o[s]:s],s+=t);s>=0&&s<a;s+=t){var l=o?o[s]:s;i=n(i,e[l],l,e)}return i};return function(t,n,i,r){var o=arguments.length>=3;return e(t,Pt(n,r,4),i,o)}}var Ie=De(1),ke=De(-1);function Oe(t,e,n){var i=[];return e=kt(e,n),Le(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function Be(t,e,n){return Oe(t,fe(kt(e)),n)}function je(t,e,n){e=kt(e,n);for(var i=!ae(t)&&q(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(!e(t[a],a,t))return!1}return!0}function Fe(t,e,n){e=kt(e,n);for(var i=!ae(t)&&q(t),r=(i||t).length,o=0;o<r;o++){var a=i?i[o]:o;if(e(t[a],a,t))return!0}return!1}function Ne(t,e,n,i){return ae(t)||(t=pt(t)),("number"!=typeof n||i)&&(n=0),Ce(t,e,n)>=0}var ze=c((function(t,e,n){var i,r;return T(e)?r=e:(e=Mt(e),i=e.slice(0,-1),e=e[e.length-1]),Pe(t,(function(t){var o=r;if(!o){if(i&&i.length&&(t=Tt(t,i)),null==t)return;o=t[e]}return null==o?o:o.apply(t,n)}))}));function He(t,e){return Pe(t,Lt(e))}function Ue(t,e){return Oe(t,Rt(e))}function We(t,e,n){var i,r,o=-1/0,a=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=ae(t)?t:pt(t)).length;s<l;s++)null!=(i=t[s])&&i>o&&(o=i);else e=kt(e,n),Le(t,(function(t,n,i){((r=e(t,n,i))>a||r===-1/0&&o===-1/0)&&(o=t,a=r)}));return o}function Ge(t,e,n){var i,r,o=1/0,a=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t)for(var s=0,l=(t=ae(t)?t:pt(t)).length;s<l;s++)null!=(i=t[s])&&i<o&&(o=i);else e=kt(e,n),Le(t,(function(t,n,i){((r=e(t,n,i))<a||r===1/0&&o===1/0)&&(o=t,a=r)}));return o}var Ve=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function qe(t){return t?P(t)?l.q.call(t):m(t)?t.match(Ve):ae(t)?Pe(t,At):pt(t):[]}function Xe(t,e,n){if(null==e||n)return ae(t)||(t=pt(t)),t[Nt(t.length-1)];var i=qe(t),r=G(i);e=Math.max(Math.min(e,r),0);for(var o=r-1,a=0;a<e;a++){var s=Nt(a,o),l=i[a];i[a]=i[s],i[s]=l}return i.slice(0,e)}function Ye(t){return Xe(t,1/0)}function Ze(t,e,n){var i=0;return e=kt(e,n),He(Pe(t,(function(t,n,r){return{value:t,index:i++,criteria:e(t,n,r)}})).sort((function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return t.index-e.index})),"value")}function Je(t,e){return function(n,i,r){var o=e?[[],[]]:{};return i=kt(i,r),Le(n,(function(e,r){var a=i(e,r,n);t(o,e,a)})),o}}var Ke=Je((function(t,e,n){D(t,n)?t[n].push(e):t[n]=[e]})),Qe=Je((function(t,e,n){t[n]=e})),$e=Je((function(t,e,n){D(t,n)?t[n]++:t[n]=1})),tn=Je((function(t,e,n){t[n?0:1].push(e)}),!0);function en(t){return null==t?0:ae(t)?t.length:q(t).length}function nn(t,e,n){return e in n}var rn=c((function(t,e){var n={},i=e[0];if(null==t)return n;T(i)?(e.length>1&&(i=Pt(i,e[1])),e=$(t)):(i=nn,e=se(e,!1,!1),t=Object(t));for(var r=0,o=e.length;r<o;r++){var a=e[r],s=t[a];i(s,a,t)&&(n[a]=s)}return n})),on=c((function(t,e){var n,i=e[0];return T(i)?(i=fe(i),e.length>1&&(n=e[1])):(e=Pe(se(e,!1,!1),String),i=function(t,n){return!Ne(e,n)}),rn(t,i,n)}));function an(t,e,n){return l.q.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function sn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:an(t,t.length-e)}function ln(t,e,n){return l.q.call(t,null==e||n?1:e)}function cn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:ln(t,Math.max(0,t.length-e))}function un(t){return Oe(t,Boolean)}function pn(t,e){return se(t,e,!1)}var hn=c((function(t,e){return e=se(e,!0,!0),Oe(t,(function(t){return!Ne(e,t)}))})),dn=c((function(t,e){return hn(t,e)}));function _n(t,e,n,i){d(e)||(i=n,n=e,e=!1),null!=n&&(n=kt(n,i));for(var r=[],o=[],a=0,s=G(t);a<s;a++){var l=t[a],c=n?n(l,a,t):l;e&&!n?(a&&o===c||r.push(l),o=c):n?Ne(o,c)||(o.push(c),r.push(l)):Ne(r,l)||r.push(l)}return r}var fn=c((function(t){return _n(se(t,!0,!0))}));function mn(t){for(var e=[],n=arguments.length,i=0,r=G(t);i<r;i++){var o=t[i];if(!Ne(e,o)){var a;for(a=1;a<n&&Ne(arguments[a],o);a++);a===n&&e.push(o)}}return e}function yn(t){for(var e=t&&We(t,G).length||0,n=Array(e),i=0;i<e;i++)n[i]=He(t,i);return n}var gn=c(yn);function vn(t,e){for(var n={},i=0,r=G(t);i<r;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n}function bn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),o=0;o<i;o++,t+=n)r[o]=t;return r}function xn(t,e){if(null==e||e<1)return[];for(var n=[],i=0,r=t.length;i<r;)n.push(l.q.call(t,i,i+=e));return n}function Sn(t,e){return t._chain?Z(e).chain():e}function wn(t){return Le(_t(t),(function(e){var n=Z[e]=t[e];Z.prototype[e]=function(){var t=[this._wrapped];return l.o.apply(t,arguments),Sn(this,n.apply(Z,t))}})),Z}Le(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var e=l.a[t];Z.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0]),Sn(this,n)}})),Le(["concat","join","slice"],(function(t){var e=l.a[t];Z.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Sn(this,t)}}));var Mn=Z,Tn=wn(i);Tn._=Tn;var Cn=Tn,En=n(1),An=o()((function t(e,n){s()(this,t),this.textures={};var i=new En.Eb(n);i.needsUpdate=!0;var r=e.frames;Cn.keys(r).forEach((function(t,e){var o=r[t],a=i.clone(),s=o.frame;a.repeat.set(s.w/n.width,s.h/n.height),a.offset.x=s.x/n.width,a.offset.y=1-s.h/n.height-s.y/n.height,a.needsUpdate=!0,this.textures[t.replace(".png","").toLowerCase()]=a}),this)}));e.a=An},function(t,e,n){"use strict";var i=n(29),r=n.n(i),o=n(21),a=n.n(o),s=n(2),l=n.n(s),c=n(3),u=n.n(c),p=n(14),h=n.n(p),d=n(24),_=n(17),f=n(1);class m extends f.M{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(t){return new x(t)})),this.register((function(t){return new E(t)})),this.register((function(t){return new A(t)})),this.register((function(t){return new S(t)})),this.register((function(t){return new w(t)})),this.register((function(t){return new M(t)})),this.register((function(t){return new T(t)})),this.register((function(t){return new C(t)})),this.register((function(t){return new v(t)})),this.register((function(t){return new R(t)}))}load(t,e,n,i){const r=this;let o;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:f.N.extractUrlBase(t),this.manager.itemStart(t);const a=function(e){i?i(e):console.error(e),r.manager.itemError(t),r.manager.itemEnd(t)},s=new f.v(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(t,(function(n){try{r.parse(n,o,(function(n){e(n),r.manager.itemEnd(t)}),a)}catch(t){a(t)}}),n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,i){let r;const o={},a={};if("string"==typeof t)r=t;else{if(f.N.decodeText(new Uint8Array(t,0,4))===L){try{o[g.KHR_BINARY_GLTF]=new I(t)}catch(t){return void(i&&i(t))}r=o[g.KHR_BINARY_GLTF].content}else r=f.N.decodeText(new Uint8Array(t))}const s=JSON.parse(r);if(void 0===s.asset||s.asset.version[0]<2)return void(i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const l=new pt(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let t=0;t<this.pluginCallbacks.length;t++){const e=this.pluginCallbacks[t](l);a[e.name]=e,o[e.name]=!0}if(s.extensionsUsed)for(let t=0;t<s.extensionsUsed.length;++t){const e=s.extensionsUsed[t],n=s.extensionsRequired||[];switch(e){case g.KHR_MATERIALS_UNLIT:o[e]=new b;break;case g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:o[e]=new j;break;case g.KHR_DRACO_MESH_COMPRESSION:o[e]=new k(s,this.dracoLoader);break;case g.KHR_TEXTURE_TRANSFORM:o[e]=new O;break;case g.KHR_MESH_QUANTIZATION:o[e]=new F;break;default:n.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}l.setExtensions(o),l.setPlugins(a),l.parse(n,i)}parseAsync(t,e){const n=this;return new Promise((function(i,r){n.parse(t,e,i,r)}))}}function y(){let t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}const g={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class v{constructor(t){this.parser=t,this.name=g.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&t._addNodeRef(this.cache,i.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let i=e.cache.get(n);if(i)return i;const r=e.json,o=((r.extensions&&r.extensions[this.name]||{}).lights||[])[t];let a;const s=new f.p(16777215);void 0!==o.color&&s.fromArray(o.color);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new f.r(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new f.ib(s),a.distance=l;break;case"spot":a=new f.zb(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,void 0!==o.intensity&&(a.intensity=o.intensity),a.name=e.createUniqueName(o.name||"light_"+t),i=Promise.resolve(a),e.cache.add(n,i),i}createNodeAttachment(t){const e=this,n=this.parser,i=n.json.nodes[t],r=(i.extensions&&i.extensions[this.name]||{}).light;return void 0===r?null:this._loadLight(r).then((function(t){return n._getNodeRef(e.cache,r,t)}))}}class b{constructor(){this.name=g.KHR_MATERIALS_UNLIT}getMaterialType(){return f.T}extendParams(t,e,n){const i=[];t.color=new f.p(1,1,1),t.opacity=1;const r=e.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const e=r.baseColorFactor;t.color.fromArray(e),t.opacity=e[3]}void 0!==r.baseColorTexture&&i.push(n.assignTexture(t,"map",r.baseColorTexture))}return Promise.all(i)}}class x{constructor(t){this.parser=t,this.name=g.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?f.U:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const t=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new f.Jb(t,t)}return Promise.all(r)}}class S{constructor(t){this.parser=t,this.name=g.KHR_MATERIALS_SHEEN}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?f.U:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];e.sheenColor=new f.p(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=i.extensions[this.name];return void 0!==o.sheenColorFactor&&e.sheenColor.fromArray(o.sheenColorFactor),void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&r.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture)),void 0!==o.sheenRoughnessTexture&&r.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(r)}}class w{constructor(t){this.parser=t,this.name=g.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?f.U:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&r.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(r)}}class M{constructor(t){this.parser=t,this.name=g.KHR_MATERIALS_VOLUME}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?f.U:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&r.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=new f.p(a[0],a[1],a[2]),Promise.all(r)}}class T{constructor(t){this.parser=t,this.name=g.KHR_MATERIALS_IOR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?f.U:null}extendMaterialParams(t,e){const n=this.parser.json.materials[t];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const i=n.extensions[this.name];return e.ior=void 0!==i.ior?i.ior:1.5,Promise.resolve()}}class C{constructor(t){this.parser=t,this.name=g.KHR_MATERIALS_SPECULAR}getMaterialType(t){const e=this.parser.json.materials[t];return e.extensions&&e.extensions[this.name]?f.U:null}extendMaterialParams(t,e){const n=this.parser,i=n.json.materials[t];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],o=i.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&r.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=new f.p(a[0],a[1],a[2]),void 0!==o.specularColorTexture&&r.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture).then((function(t){t.encoding=f.Nb}))),Promise.all(r)}}class E{constructor(t){this.parser=t,this.name=g.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,i=n.textures[t];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],o=n.images[r.source],a=e.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,o,a)}}class A{constructor(t){this.parser=t,this.name=g.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,i=n.json,r=i.textures[t];if(!r.extensions||!r.extensions[e])return null;const o=r.extensions[e],a=i.images[o.source];let s=n.textureLoader;if(a.uri){const t=n.options.manager.getHandler(a.uri);null!==t&&(s=t)}return this.detectSupport().then((function(r){if(r)return n.loadTextureImage(t,a,s);if(i.extensionsRequired&&i.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}}))),this.isSupported}}class R{constructor(t){this.name=g.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const t=n.extensions[this.name],i=this.parser.getDependency("buffer",t.buffer),r=this.parser.options.meshoptDecoder;if(!r||!r.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,r.ready]).then((function(e){const n=t.byteOffset||0,i=t.byteLength||0,o=t.count,a=t.byteStride,s=new ArrayBuffer(o*a),l=new Uint8Array(e[0],n,i);return r.decodeGltfBuffer(new Uint8Array(s),o,a,l,t.mode,t.filter),s}))}return null}}const L="glTF",P=1313821514,D=5130562;class I{constructor(t){this.name=g.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12);if(this.header={magic:f.N.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==L)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,i=new DataView(t,12);let r=0;for(;r<n;){const e=i.getUint32(r,!0);r+=4;const n=i.getUint32(r,!0);if(r+=4,n===P){const n=new Uint8Array(t,12+r,e);this.content=f.N.decodeText(n)}else if(n===D){const n=12+r;this.body=t.slice(n,n+e)}r+=e}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class k{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=g.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,i=this.dracoLoader,r=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},l={};for(const t in o){const e=$[t]||t.toLowerCase();a[e]=o[t]}for(const e in t.attributes){const i=$[e]||e.toLowerCase();if(void 0!==o[e]){const r=n.accessors[t.attributes[e]],o=Z[r.componentType];l[i]=o,s[i]=!0===r.normalized}}return e.getDependency("bufferView",r).then((function(t){return new Promise((function(e){i.decodeDracoFile(t,(function(t){for(const e in t.attributes){const n=t.attributes[e],i=s[e];void 0!==i&&(n.normalized=i)}e(t)}),a,l)}))}))}}class O{constructor(){this.name=g.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class B extends f.V{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),a={specular:{value:(new f.p).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(t){for(const e in a)t.uniforms[e]=a[e];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",e).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(t){a.specular.value=t}},specularMap:{get:function(){return a.specularMap.value},set:function(t){a.specularMap.value=t,t?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return a.glossiness.value},set:function(t){a.glossiness.value=t}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(t){a.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class j{constructor(){this.name=g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return B}extendParams(t,e,n){const i=e.extensions[this.name];t.color=new f.p(1,1,1),t.opacity=1;const r=[];if(Array.isArray(i.diffuseFactor)){const e=i.diffuseFactor;t.color.fromArray(e),t.opacity=e[3]}if(void 0!==i.diffuseTexture&&r.push(n.assignTexture(t,"map",i.diffuseTexture)),t.emissive=new f.p(0,0,0),t.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,t.specular=new f.p(1,1,1),Array.isArray(i.specularFactor)&&t.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){const e=i.specularGlossinessTexture;r.push(n.assignTexture(t,"glossinessMap",e)),r.push(n.assignTexture(t,"specularMap",e))}return Promise.all(r)}createMaterial(t){const e=new B(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=f.Db,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}class F{constructor(){this.name=g.KHR_MESH_QUANTIZATION}}class N extends f.C{constructor(t,e,n,i){super(t,e,n,i)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i*3+i;for(let t=0;t!==i;t++)e[t]=n[r+t];return e}}N.prototype.beforeStart_=N.prototype.copySampleValue_,N.prototype.afterEnd_=N.prototype.copySampleValue_,N.prototype.interpolate_=function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=i-e,u=(n-e)/c,p=u*u,h=p*u,d=t*l,_=d-l,f=-2*h+3*p,m=h-p,y=1-f,g=m-p+u;for(let t=0;t!==a;t++){const e=o[_+t+a],n=o[_+t+s]*c,i=o[d+t+a],l=o[d+t]*c;r[t]=y*e+g*n+f*i+m*l}return r};const z=new f.mb;class H extends N{interpolate_(t,e,n,i){const r=super.interpolate_(t,e,n,i);return z.fromArray(r).normalize().toArray(r),r}}const U=0,W=1,G=2,V=3,q=4,X=5,Y=6,Z={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},J={9728:f.X,9729:f.J,9984:f.Z,9985:f.L,9986:f.Y,9987:f.K},K={33071:f.o,33648:f.W,10497:f.qb},Q={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},$={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},tt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},et={CUBICSPLINE:void 0,LINEAR:f.E,STEP:f.D},nt="OPAQUE",it="MASK",rt="BLEND";function ot(t,e,n){for(const i in n.extensions)void 0===t[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=n.extensions[i])}function at(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function st(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(let n=0,i=e.weights.length;n<i;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(t.morphTargetInfluences.length===n.length){t.morphTargetDictionary={};for(let e=0,i=n.length;e<i;e++)t.morphTargetDictionary[n[e]]=e}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lt(t){const e=t.extensions&&t.extensions[g.KHR_DRACO_MESH_COMPRESSION];let n;return n=e?"draco:"+e.bufferView+":"+e.indices+":"+ct(e.attributes):t.indices+":"+ct(t.attributes)+":"+t.mode,n}function ct(t){let e="";const n=Object.keys(t).sort();for(let i=0,r=n.length;i<r;i++)e+=n[i]+":"+t[n[i]]+";";return e}function ut(t){switch(t){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class pt{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new y,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox|Safari/.test(navigator.userAgent)?this.textureLoader=new f.z(this.options.manager):this.textureLoader=new f.Fb(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new f.v(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this._invokeAll((function(t){return t._markDefs&&t._markDefs()})),Promise.all(this._invokeAll((function(t){return t.beforeRoot&&t.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(e){const o={scene:e[0][i.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:i.asset,parser:n,userData:{}};ot(r,o,i),at(o,i),Promise.all(n._invokeAll((function(t){return t.afterRoot&&t.afterRoot(o)}))).then((function(){t(o)}))})).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let n=0,i=e.length;n<i;n++){const i=e[n].joints;for(let e=0,n=i.length;e<n;e++)t[i[e]].isBone=!0}for(let e=0,i=t.length;e<i;e++){const i=t[e];void 0!==i.mesh&&(this._addNodeRef(this.meshCache,i.mesh),void 0!==i.skin&&(n[i.mesh].isSkinnedMesh=!0)),void 0!==i.camera&&this._addNodeRef(this.cameraCache,i.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const i=n.clone(),r=(t,e)=>{const n=this.associations.get(t);null!=n&&this.associations.set(e,n);for(const[n,i]of t.children.entries())r(i,e.children[n])};return r(n,i),i.name+="_instance_"+t.uses[e]++,i}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const i=t(e[n]);if(i)return i}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let i=0;i<e.length;i++){const r=t(e[i]);r&&n.push(r)}return n}getDependency(t,e){const n=t+":"+e;let i=this.cache.get(n);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this._invokeOne((function(t){return t.loadMesh&&t.loadMesh(e)}));break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this._invokeOne((function(t){return t.loadBufferView&&t.loadBufferView(e)}));break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this._invokeOne((function(t){return t.loadMaterial&&t.loadMaterial(e)}));break;case"texture":i=this._invokeOne((function(t){return t.loadTexture&&t.loadTexture(e)}));break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(n,i)}return i}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this,i=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(i.map((function(e,i){return n.getDependency(t,i)}))),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[g.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(t,r){n.load(f.N.resolveURL(e.uri,i.path),t,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){const n=e.byteLength||0,i=e.byteOffset||0;return t.slice(i,i+n)}))}loadAccessor(t){const e=this,n=this.json,i=this.json.accessors[t];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);const r=[];return void 0!==i.bufferView?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),void 0!==i.sparse&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then((function(t){const r=t[0],o=Q[i.type],a=Z[i.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,c=i.byteOffset||0,u=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,p=!0===i.normalized;let h,d;if(u&&u!==l){const t=Math.floor(c/u),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+t+":"+i.count;let l=e.cache.get(n);l||(h=new a(r,t*u,i.count*u/s),l=new f.A(h,u/s),e.cache.add(n,l)),d=new f.B(l,o,c%u/s,p)}else h=null===r?new a(i.count*o):new a(r,c,i.count*o),d=new f.m(h,o,p);if(void 0!==i.sparse){const e=Q.SCALAR,n=Z[i.sparse.indices.componentType],s=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,c=new n(t[1],s,i.sparse.count*e),u=new a(t[2],l,i.sparse.count*o);null!==r&&(d=new f.m(d.array.slice(),d.itemSize,d.normalized));for(let t=0,e=c.length;t<e;t++){const e=c[t];if(d.setX(e,u[t*o]),o>=2&&d.setY(e,u[t*o+1]),o>=3&&d.setZ(e,u[t*o+2]),o>=4&&d.setW(e,u[t*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return d}))}loadTexture(t){const e=this.json,n=this.options,i=e.textures[t],r=e.images[i.source];let o=this.textureLoader;if(r.uri){const t=n.manager.getHandler(r.uri);null!==t&&(o=t)}return this.loadTextureImage(t,r,o)}loadTextureImage(t,e,n){const i=this,r=this.json,o=this.options,a=r.textures[t],s=(e.uri||e.bufferView)+":"+a.sampler;if(this.textureCache[s])return this.textureCache[s];const l=self.URL||self.webkitURL;let c=e.uri||"",u=!1;if(void 0!==e.bufferView)c=i.getDependency("bufferView",e.bufferView).then((function(t){u=!0;const n=new Blob([t],{type:e.mimeType});return c=l.createObjectURL(n),c}));else if(void 0===e.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const p=Promise.resolve(c).then((function(t){return new Promise((function(e,i){let r=e;!0===n.isImageBitmapLoader&&(r=function(t){const n=new f.Eb(t);n.needsUpdate=!0,e(n)}),n.load(f.N.resolveURL(t,o.path),r,void 0,i)}))})).then((function(e){!0===u&&l.revokeObjectURL(c),e.flipY=!1,a.name&&(e.name=a.name);const n=(r.samplers||{})[a.sampler]||{};return e.magFilter=J[n.magFilter]||f.J,e.minFilter=J[n.minFilter]||f.K,e.wrapS=K[n.wrapS]||f.qb,e.wrapT=K[n.wrapT]||f.qb,i.associations.set(e,{textures:t}),e})).catch((function(){return console.error("THREE.GLTFLoader: Couldn't load texture",c),null}));return this.textureCache[s]=p,p}assignTexture(t,e,n){const i=this;return this.getDependency("texture",n.index).then((function(r){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===e&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+e+" not yet supported."),i.extensions[g.KHR_TEXTURE_TRANSFORM]){const t=void 0!==n.extensions?n.extensions[g.KHR_TEXTURE_TRANSFORM]:void 0;if(t){const e=i.associations.get(r);r=i.extensions[g.KHR_TEXTURE_TRANSFORM].extendTexture(r,t),i.associations.set(r,e)}}return t[e]=r,r}))}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const i=void 0===e.attributes.tangent,r=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const t="PointsMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new f.kb,f.P.prototype.copy.call(e,n),e.color.copy(n.color),e.map=n.map,e.sizeAttenuation=!1,this.cache.add(t,e)),n=e}else if(t.isLine){const t="LineBasicMaterial:"+n.uuid;let e=this.cache.get(t);e||(e=new f.G,f.P.prototype.copy.call(e,n),e.color.copy(n.color),this.cache.add(t,e)),n=e}if(i||r||o){let t="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(t+="specular-glossiness:"),i&&(t+="derivative-tangents:"),r&&(t+="vertex-colors:"),o&&(t+="flat-shading:");let e=this.cache.get(t);e||(e=n.clone(),r&&(e.vertexColors=!0),o&&(e.flatShading=!0),i&&(e.normalScale&&(e.normalScale.y*=-1),e.clearcoatNormalScale&&(e.clearcoatNormalScale.y*=-1)),this.cache.add(t,e),this.associations.set(e,this.associations.get(n))),n=e}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),t.material=n}getMaterialType(){return f.V}loadMaterial(t){const e=this,n=this.json,i=this.extensions,r=n.materials[t];let o;const a={},s=r.extensions||{},l=[];if(s[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const t=i[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=t.getMaterialType(),l.push(t.extendParams(a,r,e))}else if(s[g.KHR_MATERIALS_UNLIT]){const t=i[g.KHR_MATERIALS_UNLIT];o=t.getMaterialType(),l.push(t.extendParams(a,r,e))}else{const n=r.pbrMetallicRoughness||{};if(a.color=new f.p(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const t=n.baseColorFactor;a.color.fromArray(t),a.opacity=t[3]}void 0!==n.baseColorTexture&&l.push(e.assignTexture(a,"map",n.baseColorTexture)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(e.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),l.push(e.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(e){return e.getMaterialType&&e.getMaterialType(t)})),l.push(Promise.all(this._invokeAll((function(e){return e.extendMaterialParams&&e.extendMaterialParams(t,a)}))))}!0===r.doubleSided&&(a.side=f.s);const c=r.alphaMode||nt;if(c===rt?(a.transparent=!0,a.depthWrite=!1):(a.format=f.ob,a.transparent=!1,c===it&&(a.alphaTest=void 0!==r.alphaCutoff?r.alphaCutoff:.5)),void 0!==r.normalTexture&&o!==f.T&&(l.push(e.assignTexture(a,"normalMap",r.normalTexture)),a.normalScale=new f.Jb(1,1),void 0!==r.normalTexture.scale)){const t=r.normalTexture.scale;a.normalScale.set(t,t)}return void 0!==r.occlusionTexture&&o!==f.T&&(l.push(e.assignTexture(a,"aoMap",r.occlusionTexture)),void 0!==r.occlusionTexture.strength&&(a.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&o!==f.T&&(a.emissive=(new f.p).fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&o!==f.T&&l.push(e.assignTexture(a,"emissiveMap",r.emissiveTexture)),Promise.all(l).then((function(){let n;return n=o===B?i[g.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new o(a),r.name&&(n.name=r.name),n.map&&(n.map.encoding=f.Nb),n.emissiveMap&&(n.emissiveMap.encoding=f.Nb),at(n,r),e.associations.set(n,{materials:t}),r.extensions&&ot(i,n,r),n}))}createUniqueName(t){const e=f.lb.sanitizeNodeName(t||"");let n=e;for(let t=1;this.nodeNamesUsed[n];++t)n=e+"_"+t;return this.nodeNamesUsed[n]=!0,n}loadGeometries(t){const e=this,n=this.extensions,i=this.primitiveCache;function r(t){return n[g.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return dt(n,t,e)}))}const o=[];for(let n=0,a=t.length;n<a;n++){const a=t[n],s=lt(a),l=i[s];if(l)o.push(l.promise);else{let t;t=a.extensions&&a.extensions[g.KHR_DRACO_MESH_COMPRESSION]?r(a):dt(new f.n,a,e),i[s]={primitive:a,promise:t},o.push(t)}}return Promise.all(o)}loadMesh(t){const e=this,n=this.json,i=this.extensions,r=n.meshes[t],o=r.primitives,a=[];for(let t=0,e=o.length;t<e;t++){const e=void 0===o[t].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new f.V({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:f.x})),s.DefaultMaterial):this.getDependency("material",o[t].material);a.push(e)}var s;return a.push(e.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let n=0,c=s.length;n<c;n++){const c=s[n],u=o[n];let p;const h=a[n];if(u.mode===q||u.mode===X||u.mode===Y||void 0===u.mode)p=!0===r.isSkinnedMesh?new f.vb(c,h):new f.S(c,h),!0!==p.isSkinnedMesh||p.geometry.attributes.skinWeight.normalized||p.normalizeSkinWeights(),u.mode===X?p.geometry=_t(p.geometry,f.Ib):u.mode===Y&&(p.geometry=_t(p.geometry,f.Hb));else if(u.mode===W)p=new f.I(c,h);else if(u.mode===V)p=new f.F(c,h);else if(u.mode===G)p=new f.H(c,h);else{if(u.mode!==U)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);p=new f.jb(c,h)}Object.keys(p.geometry.morphAttributes).length>0&&st(p,r),p.name=e.createUniqueName(r.name||"mesh_"+t),at(p,r),u.extensions&&ot(i,p,u),e.assignFinalMaterial(p),l.push(p)}for(let n=0,i=l.length;n<i;n++)e.associations.set(l[n],{meshes:t,primitives:n});if(1===l.length)return l[0];const c=new f.y;e.associations.set(c,{meshes:t});for(let t=0,e=l.length;t<e;t++)c.add(l[t]);return c}))}loadCamera(t){let e;const n=this.json.cameras[t],i=n[n.type];if(i)return"perspective"===n.type?e=new f.fb(f.Q.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(e=new f.eb(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),at(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))}loadAnimation(t){const e=this.json.animations[t],n=[],i=[],r=[],o=[],a=[];for(let t=0,s=e.channels.length;t<s;t++){const s=e.channels[t],l=e.samplers[s.sampler],c=s.target,u=void 0!==c.node?c.node:c.id,p=void 0!==e.parameters?e.parameters[l.input]:l.input,h=void 0!==e.parameters?e.parameters[l.output]:l.output;n.push(this.getDependency("node",u)),i.push(this.getDependency("accessor",p)),r.push(this.getDependency("accessor",h)),o.push(l),a.push(c)}return Promise.all([Promise.all(n),Promise.all(i),Promise.all(r),Promise.all(o),Promise.all(a)]).then((function(n){const i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=[];for(let t=0,e=i.length;t<e;t++){const e=i[t],n=r[t],c=o[t],u=a[t],p=s[t];if(void 0===e)continue;let h;switch(e.updateMatrix(),e.matrixAutoUpdate=!0,tt[p.path]){case tt.weights:h=f.ab;break;case tt.rotation:h=f.nb;break;case tt.position:case tt.scale:default:h=f.Lb}const d=e.name?e.name:e.uuid,_=void 0!==u.interpolation?et[u.interpolation]:f.E,m=[];tt[p.path]===tt.weights?e.traverse((function(t){t.morphTargetInfluences&&m.push(t.name?t.name:t.uuid)})):m.push(d);let y=c.array;if(c.normalized){const t=ut(y.constructor),e=new Float32Array(y.length);for(let n=0,i=y.length;n<i;n++)e[n]=y[n]*t;y=e}for(let t=0,e=m.length;t<e;t++){const e=new h(m[t]+"."+tt[p.path],n.array,y,_);"CUBICSPLINE"===u.interpolation&&(e.createInterpolant=function(t){return new(this instanceof f.nb?H:N)(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(e)}}const c=e.name?e.name:"animation_"+t;return new f.c(c,void 0,l)}))}createNodeMesh(t){const e=this.json,n=this,i=e.nodes[t];return void 0===i.mesh?null:n.getDependency("mesh",i.mesh).then((function(t){const e=n._getNodeRef(n.meshCache,i.mesh,t);return void 0!==i.weights&&e.traverse((function(t){if(t.isMesh)for(let e=0,n=i.weights.length;e<n;e++)t.morphTargetInfluences[e]=i.weights[e]})),e}))}loadNode(t){const e=this.json,n=this.extensions,i=this,r=e.nodes[t],o=r.name?i.createUniqueName(r.name):"";return function(){const e=[],n=i._invokeOne((function(e){return e.createNodeMesh&&e.createNodeMesh(t)}));return n&&e.push(n),void 0!==r.camera&&e.push(i.getDependency("camera",r.camera).then((function(t){return i._getNodeRef(i.cameraCache,r.camera,t)}))),i._invokeAll((function(e){return e.createNodeAttachment&&e.createNodeAttachment(t)})).forEach((function(t){e.push(t)})),Promise.all(e)}().then((function(e){let a;if(a=!0===r.isBone?new f.j:e.length>1?new f.y:1===e.length?e[0]:new f.bb,a!==e[0])for(let t=0,n=e.length;t<n;t++)a.add(e[t]);if(r.name&&(a.userData.name=r.name,a.name=o),at(a,r),r.extensions&&ot(n,a,r),void 0!==r.matrix){const t=new f.R;t.fromArray(r.matrix),a.applyMatrix4(t)}else void 0!==r.translation&&a.position.fromArray(r.translation),void 0!==r.rotation&&a.quaternion.fromArray(r.rotation),void 0!==r.scale&&a.scale.fromArray(r.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=t,a}))}loadScene(t){const e=this.json,n=this.extensions,i=this.json.scenes[t],r=this,o=new f.y;i.name&&(o.name=r.createUniqueName(i.name)),at(o,i),i.extensions&&ot(n,o,i);const a=i.nodes||[],s=[];for(let t=0,n=a.length;t<n;t++)s.push(ht(a[t],o,e,r));return Promise.all(s).then((function(){return r.associations=(t=>{const e=new Map;for(const[t,n]of r.associations)(t instanceof f.P||t instanceof f.Eb)&&e.set(t,n);return t.traverse(t=>{const n=r.associations.get(t);null!=n&&e.set(t,n)}),e})(o),o}))}}function ht(t,e,n,i){const r=n.nodes[t];return i.getDependency("node",t).then((function(t){if(void 0===r.skin)return t;let e;return i.getDependency("skin",r.skin).then((function(t){e=t;const n=[];for(let t=0,r=e.joints.length;t<r;t++)n.push(i.getDependency("node",e.joints[t]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(!t.isMesh)return;const i=[],r=[];for(let t=0,o=n.length;t<o;t++){const o=n[t];if(o){i.push(o);const n=new f.R;void 0!==e.inverseBindMatrices&&n.fromArray(e.inverseBindMatrices.array,16*t),r.push(n)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[t])}t.bind(new f.tb(i,r),t.matrixWorld)})),t}))})).then((function(t){e.add(t);const o=[];if(r.children){const e=r.children;for(let r=0,a=e.length;r<a;r++){const a=e[r];o.push(ht(a,t,n,i))}}return Promise.all(o)}))}function dt(t,e,n){const i=e.attributes,r=[];function o(e,i){return n.getDependency("accessor",e).then((function(e){t.setAttribute(i,e)}))}for(const e in i){const n=$[e]||e.toLowerCase();n in t.attributes||r.push(o(i[e],n))}if(void 0!==e.indices&&!t.index){const i=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));r.push(i)}return at(t,e),function(t,e,n){const i=e.attributes,r=new f.k;if(void 0===i.POSITION)return;{const t=n.json.accessors[i.POSITION],e=t.min,o=t.max;if(void 0===e||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new f.Kb(e[0],e[1],e[2]),new f.Kb(o[0],o[1],o[2])),t.normalized){const e=ut(Z[t.componentType]);r.min.multiplyScalar(e),r.max.multiplyScalar(e)}}const o=e.targets;if(void 0!==o){const t=new f.Kb,e=new f.Kb;for(let i=0,r=o.length;i<r;i++){const r=o[i];if(void 0!==r.POSITION){const i=n.json.accessors[r.POSITION],o=i.min,a=i.max;if(void 0!==o&&void 0!==a){if(e.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),e.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),e.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),i.normalized){const t=ut(Z[i.componentType]);e.multiplyScalar(t)}t.max(e)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(t)}t.boundingBox=r;const a=new f.wb;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,t.boundingSphere=a}(t,e,n),Promise.all(r).then((function(){return void 0!==e.targets?function(t,e,n){let i=!1,r=!1;for(let t=0,n=e.length;t<n;t++){const n=e[t];if(void 0!==n.POSITION&&(i=!0),void 0!==n.NORMAL&&(r=!0),i&&r)break}if(!i&&!r)return Promise.resolve(t);const o=[],a=[];for(let s=0,l=e.length;s<l;s++){const l=e[s];if(i){const e=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;o.push(e)}if(r){const e=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal;a.push(e)}}return Promise.all([Promise.all(o),Promise.all(a)]).then((function(e){const n=e[0],o=e[1];return i&&(t.morphAttributes.position=n),r&&(t.morphAttributes.normal=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function _t(t,e){let n=t.getIndex();if(null===n){const e=[],i=t.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(let t=0;t<i.count;t++)e.push(t);t.setIndex(e),n=t.getIndex()}const i=n.count-2,r=[];if(e===f.Hb)for(let t=1;t<=i;t++)r.push(n.getX(0)),r.push(n.getX(t)),r.push(n.getX(t+1));else for(let t=0;t<i;t++)t%2==0?(r.push(n.getX(t)),r.push(n.getX(t+1)),r.push(n.getX(t+2))):(r.push(n.getX(t+2)),r.push(n.getX(t+1)),r.push(n.getX(t)));r.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=t.clone();return o.setIndex(r),o}var ft=n(15),mt=n(50);const yt=new WeakMap;class gt extends f.M{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,e,n,i){const r=new f.v(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(t,t=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,n).then(e).catch(i)},n,i)}decodeDracoFile(t,e,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,r).then(e)}decodeGeometry(t,e){for(const t in e.attributeTypes){const n=e.attributeTypes[t];void 0!==n.BYTES_PER_ELEMENT&&(e.attributeTypes[t]=n.name)}const n=JSON.stringify(e);if(yt.has(t)){const e=yt.get(t);if(e.key===n)return e.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,o=t.byteLength,a=this._getWorker(r,o).then(n=>(i=n,new Promise((n,o)=>{i._callbacks[r]={resolve:n,reject:o},i.postMessage({type:"decode",id:r,taskConfig:e,buffer:t},[t])}))).then(t=>this._createGeometry(t.geometry));return a.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),yt.set(t,{key:n,promise:a}),a}_createGeometry(t){const e=new f.n;t.index&&e.setIndex(new f.m(t.index.array,1));for(let n=0;n<t.attributes.length;n++){const i=t.attributes[n],r=i.name,o=i.array,a=i.itemSize;e.setAttribute(r,new f.m(o,a))}return e}_loadLibrary(t,e){const n=new f.v(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),n.setWithCredentials(this.withCredentials),new Promise((e,i)=>{n.load(t,e,void 0,i)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then(e=>{const n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);const i=vt.toString(),r=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r]))}),this.decoderPending}_getWorker(t,e){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const t=new Worker(this.workerSourceURL);t._callbacks={},t._taskCosts={},t._taskLoad=0,t.postMessage({type:"init",decoderConfig:this.decoderConfig}),t.onmessage=function(e){const n=e.data;switch(n.type){case"decode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)}else this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[t]=e,n._taskLoad+=e,n})}_releaseTask(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]}debug(){console.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function vt(){let t,e;function n(t,e,n,i,r,o){const a=o.num_components(),s=n.num_points()*a,l=s*r.BYTES_PER_ELEMENT,c=function(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32}}(t,r),u=t._malloc(l);e.GetAttributeDataArrayForAllPoints(n,o,c,l,u);const p=new r(t.HEAPF32.buffer,u,s).slice();return t._free(u),{name:i,array:p,itemSize:a}}onmessage=function(i){const r=i.data;switch(r.type){case"init":t=r.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":const i=r.buffer,o=r.taskConfig;e.then(t=>{const e=t.draco,a=new e.Decoder,s=new e.DecoderBuffer;s.Init(new Int8Array(i),i.byteLength);try{const t=function(t,e,i,r){const o=r.attributeIDs,a=r.attributeTypes;let s,l;const c=e.GetEncodedGeometryType(i);if(c===t.TRIANGULAR_MESH)s=new t.Mesh,l=e.DecodeBufferToMesh(i,s);else{if(c!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new t.PointCloud,l=e.DecodeBufferToPointCloud(i,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const i in o){const l=self[a[i]];let c,p;if(r.useUniqueIDs)p=o[i],c=e.GetAttributeByUniqueId(s,p);else{if(p=e.GetAttributeId(s,t[o[i]]),-1===p)continue;c=e.GetAttribute(s,p)}u.attributes.push(n(t,e,s,i,l,c))}c===t.TRIANGULAR_MESH&&(u.index=function(t,e,n){const i=3*n.num_faces(),r=4*i,o=t._malloc(r);e.GetTrianglesUInt32Array(n,r,o);const a=new Uint32Array(t.HEAPF32.buffer,o,i).slice();return t._free(o),{array:a,itemSize:1}}(t,e,s));return t.destroy(s),u}(e,a,s,o),i=t.attributes.map(t=>t.array.buffer);t.index&&i.push(t.index.array.buffer),self.postMessage({type:"decode",id:r.id,geometry:t},i)}catch(t){console.error(t),self.postMessage({type:"error",id:r.id,error:t.message})}finally{e.destroy(s),e.destroy(a)}})}}}var bt=function(){function t(){l()(this,t);var e=new gt;e.setDecoderPath("../../node_modules/three/examples/js/libs/draco/gltf/"),this.modelLoader=new m,this.modelLoader.setDRACOLoader(e),this.objectLoader=new f.cb,this.textureLoader=new f.Fb,this.audioLoader=new f.h}var e;return u()(t,[{key:"LoadAssets",value:(e=a()(h.a.mark((function t(e){var n,i;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this,d.a[e]&&0!=d.a[e].length){t.next=3;break}return t.abrupt("return");case 3:return i=[],d.a[e].forEach((function(t){switch(t.type){case _.a.Model:i.push(n.LoadModel(t));break;case _.a.Texture:i.push(n.LoadTexture(t));break;case _.a.Sound:i.push(n.LoadAudio(t));break;case _.a.TPS:i.push(n.LoadTPS(t))}})),t.next=7,Promise.all(i);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"LoadModel",value:function(t){var e=this;return new Promise((function(n,i){e.modelLoader.load(t.path,(function(e){var i;e.scene.traverse((function(t){t.material&&(t.material.metalness=0),t.isMesh&&(t.castShadow=!0,t.receiveShadow=!0)})),e.animations.length>0&&(i=e.scene.animations).push.apply(i,r()(e.animations)),ft.a.AddModel(t.name,e.scene),n()}),void 0,(function(t){console.error(t),i()}))}))}},{key:"LoadTexture",value:function(t){var e=this;return new Promise((function(n,i){e.textureLoader.load(t.path,(function(e){var i=new f.Bb({map:e});ft.a.AddTexture(t.name,i),n()}),(function(){}),(function(t){console.error(t),i()}))}))}},{key:"LoadTPS",value:function(t){var e=this;return new Promise((function(n,i){e.objectLoader.load(t.path+".json",(function(r){var o=r;e.textureLoader.load(t.path.slice(0,t.path.lastIndexOf("/")+1)+o.meta.image,(function(t){var e=new mt.a(o,t);Object.keys(e.textures).forEach((function(t){var n=new f.Bb({map:e.textures[t]});ft.a.AddTexture(t,n)})),n()}),(function(){}),(function(t){console.error(t),i()}))}),(function(){}),(function(t){console.error(t),i()}))}))}},{key:"LoadAudio",value:function(t){var e=this;return new Promise((function(n,i){e.audioLoader.load(t.path,(function(e){ft.a.AddSound(t.name,e),n()}),(function(){}),(function(t){console.error(t),i()}))}))}}]),t}();e.a=bt},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=n(52);t.exports=function(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var l,c=[],u=!1,p=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):p=-1,c.length&&d())}function d(){if(!u){var t=s(h);u=!0;for(var e=c.length;e;){for(l=c,c=[];++p<e;)l&&l[p].run();p=-1,e=c.length}l=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function f(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new _(t,e)),1!==c.length||u||s(d)},_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=f,r.addListener=f,r.once=f,r.off=f,r.removeListener=f,r.removeAllListeners=f,r.emit=f,r.prependListener=f,r.prependOnceListener=f,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return(r?"/":"")+(e=n(i(e.split("/"),(function(t){return!!t})),!r).join("/"))||"."},e.normalize=function(t){var o=e.isAbsolute(t),a="/"===r(t,-1);return(t=n(i(t.split("/"),(function(t){return!!t})),!o).join("/"))||o||(t="."),t&&a&&(t+="/"),(o?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(i(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split("/")),o=i(n.split("/")),a=Math.min(r.length,o.length),s=a,l=0;l<a;l++)if(r[l]!==o[l]){s=l;break}var c=[];for(l=s;l<r.length;l++)c.push("..");return(c=c.concat(o.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!=typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,r=!0,o=t.length-1;o>=1;--o)if(47===(e=t.charCodeAt(o))){if(!r){i=o;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var n=function(t){"string"!=typeof t&&(t+="");var e,n=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(n,i)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!=typeof t&&(t+="");for(var e=-1,n=0,i=-1,r=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===i&&(r=!1,i=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!r){n=a+1;break}}return-1===e||-1===i||0===o||1===o&&e===i-1&&e===n+1?"":t.slice(e,i)};var r="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(54))},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(1);const r={type:"change"},o={type:"start"},a={type:"end"};class s extends i.u{constructor(t,e){super(),void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new i.Kb,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:i.O.ROTATE,MIDDLE:i.O.DOLLY,RIGHT:i.O.PAN},this.touches={ONE:i.Cb.ROTATE,TWO:i.Cb.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(t){t.addEventListener("keydown",X),this._domElementKeyEvents=t},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=s.NONE},this.update=function(){const e=new i.Kb,o=(new i.mb).setFromUnitVectors(t.up,new i.Kb(0,1,0)),a=o.clone().invert(),f=new i.Kb,m=new i.mb,y=2*Math.PI;return function(){const t=n.object.position;e.copy(t).sub(n.target),e.applyQuaternion(o),u.setFromVector3(e),n.autoRotate&&l===s.NONE&&E(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(u.theta+=p.theta*n.dampingFactor,u.phi+=p.phi*n.dampingFactor):(u.theta+=p.theta,u.phi+=p.phi);let i=n.minAzimuthAngle,g=n.maxAzimuthAngle;return isFinite(i)&&isFinite(g)&&(i<-Math.PI?i+=y:i>Math.PI&&(i-=y),g<-Math.PI?g+=y:g>Math.PI&&(g-=y),u.theta=i<=g?Math.max(i,Math.min(g,u.theta)):u.theta>(i+g)/2?Math.max(i,u.theta):Math.min(g,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),e.setFromSpherical(u),e.applyQuaternion(a),t.copy(n.target).add(e),n.object.lookAt(n.target),!0===n.enableDamping?(p.theta*=1-n.dampingFactor,p.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(p.set(0,0,0),d.set(0,0,0)),h=1,!!(_||f.distanceToSquared(n.object.position)>c||8*(1-m.dot(n.object.quaternion))>c)&&(n.dispatchEvent(r),f.copy(n.object.position),m.copy(n.object.quaternion),_=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Y),n.domElement.removeEventListener("pointerdown",U),n.domElement.removeEventListener("pointercancel",V),n.domElement.removeEventListener("wheel",q),n.domElement.removeEventListener("pointermove",W),n.domElement.removeEventListener("pointerup",G),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",X)};const n=this,s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=s.NONE;const c=1e-6,u=new i.yb,p=new i.yb;let h=1;const d=new i.Kb;let _=!1;const f=new i.Jb,m=new i.Jb,y=new i.Jb,g=new i.Jb,v=new i.Jb,b=new i.Jb,x=new i.Jb,S=new i.Jb,w=new i.Jb,M=[],T={};function C(){return Math.pow(.95,n.zoomSpeed)}function E(t){p.theta-=t}function A(t){p.phi-=t}const R=function(){const t=new i.Kb;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),d.add(t)}}(),L=function(){const t=new i.Kb;return function(e,i){!0===n.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(n.object.up,t)),t.multiplyScalar(e),d.add(t)}}(),P=function(){const t=new i.Kb;return function(e,i){const r=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;t.copy(o).sub(n.target);let a=t.length();a*=Math.tan(n.object.fov/2*Math.PI/180),R(2*e*a/r.clientHeight,n.object.matrix),L(2*i*a/r.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(R(e*(n.object.right-n.object.left)/n.object.zoom/r.clientWidth,n.object.matrix),L(i*(n.object.top-n.object.bottom)/n.object.zoom/r.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function D(t){n.object.isPerspectiveCamera?h/=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*t)),n.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function I(t){n.object.isPerspectiveCamera?h*=t:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/t)),n.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(t){f.set(t.clientX,t.clientY)}function O(t){g.set(t.clientX,t.clientY)}function B(){if(1===M.length)f.set(M[0].pageX,M[0].pageY);else{const t=.5*(M[0].pageX+M[1].pageX),e=.5*(M[0].pageY+M[1].pageY);f.set(t,e)}}function j(){if(1===M.length)g.set(M[0].pageX,M[0].pageY);else{const t=.5*(M[0].pageX+M[1].pageX),e=.5*(M[0].pageY+M[1].pageY);g.set(t,e)}}function F(){const t=M[0].pageX-M[1].pageX,e=M[0].pageY-M[1].pageY,n=Math.sqrt(t*t+e*e);x.set(0,n)}function N(t){if(1==M.length)m.set(t.pageX,t.pageY);else{const e=K(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);m.set(n,i)}y.subVectors(m,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;E(2*Math.PI*y.x/e.clientHeight),A(2*Math.PI*y.y/e.clientHeight),f.copy(m)}function z(t){if(1===M.length)v.set(t.pageX,t.pageY);else{const e=K(t),n=.5*(t.pageX+e.x),i=.5*(t.pageY+e.y);v.set(n,i)}b.subVectors(v,g).multiplyScalar(n.panSpeed),P(b.x,b.y),g.copy(v)}function H(t){const e=K(t),i=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(i*i+r*r);S.set(0,o),w.set(0,Math.pow(S.y/x.y,n.zoomSpeed)),D(w.y),x.copy(S)}function U(t){!1!==n.enabled&&(0===M.length&&(n.domElement.setPointerCapture(t.pointerId),n.domElement.addEventListener("pointermove",W),n.domElement.addEventListener("pointerup",G)),function(t){M.push(t)}(t),"touch"===t.pointerType?function(t){switch(J(t),M.length){case 1:switch(n.touches.ONE){case i.Cb.ROTATE:if(!1===n.enableRotate)return;B(),l=s.TOUCH_ROTATE;break;case i.Cb.PAN:if(!1===n.enablePan)return;j(),l=s.TOUCH_PAN;break;default:l=s.NONE}break;case 2:switch(n.touches.TWO){case i.Cb.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&F(),n.enablePan&&j(),l=s.TOUCH_DOLLY_PAN;break;case i.Cb.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&F(),n.enableRotate&&B(),l=s.TOUCH_DOLLY_ROTATE;break;default:l=s.NONE}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}(t):function(t){let e;switch(t.button){case 0:e=n.mouseButtons.LEFT;break;case 1:e=n.mouseButtons.MIDDLE;break;case 2:e=n.mouseButtons.RIGHT;break;default:e=-1}switch(e){case i.O.DOLLY:if(!1===n.enableZoom)return;!function(t){x.set(t.clientX,t.clientY)}(t),l=s.DOLLY;break;case i.O.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enablePan)return;O(t),l=s.PAN}else{if(!1===n.enableRotate)return;k(t),l=s.ROTATE}break;case i.O.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===n.enableRotate)return;k(t),l=s.ROTATE}else{if(!1===n.enablePan)return;O(t),l=s.PAN}break;default:l=s.NONE}l!==s.NONE&&n.dispatchEvent(o)}(t))}function W(t){!1!==n.enabled&&("touch"===t.pointerType?function(t){switch(J(t),l){case s.TOUCH_ROTATE:if(!1===n.enableRotate)return;N(t),n.update();break;case s.TOUCH_PAN:if(!1===n.enablePan)return;z(t),n.update();break;case s.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(t){n.enableZoom&&H(t),n.enablePan&&z(t)}(t),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(t){n.enableZoom&&H(t),n.enableRotate&&N(t)}(t),n.update();break;default:l=s.NONE}}(t):function(t){if(!1===n.enabled)return;switch(l){case s.ROTATE:if(!1===n.enableRotate)return;!function(t){m.set(t.clientX,t.clientY),y.subVectors(m,f).multiplyScalar(n.rotateSpeed);const e=n.domElement;E(2*Math.PI*y.x/e.clientHeight),A(2*Math.PI*y.y/e.clientHeight),f.copy(m),n.update()}(t);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(t){S.set(t.clientX,t.clientY),w.subVectors(S,x),w.y>0?D(C()):w.y<0&&I(C()),x.copy(S),n.update()}(t);break;case s.PAN:if(!1===n.enablePan)return;!function(t){v.set(t.clientX,t.clientY),b.subVectors(v,g).multiplyScalar(n.panSpeed),P(b.x,b.y),g.copy(v),n.update()}(t)}}(t))}function G(t){Z(t),0===M.length&&(n.domElement.releasePointerCapture(t.pointerId),n.domElement.removeEventListener("pointermove",W),n.domElement.removeEventListener("pointerup",G)),n.dispatchEvent(a),l=s.NONE}function V(t){Z(t)}function q(t){!1!==n.enabled&&!1!==n.enableZoom&&l===s.NONE&&(t.preventDefault(),n.dispatchEvent(o),function(t){t.deltaY<0?I(C()):t.deltaY>0&&D(C()),n.update()}(t),n.dispatchEvent(a))}function X(t){!1!==n.enabled&&!1!==n.enablePan&&function(t){let e=!1;switch(t.code){case n.keys.UP:P(0,n.keyPanSpeed),e=!0;break;case n.keys.BOTTOM:P(0,-n.keyPanSpeed),e=!0;break;case n.keys.LEFT:P(n.keyPanSpeed,0),e=!0;break;case n.keys.RIGHT:P(-n.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),n.update())}(t)}function Y(t){!1!==n.enabled&&t.preventDefault()}function Z(t){delete T[t.pointerId];for(let e=0;e<M.length;e++)if(M[e].pointerId==t.pointerId)return void M.splice(e,1)}function J(t){let e=T[t.pointerId];void 0===e&&(e=new i.Jb,T[t.pointerId]=e),e.set(t.pageX,t.pageY)}function K(t){const e=t.pointerId===M[0].pointerId?M[1]:M[0];return T[e.pointerId]}n.domElement.addEventListener("contextmenu",Y),n.domElement.addEventListener("pointerdown",U),n.domElement.addEventListener("pointercancel",V),n.domElement.addEventListener("wheel",q,{passive:!1}),this.update()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n(1);const r=new i.pb,o=new i.Kb,a=new i.Kb,s=new i.mb,l={X:new i.Kb(1,0,0),Y:new i.Kb(0,1,0),Z:new i.Kb(0,0,1)},c={type:"change"},u={type:"mouseDown"},p={type:"mouseUp",mode:null},h={type:"objectChange"};class d extends i.bb{constructor(t,e){super(),void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),this.visible=!1,this.domElement=e,this.domElement.style.touchAction="none";const n=new k;this._gizmo=n,this.add(n);const r=new O;this._plane=r,this.add(r);const o=this;function a(t,e){let i=e;Object.defineProperty(o,t,{get:function(){return void 0!==i?i:e},set:function(e){i!==e&&(i=e,r[t]=e,n[t]=e,o.dispatchEvent({type:t+"-changed",value:e}),o.dispatchEvent(c))}}),o[t]=e,r[t]=e,n[t]=e}a("camera",t),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0);const s=new i.Kb,l=new i.Kb,u=new i.mb,p=new i.mb,h=new i.Kb,d=new i.mb,v=new i.Kb,b=new i.Kb,x=new i.Kb,S=new i.Kb;a("worldPosition",s),a("worldPositionStart",l),a("worldQuaternion",u),a("worldQuaternionStart",p),a("cameraPosition",h),a("cameraQuaternion",d),a("pointStart",v),a("pointEnd",b),a("rotationAxis",x),a("rotationAngle",0),a("eye",S),this._offset=new i.Kb,this._startNorm=new i.Kb,this._endNorm=new i.Kb,this._cameraScale=new i.Kb,this._parentPosition=new i.Kb,this._parentQuaternion=new i.mb,this._parentQuaternionInv=new i.mb,this._parentScale=new i.Kb,this._worldScaleStart=new i.Kb,this._worldQuaternionInv=new i.mb,this._worldScale=new i.Kb,this._positionStart=new i.Kb,this._quaternionStart=new i.mb,this._scaleStart=new i.Kb,this._getPointer=_.bind(this),this._onPointerDown=m.bind(this),this._onPointerHover=f.bind(this),this._onPointerMove=y.bind(this),this._onPointerUp=g.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(t){if(void 0===this.object||!0===this.dragging)return;r.setFromCamera(t,this.camera);const e=v(this._gizmo.picker[this.mode],r);this.axis=e?e.object.name:null}pointerDown(t){if(void 0!==this.object&&!0!==this.dragging&&0===t.button&&null!==this.axis){r.setFromCamera(t,this.camera);const e=v(this._plane,r,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,u.mode=this.mode,this.dispatchEvent(u)}}pointerMove(t){const e=this.axis,n=this.mode,i=this.object;let u=this.space;if("scale"===n?u="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(u="world"),void 0===i||null===e||!1===this.dragging||-1!==t.button)return;r.setFromCamera(t,this.camera);const p=v(this._plane,r,!0);if(p){if(this.pointEnd.copy(p.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===u&&"XYZ"!==e&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===e.indexOf("X")&&(this._offset.x=0),-1===e.indexOf("Y")&&(this._offset.y=0),-1===e.indexOf("Z")&&(this._offset.z=0),"local"===u&&"XYZ"!==e?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),i.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===u&&(i.position.applyQuaternion(s.copy(this._quaternionStart).invert()),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(this._quaternionStart)),"world"===u&&(i.parent&&i.position.add(o.setFromMatrixPosition(i.parent.matrixWorld)),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(o.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){let t=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(t*=-1),a.set(t,t,t)}else o.copy(this.pointStart),a.copy(this.pointEnd),o.applyQuaternion(this._worldQuaternionInv),a.applyQuaternion(this._worldQuaternionInv),a.divide(o),-1===e.search("X")&&(a.x=1),-1===e.search("Y")&&(a.y=1),-1===e.search("Z")&&(a.z=1);i.scale.copy(this._scaleStart).multiply(a),this.scaleSnap&&(-1!==e.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const t=20/this.worldPosition.distanceTo(o.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===e?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(o.copy(this.rotationAxis).cross(this.eye))*t):"X"!==e&&"Y"!==e&&"Z"!==e||(this.rotationAxis.copy(l[e]),o.copy(l[e]),"local"===u&&o.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(o.cross(this.eye).normalize())*t),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===u&&"E"!==e&&"XYZE"!==e?(i.quaternion.copy(this._quaternionStart),i.quaternion.multiply(s.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),i.quaternion.copy(s.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),i.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(c),this.dispatchEvent(h)}}pointerUp(t){0===t.button&&(this.dragging&&null!==this.axis&&(p.mode=this.mode,this.dispatchEvent(p)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))}attach(t){return this.object=t,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(c),this.dispatchEvent(h),this.pointStart.copy(this.pointEnd))}getRaycaster(){return r}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}update(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}}function _(t){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:t.button};{const e=this.domElement.getBoundingClientRect();return{x:(t.clientX-e.left)/e.width*2-1,y:-(t.clientY-e.top)/e.height*2+1,button:t.button}}}function f(t){if(this.enabled)switch(t.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(t))}}function m(t){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(t.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(t)),this.pointerDown(this._getPointer(t)))}function y(t){this.enabled&&this.pointerMove(this._getPointer(t))}function g(t){this.enabled&&(this.domElement.releasePointerCapture(t.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(t)))}function v(t,e,n){const i=e.intersectObject(t,!0);for(let t=0;t<i.length;t++)if(i[t].object.visible||n)return i[t];return!1}d.prototype.isTransformControls=!0;const b=new i.t,x=new i.Kb(0,1,0),S=new i.Kb(0,0,0),w=new i.R,M=new i.mb,T=new i.mb,C=new i.Kb,E=new i.R,A=new i.Kb(1,0,0),R=new i.Kb(0,1,0),L=new i.Kb(0,0,1),P=new i.Kb,D=new i.Kb,I=new i.Kb;class k extends i.bb{constructor(){super(),this.type="TransformControlsGizmo";const t=new i.T({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new i.G({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;const r=e.clone();r.opacity=.5;const o=t.clone();o.color.setHex(16711680);const a=t.clone();a.color.setHex(65280);const s=t.clone();s.color.setHex(255);const l=t.clone();l.color.setHex(16711680),l.opacity=.5;const c=t.clone();c.color.setHex(65280),c.opacity=.5;const u=t.clone();u.color.setHex(255),u.opacity=.5;const p=t.clone();p.opacity=.25;const h=t.clone();h.color.setHex(16776960),h.opacity=.25;t.clone().color.setHex(16776960);const d=t.clone();d.color.setHex(7895160);const _=new i.q(0,.04,.1,12);_.translate(0,.05,0);const f=new i.l(.08,.08,.08);f.translate(0,.04,0);const m=new i.n;m.setAttribute("position",new i.w([0,0,0,1,0,0],3));const y=new i.q(.0075,.0075,.5,3);function g(t,e){const n=new i.Gb(t,.0075,3,64,e*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}y.translate(0,.25,0);const v={X:[[new i.S(_,o),[.5,0,0],[0,0,-Math.PI/2]],[new i.S(_,o),[-.5,0,0],[0,0,Math.PI/2]],[new i.S(y,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new i.S(_,a),[0,.5,0]],[new i.S(_,a),[0,-.5,0],[Math.PI,0,0]],[new i.S(y,a)]],Z:[[new i.S(_,s),[0,0,.5],[Math.PI/2,0,0]],[new i.S(_,s),[0,0,-.5],[-Math.PI/2,0,0]],[new i.S(y,s),null,[Math.PI/2,0,0]]],XYZ:[[new i.S(new i.db(.1,0),p.clone()),[0,0,0]]],XY:[[new i.S(new i.l(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new i.S(new i.l(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.S(new i.l(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},b={X:[[new i.S(new i.q(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new i.S(new i.q(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new i.S(new i.q(.2,0,.6,4),n),[0,.3,0]],[new i.S(new i.q(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new i.S(new i.q(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new i.S(new i.q(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new i.S(new i.db(.2,0),n)]],XY:[[new i.S(new i.l(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new i.S(new i.l(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.S(new i.l(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},x={START:[[new i.S(new i.db(.01,2),r),null,null,null,"helper"]],END:[[new i.S(new i.db(.01,2),r),null,null,null,"helper"]],DELTA:[[new i.F(function(){const t=new i.n;return t.setAttribute("position",new i.w([0,0,0,1,1,1],3)),t}(),r),null,null,null,"helper"]],X:[[new i.F(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i.F(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i.F(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},S={XYZE:[[new i.S(g(.5,1),d),null,[0,Math.PI/2,0]]],X:[[new i.S(g(.5,.5),o)]],Y:[[new i.S(g(.5,.5),a),null,[0,0,-Math.PI/2]]],Z:[[new i.S(g(.5,.5),s),null,[0,Math.PI/2,0]]],E:[[new i.S(g(.75,1),h),null,[0,Math.PI/2,0]]]},w={AXIS:[[new i.F(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},M={XYZE:[[new i.S(new i.xb(.25,10,8),n)]],X:[[new i.S(new i.Gb(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new i.S(new i.Gb(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new i.S(new i.Gb(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new i.S(new i.Gb(.75,.1,2,24),n)]]},T={X:[[new i.S(f,o),[.5,0,0],[0,0,-Math.PI/2]],[new i.S(y,o),[0,0,0],[0,0,-Math.PI/2]],[new i.S(f,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new i.S(f,a),[0,.5,0]],[new i.S(y,a)],[new i.S(f,a),[0,-.5,0],[0,0,Math.PI]]],Z:[[new i.S(f,s),[0,0,.5],[Math.PI/2,0,0]],[new i.S(y,s),[0,0,0],[Math.PI/2,0,0]],[new i.S(f,s),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new i.S(new i.l(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new i.S(new i.l(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.S(new i.l(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new i.S(new i.l(.1,.1,.1),p.clone())]]},C={X:[[new i.S(new i.q(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new i.S(new i.q(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new i.S(new i.q(.2,0,.6,4),n),[0,.3,0]],[new i.S(new i.q(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new i.S(new i.q(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new i.S(new i.q(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new i.S(new i.l(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new i.S(new i.l(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new i.S(new i.l(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new i.S(new i.l(.2,.2,.2),n),[0,0,0]]]},E={X:[[new i.F(m,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i.F(m,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i.F(m,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function A(t){const e=new i.bb;for(const n in t)for(let i=t[n].length;i--;){const r=t[n][i][0].clone(),o=t[n][i][1],a=t[n][i][2],s=t[n][i][3],l=t[n][i][4];r.name=n,r.tag=l,o&&r.position.set(o[0],o[1],o[2]),a&&r.rotation.set(a[0],a[1],a[2]),s&&r.scale.set(s[0],s[1],s[2]),r.updateMatrix();const c=r.geometry.clone();c.applyMatrix4(r.matrix),r.geometry=c,r.renderOrder=1/0,r.position.set(0,0,0),r.rotation.set(0,0,0),r.scale.set(1,1,1),e.add(r)}return e}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=A(v)),this.add(this.gizmo.rotate=A(S)),this.add(this.gizmo.scale=A(T)),this.add(this.picker.translate=A(b)),this.add(this.picker.rotate=A(M)),this.add(this.picker.scale=A(C)),this.add(this.helper.translate=A(x)),this.add(this.helper.rotate=A(w)),this.add(this.helper.scale=A(E)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){const e="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:T;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let t=0;t<n.length;t++){const i=n[t];let r;if(i.visible=!0,i.rotation.set(0,0,0),i.position.copy(this.worldPosition),r=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),i.scale.set(1,1,1).multiplyScalar(r*this.size/4),"helper"!==i.tag){if(i.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){const t=.99,n=.2;"X"===i.name&&Math.abs(x.copy(A).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Y"===i.name&&Math.abs(x.copy(R).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"Z"===i.name&&Math.abs(x.copy(L).applyQuaternion(e).dot(this.eye))>t&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XY"===i.name&&Math.abs(x.copy(L).applyQuaternion(e).dot(this.eye))<n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"YZ"===i.name&&Math.abs(x.copy(A).applyQuaternion(e).dot(this.eye))<n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1),"XZ"===i.name&&Math.abs(x.copy(R).applyQuaternion(e).dot(this.eye))<n&&(i.scale.set(1e-10,1e-10,1e-10),i.visible=!1)}else"rotate"===this.mode&&(M.copy(e),x.copy(this.eye).applyQuaternion(s.copy(e).invert()),-1!==i.name.search("E")&&i.quaternion.setFromRotationMatrix(w.lookAt(this.eye,S,R)),"X"===i.name&&(s.setFromAxisAngle(A,Math.atan2(-x.y,x.z)),s.multiplyQuaternions(M,s),i.quaternion.copy(s)),"Y"===i.name&&(s.setFromAxisAngle(R,Math.atan2(x.x,x.z)),s.multiplyQuaternions(M,s),i.quaternion.copy(s)),"Z"===i.name&&(s.setFromAxisAngle(L,Math.atan2(x.y,x.x)),s.multiplyQuaternions(M,s),i.quaternion.copy(s)));i.visible=i.visible&&(-1===i.name.indexOf("X")||this.showX),i.visible=i.visible&&(-1===i.name.indexOf("Y")||this.showY),i.visible=i.visible&&(-1===i.name.indexOf("Z")||this.showZ),i.visible=i.visible&&(-1===i.name.indexOf("E")||this.showX&&this.showY&&this.showZ),i.material._color=i.material._color||i.material.color.clone(),i.material._opacity=i.material._opacity||i.material.opacity,i.material.color.copy(i.material._color),i.material.opacity=i.material._opacity,this.enabled&&this.axis&&(i.name===this.axis||this.axis.split("").some((function(t){return i.name===t})))&&(i.material.color.setHex(16776960),i.material.opacity=1)}else i.visible=!1,"AXIS"===i.name?(i.position.copy(this.worldPositionStart),i.visible=!!this.axis,"X"===this.axis&&(s.setFromEuler(b.set(0,0,0)),i.quaternion.copy(e).multiply(s),Math.abs(x.copy(A).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"Y"===this.axis&&(s.setFromEuler(b.set(0,0,Math.PI/2)),i.quaternion.copy(e).multiply(s),Math.abs(x.copy(R).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"Z"===this.axis&&(s.setFromEuler(b.set(0,Math.PI/2,0)),i.quaternion.copy(e).multiply(s),Math.abs(x.copy(L).applyQuaternion(e).dot(this.eye))>.9&&(i.visible=!1)),"XYZE"===this.axis&&(s.setFromEuler(b.set(0,Math.PI/2,0)),x.copy(this.rotationAxis),i.quaternion.setFromRotationMatrix(w.lookAt(S,x,R)),i.quaternion.multiply(s),i.visible=this.dragging),"E"===this.axis&&(i.visible=!1)):"START"===i.name?(i.position.copy(this.worldPositionStart),i.visible=this.dragging):"END"===i.name?(i.position.copy(this.worldPosition),i.visible=this.dragging):"DELTA"===i.name?(i.position.copy(this.worldPositionStart),i.quaternion.copy(this.worldQuaternionStart),o.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),o.applyQuaternion(this.worldQuaternionStart.clone().invert()),i.scale.copy(o),i.visible=this.dragging):(i.quaternion.copy(e),this.dragging?i.position.copy(this.worldPositionStart):i.position.copy(this.worldPosition),this.axis&&(i.visible=-1!==this.axis.search(i.name)))}super.updateMatrixWorld(t)}}k.prototype.isTransformControlsGizmo=!0;class O extends i.S{constructor(){super(new i.hb(1e5,1e5,2,2),new i.T({visible:!1,wireframe:!0,side:i.s,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),P.copy(A).applyQuaternion("local"===e?this.worldQuaternion:T),D.copy(R).applyQuaternion("local"===e?this.worldQuaternion:T),I.copy(L).applyQuaternion("local"===e?this.worldQuaternion:T),x.copy(D),this.mode){case"translate":case"scale":switch(this.axis){case"X":x.copy(this.eye).cross(P),C.copy(P).cross(x);break;case"Y":x.copy(this.eye).cross(D),C.copy(D).cross(x);break;case"Z":x.copy(this.eye).cross(I),C.copy(I).cross(x);break;case"XY":C.copy(I);break;case"YZ":C.copy(P);break;case"XZ":x.copy(I),C.copy(D);break;case"XYZ":case"E":C.set(0,0,0)}break;case"rotate":default:C.set(0,0,0)}0===C.length()?this.quaternion.copy(this.cameraQuaternion):(E.lookAt(o.set(0,0,0),C,x),this.quaternion.setFromRotationMatrix(E)),super.updateMatrixWorld(t)}}O.prototype.isTransformControlsPlane=!0},function(t,e,n){var i=n(72),r=n(73),o=n(53),a=n(74);t.exports=function(t,e){return i(t)||r(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){n(75),n(68),t.exports=n(71)},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,n(e,i)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){var i=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var r=e&&e.prototype instanceof p?e:p,o=Object.create(r.prototype),a=new w(i||[]);return o._invoke=function(t,e,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return T()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=b(a,n);if(s){if(s===u)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=c(t,e,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function p(){}function h(){}function d(){}var _={};s(_,r,(function(){return this}));var f=Object.getPrototypeOf,m=f&&f(f(M([])));m&&m!==e&&n.call(m,r)&&(_=m);var y=d.prototype=p.prototype=Object.create(_);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function v(t,e){var i;this._invoke=function(r,o){function a(){return new e((function(i,a){!function i(r,o,a,s){var l=c(t[r],t,o);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==typeof p&&n.call(p,"__await")?e.resolve(p.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(p).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}(r,o,i,a)}))}return i=i?i.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function M(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return h.prototype=d,s(y,"constructor",d),s(d,"constructor",h),h.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(v.prototype),s(v.prototype,o,(function(){return this})),t.AsyncIterator=v,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new v(l(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(y),s(y,a,"Generator"),s(y,r,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=M,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return a.type="throw",a.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;S(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:M(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=i}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}},function(t,e,n){var i=n(52);t.exports=function(t){if(Array.isArray(t))return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";(function(t){var e=n(28),i=n(37),r=n(16),o=(n(25),n(43)),a=n(44),s=n(47);t.DEBUG=!1,e.a.prototype.addScenes=function(){this.sceneManager.AddScene(a.a,r.a.MenuScene),this.sceneManager.AddScene(s.a,r.a.LoadingScene),this.sceneManager.AddScene(i.a,r.a.MainScene),this.sceneManager.AddScene(o.a,r.a.EndScene),this.sceneManager.LoadScene(r.a.MenuScene)};e.a}).call(this,n(20))},function(t,e,n){var i=n(5);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=i(t)););return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.r(e),function(t,e,i,r){var o,a=n(0),s=n.n(a),l=(o=(o="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||t,function(t){var r,a;t=t||{},r||(r=void 0!==t?t:{}),r.ready=new Promise((function(t){a=t}));var l,c,u,p,h,d={};for(l in r)r.hasOwnProperty(l)&&(d[l]=r[l]);c="object"===("undefined"==typeof window?"undefined":s()(window)),u="function"==typeof importScripts,p="object"===(void 0===e?"undefined":s()(e))&&"object"===s()(e.versions)&&"string"==typeof e.versions.node,h=!c&&!p&&!u;var _,f,m,y,g="";p?(g=u?n(55).dirname(g)+"/":i+"/",_=function(t,e){return m||(m=n(70)),y||(y=n(55)),t=y.normalize(t),m.readFileSync(t,e?null:"utf8")},f=function(t){return(t=_(t,!0)).buffer||(t=new Uint8Array(t)),E(t.buffer),t},1<e.argv.length&&e.argv[1].replace(/\\/g,"/"),e.argv.slice(2),e.on("uncaughtException",(function(t){throw t})),e.on("unhandledRejection",X),r.inspect=function(){return"[Emscripten Module object]"}):h?("undefined"!=typeof read&&(_=function(t){return read(t)}),f=function(t){return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(t=read(t,"binary"),E("object"===s()(t)),t)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(c||u)&&(u?g=self.location.href:document.currentScript&&(g=document.currentScript.src),o&&(g=o),g=0!==g.indexOf("blob:")?g.substr(0,g.lastIndexOf("/")+1):"",_=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},u&&(f=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}));var v=r.print||console.log.bind(console),b=r.printErr||console.warn.bind(console);for(l in d)d.hasOwnProperty(l)&&(r[l]=d[l]);d=null;var x,S,w=[];r.wasmBinary&&(S=r.wasmBinary),r.noExitRuntime&&r.noExitRuntime,"object"!==("undefined"==typeof WebAssembly?"undefined":s()(WebAssembly))&&b("no native wasm support detected");var M,T=new WebAssembly.Table({initial:930,element:"anyfunc"}),C=!1;function E(t,e){t||X("Assertion failed: "+e)}var A,R,L,P,D,I,k="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,O=r.INITIAL_MEMORY||67108864;(M=r.wasmMemory?r.wasmMemory:new WebAssembly.Memory({initial:O/65536,maximum:O/65536}))&&(A=M.buffer),O=A.byteLength;var B=A;function j(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e(r);else{var n=e.cz;"number"==typeof n?void 0===e.Iy?r.dynCall_v(n):r.dynCall_vi(n,e.Iy):n(void 0===e.Iy?null:e.Iy)}}}A=B,r.HEAP8=R=new Int8Array(B),r.HEAP16=new Int16Array(B),r.HEAP32=P=new Int32Array(B),r.HEAPU8=L=new Uint8Array(B),r.HEAPU16=new Uint16Array(B),r.HEAPU32=new Uint32Array(B),r.HEAPF32=D=new Float32Array(B),r.HEAPF64=I=new Float64Array(B),P[7852]=5274448;var F=[],N=[],z=[],H=[],U=!1;function W(){var t=r.preRun.shift();F.unshift(t)}var G=0,V=null,q=null;function X(t){throw r.onAbort&&r.onAbort(t),v(t+=""),b(t),C=!0,new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}function Y(t){var e=J;return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function Z(){return Y("data:application/octet-stream;base64,")}r.preloadedImages={},r.preloadedAudios={};var J="ammo.wasm.wasm";if(!Z()){var K=J;J=r.locateFile?r.locateFile(K,g):g+K}function Q(){try{if(S)return new Uint8Array(S);if(f)return f(J);throw"both async and sync fetching of the wasm failed"}catch(t){X(t)}}var $={1376:function(t,e,n,i){if(!(t=r.getCache(r.DebugDrawer)[t]).hasOwnProperty("drawLine"))throw"a JSImplementation must implement all functions, you forgot DebugDrawer::drawLine.";t.drawLine(e,n,i)},1601:function(t,e,n,i,o,a){if(!(t=r.getCache(r.DebugDrawer)[t]).hasOwnProperty("drawContactPoint"))throw"a JSImplementation must implement all functions, you forgot DebugDrawer::drawContactPoint.";t.drawContactPoint(e,n,i,o,a)},1858:function(t,e){if(!(t=r.getCache(r.DebugDrawer)[t]).hasOwnProperty("reportErrorWarning"))throw"a JSImplementation must implement all functions, you forgot DebugDrawer::reportErrorWarning.";t.reportErrorWarning(e)},2105:function(t,e,n){if(!(t=r.getCache(r.DebugDrawer)[t]).hasOwnProperty("draw3dText"))throw"a JSImplementation must implement all functions, you forgot DebugDrawer::draw3dText.";t.draw3dText(e,n)},2332:function(t,e){if(!(t=r.getCache(r.DebugDrawer)[t]).hasOwnProperty("setDebugMode"))throw"a JSImplementation must implement all functions, you forgot DebugDrawer::setDebugMode.";t.setDebugMode(e)},2561:function(t){if(!(t=r.getCache(r.DebugDrawer)[t]).hasOwnProperty("getDebugMode"))throw"a JSImplementation must implement all functions, you forgot DebugDrawer::getDebugMode.";return t.getDebugMode()},3288:function(t,e,n,i,o,a,s,l){if(!(t=r.getCache(r.ConcreteContactResultCallback)[t]).hasOwnProperty("addSingleResult"))throw"a JSImplementation must implement all functions, you forgot ConcreteContactResultCallback::addSingleResult.";return t.addSingleResult(e,n,i,o,a,s,l)}};N.push({cz:function(){it()}});var tt=[];function et(t,e){var n;for(tt.length=0,e>>=2;n=L[t++];)tt.push(105>n?I[++e>>1]:P[e]),++e;return tt}var nt={f:function(){X()},c:function(t,e,n){return e=et(e,n),$[t].apply(null,e)},a:function(t,e,n){return e=et(e,n),$[t].apply(null,e)},d:function(t,e,n){L.copyWithin(t,e,e+n)},e:function(){X("OOM")},b:function(t){var e=Date.now();return P[t>>2]=e/1e3|0,P[t+4>>2]=e%1e3*1e3|0,0},memory:M,table:T};!function(){function t(t){r.asm=t.exports,G--,r.monitorRunDependencies&&r.monitorRunDependencies(G),0==G&&(null!==V&&(clearInterval(V),V=null),q&&(t=q,q=null,t()))}function e(e){t(e.instance)}function n(t){return(S||!c&&!u||"function"!=typeof fetch||Y("file://")?new Promise((function(t){t(Q())})):fetch(J,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+J+"'";return t.arrayBuffer()})).catch((function(){return Q()}))).then((function(t){return WebAssembly.instantiate(t,i)})).then(t,(function(t){b("failed to asynchronously prepare wasm: "+t),X(t)}))}var i={a:nt};if(G++,r.monitorRunDependencies&&r.monitorRunDependencies(G),r.instantiateWasm)try{return r.instantiateWasm(i,t)}catch(t){return b("Module.instantiateWasm callback failed with error: "+t),!1}!function(){if(S||"function"!=typeof WebAssembly.instantiateStreaming||Z()||Y("file://")||"function"!=typeof fetch)return n(e);fetch(J,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,i).then(e,(function(t){return b("wasm streaming compile failed: "+t),b("falling back to ArrayBuffer instantiation"),n(e)}))}))}()}();var it=r.___wasm_call_ctors=function(){return(it=r.___wasm_call_ctors=r.asm.g).apply(null,arguments)};r.___em_js__array_bounds_check_error=function(){return(r.___em_js__array_bounds_check_error=r.asm.h).apply(null,arguments)};var rt,ot=r._emscripten_bind_btCollisionShape_setLocalScaling_1=function(){return(ot=r._emscripten_bind_btCollisionShape_setLocalScaling_1=r.asm.i).apply(null,arguments)},at=r._emscripten_bind_btCollisionShape_getLocalScaling_0=function(){return(at=r._emscripten_bind_btCollisionShape_getLocalScaling_0=r.asm.j).apply(null,arguments)},st=r._emscripten_bind_btCollisionShape_calculateLocalInertia_2=function(){return(st=r._emscripten_bind_btCollisionShape_calculateLocalInertia_2=r.asm.k).apply(null,arguments)},lt=r._emscripten_bind_btCollisionShape_setMargin_1=function(){return(lt=r._emscripten_bind_btCollisionShape_setMargin_1=r.asm.l).apply(null,arguments)},ct=r._emscripten_bind_btCollisionShape_getMargin_0=function(){return(ct=r._emscripten_bind_btCollisionShape_getMargin_0=r.asm.m).apply(null,arguments)},ut=r._emscripten_bind_btCollisionShape___destroy___0=function(){return(ut=r._emscripten_bind_btCollisionShape___destroy___0=r.asm.n).apply(null,arguments)},pt=r._emscripten_bind_btCollisionWorld_getDispatcher_0=function(){return(pt=r._emscripten_bind_btCollisionWorld_getDispatcher_0=r.asm.o).apply(null,arguments)},ht=r._emscripten_bind_btCollisionWorld_rayTest_3=function(){return(ht=r._emscripten_bind_btCollisionWorld_rayTest_3=r.asm.p).apply(null,arguments)},dt=r._emscripten_bind_btCollisionWorld_getPairCache_0=function(){return(dt=r._emscripten_bind_btCollisionWorld_getPairCache_0=r.asm.q).apply(null,arguments)},_t=r._emscripten_bind_btCollisionWorld_getDispatchInfo_0=function(){return(_t=r._emscripten_bind_btCollisionWorld_getDispatchInfo_0=r.asm.r).apply(null,arguments)},ft=r._emscripten_bind_btCollisionWorld_addCollisionObject_1=function(){return(ft=r._emscripten_bind_btCollisionWorld_addCollisionObject_1=r.asm.s).apply(null,arguments)},mt=r._emscripten_bind_btCollisionWorld_addCollisionObject_2=function(){return(mt=r._emscripten_bind_btCollisionWorld_addCollisionObject_2=r.asm.t).apply(null,arguments)},yt=r._emscripten_bind_btCollisionWorld_addCollisionObject_3=function(){return(yt=r._emscripten_bind_btCollisionWorld_addCollisionObject_3=r.asm.u).apply(null,arguments)},gt=r._emscripten_bind_btCollisionWorld_removeCollisionObject_1=function(){return(gt=r._emscripten_bind_btCollisionWorld_removeCollisionObject_1=r.asm.v).apply(null,arguments)},vt=r._emscripten_bind_btCollisionWorld_getBroadphase_0=function(){return(vt=r._emscripten_bind_btCollisionWorld_getBroadphase_0=r.asm.w).apply(null,arguments)},bt=r._emscripten_bind_btCollisionWorld_convexSweepTest_5=function(){return(bt=r._emscripten_bind_btCollisionWorld_convexSweepTest_5=r.asm.x).apply(null,arguments)},xt=r._emscripten_bind_btCollisionWorld_contactPairTest_3=function(){return(xt=r._emscripten_bind_btCollisionWorld_contactPairTest_3=r.asm.y).apply(null,arguments)},St=r._emscripten_bind_btCollisionWorld_contactTest_2=function(){return(St=r._emscripten_bind_btCollisionWorld_contactTest_2=r.asm.z).apply(null,arguments)},wt=r._emscripten_bind_btCollisionWorld_updateSingleAabb_1=function(){return(wt=r._emscripten_bind_btCollisionWorld_updateSingleAabb_1=r.asm.A).apply(null,arguments)},Mt=r._emscripten_bind_btCollisionWorld_setDebugDrawer_1=function(){return(Mt=r._emscripten_bind_btCollisionWorld_setDebugDrawer_1=r.asm.B).apply(null,arguments)},Tt=r._emscripten_bind_btCollisionWorld_getDebugDrawer_0=function(){return(Tt=r._emscripten_bind_btCollisionWorld_getDebugDrawer_0=r.asm.C).apply(null,arguments)},Ct=r._emscripten_bind_btCollisionWorld_debugDrawWorld_0=function(){return(Ct=r._emscripten_bind_btCollisionWorld_debugDrawWorld_0=r.asm.D).apply(null,arguments)},Et=r._emscripten_bind_btCollisionWorld_debugDrawObject_3=function(){return(Et=r._emscripten_bind_btCollisionWorld_debugDrawObject_3=r.asm.E).apply(null,arguments)},At=r._emscripten_bind_btCollisionWorld___destroy___0=function(){return(At=r._emscripten_bind_btCollisionWorld___destroy___0=r.asm.F).apply(null,arguments)},Rt=r._emscripten_bind_btCollisionObject_setAnisotropicFriction_2=function(){return(Rt=r._emscripten_bind_btCollisionObject_setAnisotropicFriction_2=r.asm.G).apply(null,arguments)},Lt=r._emscripten_bind_btCollisionObject_getCollisionShape_0=function(){return(Lt=r._emscripten_bind_btCollisionObject_getCollisionShape_0=r.asm.H).apply(null,arguments)},Pt=r._emscripten_bind_btCollisionObject_setContactProcessingThreshold_1=function(){return(Pt=r._emscripten_bind_btCollisionObject_setContactProcessingThreshold_1=r.asm.I).apply(null,arguments)},Dt=r._emscripten_bind_btCollisionObject_setActivationState_1=function(){return(Dt=r._emscripten_bind_btCollisionObject_setActivationState_1=r.asm.J).apply(null,arguments)},It=r._emscripten_bind_btCollisionObject_forceActivationState_1=function(){return(It=r._emscripten_bind_btCollisionObject_forceActivationState_1=r.asm.K).apply(null,arguments)},kt=r._emscripten_bind_btCollisionObject_activate_0=function(){return(kt=r._emscripten_bind_btCollisionObject_activate_0=r.asm.L).apply(null,arguments)},Ot=r._emscripten_bind_btCollisionObject_activate_1=function(){return(Ot=r._emscripten_bind_btCollisionObject_activate_1=r.asm.M).apply(null,arguments)},Bt=r._emscripten_bind_btCollisionObject_isActive_0=function(){return(Bt=r._emscripten_bind_btCollisionObject_isActive_0=r.asm.N).apply(null,arguments)},jt=r._emscripten_bind_btCollisionObject_isKinematicObject_0=function(){return(jt=r._emscripten_bind_btCollisionObject_isKinematicObject_0=r.asm.O).apply(null,arguments)},Ft=r._emscripten_bind_btCollisionObject_isStaticObject_0=function(){return(Ft=r._emscripten_bind_btCollisionObject_isStaticObject_0=r.asm.P).apply(null,arguments)},Nt=r._emscripten_bind_btCollisionObject_isStaticOrKinematicObject_0=function(){return(Nt=r._emscripten_bind_btCollisionObject_isStaticOrKinematicObject_0=r.asm.Q).apply(null,arguments)},zt=r._emscripten_bind_btCollisionObject_getRestitution_0=function(){return(zt=r._emscripten_bind_btCollisionObject_getRestitution_0=r.asm.R).apply(null,arguments)},Ht=r._emscripten_bind_btCollisionObject_getFriction_0=function(){return(Ht=r._emscripten_bind_btCollisionObject_getFriction_0=r.asm.S).apply(null,arguments)},Ut=r._emscripten_bind_btCollisionObject_getRollingFriction_0=function(){return(Ut=r._emscripten_bind_btCollisionObject_getRollingFriction_0=r.asm.T).apply(null,arguments)},Wt=r._emscripten_bind_btCollisionObject_setRestitution_1=function(){return(Wt=r._emscripten_bind_btCollisionObject_setRestitution_1=r.asm.U).apply(null,arguments)},Gt=r._emscripten_bind_btCollisionObject_setFriction_1=function(){return(Gt=r._emscripten_bind_btCollisionObject_setFriction_1=r.asm.V).apply(null,arguments)},Vt=r._emscripten_bind_btCollisionObject_setRollingFriction_1=function(){return(Vt=r._emscripten_bind_btCollisionObject_setRollingFriction_1=r.asm.W).apply(null,arguments)},qt=r._emscripten_bind_btCollisionObject_getWorldTransform_0=function(){return(qt=r._emscripten_bind_btCollisionObject_getWorldTransform_0=r.asm.X).apply(null,arguments)},Xt=r._emscripten_bind_btCollisionObject_getCollisionFlags_0=function(){return(Xt=r._emscripten_bind_btCollisionObject_getCollisionFlags_0=r.asm.Y).apply(null,arguments)},Yt=r._emscripten_bind_btCollisionObject_setCollisionFlags_1=function(){return(Yt=r._emscripten_bind_btCollisionObject_setCollisionFlags_1=r.asm.Z).apply(null,arguments)},Zt=r._emscripten_bind_btCollisionObject_setWorldTransform_1=function(){return(Zt=r._emscripten_bind_btCollisionObject_setWorldTransform_1=r.asm._).apply(null,arguments)},Jt=r._emscripten_bind_btCollisionObject_setCollisionShape_1=function(){return(Jt=r._emscripten_bind_btCollisionObject_setCollisionShape_1=r.asm.$).apply(null,arguments)},Kt=r._emscripten_bind_btCollisionObject_setCcdMotionThreshold_1=function(){return(Kt=r._emscripten_bind_btCollisionObject_setCcdMotionThreshold_1=r.asm.aa).apply(null,arguments)},Qt=r._emscripten_bind_btCollisionObject_setCcdSweptSphereRadius_1=function(){return(Qt=r._emscripten_bind_btCollisionObject_setCcdSweptSphereRadius_1=r.asm.ba).apply(null,arguments)},$t=r._emscripten_bind_btCollisionObject_getUserIndex_0=function(){return($t=r._emscripten_bind_btCollisionObject_getUserIndex_0=r.asm.ca).apply(null,arguments)},te=r._emscripten_bind_btCollisionObject_setUserIndex_1=function(){return(te=r._emscripten_bind_btCollisionObject_setUserIndex_1=r.asm.da).apply(null,arguments)},ee=r._emscripten_bind_btCollisionObject_getUserPointer_0=function(){return(ee=r._emscripten_bind_btCollisionObject_getUserPointer_0=r.asm.ea).apply(null,arguments)},ne=r._emscripten_bind_btCollisionObject_setUserPointer_1=function(){return(ne=r._emscripten_bind_btCollisionObject_setUserPointer_1=r.asm.fa).apply(null,arguments)},ie=r._emscripten_bind_btCollisionObject_getBroadphaseHandle_0=function(){return(ie=r._emscripten_bind_btCollisionObject_getBroadphaseHandle_0=r.asm.ga).apply(null,arguments)},re=r._emscripten_bind_btCollisionObject___destroy___0=function(){return(re=r._emscripten_bind_btCollisionObject___destroy___0=r.asm.ha).apply(null,arguments)},oe=r._emscripten_bind_btConcaveShape_setLocalScaling_1=function(){return(oe=r._emscripten_bind_btConcaveShape_setLocalScaling_1=r.asm.ia).apply(null,arguments)},ae=r._emscripten_bind_btConcaveShape_getLocalScaling_0=function(){return(ae=r._emscripten_bind_btConcaveShape_getLocalScaling_0=r.asm.ja).apply(null,arguments)},se=r._emscripten_bind_btConcaveShape_calculateLocalInertia_2=function(){return(se=r._emscripten_bind_btConcaveShape_calculateLocalInertia_2=r.asm.ka).apply(null,arguments)},le=r._emscripten_bind_btConcaveShape___destroy___0=function(){return(le=r._emscripten_bind_btConcaveShape___destroy___0=r.asm.la).apply(null,arguments)},ce=r._emscripten_bind_btTypedConstraint_enableFeedback_1=function(){return(ce=r._emscripten_bind_btTypedConstraint_enableFeedback_1=r.asm.ma).apply(null,arguments)},ue=r._emscripten_bind_btTypedConstraint_getBreakingImpulseThreshold_0=function(){return(ue=r._emscripten_bind_btTypedConstraint_getBreakingImpulseThreshold_0=r.asm.na).apply(null,arguments)},pe=r._emscripten_bind_btTypedConstraint_setBreakingImpulseThreshold_1=function(){return(pe=r._emscripten_bind_btTypedConstraint_setBreakingImpulseThreshold_1=r.asm.oa).apply(null,arguments)},he=r._emscripten_bind_btTypedConstraint_getParam_2=function(){return(he=r._emscripten_bind_btTypedConstraint_getParam_2=r.asm.pa).apply(null,arguments)},de=r._emscripten_bind_btTypedConstraint_setParam_3=function(){return(de=r._emscripten_bind_btTypedConstraint_setParam_3=r.asm.qa).apply(null,arguments)},_e=r._emscripten_bind_btTypedConstraint___destroy___0=function(){return(_e=r._emscripten_bind_btTypedConstraint___destroy___0=r.asm.ra).apply(null,arguments)},fe=r._emscripten_bind_btDynamicsWorld_addAction_1=function(){return(fe=r._emscripten_bind_btDynamicsWorld_addAction_1=r.asm.sa).apply(null,arguments)},me=r._emscripten_bind_btDynamicsWorld_removeAction_1=function(){return(me=r._emscripten_bind_btDynamicsWorld_removeAction_1=r.asm.ta).apply(null,arguments)},ye=r._emscripten_bind_btDynamicsWorld_getSolverInfo_0=function(){return(ye=r._emscripten_bind_btDynamicsWorld_getSolverInfo_0=r.asm.ua).apply(null,arguments)},ge=r._emscripten_bind_btDynamicsWorld_setInternalTickCallback_1=function(){return(ge=r._emscripten_bind_btDynamicsWorld_setInternalTickCallback_1=r.asm.va).apply(null,arguments)},ve=r._emscripten_bind_btDynamicsWorld_setInternalTickCallback_2=function(){return(ve=r._emscripten_bind_btDynamicsWorld_setInternalTickCallback_2=r.asm.wa).apply(null,arguments)},be=r._emscripten_bind_btDynamicsWorld_setInternalTickCallback_3=function(){return(be=r._emscripten_bind_btDynamicsWorld_setInternalTickCallback_3=r.asm.xa).apply(null,arguments)},xe=r._emscripten_bind_btDynamicsWorld_getDispatcher_0=function(){return(xe=r._emscripten_bind_btDynamicsWorld_getDispatcher_0=r.asm.ya).apply(null,arguments)},Se=r._emscripten_bind_btDynamicsWorld_rayTest_3=function(){return(Se=r._emscripten_bind_btDynamicsWorld_rayTest_3=r.asm.za).apply(null,arguments)},we=r._emscripten_bind_btDynamicsWorld_getPairCache_0=function(){return(we=r._emscripten_bind_btDynamicsWorld_getPairCache_0=r.asm.Aa).apply(null,arguments)},Me=r._emscripten_bind_btDynamicsWorld_getDispatchInfo_0=function(){return(Me=r._emscripten_bind_btDynamicsWorld_getDispatchInfo_0=r.asm.Ba).apply(null,arguments)},Te=r._emscripten_bind_btDynamicsWorld_addCollisionObject_1=function(){return(Te=r._emscripten_bind_btDynamicsWorld_addCollisionObject_1=r.asm.Ca).apply(null,arguments)},Ce=r._emscripten_bind_btDynamicsWorld_addCollisionObject_2=function(){return(Ce=r._emscripten_bind_btDynamicsWorld_addCollisionObject_2=r.asm.Da).apply(null,arguments)},Ee=r._emscripten_bind_btDynamicsWorld_addCollisionObject_3=function(){return(Ee=r._emscripten_bind_btDynamicsWorld_addCollisionObject_3=r.asm.Ea).apply(null,arguments)},Ae=r._emscripten_bind_btDynamicsWorld_removeCollisionObject_1=function(){return(Ae=r._emscripten_bind_btDynamicsWorld_removeCollisionObject_1=r.asm.Fa).apply(null,arguments)},Re=r._emscripten_bind_btDynamicsWorld_getBroadphase_0=function(){return(Re=r._emscripten_bind_btDynamicsWorld_getBroadphase_0=r.asm.Ga).apply(null,arguments)},Le=r._emscripten_bind_btDynamicsWorld_convexSweepTest_5=function(){return(Le=r._emscripten_bind_btDynamicsWorld_convexSweepTest_5=r.asm.Ha).apply(null,arguments)},Pe=r._emscripten_bind_btDynamicsWorld_contactPairTest_3=function(){return(Pe=r._emscripten_bind_btDynamicsWorld_contactPairTest_3=r.asm.Ia).apply(null,arguments)},De=r._emscripten_bind_btDynamicsWorld_contactTest_2=function(){return(De=r._emscripten_bind_btDynamicsWorld_contactTest_2=r.asm.Ja).apply(null,arguments)},Ie=r._emscripten_bind_btDynamicsWorld_updateSingleAabb_1=function(){return(Ie=r._emscripten_bind_btDynamicsWorld_updateSingleAabb_1=r.asm.Ka).apply(null,arguments)},ke=r._emscripten_bind_btDynamicsWorld_setDebugDrawer_1=function(){return(ke=r._emscripten_bind_btDynamicsWorld_setDebugDrawer_1=r.asm.La).apply(null,arguments)},Oe=r._emscripten_bind_btDynamicsWorld_getDebugDrawer_0=function(){return(Oe=r._emscripten_bind_btDynamicsWorld_getDebugDrawer_0=r.asm.Ma).apply(null,arguments)},Be=r._emscripten_bind_btDynamicsWorld_debugDrawWorld_0=function(){return(Be=r._emscripten_bind_btDynamicsWorld_debugDrawWorld_0=r.asm.Na).apply(null,arguments)},je=r._emscripten_bind_btDynamicsWorld_debugDrawObject_3=function(){return(je=r._emscripten_bind_btDynamicsWorld_debugDrawObject_3=r.asm.Oa).apply(null,arguments)},Fe=r._emscripten_bind_btDynamicsWorld___destroy___0=function(){return(Fe=r._emscripten_bind_btDynamicsWorld___destroy___0=r.asm.Pa).apply(null,arguments)},Ne=r._emscripten_bind_btIDebugDraw_drawLine_3=function(){return(Ne=r._emscripten_bind_btIDebugDraw_drawLine_3=r.asm.Qa).apply(null,arguments)},ze=r._emscripten_bind_btIDebugDraw_drawContactPoint_5=function(){return(ze=r._emscripten_bind_btIDebugDraw_drawContactPoint_5=r.asm.Ra).apply(null,arguments)},He=r._emscripten_bind_btIDebugDraw_reportErrorWarning_1=function(){return(He=r._emscripten_bind_btIDebugDraw_reportErrorWarning_1=r.asm.Sa).apply(null,arguments)},Ue=r._emscripten_bind_btIDebugDraw_draw3dText_2=function(){return(Ue=r._emscripten_bind_btIDebugDraw_draw3dText_2=r.asm.Ta).apply(null,arguments)},We=r._emscripten_bind_btIDebugDraw_setDebugMode_1=function(){return(We=r._emscripten_bind_btIDebugDraw_setDebugMode_1=r.asm.Ua).apply(null,arguments)},Ge=r._emscripten_bind_btIDebugDraw_getDebugMode_0=function(){return(Ge=r._emscripten_bind_btIDebugDraw_getDebugMode_0=r.asm.Va).apply(null,arguments)},Ve=r._emscripten_bind_btIDebugDraw___destroy___0=function(){return(Ve=r._emscripten_bind_btIDebugDraw___destroy___0=r.asm.Wa).apply(null,arguments)},qe=r._emscripten_bind_btVector3_btVector3_0=function(){return(qe=r._emscripten_bind_btVector3_btVector3_0=r.asm.Xa).apply(null,arguments)},Xe=r._emscripten_bind_btVector3_btVector3_3=function(){return(Xe=r._emscripten_bind_btVector3_btVector3_3=r.asm.Ya).apply(null,arguments)},Ye=r._emscripten_bind_btVector3_length_0=function(){return(Ye=r._emscripten_bind_btVector3_length_0=r.asm.Za).apply(null,arguments)},Ze=r._emscripten_bind_btVector3_x_0=function(){return(Ze=r._emscripten_bind_btVector3_x_0=r.asm._a).apply(null,arguments)},Je=r._emscripten_bind_btVector3_y_0=function(){return(Je=r._emscripten_bind_btVector3_y_0=r.asm.$a).apply(null,arguments)},Ke=r._emscripten_bind_btVector3_z_0=function(){return(Ke=r._emscripten_bind_btVector3_z_0=r.asm.ab).apply(null,arguments)},Qe=r._emscripten_bind_btVector3_setX_1=function(){return(Qe=r._emscripten_bind_btVector3_setX_1=r.asm.bb).apply(null,arguments)},$e=r._emscripten_bind_btVector3_setY_1=function(){return($e=r._emscripten_bind_btVector3_setY_1=r.asm.cb).apply(null,arguments)},tn=r._emscripten_bind_btVector3_setZ_1=function(){return(tn=r._emscripten_bind_btVector3_setZ_1=r.asm.db).apply(null,arguments)},en=r._emscripten_bind_btVector3_setValue_3=function(){return(en=r._emscripten_bind_btVector3_setValue_3=r.asm.eb).apply(null,arguments)},nn=r._emscripten_bind_btVector3_normalize_0=function(){return(nn=r._emscripten_bind_btVector3_normalize_0=r.asm.fb).apply(null,arguments)},rn=r._emscripten_bind_btVector3_rotate_2=function(){return(rn=r._emscripten_bind_btVector3_rotate_2=r.asm.gb).apply(null,arguments)},on=r._emscripten_bind_btVector3_dot_1=function(){return(on=r._emscripten_bind_btVector3_dot_1=r.asm.hb).apply(null,arguments)},an=r._emscripten_bind_btVector3_op_mul_1=function(){return(an=r._emscripten_bind_btVector3_op_mul_1=r.asm.ib).apply(null,arguments)},sn=r._emscripten_bind_btVector3_op_add_1=function(){return(sn=r._emscripten_bind_btVector3_op_add_1=r.asm.jb).apply(null,arguments)},ln=r._emscripten_bind_btVector3_op_sub_1=function(){return(ln=r._emscripten_bind_btVector3_op_sub_1=r.asm.kb).apply(null,arguments)},cn=r._emscripten_bind_btVector3___destroy___0=function(){return(cn=r._emscripten_bind_btVector3___destroy___0=r.asm.lb).apply(null,arguments)},un=r._emscripten_bind_btQuadWord_x_0=function(){return(un=r._emscripten_bind_btQuadWord_x_0=r.asm.mb).apply(null,arguments)},pn=r._emscripten_bind_btQuadWord_y_0=function(){return(pn=r._emscripten_bind_btQuadWord_y_0=r.asm.nb).apply(null,arguments)},hn=r._emscripten_bind_btQuadWord_z_0=function(){return(hn=r._emscripten_bind_btQuadWord_z_0=r.asm.ob).apply(null,arguments)},dn=r._emscripten_bind_btQuadWord_w_0=function(){return(dn=r._emscripten_bind_btQuadWord_w_0=r.asm.pb).apply(null,arguments)},_n=r._emscripten_bind_btQuadWord_setX_1=function(){return(_n=r._emscripten_bind_btQuadWord_setX_1=r.asm.qb).apply(null,arguments)},fn=r._emscripten_bind_btQuadWord_setY_1=function(){return(fn=r._emscripten_bind_btQuadWord_setY_1=r.asm.rb).apply(null,arguments)},mn=r._emscripten_bind_btQuadWord_setZ_1=function(){return(mn=r._emscripten_bind_btQuadWord_setZ_1=r.asm.sb).apply(null,arguments)},yn=r._emscripten_bind_btQuadWord_setW_1=function(){return(yn=r._emscripten_bind_btQuadWord_setW_1=r.asm.tb).apply(null,arguments)},gn=r._emscripten_bind_btQuadWord___destroy___0=function(){return(gn=r._emscripten_bind_btQuadWord___destroy___0=r.asm.ub).apply(null,arguments)},vn=r._emscripten_bind_btMotionState_getWorldTransform_1=function(){return(vn=r._emscripten_bind_btMotionState_getWorldTransform_1=r.asm.vb).apply(null,arguments)},bn=r._emscripten_bind_btMotionState_setWorldTransform_1=function(){return(bn=r._emscripten_bind_btMotionState_setWorldTransform_1=r.asm.wb).apply(null,arguments)},xn=r._emscripten_bind_btMotionState___destroy___0=function(){return(xn=r._emscripten_bind_btMotionState___destroy___0=r.asm.xb).apply(null,arguments)},Sn=r._emscripten_bind_RayResultCallback_hasHit_0=function(){return(Sn=r._emscripten_bind_RayResultCallback_hasHit_0=r.asm.yb).apply(null,arguments)},wn=r._emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0=function(){return(wn=r._emscripten_bind_RayResultCallback_get_m_collisionFilterGroup_0=r.asm.zb).apply(null,arguments)},Mn=r._emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1=function(){return(Mn=r._emscripten_bind_RayResultCallback_set_m_collisionFilterGroup_1=r.asm.Ab).apply(null,arguments)},Tn=r._emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0=function(){return(Tn=r._emscripten_bind_RayResultCallback_get_m_collisionFilterMask_0=r.asm.Bb).apply(null,arguments)},Cn=r._emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1=function(){return(Cn=r._emscripten_bind_RayResultCallback_set_m_collisionFilterMask_1=r.asm.Cb).apply(null,arguments)},En=r._emscripten_bind_RayResultCallback_get_m_closestHitFraction_0=function(){return(En=r._emscripten_bind_RayResultCallback_get_m_closestHitFraction_0=r.asm.Db).apply(null,arguments)},An=r._emscripten_bind_RayResultCallback_set_m_closestHitFraction_1=function(){return(An=r._emscripten_bind_RayResultCallback_set_m_closestHitFraction_1=r.asm.Eb).apply(null,arguments)},Rn=r._emscripten_bind_RayResultCallback_get_m_collisionObject_0=function(){return(Rn=r._emscripten_bind_RayResultCallback_get_m_collisionObject_0=r.asm.Fb).apply(null,arguments)},Ln=r._emscripten_bind_RayResultCallback_set_m_collisionObject_1=function(){return(Ln=r._emscripten_bind_RayResultCallback_set_m_collisionObject_1=r.asm.Gb).apply(null,arguments)},Pn=r._emscripten_bind_RayResultCallback___destroy___0=function(){return(Pn=r._emscripten_bind_RayResultCallback___destroy___0=r.asm.Hb).apply(null,arguments)},Dn=r._emscripten_bind_ContactResultCallback_addSingleResult_7=function(){return(Dn=r._emscripten_bind_ContactResultCallback_addSingleResult_7=r.asm.Ib).apply(null,arguments)},In=r._emscripten_bind_ContactResultCallback___destroy___0=function(){return(In=r._emscripten_bind_ContactResultCallback___destroy___0=r.asm.Jb).apply(null,arguments)},kn=r._emscripten_bind_ConvexResultCallback_hasHit_0=function(){return(kn=r._emscripten_bind_ConvexResultCallback_hasHit_0=r.asm.Kb).apply(null,arguments)},On=r._emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0=function(){return(On=r._emscripten_bind_ConvexResultCallback_get_m_collisionFilterGroup_0=r.asm.Lb).apply(null,arguments)},Bn=r._emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1=function(){return(Bn=r._emscripten_bind_ConvexResultCallback_set_m_collisionFilterGroup_1=r.asm.Mb).apply(null,arguments)},jn=r._emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0=function(){return(jn=r._emscripten_bind_ConvexResultCallback_get_m_collisionFilterMask_0=r.asm.Nb).apply(null,arguments)},Fn=r._emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1=function(){return(Fn=r._emscripten_bind_ConvexResultCallback_set_m_collisionFilterMask_1=r.asm.Ob).apply(null,arguments)},Nn=r._emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0=function(){return(Nn=r._emscripten_bind_ConvexResultCallback_get_m_closestHitFraction_0=r.asm.Pb).apply(null,arguments)},zn=r._emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1=function(){return(zn=r._emscripten_bind_ConvexResultCallback_set_m_closestHitFraction_1=r.asm.Qb).apply(null,arguments)},Hn=r._emscripten_bind_ConvexResultCallback___destroy___0=function(){return(Hn=r._emscripten_bind_ConvexResultCallback___destroy___0=r.asm.Rb).apply(null,arguments)},Un=r._emscripten_bind_btConvexShape_setLocalScaling_1=function(){return(Un=r._emscripten_bind_btConvexShape_setLocalScaling_1=r.asm.Sb).apply(null,arguments)},Wn=r._emscripten_bind_btConvexShape_getLocalScaling_0=function(){return(Wn=r._emscripten_bind_btConvexShape_getLocalScaling_0=r.asm.Tb).apply(null,arguments)},Gn=r._emscripten_bind_btConvexShape_calculateLocalInertia_2=function(){return(Gn=r._emscripten_bind_btConvexShape_calculateLocalInertia_2=r.asm.Ub).apply(null,arguments)},Vn=r._emscripten_bind_btConvexShape_setMargin_1=function(){return(Vn=r._emscripten_bind_btConvexShape_setMargin_1=r.asm.Vb).apply(null,arguments)},qn=r._emscripten_bind_btConvexShape_getMargin_0=function(){return(qn=r._emscripten_bind_btConvexShape_getMargin_0=r.asm.Wb).apply(null,arguments)},Xn=r._emscripten_bind_btConvexShape___destroy___0=function(){return(Xn=r._emscripten_bind_btConvexShape___destroy___0=r.asm.Xb).apply(null,arguments)},Yn=r._emscripten_bind_btCapsuleShape_btCapsuleShape_2=function(){return(Yn=r._emscripten_bind_btCapsuleShape_btCapsuleShape_2=r.asm.Yb).apply(null,arguments)},Zn=r._emscripten_bind_btCapsuleShape_setMargin_1=function(){return(Zn=r._emscripten_bind_btCapsuleShape_setMargin_1=r.asm.Zb).apply(null,arguments)},Jn=r._emscripten_bind_btCapsuleShape_getMargin_0=function(){return(Jn=r._emscripten_bind_btCapsuleShape_getMargin_0=r.asm._b).apply(null,arguments)},Kn=r._emscripten_bind_btCapsuleShape_getUpAxis_0=function(){return(Kn=r._emscripten_bind_btCapsuleShape_getUpAxis_0=r.asm.$b).apply(null,arguments)},Qn=r._emscripten_bind_btCapsuleShape_getRadius_0=function(){return(Qn=r._emscripten_bind_btCapsuleShape_getRadius_0=r.asm.ac).apply(null,arguments)},$n=r._emscripten_bind_btCapsuleShape_getHalfHeight_0=function(){return($n=r._emscripten_bind_btCapsuleShape_getHalfHeight_0=r.asm.bc).apply(null,arguments)},ti=r._emscripten_bind_btCapsuleShape_setLocalScaling_1=function(){return(ti=r._emscripten_bind_btCapsuleShape_setLocalScaling_1=r.asm.cc).apply(null,arguments)},ei=r._emscripten_bind_btCapsuleShape_getLocalScaling_0=function(){return(ei=r._emscripten_bind_btCapsuleShape_getLocalScaling_0=r.asm.dc).apply(null,arguments)},ni=r._emscripten_bind_btCapsuleShape_calculateLocalInertia_2=function(){return(ni=r._emscripten_bind_btCapsuleShape_calculateLocalInertia_2=r.asm.ec).apply(null,arguments)},ii=r._emscripten_bind_btCapsuleShape___destroy___0=function(){return(ii=r._emscripten_bind_btCapsuleShape___destroy___0=r.asm.fc).apply(null,arguments)},ri=r._emscripten_bind_btCylinderShape_btCylinderShape_1=function(){return(ri=r._emscripten_bind_btCylinderShape_btCylinderShape_1=r.asm.gc).apply(null,arguments)},oi=r._emscripten_bind_btCylinderShape_setMargin_1=function(){return(oi=r._emscripten_bind_btCylinderShape_setMargin_1=r.asm.hc).apply(null,arguments)},ai=r._emscripten_bind_btCylinderShape_getMargin_0=function(){return(ai=r._emscripten_bind_btCylinderShape_getMargin_0=r.asm.ic).apply(null,arguments)},si=r._emscripten_bind_btCylinderShape_setLocalScaling_1=function(){return(si=r._emscripten_bind_btCylinderShape_setLocalScaling_1=r.asm.jc).apply(null,arguments)},li=r._emscripten_bind_btCylinderShape_getLocalScaling_0=function(){return(li=r._emscripten_bind_btCylinderShape_getLocalScaling_0=r.asm.kc).apply(null,arguments)},ci=r._emscripten_bind_btCylinderShape_calculateLocalInertia_2=function(){return(ci=r._emscripten_bind_btCylinderShape_calculateLocalInertia_2=r.asm.lc).apply(null,arguments)},ui=r._emscripten_bind_btCylinderShape___destroy___0=function(){return(ui=r._emscripten_bind_btCylinderShape___destroy___0=r.asm.mc).apply(null,arguments)},pi=r._emscripten_bind_btConeShape_btConeShape_2=function(){return(pi=r._emscripten_bind_btConeShape_btConeShape_2=r.asm.nc).apply(null,arguments)},hi=r._emscripten_bind_btConeShape_setLocalScaling_1=function(){return(hi=r._emscripten_bind_btConeShape_setLocalScaling_1=r.asm.oc).apply(null,arguments)},di=r._emscripten_bind_btConeShape_getLocalScaling_0=function(){return(di=r._emscripten_bind_btConeShape_getLocalScaling_0=r.asm.pc).apply(null,arguments)},_i=r._emscripten_bind_btConeShape_calculateLocalInertia_2=function(){return(_i=r._emscripten_bind_btConeShape_calculateLocalInertia_2=r.asm.qc).apply(null,arguments)},fi=r._emscripten_bind_btConeShape___destroy___0=function(){return(fi=r._emscripten_bind_btConeShape___destroy___0=r.asm.rc).apply(null,arguments)},mi=r._emscripten_bind_btStridingMeshInterface_setScaling_1=function(){return(mi=r._emscripten_bind_btStridingMeshInterface_setScaling_1=r.asm.sc).apply(null,arguments)},yi=r._emscripten_bind_btStridingMeshInterface___destroy___0=function(){return(yi=r._emscripten_bind_btStridingMeshInterface___destroy___0=r.asm.tc).apply(null,arguments)},gi=r._emscripten_bind_btTriangleMeshShape_setLocalScaling_1=function(){return(gi=r._emscripten_bind_btTriangleMeshShape_setLocalScaling_1=r.asm.uc).apply(null,arguments)},vi=r._emscripten_bind_btTriangleMeshShape_getLocalScaling_0=function(){return(vi=r._emscripten_bind_btTriangleMeshShape_getLocalScaling_0=r.asm.vc).apply(null,arguments)},bi=r._emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2=function(){return(bi=r._emscripten_bind_btTriangleMeshShape_calculateLocalInertia_2=r.asm.wc).apply(null,arguments)},xi=r._emscripten_bind_btTriangleMeshShape___destroy___0=function(){return(xi=r._emscripten_bind_btTriangleMeshShape___destroy___0=r.asm.xc).apply(null,arguments)},Si=r._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0=function(){return(Si=r._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_0=r.asm.yc).apply(null,arguments)},wi=r._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1=function(){return(wi=r._emscripten_bind_btDefaultCollisionConfiguration_btDefaultCollisionConfiguration_1=r.asm.zc).apply(null,arguments)},Mi=r._emscripten_bind_btDefaultCollisionConfiguration___destroy___0=function(){return(Mi=r._emscripten_bind_btDefaultCollisionConfiguration___destroy___0=r.asm.Ac).apply(null,arguments)},Ti=r._emscripten_bind_btDispatcher_getNumManifolds_0=function(){return(Ti=r._emscripten_bind_btDispatcher_getNumManifolds_0=r.asm.Bc).apply(null,arguments)},Ci=r._emscripten_bind_btDispatcher_getManifoldByIndexInternal_1=function(){return(Ci=r._emscripten_bind_btDispatcher_getManifoldByIndexInternal_1=r.asm.Cc).apply(null,arguments)},Ei=r._emscripten_bind_btDispatcher___destroy___0=function(){return(Ei=r._emscripten_bind_btDispatcher___destroy___0=r.asm.Dc).apply(null,arguments)},Ai=r._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3=function(){return(Ai=r._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_3=r.asm.Ec).apply(null,arguments)},Ri=r._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5=function(){return(Ri=r._emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_5=r.asm.Fc).apply(null,arguments)},Li=r._emscripten_bind_btGeneric6DofConstraint_setLinearLowerLimit_1=function(){return(Li=r._emscripten_bind_btGeneric6DofConstraint_setLinearLowerLimit_1=r.asm.Gc).apply(null,arguments)},Pi=r._emscripten_bind_btGeneric6DofConstraint_setLinearUpperLimit_1=function(){return(Pi=r._emscripten_bind_btGeneric6DofConstraint_setLinearUpperLimit_1=r.asm.Hc).apply(null,arguments)},Di=r._emscripten_bind_btGeneric6DofConstraint_setAngularLowerLimit_1=function(){return(Di=r._emscripten_bind_btGeneric6DofConstraint_setAngularLowerLimit_1=r.asm.Ic).apply(null,arguments)},Ii=r._emscripten_bind_btGeneric6DofConstraint_setAngularUpperLimit_1=function(){return(Ii=r._emscripten_bind_btGeneric6DofConstraint_setAngularUpperLimit_1=r.asm.Jc).apply(null,arguments)},ki=r._emscripten_bind_btGeneric6DofConstraint_getFrameOffsetA_0=function(){return(ki=r._emscripten_bind_btGeneric6DofConstraint_getFrameOffsetA_0=r.asm.Kc).apply(null,arguments)},Oi=r._emscripten_bind_btGeneric6DofConstraint_enableFeedback_1=function(){return(Oi=r._emscripten_bind_btGeneric6DofConstraint_enableFeedback_1=r.asm.Lc).apply(null,arguments)},Bi=r._emscripten_bind_btGeneric6DofConstraint_getBreakingImpulseThreshold_0=function(){return(Bi=r._emscripten_bind_btGeneric6DofConstraint_getBreakingImpulseThreshold_0=r.asm.Mc).apply(null,arguments)},ji=r._emscripten_bind_btGeneric6DofConstraint_setBreakingImpulseThreshold_1=function(){return(ji=r._emscripten_bind_btGeneric6DofConstraint_setBreakingImpulseThreshold_1=r.asm.Nc).apply(null,arguments)},Fi=r._emscripten_bind_btGeneric6DofConstraint_getParam_2=function(){return(Fi=r._emscripten_bind_btGeneric6DofConstraint_getParam_2=r.asm.Oc).apply(null,arguments)},Ni=r._emscripten_bind_btGeneric6DofConstraint_setParam_3=function(){return(Ni=r._emscripten_bind_btGeneric6DofConstraint_setParam_3=r.asm.Pc).apply(null,arguments)},zi=r._emscripten_bind_btGeneric6DofConstraint___destroy___0=function(){return(zi=r._emscripten_bind_btGeneric6DofConstraint___destroy___0=r.asm.Qc).apply(null,arguments)},Hi=r._emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4=function(){return(Hi=r._emscripten_bind_btDiscreteDynamicsWorld_btDiscreteDynamicsWorld_4=r.asm.Rc).apply(null,arguments)},Ui=r._emscripten_bind_btDiscreteDynamicsWorld_setGravity_1=function(){return(Ui=r._emscripten_bind_btDiscreteDynamicsWorld_setGravity_1=r.asm.Sc).apply(null,arguments)},Wi=r._emscripten_bind_btDiscreteDynamicsWorld_getGravity_0=function(){return(Wi=r._emscripten_bind_btDiscreteDynamicsWorld_getGravity_0=r.asm.Tc).apply(null,arguments)},Gi=r._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1=function(){return(Gi=r._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_1=r.asm.Uc).apply(null,arguments)},Vi=r._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3=function(){return(Vi=r._emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_3=r.asm.Vc).apply(null,arguments)},qi=r._emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1=function(){return(qi=r._emscripten_bind_btDiscreteDynamicsWorld_removeRigidBody_1=r.asm.Wc).apply(null,arguments)},Xi=r._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1=function(){return(Xi=r._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_1=r.asm.Xc).apply(null,arguments)},Yi=r._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2=function(){return(Yi=r._emscripten_bind_btDiscreteDynamicsWorld_addConstraint_2=r.asm.Yc).apply(null,arguments)},Zi=r._emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1=function(){return(Zi=r._emscripten_bind_btDiscreteDynamicsWorld_removeConstraint_1=r.asm.Zc).apply(null,arguments)},Ji=r._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1=function(){return(Ji=r._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_1=r.asm._c).apply(null,arguments)},Ki=r._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2=function(){return(Ki=r._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_2=r.asm.$c).apply(null,arguments)},Qi=r._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3=function(){return(Qi=r._emscripten_bind_btDiscreteDynamicsWorld_stepSimulation_3=r.asm.ad).apply(null,arguments)},$i=r._emscripten_bind_btDiscreteDynamicsWorld_setContactAddedCallback_1=function(){return($i=r._emscripten_bind_btDiscreteDynamicsWorld_setContactAddedCallback_1=r.asm.bd).apply(null,arguments)},tr=r._emscripten_bind_btDiscreteDynamicsWorld_setContactProcessedCallback_1=function(){return(tr=r._emscripten_bind_btDiscreteDynamicsWorld_setContactProcessedCallback_1=r.asm.cd).apply(null,arguments)},er=r._emscripten_bind_btDiscreteDynamicsWorld_setContactDestroyedCallback_1=function(){return(er=r._emscripten_bind_btDiscreteDynamicsWorld_setContactDestroyedCallback_1=r.asm.dd).apply(null,arguments)},nr=r._emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0=function(){return(nr=r._emscripten_bind_btDiscreteDynamicsWorld_getDispatcher_0=r.asm.ed).apply(null,arguments)},ir=r._emscripten_bind_btDiscreteDynamicsWorld_rayTest_3=function(){return(ir=r._emscripten_bind_btDiscreteDynamicsWorld_rayTest_3=r.asm.fd).apply(null,arguments)},rr=r._emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0=function(){return(rr=r._emscripten_bind_btDiscreteDynamicsWorld_getPairCache_0=r.asm.gd).apply(null,arguments)},or=r._emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0=function(){return(or=r._emscripten_bind_btDiscreteDynamicsWorld_getDispatchInfo_0=r.asm.hd).apply(null,arguments)},ar=r._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1=function(){return(ar=r._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_1=r.asm.id).apply(null,arguments)},sr=r._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2=function(){return(sr=r._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_2=r.asm.jd).apply(null,arguments)},lr=r._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3=function(){return(lr=r._emscripten_bind_btDiscreteDynamicsWorld_addCollisionObject_3=r.asm.kd).apply(null,arguments)},cr=r._emscripten_bind_btDiscreteDynamicsWorld_removeCollisionObject_1=function(){return(cr=r._emscripten_bind_btDiscreteDynamicsWorld_removeCollisionObject_1=r.asm.ld).apply(null,arguments)},ur=r._emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0=function(){return(ur=r._emscripten_bind_btDiscreteDynamicsWorld_getBroadphase_0=r.asm.md).apply(null,arguments)},pr=r._emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5=function(){return(pr=r._emscripten_bind_btDiscreteDynamicsWorld_convexSweepTest_5=r.asm.nd).apply(null,arguments)},hr=r._emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3=function(){return(hr=r._emscripten_bind_btDiscreteDynamicsWorld_contactPairTest_3=r.asm.od).apply(null,arguments)},dr=r._emscripten_bind_btDiscreteDynamicsWorld_contactTest_2=function(){return(dr=r._emscripten_bind_btDiscreteDynamicsWorld_contactTest_2=r.asm.pd).apply(null,arguments)},_r=r._emscripten_bind_btDiscreteDynamicsWorld_updateSingleAabb_1=function(){return(_r=r._emscripten_bind_btDiscreteDynamicsWorld_updateSingleAabb_1=r.asm.qd).apply(null,arguments)},fr=r._emscripten_bind_btDiscreteDynamicsWorld_setDebugDrawer_1=function(){return(fr=r._emscripten_bind_btDiscreteDynamicsWorld_setDebugDrawer_1=r.asm.rd).apply(null,arguments)},mr=r._emscripten_bind_btDiscreteDynamicsWorld_getDebugDrawer_0=function(){return(mr=r._emscripten_bind_btDiscreteDynamicsWorld_getDebugDrawer_0=r.asm.sd).apply(null,arguments)},yr=r._emscripten_bind_btDiscreteDynamicsWorld_debugDrawWorld_0=function(){return(yr=r._emscripten_bind_btDiscreteDynamicsWorld_debugDrawWorld_0=r.asm.td).apply(null,arguments)},gr=r._emscripten_bind_btDiscreteDynamicsWorld_debugDrawObject_3=function(){return(gr=r._emscripten_bind_btDiscreteDynamicsWorld_debugDrawObject_3=r.asm.ud).apply(null,arguments)},vr=r._emscripten_bind_btDiscreteDynamicsWorld_addAction_1=function(){return(vr=r._emscripten_bind_btDiscreteDynamicsWorld_addAction_1=r.asm.vd).apply(null,arguments)},br=r._emscripten_bind_btDiscreteDynamicsWorld_removeAction_1=function(){return(br=r._emscripten_bind_btDiscreteDynamicsWorld_removeAction_1=r.asm.wd).apply(null,arguments)},xr=r._emscripten_bind_btDiscreteDynamicsWorld_getSolverInfo_0=function(){return(xr=r._emscripten_bind_btDiscreteDynamicsWorld_getSolverInfo_0=r.asm.xd).apply(null,arguments)},Sr=r._emscripten_bind_btDiscreteDynamicsWorld_setInternalTickCallback_1=function(){return(Sr=r._emscripten_bind_btDiscreteDynamicsWorld_setInternalTickCallback_1=r.asm.yd).apply(null,arguments)},wr=r._emscripten_bind_btDiscreteDynamicsWorld_setInternalTickCallback_2=function(){return(wr=r._emscripten_bind_btDiscreteDynamicsWorld_setInternalTickCallback_2=r.asm.zd).apply(null,arguments)},Mr=r._emscripten_bind_btDiscreteDynamicsWorld_setInternalTickCallback_3=function(){return(Mr=r._emscripten_bind_btDiscreteDynamicsWorld_setInternalTickCallback_3=r.asm.Ad).apply(null,arguments)},Tr=r._emscripten_bind_btDiscreteDynamicsWorld___destroy___0=function(){return(Tr=r._emscripten_bind_btDiscreteDynamicsWorld___destroy___0=r.asm.Bd).apply(null,arguments)},Cr=r._emscripten_bind_btVehicleRaycaster_castRay_3=function(){return(Cr=r._emscripten_bind_btVehicleRaycaster_castRay_3=r.asm.Cd).apply(null,arguments)},Er=r._emscripten_bind_btVehicleRaycaster___destroy___0=function(){return(Er=r._emscripten_bind_btVehicleRaycaster___destroy___0=r.asm.Dd).apply(null,arguments)},Ar=r._emscripten_bind_btActionInterface_updateAction_2=function(){return(Ar=r._emscripten_bind_btActionInterface_updateAction_2=r.asm.Ed).apply(null,arguments)},Rr=r._emscripten_bind_btActionInterface___destroy___0=function(){return(Rr=r._emscripten_bind_btActionInterface___destroy___0=r.asm.Fd).apply(null,arguments)},Lr=r._emscripten_bind_btGhostObject_btGhostObject_0=function(){return(Lr=r._emscripten_bind_btGhostObject_btGhostObject_0=r.asm.Gd).apply(null,arguments)},Pr=r._emscripten_bind_btGhostObject_getNumOverlappingObjects_0=function(){return(Pr=r._emscripten_bind_btGhostObject_getNumOverlappingObjects_0=r.asm.Hd).apply(null,arguments)},Dr=r._emscripten_bind_btGhostObject_getOverlappingObject_1=function(){return(Dr=r._emscripten_bind_btGhostObject_getOverlappingObject_1=r.asm.Id).apply(null,arguments)},Ir=r._emscripten_bind_btGhostObject_setAnisotropicFriction_2=function(){return(Ir=r._emscripten_bind_btGhostObject_setAnisotropicFriction_2=r.asm.Jd).apply(null,arguments)},kr=r._emscripten_bind_btGhostObject_getCollisionShape_0=function(){return(kr=r._emscripten_bind_btGhostObject_getCollisionShape_0=r.asm.Kd).apply(null,arguments)},Or=r._emscripten_bind_btGhostObject_setContactProcessingThreshold_1=function(){return(Or=r._emscripten_bind_btGhostObject_setContactProcessingThreshold_1=r.asm.Ld).apply(null,arguments)},Br=r._emscripten_bind_btGhostObject_setActivationState_1=function(){return(Br=r._emscripten_bind_btGhostObject_setActivationState_1=r.asm.Md).apply(null,arguments)},jr=r._emscripten_bind_btGhostObject_forceActivationState_1=function(){return(jr=r._emscripten_bind_btGhostObject_forceActivationState_1=r.asm.Nd).apply(null,arguments)},Fr=r._emscripten_bind_btGhostObject_activate_0=function(){return(Fr=r._emscripten_bind_btGhostObject_activate_0=r.asm.Od).apply(null,arguments)},Nr=r._emscripten_bind_btGhostObject_activate_1=function(){return(Nr=r._emscripten_bind_btGhostObject_activate_1=r.asm.Pd).apply(null,arguments)},zr=r._emscripten_bind_btGhostObject_isActive_0=function(){return(zr=r._emscripten_bind_btGhostObject_isActive_0=r.asm.Qd).apply(null,arguments)},Hr=r._emscripten_bind_btGhostObject_isKinematicObject_0=function(){return(Hr=r._emscripten_bind_btGhostObject_isKinematicObject_0=r.asm.Rd).apply(null,arguments)},Ur=r._emscripten_bind_btGhostObject_isStaticObject_0=function(){return(Ur=r._emscripten_bind_btGhostObject_isStaticObject_0=r.asm.Sd).apply(null,arguments)},Wr=r._emscripten_bind_btGhostObject_isStaticOrKinematicObject_0=function(){return(Wr=r._emscripten_bind_btGhostObject_isStaticOrKinematicObject_0=r.asm.Td).apply(null,arguments)},Gr=r._emscripten_bind_btGhostObject_getRestitution_0=function(){return(Gr=r._emscripten_bind_btGhostObject_getRestitution_0=r.asm.Ud).apply(null,arguments)},Vr=r._emscripten_bind_btGhostObject_getFriction_0=function(){return(Vr=r._emscripten_bind_btGhostObject_getFriction_0=r.asm.Vd).apply(null,arguments)},qr=r._emscripten_bind_btGhostObject_getRollingFriction_0=function(){return(qr=r._emscripten_bind_btGhostObject_getRollingFriction_0=r.asm.Wd).apply(null,arguments)},Xr=r._emscripten_bind_btGhostObject_setRestitution_1=function(){return(Xr=r._emscripten_bind_btGhostObject_setRestitution_1=r.asm.Xd).apply(null,arguments)},Yr=r._emscripten_bind_btGhostObject_setFriction_1=function(){return(Yr=r._emscripten_bind_btGhostObject_setFriction_1=r.asm.Yd).apply(null,arguments)},Zr=r._emscripten_bind_btGhostObject_setRollingFriction_1=function(){return(Zr=r._emscripten_bind_btGhostObject_setRollingFriction_1=r.asm.Zd).apply(null,arguments)},Jr=r._emscripten_bind_btGhostObject_getWorldTransform_0=function(){return(Jr=r._emscripten_bind_btGhostObject_getWorldTransform_0=r.asm._d).apply(null,arguments)},Kr=r._emscripten_bind_btGhostObject_getCollisionFlags_0=function(){return(Kr=r._emscripten_bind_btGhostObject_getCollisionFlags_0=r.asm.$d).apply(null,arguments)},Qr=r._emscripten_bind_btGhostObject_setCollisionFlags_1=function(){return(Qr=r._emscripten_bind_btGhostObject_setCollisionFlags_1=r.asm.ae).apply(null,arguments)},$r=r._emscripten_bind_btGhostObject_setWorldTransform_1=function(){return($r=r._emscripten_bind_btGhostObject_setWorldTransform_1=r.asm.be).apply(null,arguments)},to=r._emscripten_bind_btGhostObject_setCollisionShape_1=function(){return(to=r._emscripten_bind_btGhostObject_setCollisionShape_1=r.asm.ce).apply(null,arguments)},eo=r._emscripten_bind_btGhostObject_setCcdMotionThreshold_1=function(){return(eo=r._emscripten_bind_btGhostObject_setCcdMotionThreshold_1=r.asm.de).apply(null,arguments)},no=r._emscripten_bind_btGhostObject_setCcdSweptSphereRadius_1=function(){return(no=r._emscripten_bind_btGhostObject_setCcdSweptSphereRadius_1=r.asm.ee).apply(null,arguments)},io=r._emscripten_bind_btGhostObject_getUserIndex_0=function(){return(io=r._emscripten_bind_btGhostObject_getUserIndex_0=r.asm.fe).apply(null,arguments)},ro=r._emscripten_bind_btGhostObject_setUserIndex_1=function(){return(ro=r._emscripten_bind_btGhostObject_setUserIndex_1=r.asm.ge).apply(null,arguments)},oo=r._emscripten_bind_btGhostObject_getUserPointer_0=function(){return(oo=r._emscripten_bind_btGhostObject_getUserPointer_0=r.asm.he).apply(null,arguments)},ao=r._emscripten_bind_btGhostObject_setUserPointer_1=function(){return(ao=r._emscripten_bind_btGhostObject_setUserPointer_1=r.asm.ie).apply(null,arguments)},so=r._emscripten_bind_btGhostObject_getBroadphaseHandle_0=function(){return(so=r._emscripten_bind_btGhostObject_getBroadphaseHandle_0=r.asm.je).apply(null,arguments)},lo=r._emscripten_bind_btGhostObject___destroy___0=function(){return(lo=r._emscripten_bind_btGhostObject___destroy___0=r.asm.ke).apply(null,arguments)},co=r._emscripten_bind_btSoftBodySolver___destroy___0=function(){return(co=r._emscripten_bind_btSoftBodySolver___destroy___0=r.asm.le).apply(null,arguments)},uo=r._emscripten_bind_VoidPtr___destroy___0=function(){return(uo=r._emscripten_bind_VoidPtr___destroy___0=r.asm.me).apply(null,arguments)},po=r._emscripten_bind_DebugDrawer_DebugDrawer_0=function(){return(po=r._emscripten_bind_DebugDrawer_DebugDrawer_0=r.asm.ne).apply(null,arguments)},ho=r._emscripten_bind_DebugDrawer_drawLine_3=function(){return(ho=r._emscripten_bind_DebugDrawer_drawLine_3=r.asm.oe).apply(null,arguments)},_o=r._emscripten_bind_DebugDrawer_drawContactPoint_5=function(){return(_o=r._emscripten_bind_DebugDrawer_drawContactPoint_5=r.asm.pe).apply(null,arguments)},fo=r._emscripten_bind_DebugDrawer_reportErrorWarning_1=function(){return(fo=r._emscripten_bind_DebugDrawer_reportErrorWarning_1=r.asm.qe).apply(null,arguments)},mo=r._emscripten_bind_DebugDrawer_draw3dText_2=function(){return(mo=r._emscripten_bind_DebugDrawer_draw3dText_2=r.asm.re).apply(null,arguments)},yo=r._emscripten_bind_DebugDrawer_setDebugMode_1=function(){return(yo=r._emscripten_bind_DebugDrawer_setDebugMode_1=r.asm.se).apply(null,arguments)},go=r._emscripten_bind_DebugDrawer_getDebugMode_0=function(){return(go=r._emscripten_bind_DebugDrawer_getDebugMode_0=r.asm.te).apply(null,arguments)},vo=r._emscripten_bind_DebugDrawer___destroy___0=function(){return(vo=r._emscripten_bind_DebugDrawer___destroy___0=r.asm.ue).apply(null,arguments)},bo=r._emscripten_bind_btVector4_btVector4_0=function(){return(bo=r._emscripten_bind_btVector4_btVector4_0=r.asm.ve).apply(null,arguments)},xo=r._emscripten_bind_btVector4_btVector4_4=function(){return(xo=r._emscripten_bind_btVector4_btVector4_4=r.asm.we).apply(null,arguments)},So=r._emscripten_bind_btVector4_w_0=function(){return(So=r._emscripten_bind_btVector4_w_0=r.asm.xe).apply(null,arguments)},wo=r._emscripten_bind_btVector4_setValue_4=function(){return(wo=r._emscripten_bind_btVector4_setValue_4=r.asm.ye).apply(null,arguments)},Mo=r._emscripten_bind_btVector4_length_0=function(){return(Mo=r._emscripten_bind_btVector4_length_0=r.asm.ze).apply(null,arguments)},To=r._emscripten_bind_btVector4_x_0=function(){return(To=r._emscripten_bind_btVector4_x_0=r.asm.Ae).apply(null,arguments)},Co=r._emscripten_bind_btVector4_y_0=function(){return(Co=r._emscripten_bind_btVector4_y_0=r.asm.Be).apply(null,arguments)},Eo=r._emscripten_bind_btVector4_z_0=function(){return(Eo=r._emscripten_bind_btVector4_z_0=r.asm.Ce).apply(null,arguments)},Ao=r._emscripten_bind_btVector4_setX_1=function(){return(Ao=r._emscripten_bind_btVector4_setX_1=r.asm.De).apply(null,arguments)},Ro=r._emscripten_bind_btVector4_setY_1=function(){return(Ro=r._emscripten_bind_btVector4_setY_1=r.asm.Ee).apply(null,arguments)},Lo=r._emscripten_bind_btVector4_setZ_1=function(){return(Lo=r._emscripten_bind_btVector4_setZ_1=r.asm.Fe).apply(null,arguments)},Po=r._emscripten_bind_btVector4_normalize_0=function(){return(Po=r._emscripten_bind_btVector4_normalize_0=r.asm.Ge).apply(null,arguments)},Do=r._emscripten_bind_btVector4_rotate_2=function(){return(Do=r._emscripten_bind_btVector4_rotate_2=r.asm.He).apply(null,arguments)},Io=r._emscripten_bind_btVector4_dot_1=function(){return(Io=r._emscripten_bind_btVector4_dot_1=r.asm.Ie).apply(null,arguments)},ko=r._emscripten_bind_btVector4_op_mul_1=function(){return(ko=r._emscripten_bind_btVector4_op_mul_1=r.asm.Je).apply(null,arguments)},Oo=r._emscripten_bind_btVector4_op_add_1=function(){return(Oo=r._emscripten_bind_btVector4_op_add_1=r.asm.Ke).apply(null,arguments)},Bo=r._emscripten_bind_btVector4_op_sub_1=function(){return(Bo=r._emscripten_bind_btVector4_op_sub_1=r.asm.Le).apply(null,arguments)},jo=r._emscripten_bind_btVector4___destroy___0=function(){return(jo=r._emscripten_bind_btVector4___destroy___0=r.asm.Me).apply(null,arguments)},Fo=r._emscripten_bind_btQuaternion_btQuaternion_4=function(){return(Fo=r._emscripten_bind_btQuaternion_btQuaternion_4=r.asm.Ne).apply(null,arguments)},No=r._emscripten_bind_btQuaternion_setValue_4=function(){return(No=r._emscripten_bind_btQuaternion_setValue_4=r.asm.Oe).apply(null,arguments)},zo=r._emscripten_bind_btQuaternion_setEulerZYX_3=function(){return(zo=r._emscripten_bind_btQuaternion_setEulerZYX_3=r.asm.Pe).apply(null,arguments)},Ho=r._emscripten_bind_btQuaternion_setRotation_2=function(){return(Ho=r._emscripten_bind_btQuaternion_setRotation_2=r.asm.Qe).apply(null,arguments)},Uo=r._emscripten_bind_btQuaternion_normalize_0=function(){return(Uo=r._emscripten_bind_btQuaternion_normalize_0=r.asm.Re).apply(null,arguments)},Wo=r._emscripten_bind_btQuaternion_length2_0=function(){return(Wo=r._emscripten_bind_btQuaternion_length2_0=r.asm.Se).apply(null,arguments)},Go=r._emscripten_bind_btQuaternion_length_0=function(){return(Go=r._emscripten_bind_btQuaternion_length_0=r.asm.Te).apply(null,arguments)},Vo=r._emscripten_bind_btQuaternion_dot_1=function(){return(Vo=r._emscripten_bind_btQuaternion_dot_1=r.asm.Ue).apply(null,arguments)},qo=r._emscripten_bind_btQuaternion_normalized_0=function(){return(qo=r._emscripten_bind_btQuaternion_normalized_0=r.asm.Ve).apply(null,arguments)},Xo=r._emscripten_bind_btQuaternion_getAxis_0=function(){return(Xo=r._emscripten_bind_btQuaternion_getAxis_0=r.asm.We).apply(null,arguments)},Yo=r._emscripten_bind_btQuaternion_inverse_0=function(){return(Yo=r._emscripten_bind_btQuaternion_inverse_0=r.asm.Xe).apply(null,arguments)},Zo=r._emscripten_bind_btQuaternion_getAngle_0=function(){return(Zo=r._emscripten_bind_btQuaternion_getAngle_0=r.asm.Ye).apply(null,arguments)},Jo=r._emscripten_bind_btQuaternion_getAngleShortestPath_0=function(){return(Jo=r._emscripten_bind_btQuaternion_getAngleShortestPath_0=r.asm.Ze).apply(null,arguments)},Ko=r._emscripten_bind_btQuaternion_angle_1=function(){return(Ko=r._emscripten_bind_btQuaternion_angle_1=r.asm._e).apply(null,arguments)},Qo=r._emscripten_bind_btQuaternion_angleShortestPath_1=function(){return(Qo=r._emscripten_bind_btQuaternion_angleShortestPath_1=r.asm.$e).apply(null,arguments)},$o=r._emscripten_bind_btQuaternion_op_add_1=function(){return($o=r._emscripten_bind_btQuaternion_op_add_1=r.asm.af).apply(null,arguments)},ta=r._emscripten_bind_btQuaternion_op_sub_1=function(){return(ta=r._emscripten_bind_btQuaternion_op_sub_1=r.asm.bf).apply(null,arguments)},ea=r._emscripten_bind_btQuaternion_op_mul_1=function(){return(ea=r._emscripten_bind_btQuaternion_op_mul_1=r.asm.cf).apply(null,arguments)},na=r._emscripten_bind_btQuaternion_op_mulq_1=function(){return(na=r._emscripten_bind_btQuaternion_op_mulq_1=r.asm.df).apply(null,arguments)},ia=r._emscripten_bind_btQuaternion_op_div_1=function(){return(ia=r._emscripten_bind_btQuaternion_op_div_1=r.asm.ef).apply(null,arguments)},ra=r._emscripten_bind_btQuaternion_x_0=function(){return(ra=r._emscripten_bind_btQuaternion_x_0=r.asm.ff).apply(null,arguments)},oa=r._emscripten_bind_btQuaternion_y_0=function(){return(oa=r._emscripten_bind_btQuaternion_y_0=r.asm.gf).apply(null,arguments)},aa=r._emscripten_bind_btQuaternion_z_0=function(){return(aa=r._emscripten_bind_btQuaternion_z_0=r.asm.hf).apply(null,arguments)},sa=r._emscripten_bind_btQuaternion_w_0=function(){return(sa=r._emscripten_bind_btQuaternion_w_0=r.asm.jf).apply(null,arguments)},la=r._emscripten_bind_btQuaternion_setX_1=function(){return(la=r._emscripten_bind_btQuaternion_setX_1=r.asm.kf).apply(null,arguments)},ca=r._emscripten_bind_btQuaternion_setY_1=function(){return(ca=r._emscripten_bind_btQuaternion_setY_1=r.asm.lf).apply(null,arguments)},ua=r._emscripten_bind_btQuaternion_setZ_1=function(){return(ua=r._emscripten_bind_btQuaternion_setZ_1=r.asm.mf).apply(null,arguments)},pa=r._emscripten_bind_btQuaternion_setW_1=function(){return(pa=r._emscripten_bind_btQuaternion_setW_1=r.asm.nf).apply(null,arguments)},ha=r._emscripten_bind_btQuaternion___destroy___0=function(){return(ha=r._emscripten_bind_btQuaternion___destroy___0=r.asm.of).apply(null,arguments)},da=r._emscripten_bind_btMatrix3x3_setEulerZYX_3=function(){return(da=r._emscripten_bind_btMatrix3x3_setEulerZYX_3=r.asm.pf).apply(null,arguments)},_a=r._emscripten_bind_btMatrix3x3_getRotation_1=function(){return(_a=r._emscripten_bind_btMatrix3x3_getRotation_1=r.asm.qf).apply(null,arguments)},fa=r._emscripten_bind_btMatrix3x3_getRow_1=function(){return(fa=r._emscripten_bind_btMatrix3x3_getRow_1=r.asm.rf).apply(null,arguments)},ma=r._emscripten_bind_btMatrix3x3___destroy___0=function(){return(ma=r._emscripten_bind_btMatrix3x3___destroy___0=r.asm.sf).apply(null,arguments)},ya=r._emscripten_bind_btTransform_btTransform_0=function(){return(ya=r._emscripten_bind_btTransform_btTransform_0=r.asm.tf).apply(null,arguments)},ga=r._emscripten_bind_btTransform_btTransform_2=function(){return(ga=r._emscripten_bind_btTransform_btTransform_2=r.asm.uf).apply(null,arguments)},va=r._emscripten_bind_btTransform_setIdentity_0=function(){return(va=r._emscripten_bind_btTransform_setIdentity_0=r.asm.vf).apply(null,arguments)},ba=r._emscripten_bind_btTransform_setOrigin_1=function(){return(ba=r._emscripten_bind_btTransform_setOrigin_1=r.asm.wf).apply(null,arguments)},xa=r._emscripten_bind_btTransform_setRotation_1=function(){return(xa=r._emscripten_bind_btTransform_setRotation_1=r.asm.xf).apply(null,arguments)},Sa=r._emscripten_bind_btTransform_getOrigin_0=function(){return(Sa=r._emscripten_bind_btTransform_getOrigin_0=r.asm.yf).apply(null,arguments)},wa=r._emscripten_bind_btTransform_getRotation_0=function(){return(wa=r._emscripten_bind_btTransform_getRotation_0=r.asm.zf).apply(null,arguments)},Ma=r._emscripten_bind_btTransform_getBasis_0=function(){return(Ma=r._emscripten_bind_btTransform_getBasis_0=r.asm.Af).apply(null,arguments)},Ta=r._emscripten_bind_btTransform_setFromOpenGLMatrix_1=function(){return(Ta=r._emscripten_bind_btTransform_setFromOpenGLMatrix_1=r.asm.Bf).apply(null,arguments)},Ca=r._emscripten_bind_btTransform_inverse_0=function(){return(Ca=r._emscripten_bind_btTransform_inverse_0=r.asm.Cf).apply(null,arguments)},Ea=r._emscripten_bind_btTransform_op_mul_1=function(){return(Ea=r._emscripten_bind_btTransform_op_mul_1=r.asm.Df).apply(null,arguments)},Aa=r._emscripten_bind_btTransform___destroy___0=function(){return(Aa=r._emscripten_bind_btTransform___destroy___0=r.asm.Ef).apply(null,arguments)},Ra=r._emscripten_bind_btDefaultMotionState_btDefaultMotionState_0=function(){return(Ra=r._emscripten_bind_btDefaultMotionState_btDefaultMotionState_0=r.asm.Ff).apply(null,arguments)},La=r._emscripten_bind_btDefaultMotionState_btDefaultMotionState_1=function(){return(La=r._emscripten_bind_btDefaultMotionState_btDefaultMotionState_1=r.asm.Gf).apply(null,arguments)},Pa=r._emscripten_bind_btDefaultMotionState_btDefaultMotionState_2=function(){return(Pa=r._emscripten_bind_btDefaultMotionState_btDefaultMotionState_2=r.asm.Hf).apply(null,arguments)},Da=r._emscripten_bind_btDefaultMotionState_getWorldTransform_1=function(){return(Da=r._emscripten_bind_btDefaultMotionState_getWorldTransform_1=r.asm.If).apply(null,arguments)},Ia=r._emscripten_bind_btDefaultMotionState_setWorldTransform_1=function(){return(Ia=r._emscripten_bind_btDefaultMotionState_setWorldTransform_1=r.asm.Jf).apply(null,arguments)},ka=r._emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0=function(){return(ka=r._emscripten_bind_btDefaultMotionState_get_m_graphicsWorldTrans_0=r.asm.Kf).apply(null,arguments)},Oa=r._emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1=function(){return(Oa=r._emscripten_bind_btDefaultMotionState_set_m_graphicsWorldTrans_1=r.asm.Lf).apply(null,arguments)},Ba=r._emscripten_bind_btDefaultMotionState___destroy___0=function(){return(Ba=r._emscripten_bind_btDefaultMotionState___destroy___0=r.asm.Mf).apply(null,arguments)},ja=r._emscripten_bind_btCollisionObjectWrapper_getWorldTransform_0=function(){return(ja=r._emscripten_bind_btCollisionObjectWrapper_getWorldTransform_0=r.asm.Nf).apply(null,arguments)},Fa=r._emscripten_bind_btCollisionObjectWrapper_getCollisionObject_0=function(){return(Fa=r._emscripten_bind_btCollisionObjectWrapper_getCollisionObject_0=r.asm.Of).apply(null,arguments)},Na=r._emscripten_bind_btCollisionObjectWrapper_getCollisionShape_0=function(){return(Na=r._emscripten_bind_btCollisionObjectWrapper_getCollisionShape_0=r.asm.Pf).apply(null,arguments)},za=r._emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2=function(){return(za=r._emscripten_bind_ClosestRayResultCallback_ClosestRayResultCallback_2=r.asm.Qf).apply(null,arguments)},Ha=r._emscripten_bind_ClosestRayResultCallback_hasHit_0=function(){return(Ha=r._emscripten_bind_ClosestRayResultCallback_hasHit_0=r.asm.Rf).apply(null,arguments)},Ua=r._emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0=function(){return(Ua=r._emscripten_bind_ClosestRayResultCallback_get_m_rayFromWorld_0=r.asm.Sf).apply(null,arguments)},Wa=r._emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1=function(){return(Wa=r._emscripten_bind_ClosestRayResultCallback_set_m_rayFromWorld_1=r.asm.Tf).apply(null,arguments)},Ga=r._emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0=function(){return(Ga=r._emscripten_bind_ClosestRayResultCallback_get_m_rayToWorld_0=r.asm.Uf).apply(null,arguments)},Va=r._emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1=function(){return(Va=r._emscripten_bind_ClosestRayResultCallback_set_m_rayToWorld_1=r.asm.Vf).apply(null,arguments)},qa=r._emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0=function(){return(qa=r._emscripten_bind_ClosestRayResultCallback_get_m_hitNormalWorld_0=r.asm.Wf).apply(null,arguments)},Xa=r._emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1=function(){return(Xa=r._emscripten_bind_ClosestRayResultCallback_set_m_hitNormalWorld_1=r.asm.Xf).apply(null,arguments)},Ya=r._emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0=function(){return(Ya=r._emscripten_bind_ClosestRayResultCallback_get_m_hitPointWorld_0=r.asm.Yf).apply(null,arguments)},Za=r._emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1=function(){return(Za=r._emscripten_bind_ClosestRayResultCallback_set_m_hitPointWorld_1=r.asm.Zf).apply(null,arguments)},Ja=r._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0=function(){return(Ja=r._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterGroup_0=r.asm._f).apply(null,arguments)},Ka=r._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1=function(){return(Ka=r._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterGroup_1=r.asm.$f).apply(null,arguments)},Qa=r._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0=function(){return(Qa=r._emscripten_bind_ClosestRayResultCallback_get_m_collisionFilterMask_0=r.asm.ag).apply(null,arguments)},$a=r._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1=function(){return($a=r._emscripten_bind_ClosestRayResultCallback_set_m_collisionFilterMask_1=r.asm.bg).apply(null,arguments)},ts=r._emscripten_bind_ClosestRayResultCallback_get_m_closestHitFraction_0=function(){return(ts=r._emscripten_bind_ClosestRayResultCallback_get_m_closestHitFraction_0=r.asm.cg).apply(null,arguments)},es=r._emscripten_bind_ClosestRayResultCallback_set_m_closestHitFraction_1=function(){return(es=r._emscripten_bind_ClosestRayResultCallback_set_m_closestHitFraction_1=r.asm.dg).apply(null,arguments)},ns=r._emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0=function(){return(ns=r._emscripten_bind_ClosestRayResultCallback_get_m_collisionObject_0=r.asm.eg).apply(null,arguments)},is=r._emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1=function(){return(is=r._emscripten_bind_ClosestRayResultCallback_set_m_collisionObject_1=r.asm.fg).apply(null,arguments)},rs=r._emscripten_bind_ClosestRayResultCallback___destroy___0=function(){return(rs=r._emscripten_bind_ClosestRayResultCallback___destroy___0=r.asm.gg).apply(null,arguments)},os=r._emscripten_bind_btConstCollisionObjectArray_size_0=function(){return(os=r._emscripten_bind_btConstCollisionObjectArray_size_0=r.asm.hg).apply(null,arguments)},as=r._emscripten_bind_btConstCollisionObjectArray_at_1=function(){return(as=r._emscripten_bind_btConstCollisionObjectArray_at_1=r.asm.ig).apply(null,arguments)},ss=r._emscripten_bind_btConstCollisionObjectArray___destroy___0=function(){return(ss=r._emscripten_bind_btConstCollisionObjectArray___destroy___0=r.asm.jg).apply(null,arguments)},ls=r._emscripten_bind_btScalarArray_size_0=function(){return(ls=r._emscripten_bind_btScalarArray_size_0=r.asm.kg).apply(null,arguments)},cs=r._emscripten_bind_btScalarArray_at_1=function(){return(cs=r._emscripten_bind_btScalarArray_at_1=r.asm.lg).apply(null,arguments)},us=r._emscripten_bind_btScalarArray___destroy___0=function(){return(us=r._emscripten_bind_btScalarArray___destroy___0=r.asm.mg).apply(null,arguments)},ps=r._emscripten_bind_AllHitsRayResultCallback_AllHitsRayResultCallback_2=function(){return(ps=r._emscripten_bind_AllHitsRayResultCallback_AllHitsRayResultCallback_2=r.asm.ng).apply(null,arguments)},hs=r._emscripten_bind_AllHitsRayResultCallback_hasHit_0=function(){return(hs=r._emscripten_bind_AllHitsRayResultCallback_hasHit_0=r.asm.og).apply(null,arguments)},ds=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObjects_0=function(){return(ds=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObjects_0=r.asm.pg).apply(null,arguments)},_s=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObjects_1=function(){return(_s=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObjects_1=r.asm.qg).apply(null,arguments)},fs=r._emscripten_bind_AllHitsRayResultCallback_get_m_rayFromWorld_0=function(){return(fs=r._emscripten_bind_AllHitsRayResultCallback_get_m_rayFromWorld_0=r.asm.rg).apply(null,arguments)},ms=r._emscripten_bind_AllHitsRayResultCallback_set_m_rayFromWorld_1=function(){return(ms=r._emscripten_bind_AllHitsRayResultCallback_set_m_rayFromWorld_1=r.asm.sg).apply(null,arguments)},ys=r._emscripten_bind_AllHitsRayResultCallback_get_m_rayToWorld_0=function(){return(ys=r._emscripten_bind_AllHitsRayResultCallback_get_m_rayToWorld_0=r.asm.tg).apply(null,arguments)},gs=r._emscripten_bind_AllHitsRayResultCallback_set_m_rayToWorld_1=function(){return(gs=r._emscripten_bind_AllHitsRayResultCallback_set_m_rayToWorld_1=r.asm.ug).apply(null,arguments)},vs=r._emscripten_bind_AllHitsRayResultCallback_get_m_hitNormalWorld_0=function(){return(vs=r._emscripten_bind_AllHitsRayResultCallback_get_m_hitNormalWorld_0=r.asm.vg).apply(null,arguments)},bs=r._emscripten_bind_AllHitsRayResultCallback_set_m_hitNormalWorld_1=function(){return(bs=r._emscripten_bind_AllHitsRayResultCallback_set_m_hitNormalWorld_1=r.asm.wg).apply(null,arguments)},xs=r._emscripten_bind_AllHitsRayResultCallback_get_m_hitPointWorld_0=function(){return(xs=r._emscripten_bind_AllHitsRayResultCallback_get_m_hitPointWorld_0=r.asm.xg).apply(null,arguments)},Ss=r._emscripten_bind_AllHitsRayResultCallback_set_m_hitPointWorld_1=function(){return(Ss=r._emscripten_bind_AllHitsRayResultCallback_set_m_hitPointWorld_1=r.asm.yg).apply(null,arguments)},ws=r._emscripten_bind_AllHitsRayResultCallback_get_m_hitFractions_0=function(){return(ws=r._emscripten_bind_AllHitsRayResultCallback_get_m_hitFractions_0=r.asm.zg).apply(null,arguments)},Ms=r._emscripten_bind_AllHitsRayResultCallback_set_m_hitFractions_1=function(){return(Ms=r._emscripten_bind_AllHitsRayResultCallback_set_m_hitFractions_1=r.asm.Ag).apply(null,arguments)},Ts=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterGroup_0=function(){return(Ts=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterGroup_0=r.asm.Bg).apply(null,arguments)},Cs=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterGroup_1=function(){return(Cs=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterGroup_1=r.asm.Cg).apply(null,arguments)},Es=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterMask_0=function(){return(Es=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionFilterMask_0=r.asm.Dg).apply(null,arguments)},As=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterMask_1=function(){return(As=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionFilterMask_1=r.asm.Eg).apply(null,arguments)},Rs=r._emscripten_bind_AllHitsRayResultCallback_get_m_closestHitFraction_0=function(){return(Rs=r._emscripten_bind_AllHitsRayResultCallback_get_m_closestHitFraction_0=r.asm.Fg).apply(null,arguments)},Ls=r._emscripten_bind_AllHitsRayResultCallback_set_m_closestHitFraction_1=function(){return(Ls=r._emscripten_bind_AllHitsRayResultCallback_set_m_closestHitFraction_1=r.asm.Gg).apply(null,arguments)},Ps=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObject_0=function(){return(Ps=r._emscripten_bind_AllHitsRayResultCallback_get_m_collisionObject_0=r.asm.Hg).apply(null,arguments)},Ds=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObject_1=function(){return(Ds=r._emscripten_bind_AllHitsRayResultCallback_set_m_collisionObject_1=r.asm.Ig).apply(null,arguments)},Is=r._emscripten_bind_AllHitsRayResultCallback___destroy___0=function(){return(Is=r._emscripten_bind_AllHitsRayResultCallback___destroy___0=r.asm.Jg).apply(null,arguments)},ks=r._emscripten_bind_btManifoldPoint_getPositionWorldOnA_0=function(){return(ks=r._emscripten_bind_btManifoldPoint_getPositionWorldOnA_0=r.asm.Kg).apply(null,arguments)},Os=r._emscripten_bind_btManifoldPoint_getPositionWorldOnB_0=function(){return(Os=r._emscripten_bind_btManifoldPoint_getPositionWorldOnB_0=r.asm.Lg).apply(null,arguments)},Bs=r._emscripten_bind_btManifoldPoint_getAppliedImpulse_0=function(){return(Bs=r._emscripten_bind_btManifoldPoint_getAppliedImpulse_0=r.asm.Mg).apply(null,arguments)},js=r._emscripten_bind_btManifoldPoint_getDistance_0=function(){return(js=r._emscripten_bind_btManifoldPoint_getDistance_0=r.asm.Ng).apply(null,arguments)},Fs=r._emscripten_bind_btManifoldPoint_get_m_localPointA_0=function(){return(Fs=r._emscripten_bind_btManifoldPoint_get_m_localPointA_0=r.asm.Og).apply(null,arguments)},Ns=r._emscripten_bind_btManifoldPoint_set_m_localPointA_1=function(){return(Ns=r._emscripten_bind_btManifoldPoint_set_m_localPointA_1=r.asm.Pg).apply(null,arguments)},zs=r._emscripten_bind_btManifoldPoint_get_m_localPointB_0=function(){return(zs=r._emscripten_bind_btManifoldPoint_get_m_localPointB_0=r.asm.Qg).apply(null,arguments)},Hs=r._emscripten_bind_btManifoldPoint_set_m_localPointB_1=function(){return(Hs=r._emscripten_bind_btManifoldPoint_set_m_localPointB_1=r.asm.Rg).apply(null,arguments)},Us=r._emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0=function(){return(Us=r._emscripten_bind_btManifoldPoint_get_m_positionWorldOnB_0=r.asm.Sg).apply(null,arguments)},Ws=r._emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1=function(){return(Ws=r._emscripten_bind_btManifoldPoint_set_m_positionWorldOnB_1=r.asm.Tg).apply(null,arguments)},Gs=r._emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0=function(){return(Gs=r._emscripten_bind_btManifoldPoint_get_m_positionWorldOnA_0=r.asm.Ug).apply(null,arguments)},Vs=r._emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1=function(){return(Vs=r._emscripten_bind_btManifoldPoint_set_m_positionWorldOnA_1=r.asm.Vg).apply(null,arguments)},qs=r._emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0=function(){return(qs=r._emscripten_bind_btManifoldPoint_get_m_normalWorldOnB_0=r.asm.Wg).apply(null,arguments)},Xs=r._emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1=function(){return(Xs=r._emscripten_bind_btManifoldPoint_set_m_normalWorldOnB_1=r.asm.Xg).apply(null,arguments)},Ys=r._emscripten_bind_btManifoldPoint_get_m_userPersistentData_0=function(){return(Ys=r._emscripten_bind_btManifoldPoint_get_m_userPersistentData_0=r.asm.Yg).apply(null,arguments)},Zs=r._emscripten_bind_btManifoldPoint_set_m_userPersistentData_1=function(){return(Zs=r._emscripten_bind_btManifoldPoint_set_m_userPersistentData_1=r.asm.Zg).apply(null,arguments)},Js=r._emscripten_bind_btManifoldPoint___destroy___0=function(){return(Js=r._emscripten_bind_btManifoldPoint___destroy___0=r.asm._g).apply(null,arguments)},Ks=r._emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0=function(){return(Ks=r._emscripten_bind_ConcreteContactResultCallback_ConcreteContactResultCallback_0=r.asm.$g).apply(null,arguments)},Qs=r._emscripten_bind_ConcreteContactResultCallback_addSingleResult_7=function(){return(Qs=r._emscripten_bind_ConcreteContactResultCallback_addSingleResult_7=r.asm.ah).apply(null,arguments)},$s=r._emscripten_bind_ConcreteContactResultCallback___destroy___0=function(){return($s=r._emscripten_bind_ConcreteContactResultCallback___destroy___0=r.asm.bh).apply(null,arguments)},tl=r._emscripten_bind_LocalShapeInfo_get_m_shapePart_0=function(){return(tl=r._emscripten_bind_LocalShapeInfo_get_m_shapePart_0=r.asm.ch).apply(null,arguments)},el=r._emscripten_bind_LocalShapeInfo_set_m_shapePart_1=function(){return(el=r._emscripten_bind_LocalShapeInfo_set_m_shapePart_1=r.asm.dh).apply(null,arguments)},nl=r._emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0=function(){return(nl=r._emscripten_bind_LocalShapeInfo_get_m_triangleIndex_0=r.asm.eh).apply(null,arguments)},il=r._emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1=function(){return(il=r._emscripten_bind_LocalShapeInfo_set_m_triangleIndex_1=r.asm.fh).apply(null,arguments)},rl=r._emscripten_bind_LocalShapeInfo___destroy___0=function(){return(rl=r._emscripten_bind_LocalShapeInfo___destroy___0=r.asm.gh).apply(null,arguments)},ol=r._emscripten_bind_LocalConvexResult_LocalConvexResult_5=function(){return(ol=r._emscripten_bind_LocalConvexResult_LocalConvexResult_5=r.asm.hh).apply(null,arguments)},al=r._emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0=function(){return(al=r._emscripten_bind_LocalConvexResult_get_m_hitCollisionObject_0=r.asm.ih).apply(null,arguments)},sl=r._emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1=function(){return(sl=r._emscripten_bind_LocalConvexResult_set_m_hitCollisionObject_1=r.asm.jh).apply(null,arguments)},ll=r._emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0=function(){return(ll=r._emscripten_bind_LocalConvexResult_get_m_localShapeInfo_0=r.asm.kh).apply(null,arguments)},cl=r._emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1=function(){return(cl=r._emscripten_bind_LocalConvexResult_set_m_localShapeInfo_1=r.asm.lh).apply(null,arguments)},ul=r._emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0=function(){return(ul=r._emscripten_bind_LocalConvexResult_get_m_hitNormalLocal_0=r.asm.mh).apply(null,arguments)},pl=r._emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1=function(){return(pl=r._emscripten_bind_LocalConvexResult_set_m_hitNormalLocal_1=r.asm.nh).apply(null,arguments)},hl=r._emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0=function(){return(hl=r._emscripten_bind_LocalConvexResult_get_m_hitPointLocal_0=r.asm.oh).apply(null,arguments)},dl=r._emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1=function(){return(dl=r._emscripten_bind_LocalConvexResult_set_m_hitPointLocal_1=r.asm.ph).apply(null,arguments)},_l=r._emscripten_bind_LocalConvexResult_get_m_hitFraction_0=function(){return(_l=r._emscripten_bind_LocalConvexResult_get_m_hitFraction_0=r.asm.qh).apply(null,arguments)},fl=r._emscripten_bind_LocalConvexResult_set_m_hitFraction_1=function(){return(fl=r._emscripten_bind_LocalConvexResult_set_m_hitFraction_1=r.asm.rh).apply(null,arguments)},ml=r._emscripten_bind_LocalConvexResult___destroy___0=function(){return(ml=r._emscripten_bind_LocalConvexResult___destroy___0=r.asm.sh).apply(null,arguments)},yl=r._emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2=function(){return(yl=r._emscripten_bind_ClosestConvexResultCallback_ClosestConvexResultCallback_2=r.asm.th).apply(null,arguments)},gl=r._emscripten_bind_ClosestConvexResultCallback_hasHit_0=function(){return(gl=r._emscripten_bind_ClosestConvexResultCallback_hasHit_0=r.asm.uh).apply(null,arguments)},vl=r._emscripten_bind_ClosestConvexResultCallback_get_m_hitCollisionObject_0=function(){return(vl=r._emscripten_bind_ClosestConvexResultCallback_get_m_hitCollisionObject_0=r.asm.vh).apply(null,arguments)},bl=r._emscripten_bind_ClosestConvexResultCallback_set_m_hitCollisionObject_1=function(){return(bl=r._emscripten_bind_ClosestConvexResultCallback_set_m_hitCollisionObject_1=r.asm.wh).apply(null,arguments)},xl=r._emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0=function(){return(xl=r._emscripten_bind_ClosestConvexResultCallback_get_m_convexFromWorld_0=r.asm.xh).apply(null,arguments)},Sl=r._emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1=function(){return(Sl=r._emscripten_bind_ClosestConvexResultCallback_set_m_convexFromWorld_1=r.asm.yh).apply(null,arguments)},wl=r._emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0=function(){return(wl=r._emscripten_bind_ClosestConvexResultCallback_get_m_convexToWorld_0=r.asm.zh).apply(null,arguments)},Ml=r._emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1=function(){return(Ml=r._emscripten_bind_ClosestConvexResultCallback_set_m_convexToWorld_1=r.asm.Ah).apply(null,arguments)},Tl=r._emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0=function(){return(Tl=r._emscripten_bind_ClosestConvexResultCallback_get_m_hitNormalWorld_0=r.asm.Bh).apply(null,arguments)},Cl=r._emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1=function(){return(Cl=r._emscripten_bind_ClosestConvexResultCallback_set_m_hitNormalWorld_1=r.asm.Ch).apply(null,arguments)},El=r._emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0=function(){return(El=r._emscripten_bind_ClosestConvexResultCallback_get_m_hitPointWorld_0=r.asm.Dh).apply(null,arguments)},Al=r._emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1=function(){return(Al=r._emscripten_bind_ClosestConvexResultCallback_set_m_hitPointWorld_1=r.asm.Eh).apply(null,arguments)},Rl=r._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0=function(){return(Rl=r._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterGroup_0=r.asm.Fh).apply(null,arguments)},Ll=r._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1=function(){return(Ll=r._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterGroup_1=r.asm.Gh).apply(null,arguments)},Pl=r._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0=function(){return(Pl=r._emscripten_bind_ClosestConvexResultCallback_get_m_collisionFilterMask_0=r.asm.Hh).apply(null,arguments)},Dl=r._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1=function(){return(Dl=r._emscripten_bind_ClosestConvexResultCallback_set_m_collisionFilterMask_1=r.asm.Ih).apply(null,arguments)},Il=r._emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0=function(){return(Il=r._emscripten_bind_ClosestConvexResultCallback_get_m_closestHitFraction_0=r.asm.Jh).apply(null,arguments)},kl=r._emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1=function(){return(kl=r._emscripten_bind_ClosestConvexResultCallback_set_m_closestHitFraction_1=r.asm.Kh).apply(null,arguments)},Ol=r._emscripten_bind_ClosestConvexResultCallback___destroy___0=function(){return(Ol=r._emscripten_bind_ClosestConvexResultCallback___destroy___0=r.asm.Lh).apply(null,arguments)},Bl=r._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1=function(){return(Bl=r._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_1=r.asm.Mh).apply(null,arguments)},jl=r._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2=function(){return(jl=r._emscripten_bind_btConvexTriangleMeshShape_btConvexTriangleMeshShape_2=r.asm.Nh).apply(null,arguments)},Fl=r._emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1=function(){return(Fl=r._emscripten_bind_btConvexTriangleMeshShape_setLocalScaling_1=r.asm.Oh).apply(null,arguments)},Nl=r._emscripten_bind_btConvexTriangleMeshShape_getLocalScaling_0=function(){return(Nl=r._emscripten_bind_btConvexTriangleMeshShape_getLocalScaling_0=r.asm.Ph).apply(null,arguments)},zl=r._emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2=function(){return(zl=r._emscripten_bind_btConvexTriangleMeshShape_calculateLocalInertia_2=r.asm.Qh).apply(null,arguments)},Hl=r._emscripten_bind_btConvexTriangleMeshShape_setMargin_1=function(){return(Hl=r._emscripten_bind_btConvexTriangleMeshShape_setMargin_1=r.asm.Rh).apply(null,arguments)},Ul=r._emscripten_bind_btConvexTriangleMeshShape_getMargin_0=function(){return(Ul=r._emscripten_bind_btConvexTriangleMeshShape_getMargin_0=r.asm.Sh).apply(null,arguments)},Wl=r._emscripten_bind_btConvexTriangleMeshShape___destroy___0=function(){return(Wl=r._emscripten_bind_btConvexTriangleMeshShape___destroy___0=r.asm.Th).apply(null,arguments)},Gl=r._emscripten_bind_btBoxShape_btBoxShape_1=function(){return(Gl=r._emscripten_bind_btBoxShape_btBoxShape_1=r.asm.Uh).apply(null,arguments)},Vl=r._emscripten_bind_btBoxShape_setMargin_1=function(){return(Vl=r._emscripten_bind_btBoxShape_setMargin_1=r.asm.Vh).apply(null,arguments)},ql=r._emscripten_bind_btBoxShape_getMargin_0=function(){return(ql=r._emscripten_bind_btBoxShape_getMargin_0=r.asm.Wh).apply(null,arguments)},Xl=r._emscripten_bind_btBoxShape_setLocalScaling_1=function(){return(Xl=r._emscripten_bind_btBoxShape_setLocalScaling_1=r.asm.Xh).apply(null,arguments)},Yl=r._emscripten_bind_btBoxShape_getLocalScaling_0=function(){return(Yl=r._emscripten_bind_btBoxShape_getLocalScaling_0=r.asm.Yh).apply(null,arguments)},Zl=r._emscripten_bind_btBoxShape_calculateLocalInertia_2=function(){return(Zl=r._emscripten_bind_btBoxShape_calculateLocalInertia_2=r.asm.Zh).apply(null,arguments)},Jl=r._emscripten_bind_btBoxShape___destroy___0=function(){return(Jl=r._emscripten_bind_btBoxShape___destroy___0=r.asm._h).apply(null,arguments)},Kl=r._emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2=function(){return(Kl=r._emscripten_bind_btCapsuleShapeX_btCapsuleShapeX_2=r.asm.$h).apply(null,arguments)},Ql=r._emscripten_bind_btCapsuleShapeX_setMargin_1=function(){return(Ql=r._emscripten_bind_btCapsuleShapeX_setMargin_1=r.asm.ai).apply(null,arguments)},$l=r._emscripten_bind_btCapsuleShapeX_getMargin_0=function(){return($l=r._emscripten_bind_btCapsuleShapeX_getMargin_0=r.asm.bi).apply(null,arguments)},tc=r._emscripten_bind_btCapsuleShapeX_getUpAxis_0=function(){return(tc=r._emscripten_bind_btCapsuleShapeX_getUpAxis_0=r.asm.ci).apply(null,arguments)},ec=r._emscripten_bind_btCapsuleShapeX_getRadius_0=function(){return(ec=r._emscripten_bind_btCapsuleShapeX_getRadius_0=r.asm.di).apply(null,arguments)},nc=r._emscripten_bind_btCapsuleShapeX_getHalfHeight_0=function(){return(nc=r._emscripten_bind_btCapsuleShapeX_getHalfHeight_0=r.asm.ei).apply(null,arguments)},ic=r._emscripten_bind_btCapsuleShapeX_setLocalScaling_1=function(){return(ic=r._emscripten_bind_btCapsuleShapeX_setLocalScaling_1=r.asm.fi).apply(null,arguments)},rc=r._emscripten_bind_btCapsuleShapeX_getLocalScaling_0=function(){return(rc=r._emscripten_bind_btCapsuleShapeX_getLocalScaling_0=r.asm.gi).apply(null,arguments)},oc=r._emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2=function(){return(oc=r._emscripten_bind_btCapsuleShapeX_calculateLocalInertia_2=r.asm.hi).apply(null,arguments)},ac=r._emscripten_bind_btCapsuleShapeX___destroy___0=function(){return(ac=r._emscripten_bind_btCapsuleShapeX___destroy___0=r.asm.ii).apply(null,arguments)},sc=r._emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2=function(){return(sc=r._emscripten_bind_btCapsuleShapeZ_btCapsuleShapeZ_2=r.asm.ji).apply(null,arguments)},lc=r._emscripten_bind_btCapsuleShapeZ_setMargin_1=function(){return(lc=r._emscripten_bind_btCapsuleShapeZ_setMargin_1=r.asm.ki).apply(null,arguments)},cc=r._emscripten_bind_btCapsuleShapeZ_getMargin_0=function(){return(cc=r._emscripten_bind_btCapsuleShapeZ_getMargin_0=r.asm.li).apply(null,arguments)},uc=r._emscripten_bind_btCapsuleShapeZ_getUpAxis_0=function(){return(uc=r._emscripten_bind_btCapsuleShapeZ_getUpAxis_0=r.asm.mi).apply(null,arguments)},pc=r._emscripten_bind_btCapsuleShapeZ_getRadius_0=function(){return(pc=r._emscripten_bind_btCapsuleShapeZ_getRadius_0=r.asm.ni).apply(null,arguments)},hc=r._emscripten_bind_btCapsuleShapeZ_getHalfHeight_0=function(){return(hc=r._emscripten_bind_btCapsuleShapeZ_getHalfHeight_0=r.asm.oi).apply(null,arguments)},dc=r._emscripten_bind_btCapsuleShapeZ_setLocalScaling_1=function(){return(dc=r._emscripten_bind_btCapsuleShapeZ_setLocalScaling_1=r.asm.pi).apply(null,arguments)},_c=r._emscripten_bind_btCapsuleShapeZ_getLocalScaling_0=function(){return(_c=r._emscripten_bind_btCapsuleShapeZ_getLocalScaling_0=r.asm.qi).apply(null,arguments)},fc=r._emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2=function(){return(fc=r._emscripten_bind_btCapsuleShapeZ_calculateLocalInertia_2=r.asm.ri).apply(null,arguments)},mc=r._emscripten_bind_btCapsuleShapeZ___destroy___0=function(){return(mc=r._emscripten_bind_btCapsuleShapeZ___destroy___0=r.asm.si).apply(null,arguments)},yc=r._emscripten_bind_btCylinderShapeX_btCylinderShapeX_1=function(){return(yc=r._emscripten_bind_btCylinderShapeX_btCylinderShapeX_1=r.asm.ti).apply(null,arguments)},gc=r._emscripten_bind_btCylinderShapeX_setMargin_1=function(){return(gc=r._emscripten_bind_btCylinderShapeX_setMargin_1=r.asm.ui).apply(null,arguments)},vc=r._emscripten_bind_btCylinderShapeX_getMargin_0=function(){return(vc=r._emscripten_bind_btCylinderShapeX_getMargin_0=r.asm.vi).apply(null,arguments)},bc=r._emscripten_bind_btCylinderShapeX_setLocalScaling_1=function(){return(bc=r._emscripten_bind_btCylinderShapeX_setLocalScaling_1=r.asm.wi).apply(null,arguments)},xc=r._emscripten_bind_btCylinderShapeX_getLocalScaling_0=function(){return(xc=r._emscripten_bind_btCylinderShapeX_getLocalScaling_0=r.asm.xi).apply(null,arguments)},Sc=r._emscripten_bind_btCylinderShapeX_calculateLocalInertia_2=function(){return(Sc=r._emscripten_bind_btCylinderShapeX_calculateLocalInertia_2=r.asm.yi).apply(null,arguments)},wc=r._emscripten_bind_btCylinderShapeX___destroy___0=function(){return(wc=r._emscripten_bind_btCylinderShapeX___destroy___0=r.asm.zi).apply(null,arguments)},Mc=r._emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1=function(){return(Mc=r._emscripten_bind_btCylinderShapeZ_btCylinderShapeZ_1=r.asm.Ai).apply(null,arguments)},Tc=r._emscripten_bind_btCylinderShapeZ_setMargin_1=function(){return(Tc=r._emscripten_bind_btCylinderShapeZ_setMargin_1=r.asm.Bi).apply(null,arguments)},Cc=r._emscripten_bind_btCylinderShapeZ_getMargin_0=function(){return(Cc=r._emscripten_bind_btCylinderShapeZ_getMargin_0=r.asm.Ci).apply(null,arguments)},Ec=r._emscripten_bind_btCylinderShapeZ_setLocalScaling_1=function(){return(Ec=r._emscripten_bind_btCylinderShapeZ_setLocalScaling_1=r.asm.Di).apply(null,arguments)},Ac=r._emscripten_bind_btCylinderShapeZ_getLocalScaling_0=function(){return(Ac=r._emscripten_bind_btCylinderShapeZ_getLocalScaling_0=r.asm.Ei).apply(null,arguments)},Rc=r._emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2=function(){return(Rc=r._emscripten_bind_btCylinderShapeZ_calculateLocalInertia_2=r.asm.Fi).apply(null,arguments)},Lc=r._emscripten_bind_btCylinderShapeZ___destroy___0=function(){return(Lc=r._emscripten_bind_btCylinderShapeZ___destroy___0=r.asm.Gi).apply(null,arguments)},Pc=r._emscripten_bind_btSphereShape_btSphereShape_1=function(){return(Pc=r._emscripten_bind_btSphereShape_btSphereShape_1=r.asm.Hi).apply(null,arguments)},Dc=r._emscripten_bind_btSphereShape_setMargin_1=function(){return(Dc=r._emscripten_bind_btSphereShape_setMargin_1=r.asm.Ii).apply(null,arguments)},Ic=r._emscripten_bind_btSphereShape_getMargin_0=function(){return(Ic=r._emscripten_bind_btSphereShape_getMargin_0=r.asm.Ji).apply(null,arguments)},kc=r._emscripten_bind_btSphereShape_setLocalScaling_1=function(){return(kc=r._emscripten_bind_btSphereShape_setLocalScaling_1=r.asm.Ki).apply(null,arguments)},Oc=r._emscripten_bind_btSphereShape_getLocalScaling_0=function(){return(Oc=r._emscripten_bind_btSphereShape_getLocalScaling_0=r.asm.Li).apply(null,arguments)},Bc=r._emscripten_bind_btSphereShape_calculateLocalInertia_2=function(){return(Bc=r._emscripten_bind_btSphereShape_calculateLocalInertia_2=r.asm.Mi).apply(null,arguments)},jc=r._emscripten_bind_btSphereShape___destroy___0=function(){return(jc=r._emscripten_bind_btSphereShape___destroy___0=r.asm.Ni).apply(null,arguments)},Fc=r._emscripten_bind_btMultiSphereShape_btMultiSphereShape_3=function(){return(Fc=r._emscripten_bind_btMultiSphereShape_btMultiSphereShape_3=r.asm.Oi).apply(null,arguments)},Nc=r._emscripten_bind_btMultiSphereShape_setLocalScaling_1=function(){return(Nc=r._emscripten_bind_btMultiSphereShape_setLocalScaling_1=r.asm.Pi).apply(null,arguments)},zc=r._emscripten_bind_btMultiSphereShape_getLocalScaling_0=function(){return(zc=r._emscripten_bind_btMultiSphereShape_getLocalScaling_0=r.asm.Qi).apply(null,arguments)},Hc=r._emscripten_bind_btMultiSphereShape_calculateLocalInertia_2=function(){return(Hc=r._emscripten_bind_btMultiSphereShape_calculateLocalInertia_2=r.asm.Ri).apply(null,arguments)},Uc=r._emscripten_bind_btMultiSphereShape___destroy___0=function(){return(Uc=r._emscripten_bind_btMultiSphereShape___destroy___0=r.asm.Si).apply(null,arguments)},Wc=r._emscripten_bind_btConeShapeX_btConeShapeX_2=function(){return(Wc=r._emscripten_bind_btConeShapeX_btConeShapeX_2=r.asm.Ti).apply(null,arguments)},Gc=r._emscripten_bind_btConeShapeX_setLocalScaling_1=function(){return(Gc=r._emscripten_bind_btConeShapeX_setLocalScaling_1=r.asm.Ui).apply(null,arguments)},Vc=r._emscripten_bind_btConeShapeX_getLocalScaling_0=function(){return(Vc=r._emscripten_bind_btConeShapeX_getLocalScaling_0=r.asm.Vi).apply(null,arguments)},qc=r._emscripten_bind_btConeShapeX_calculateLocalInertia_2=function(){return(qc=r._emscripten_bind_btConeShapeX_calculateLocalInertia_2=r.asm.Wi).apply(null,arguments)},Xc=r._emscripten_bind_btConeShapeX___destroy___0=function(){return(Xc=r._emscripten_bind_btConeShapeX___destroy___0=r.asm.Xi).apply(null,arguments)},Yc=r._emscripten_bind_btConeShapeZ_btConeShapeZ_2=function(){return(Yc=r._emscripten_bind_btConeShapeZ_btConeShapeZ_2=r.asm.Yi).apply(null,arguments)},Zc=r._emscripten_bind_btConeShapeZ_setLocalScaling_1=function(){return(Zc=r._emscripten_bind_btConeShapeZ_setLocalScaling_1=r.asm.Zi).apply(null,arguments)},Jc=r._emscripten_bind_btConeShapeZ_getLocalScaling_0=function(){return(Jc=r._emscripten_bind_btConeShapeZ_getLocalScaling_0=r.asm._i).apply(null,arguments)},Kc=r._emscripten_bind_btConeShapeZ_calculateLocalInertia_2=function(){return(Kc=r._emscripten_bind_btConeShapeZ_calculateLocalInertia_2=r.asm.$i).apply(null,arguments)},Qc=r._emscripten_bind_btConeShapeZ___destroy___0=function(){return(Qc=r._emscripten_bind_btConeShapeZ___destroy___0=r.asm.aj).apply(null,arguments)},$c=r._emscripten_bind_btIntArray_size_0=function(){return($c=r._emscripten_bind_btIntArray_size_0=r.asm.bj).apply(null,arguments)},tu=r._emscripten_bind_btIntArray_at_1=function(){return(tu=r._emscripten_bind_btIntArray_at_1=r.asm.cj).apply(null,arguments)},eu=r._emscripten_bind_btIntArray___destroy___0=function(){return(eu=r._emscripten_bind_btIntArray___destroy___0=r.asm.dj).apply(null,arguments)},nu=r._emscripten_bind_btFace_get_m_indices_0=function(){return(nu=r._emscripten_bind_btFace_get_m_indices_0=r.asm.ej).apply(null,arguments)},iu=r._emscripten_bind_btFace_set_m_indices_1=function(){return(iu=r._emscripten_bind_btFace_set_m_indices_1=r.asm.fj).apply(null,arguments)},ru=r._emscripten_bind_btFace_get_m_plane_1=function(){return(ru=r._emscripten_bind_btFace_get_m_plane_1=r.asm.gj).apply(null,arguments)},ou=r._emscripten_bind_btFace_set_m_plane_2=function(){return(ou=r._emscripten_bind_btFace_set_m_plane_2=r.asm.hj).apply(null,arguments)},au=r._emscripten_bind_btFace___destroy___0=function(){return(au=r._emscripten_bind_btFace___destroy___0=r.asm.ij).apply(null,arguments)},su=r._emscripten_bind_btVector3Array_size_0=function(){return(su=r._emscripten_bind_btVector3Array_size_0=r.asm.jj).apply(null,arguments)},lu=r._emscripten_bind_btVector3Array_at_1=function(){return(lu=r._emscripten_bind_btVector3Array_at_1=r.asm.kj).apply(null,arguments)},cu=r._emscripten_bind_btVector3Array___destroy___0=function(){return(cu=r._emscripten_bind_btVector3Array___destroy___0=r.asm.lj).apply(null,arguments)},uu=r._emscripten_bind_btFaceArray_size_0=function(){return(uu=r._emscripten_bind_btFaceArray_size_0=r.asm.mj).apply(null,arguments)},pu=r._emscripten_bind_btFaceArray_at_1=function(){return(pu=r._emscripten_bind_btFaceArray_at_1=r.asm.nj).apply(null,arguments)},hu=r._emscripten_bind_btFaceArray___destroy___0=function(){return(hu=r._emscripten_bind_btFaceArray___destroy___0=r.asm.oj).apply(null,arguments)},du=r._emscripten_bind_btConvexPolyhedron_get_m_vertices_0=function(){return(du=r._emscripten_bind_btConvexPolyhedron_get_m_vertices_0=r.asm.pj).apply(null,arguments)},_u=r._emscripten_bind_btConvexPolyhedron_set_m_vertices_1=function(){return(_u=r._emscripten_bind_btConvexPolyhedron_set_m_vertices_1=r.asm.qj).apply(null,arguments)},fu=r._emscripten_bind_btConvexPolyhedron_get_m_faces_0=function(){return(fu=r._emscripten_bind_btConvexPolyhedron_get_m_faces_0=r.asm.rj).apply(null,arguments)},mu=r._emscripten_bind_btConvexPolyhedron_set_m_faces_1=function(){return(mu=r._emscripten_bind_btConvexPolyhedron_set_m_faces_1=r.asm.sj).apply(null,arguments)},yu=r._emscripten_bind_btConvexPolyhedron___destroy___0=function(){return(yu=r._emscripten_bind_btConvexPolyhedron___destroy___0=r.asm.tj).apply(null,arguments)},gu=r._emscripten_bind_btConvexHullShape_btConvexHullShape_0=function(){return(gu=r._emscripten_bind_btConvexHullShape_btConvexHullShape_0=r.asm.uj).apply(null,arguments)},vu=r._emscripten_bind_btConvexHullShape_btConvexHullShape_1=function(){return(vu=r._emscripten_bind_btConvexHullShape_btConvexHullShape_1=r.asm.vj).apply(null,arguments)},bu=r._emscripten_bind_btConvexHullShape_btConvexHullShape_2=function(){return(bu=r._emscripten_bind_btConvexHullShape_btConvexHullShape_2=r.asm.wj).apply(null,arguments)},xu=r._emscripten_bind_btConvexHullShape_addPoint_1=function(){return(xu=r._emscripten_bind_btConvexHullShape_addPoint_1=r.asm.xj).apply(null,arguments)},Su=r._emscripten_bind_btConvexHullShape_addPoint_2=function(){return(Su=r._emscripten_bind_btConvexHullShape_addPoint_2=r.asm.yj).apply(null,arguments)},wu=r._emscripten_bind_btConvexHullShape_setMargin_1=function(){return(wu=r._emscripten_bind_btConvexHullShape_setMargin_1=r.asm.zj).apply(null,arguments)},Mu=r._emscripten_bind_btConvexHullShape_getMargin_0=function(){return(Mu=r._emscripten_bind_btConvexHullShape_getMargin_0=r.asm.Aj).apply(null,arguments)},Tu=r._emscripten_bind_btConvexHullShape_getNumVertices_0=function(){return(Tu=r._emscripten_bind_btConvexHullShape_getNumVertices_0=r.asm.Bj).apply(null,arguments)},Cu=r._emscripten_bind_btConvexHullShape_initializePolyhedralFeatures_1=function(){return(Cu=r._emscripten_bind_btConvexHullShape_initializePolyhedralFeatures_1=r.asm.Cj).apply(null,arguments)},Eu=r._emscripten_bind_btConvexHullShape_recalcLocalAabb_0=function(){return(Eu=r._emscripten_bind_btConvexHullShape_recalcLocalAabb_0=r.asm.Dj).apply(null,arguments)},Au=r._emscripten_bind_btConvexHullShape_getConvexPolyhedron_0=function(){return(Au=r._emscripten_bind_btConvexHullShape_getConvexPolyhedron_0=r.asm.Ej).apply(null,arguments)},Ru=r._emscripten_bind_btConvexHullShape_setLocalScaling_1=function(){return(Ru=r._emscripten_bind_btConvexHullShape_setLocalScaling_1=r.asm.Fj).apply(null,arguments)},Lu=r._emscripten_bind_btConvexHullShape_getLocalScaling_0=function(){return(Lu=r._emscripten_bind_btConvexHullShape_getLocalScaling_0=r.asm.Gj).apply(null,arguments)},Pu=r._emscripten_bind_btConvexHullShape_calculateLocalInertia_2=function(){return(Pu=r._emscripten_bind_btConvexHullShape_calculateLocalInertia_2=r.asm.Hj).apply(null,arguments)},Du=r._emscripten_bind_btConvexHullShape___destroy___0=function(){return(Du=r._emscripten_bind_btConvexHullShape___destroy___0=r.asm.Ij).apply(null,arguments)},Iu=r._emscripten_bind_btShapeHull_btShapeHull_1=function(){return(Iu=r._emscripten_bind_btShapeHull_btShapeHull_1=r.asm.Jj).apply(null,arguments)},ku=r._emscripten_bind_btShapeHull_buildHull_1=function(){return(ku=r._emscripten_bind_btShapeHull_buildHull_1=r.asm.Kj).apply(null,arguments)},Ou=r._emscripten_bind_btShapeHull_numVertices_0=function(){return(Ou=r._emscripten_bind_btShapeHull_numVertices_0=r.asm.Lj).apply(null,arguments)},Bu=r._emscripten_bind_btShapeHull_getVertexPointer_0=function(){return(Bu=r._emscripten_bind_btShapeHull_getVertexPointer_0=r.asm.Mj).apply(null,arguments)},ju=r._emscripten_bind_btShapeHull___destroy___0=function(){return(ju=r._emscripten_bind_btShapeHull___destroy___0=r.asm.Nj).apply(null,arguments)},Fu=r._emscripten_bind_btCompoundShape_btCompoundShape_0=function(){return(Fu=r._emscripten_bind_btCompoundShape_btCompoundShape_0=r.asm.Oj).apply(null,arguments)},Nu=r._emscripten_bind_btCompoundShape_btCompoundShape_1=function(){return(Nu=r._emscripten_bind_btCompoundShape_btCompoundShape_1=r.asm.Pj).apply(null,arguments)},zu=r._emscripten_bind_btCompoundShape_addChildShape_2=function(){return(zu=r._emscripten_bind_btCompoundShape_addChildShape_2=r.asm.Qj).apply(null,arguments)},Hu=r._emscripten_bind_btCompoundShape_removeChildShape_1=function(){return(Hu=r._emscripten_bind_btCompoundShape_removeChildShape_1=r.asm.Rj).apply(null,arguments)},Uu=r._emscripten_bind_btCompoundShape_removeChildShapeByIndex_1=function(){return(Uu=r._emscripten_bind_btCompoundShape_removeChildShapeByIndex_1=r.asm.Sj).apply(null,arguments)},Wu=r._emscripten_bind_btCompoundShape_getNumChildShapes_0=function(){return(Wu=r._emscripten_bind_btCompoundShape_getNumChildShapes_0=r.asm.Tj).apply(null,arguments)},Gu=r._emscripten_bind_btCompoundShape_getChildShape_1=function(){return(Gu=r._emscripten_bind_btCompoundShape_getChildShape_1=r.asm.Uj).apply(null,arguments)},Vu=r._emscripten_bind_btCompoundShape_updateChildTransform_2=function(){return(Vu=r._emscripten_bind_btCompoundShape_updateChildTransform_2=r.asm.Vj).apply(null,arguments)},qu=r._emscripten_bind_btCompoundShape_updateChildTransform_3=function(){return(qu=r._emscripten_bind_btCompoundShape_updateChildTransform_3=r.asm.Wj).apply(null,arguments)},Xu=r._emscripten_bind_btCompoundShape_setMargin_1=function(){return(Xu=r._emscripten_bind_btCompoundShape_setMargin_1=r.asm.Xj).apply(null,arguments)},Yu=r._emscripten_bind_btCompoundShape_getMargin_0=function(){return(Yu=r._emscripten_bind_btCompoundShape_getMargin_0=r.asm.Yj).apply(null,arguments)},Zu=r._emscripten_bind_btCompoundShape_setLocalScaling_1=function(){return(Zu=r._emscripten_bind_btCompoundShape_setLocalScaling_1=r.asm.Zj).apply(null,arguments)},Ju=r._emscripten_bind_btCompoundShape_getLocalScaling_0=function(){return(Ju=r._emscripten_bind_btCompoundShape_getLocalScaling_0=r.asm._j).apply(null,arguments)},Ku=r._emscripten_bind_btCompoundShape_calculateLocalInertia_2=function(){return(Ku=r._emscripten_bind_btCompoundShape_calculateLocalInertia_2=r.asm.$j).apply(null,arguments)},Qu=r._emscripten_bind_btCompoundShape___destroy___0=function(){return(Qu=r._emscripten_bind_btCompoundShape___destroy___0=r.asm.ak).apply(null,arguments)},$u=r._emscripten_bind_btIndexedMesh_get_m_numTriangles_0=function(){return($u=r._emscripten_bind_btIndexedMesh_get_m_numTriangles_0=r.asm.bk).apply(null,arguments)},tp=r._emscripten_bind_btIndexedMesh_set_m_numTriangles_1=function(){return(tp=r._emscripten_bind_btIndexedMesh_set_m_numTriangles_1=r.asm.ck).apply(null,arguments)},ep=r._emscripten_bind_btIndexedMesh___destroy___0=function(){return(ep=r._emscripten_bind_btIndexedMesh___destroy___0=r.asm.dk).apply(null,arguments)},np=r._emscripten_bind_btIndexedMeshArray_size_0=function(){return(np=r._emscripten_bind_btIndexedMeshArray_size_0=r.asm.ek).apply(null,arguments)},ip=r._emscripten_bind_btIndexedMeshArray_at_1=function(){return(ip=r._emscripten_bind_btIndexedMeshArray_at_1=r.asm.fk).apply(null,arguments)},rp=r._emscripten_bind_btIndexedMeshArray___destroy___0=function(){return(rp=r._emscripten_bind_btIndexedMeshArray___destroy___0=r.asm.gk).apply(null,arguments)},op=r._emscripten_bind_btTriangleMesh_btTriangleMesh_0=function(){return(op=r._emscripten_bind_btTriangleMesh_btTriangleMesh_0=r.asm.hk).apply(null,arguments)},ap=r._emscripten_bind_btTriangleMesh_btTriangleMesh_1=function(){return(ap=r._emscripten_bind_btTriangleMesh_btTriangleMesh_1=r.asm.ik).apply(null,arguments)},sp=r._emscripten_bind_btTriangleMesh_btTriangleMesh_2=function(){return(sp=r._emscripten_bind_btTriangleMesh_btTriangleMesh_2=r.asm.jk).apply(null,arguments)},lp=r._emscripten_bind_btTriangleMesh_addTriangle_3=function(){return(lp=r._emscripten_bind_btTriangleMesh_addTriangle_3=r.asm.kk).apply(null,arguments)},cp=r._emscripten_bind_btTriangleMesh_addTriangle_4=function(){return(cp=r._emscripten_bind_btTriangleMesh_addTriangle_4=r.asm.lk).apply(null,arguments)},up=r._emscripten_bind_btTriangleMesh_findOrAddVertex_2=function(){return(up=r._emscripten_bind_btTriangleMesh_findOrAddVertex_2=r.asm.mk).apply(null,arguments)},pp=r._emscripten_bind_btTriangleMesh_addIndex_1=function(){return(pp=r._emscripten_bind_btTriangleMesh_addIndex_1=r.asm.nk).apply(null,arguments)},hp=r._emscripten_bind_btTriangleMesh_getIndexedMeshArray_0=function(){return(hp=r._emscripten_bind_btTriangleMesh_getIndexedMeshArray_0=r.asm.ok).apply(null,arguments)},dp=r._emscripten_bind_btTriangleMesh_setScaling_1=function(){return(dp=r._emscripten_bind_btTriangleMesh_setScaling_1=r.asm.pk).apply(null,arguments)},_p=r._emscripten_bind_btTriangleMesh___destroy___0=function(){return(_p=r._emscripten_bind_btTriangleMesh___destroy___0=r.asm.qk).apply(null,arguments)},fp=r._emscripten_bind_btEmptyShape_btEmptyShape_0=function(){return(fp=r._emscripten_bind_btEmptyShape_btEmptyShape_0=r.asm.rk).apply(null,arguments)},mp=r._emscripten_bind_btEmptyShape_setLocalScaling_1=function(){return(mp=r._emscripten_bind_btEmptyShape_setLocalScaling_1=r.asm.sk).apply(null,arguments)},yp=r._emscripten_bind_btEmptyShape_getLocalScaling_0=function(){return(yp=r._emscripten_bind_btEmptyShape_getLocalScaling_0=r.asm.tk).apply(null,arguments)},gp=r._emscripten_bind_btEmptyShape_calculateLocalInertia_2=function(){return(gp=r._emscripten_bind_btEmptyShape_calculateLocalInertia_2=r.asm.uk).apply(null,arguments)},vp=r._emscripten_bind_btEmptyShape___destroy___0=function(){return(vp=r._emscripten_bind_btEmptyShape___destroy___0=r.asm.vk).apply(null,arguments)},bp=r._emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2=function(){return(bp=r._emscripten_bind_btStaticPlaneShape_btStaticPlaneShape_2=r.asm.wk).apply(null,arguments)},xp=r._emscripten_bind_btStaticPlaneShape_setLocalScaling_1=function(){return(xp=r._emscripten_bind_btStaticPlaneShape_setLocalScaling_1=r.asm.xk).apply(null,arguments)},Sp=r._emscripten_bind_btStaticPlaneShape_getLocalScaling_0=function(){return(Sp=r._emscripten_bind_btStaticPlaneShape_getLocalScaling_0=r.asm.yk).apply(null,arguments)},wp=r._emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2=function(){return(wp=r._emscripten_bind_btStaticPlaneShape_calculateLocalInertia_2=r.asm.zk).apply(null,arguments)},Mp=r._emscripten_bind_btStaticPlaneShape___destroy___0=function(){return(Mp=r._emscripten_bind_btStaticPlaneShape___destroy___0=r.asm.Ak).apply(null,arguments)},Tp=r._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2=function(){return(Tp=r._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_2=r.asm.Bk).apply(null,arguments)},Cp=r._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3=function(){return(Cp=r._emscripten_bind_btBvhTriangleMeshShape_btBvhTriangleMeshShape_3=r.asm.Ck).apply(null,arguments)},Ep=r._emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1=function(){return(Ep=r._emscripten_bind_btBvhTriangleMeshShape_setLocalScaling_1=r.asm.Dk).apply(null,arguments)},Ap=r._emscripten_bind_btBvhTriangleMeshShape_getLocalScaling_0=function(){return(Ap=r._emscripten_bind_btBvhTriangleMeshShape_getLocalScaling_0=r.asm.Ek).apply(null,arguments)},Rp=r._emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2=function(){return(Rp=r._emscripten_bind_btBvhTriangleMeshShape_calculateLocalInertia_2=r.asm.Fk).apply(null,arguments)},Lp=r._emscripten_bind_btBvhTriangleMeshShape___destroy___0=function(){return(Lp=r._emscripten_bind_btBvhTriangleMeshShape___destroy___0=r.asm.Gk).apply(null,arguments)},Pp=r._emscripten_bind_btHeightfieldTerrainShape_btHeightfieldTerrainShape_9=function(){return(Pp=r._emscripten_bind_btHeightfieldTerrainShape_btHeightfieldTerrainShape_9=r.asm.Hk).apply(null,arguments)},Dp=r._emscripten_bind_btHeightfieldTerrainShape_setMargin_1=function(){return(Dp=r._emscripten_bind_btHeightfieldTerrainShape_setMargin_1=r.asm.Ik).apply(null,arguments)},Ip=r._emscripten_bind_btHeightfieldTerrainShape_getMargin_0=function(){return(Ip=r._emscripten_bind_btHeightfieldTerrainShape_getMargin_0=r.asm.Jk).apply(null,arguments)},kp=r._emscripten_bind_btHeightfieldTerrainShape_setLocalScaling_1=function(){return(kp=r._emscripten_bind_btHeightfieldTerrainShape_setLocalScaling_1=r.asm.Kk).apply(null,arguments)},Op=r._emscripten_bind_btHeightfieldTerrainShape_getLocalScaling_0=function(){return(Op=r._emscripten_bind_btHeightfieldTerrainShape_getLocalScaling_0=r.asm.Lk).apply(null,arguments)},Bp=r._emscripten_bind_btHeightfieldTerrainShape_calculateLocalInertia_2=function(){return(Bp=r._emscripten_bind_btHeightfieldTerrainShape_calculateLocalInertia_2=r.asm.Mk).apply(null,arguments)},jp=r._emscripten_bind_btHeightfieldTerrainShape___destroy___0=function(){return(jp=r._emscripten_bind_btHeightfieldTerrainShape___destroy___0=r.asm.Nk).apply(null,arguments)},Fp=r._emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0=function(){return(Fp=r._emscripten_bind_btDefaultCollisionConstructionInfo_btDefaultCollisionConstructionInfo_0=r.asm.Ok).apply(null,arguments)},Np=r._emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0=function(){return(Np=r._emscripten_bind_btDefaultCollisionConstructionInfo___destroy___0=r.asm.Pk).apply(null,arguments)},zp=r._emscripten_bind_btPersistentManifold_btPersistentManifold_0=function(){return(zp=r._emscripten_bind_btPersistentManifold_btPersistentManifold_0=r.asm.Qk).apply(null,arguments)},Hp=r._emscripten_bind_btPersistentManifold_getBody0_0=function(){return(Hp=r._emscripten_bind_btPersistentManifold_getBody0_0=r.asm.Rk).apply(null,arguments)},Up=r._emscripten_bind_btPersistentManifold_getBody1_0=function(){return(Up=r._emscripten_bind_btPersistentManifold_getBody1_0=r.asm.Sk).apply(null,arguments)},Wp=r._emscripten_bind_btPersistentManifold_getNumContacts_0=function(){return(Wp=r._emscripten_bind_btPersistentManifold_getNumContacts_0=r.asm.Tk).apply(null,arguments)},Gp=r._emscripten_bind_btPersistentManifold_getContactPoint_1=function(){return(Gp=r._emscripten_bind_btPersistentManifold_getContactPoint_1=r.asm.Uk).apply(null,arguments)},Vp=r._emscripten_bind_btPersistentManifold___destroy___0=function(){return(Vp=r._emscripten_bind_btPersistentManifold___destroy___0=r.asm.Vk).apply(null,arguments)},qp=r._emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1=function(){return(qp=r._emscripten_bind_btCollisionDispatcher_btCollisionDispatcher_1=r.asm.Wk).apply(null,arguments)},Xp=r._emscripten_bind_btCollisionDispatcher_getNumManifolds_0=function(){return(Xp=r._emscripten_bind_btCollisionDispatcher_getNumManifolds_0=r.asm.Xk).apply(null,arguments)},Yp=r._emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1=function(){return(Yp=r._emscripten_bind_btCollisionDispatcher_getManifoldByIndexInternal_1=r.asm.Yk).apply(null,arguments)},Zp=r._emscripten_bind_btCollisionDispatcher___destroy___0=function(){return(Zp=r._emscripten_bind_btCollisionDispatcher___destroy___0=r.asm.Zk).apply(null,arguments)},Jp=r._emscripten_bind_btOverlappingPairCallback___destroy___0=function(){return(Jp=r._emscripten_bind_btOverlappingPairCallback___destroy___0=r.asm._k).apply(null,arguments)},Kp=r._emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1=function(){return(Kp=r._emscripten_bind_btOverlappingPairCache_setInternalGhostPairCallback_1=r.asm.$k).apply(null,arguments)},Qp=r._emscripten_bind_btOverlappingPairCache_getNumOverlappingPairs_0=function(){return(Qp=r._emscripten_bind_btOverlappingPairCache_getNumOverlappingPairs_0=r.asm.al).apply(null,arguments)},$p=r._emscripten_bind_btOverlappingPairCache___destroy___0=function(){return($p=r._emscripten_bind_btOverlappingPairCache___destroy___0=r.asm.bl).apply(null,arguments)},th=r._emscripten_bind_btAxisSweep3_btAxisSweep3_2=function(){return(th=r._emscripten_bind_btAxisSweep3_btAxisSweep3_2=r.asm.cl).apply(null,arguments)},eh=r._emscripten_bind_btAxisSweep3_btAxisSweep3_3=function(){return(eh=r._emscripten_bind_btAxisSweep3_btAxisSweep3_3=r.asm.dl).apply(null,arguments)},nh=r._emscripten_bind_btAxisSweep3_btAxisSweep3_4=function(){return(nh=r._emscripten_bind_btAxisSweep3_btAxisSweep3_4=r.asm.el).apply(null,arguments)},ih=r._emscripten_bind_btAxisSweep3_btAxisSweep3_5=function(){return(ih=r._emscripten_bind_btAxisSweep3_btAxisSweep3_5=r.asm.fl).apply(null,arguments)},rh=r._emscripten_bind_btAxisSweep3___destroy___0=function(){return(rh=r._emscripten_bind_btAxisSweep3___destroy___0=r.asm.gl).apply(null,arguments)},oh=r._emscripten_bind_btBroadphaseInterface_getOverlappingPairCache_0=function(){return(oh=r._emscripten_bind_btBroadphaseInterface_getOverlappingPairCache_0=r.asm.hl).apply(null,arguments)},ah=r._emscripten_bind_btBroadphaseInterface___destroy___0=function(){return(ah=r._emscripten_bind_btBroadphaseInterface___destroy___0=r.asm.il).apply(null,arguments)},sh=r._emscripten_bind_btCollisionConfiguration___destroy___0=function(){return(sh=r._emscripten_bind_btCollisionConfiguration___destroy___0=r.asm.jl).apply(null,arguments)},lh=r._emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0=function(){return(lh=r._emscripten_bind_btDbvtBroadphase_btDbvtBroadphase_0=r.asm.kl).apply(null,arguments)},ch=r._emscripten_bind_btDbvtBroadphase___destroy___0=function(){return(ch=r._emscripten_bind_btDbvtBroadphase___destroy___0=r.asm.ll).apply(null,arguments)},uh=r._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterGroup_0=function(){return(uh=r._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterGroup_0=r.asm.ml).apply(null,arguments)},ph=r._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterGroup_1=function(){return(ph=r._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterGroup_1=r.asm.nl).apply(null,arguments)},hh=r._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterMask_0=function(){return(hh=r._emscripten_bind_btBroadphaseProxy_get_m_collisionFilterMask_0=r.asm.ol).apply(null,arguments)},dh=r._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterMask_1=function(){return(dh=r._emscripten_bind_btBroadphaseProxy_set_m_collisionFilterMask_1=r.asm.pl).apply(null,arguments)},_h=r._emscripten_bind_btBroadphaseProxy___destroy___0=function(){return(_h=r._emscripten_bind_btBroadphaseProxy___destroy___0=r.asm.ql).apply(null,arguments)},fh=r._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3=function(){return(fh=r._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_3=r.asm.rl).apply(null,arguments)},mh=r._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4=function(){return(mh=r._emscripten_bind_btRigidBodyConstructionInfo_btRigidBodyConstructionInfo_4=r.asm.sl).apply(null,arguments)},yh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0=function(){return(yh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearDamping_0=r.asm.tl).apply(null,arguments)},gh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1=function(){return(gh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearDamping_1=r.asm.ul).apply(null,arguments)},vh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0=function(){return(vh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularDamping_0=r.asm.vl).apply(null,arguments)},bh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1=function(){return(bh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularDamping_1=r.asm.wl).apply(null,arguments)},xh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0=function(){return(xh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_friction_0=r.asm.xl).apply(null,arguments)},Sh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1=function(){return(Sh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_friction_1=r.asm.yl).apply(null,arguments)},wh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0=function(){return(wh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_rollingFriction_0=r.asm.zl).apply(null,arguments)},Mh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1=function(){return(Mh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_rollingFriction_1=r.asm.Al).apply(null,arguments)},Th=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0=function(){return(Th=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_restitution_0=r.asm.Bl).apply(null,arguments)},Ch=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1=function(){return(Ch=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_restitution_1=r.asm.Cl).apply(null,arguments)},Eh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0=function(){return(Eh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_linearSleepingThreshold_0=r.asm.Dl).apply(null,arguments)},Ah=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1=function(){return(Ah=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_linearSleepingThreshold_1=r.asm.El).apply(null,arguments)},Rh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0=function(){return(Rh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_angularSleepingThreshold_0=r.asm.Fl).apply(null,arguments)},Lh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1=function(){return(Lh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_angularSleepingThreshold_1=r.asm.Gl).apply(null,arguments)},Ph=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0=function(){return(Ph=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDamping_0=r.asm.Hl).apply(null,arguments)},Dh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1=function(){return(Dh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDamping_1=r.asm.Il).apply(null,arguments)},Ih=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0=function(){return(Ih=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalDampingFactor_0=r.asm.Jl).apply(null,arguments)},kh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1=function(){return(kh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalDampingFactor_1=r.asm.Kl).apply(null,arguments)},Oh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0=function(){return(Oh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalLinearDampingThresholdSqr_0=r.asm.Ll).apply(null,arguments)},Bh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1=function(){return(Bh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalLinearDampingThresholdSqr_1=r.asm.Ml).apply(null,arguments)},jh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0=function(){return(jh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingThresholdSqr_0=r.asm.Nl).apply(null,arguments)},Fh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1=function(){return(Fh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingThresholdSqr_1=r.asm.Ol).apply(null,arguments)},Nh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0=function(){return(Nh=r._emscripten_bind_btRigidBodyConstructionInfo_get_m_additionalAngularDampingFactor_0=r.asm.Pl).apply(null,arguments)},zh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1=function(){return(zh=r._emscripten_bind_btRigidBodyConstructionInfo_set_m_additionalAngularDampingFactor_1=r.asm.Ql).apply(null,arguments)},Hh=r._emscripten_bind_btRigidBodyConstructionInfo___destroy___0=function(){return(Hh=r._emscripten_bind_btRigidBodyConstructionInfo___destroy___0=r.asm.Rl).apply(null,arguments)},Uh=r._emscripten_bind_btRigidBody_btRigidBody_1=function(){return(Uh=r._emscripten_bind_btRigidBody_btRigidBody_1=r.asm.Sl).apply(null,arguments)},Wh=r._emscripten_bind_btRigidBody_getCenterOfMassTransform_0=function(){return(Wh=r._emscripten_bind_btRigidBody_getCenterOfMassTransform_0=r.asm.Tl).apply(null,arguments)},Gh=r._emscripten_bind_btRigidBody_setCenterOfMassTransform_1=function(){return(Gh=r._emscripten_bind_btRigidBody_setCenterOfMassTransform_1=r.asm.Ul).apply(null,arguments)},Vh=r._emscripten_bind_btRigidBody_setSleepingThresholds_2=function(){return(Vh=r._emscripten_bind_btRigidBody_setSleepingThresholds_2=r.asm.Vl).apply(null,arguments)},qh=r._emscripten_bind_btRigidBody_getLinearDamping_0=function(){return(qh=r._emscripten_bind_btRigidBody_getLinearDamping_0=r.asm.Wl).apply(null,arguments)},Xh=r._emscripten_bind_btRigidBody_getAngularDamping_0=function(){return(Xh=r._emscripten_bind_btRigidBody_getAngularDamping_0=r.asm.Xl).apply(null,arguments)},Yh=r._emscripten_bind_btRigidBody_setDamping_2=function(){return(Yh=r._emscripten_bind_btRigidBody_setDamping_2=r.asm.Yl).apply(null,arguments)},Zh=r._emscripten_bind_btRigidBody_setMassProps_2=function(){return(Zh=r._emscripten_bind_btRigidBody_setMassProps_2=r.asm.Zl).apply(null,arguments)},Jh=r._emscripten_bind_btRigidBody_getLinearFactor_0=function(){return(Jh=r._emscripten_bind_btRigidBody_getLinearFactor_0=r.asm._l).apply(null,arguments)},Kh=r._emscripten_bind_btRigidBody_setLinearFactor_1=function(){return(Kh=r._emscripten_bind_btRigidBody_setLinearFactor_1=r.asm.$l).apply(null,arguments)},Qh=r._emscripten_bind_btRigidBody_applyTorque_1=function(){return(Qh=r._emscripten_bind_btRigidBody_applyTorque_1=r.asm.am).apply(null,arguments)},$h=r._emscripten_bind_btRigidBody_applyLocalTorque_1=function(){return($h=r._emscripten_bind_btRigidBody_applyLocalTorque_1=r.asm.bm).apply(null,arguments)},td=r._emscripten_bind_btRigidBody_applyForce_2=function(){return(td=r._emscripten_bind_btRigidBody_applyForce_2=r.asm.cm).apply(null,arguments)},ed=r._emscripten_bind_btRigidBody_applyCentralForce_1=function(){return(ed=r._emscripten_bind_btRigidBody_applyCentralForce_1=r.asm.dm).apply(null,arguments)},nd=r._emscripten_bind_btRigidBody_applyCentralLocalForce_1=function(){return(nd=r._emscripten_bind_btRigidBody_applyCentralLocalForce_1=r.asm.em).apply(null,arguments)},id=r._emscripten_bind_btRigidBody_applyTorqueImpulse_1=function(){return(id=r._emscripten_bind_btRigidBody_applyTorqueImpulse_1=r.asm.fm).apply(null,arguments)},rd=r._emscripten_bind_btRigidBody_applyImpulse_2=function(){return(rd=r._emscripten_bind_btRigidBody_applyImpulse_2=r.asm.gm).apply(null,arguments)},od=r._emscripten_bind_btRigidBody_applyCentralImpulse_1=function(){return(od=r._emscripten_bind_btRigidBody_applyCentralImpulse_1=r.asm.hm).apply(null,arguments)},ad=r._emscripten_bind_btRigidBody_updateInertiaTensor_0=function(){return(ad=r._emscripten_bind_btRigidBody_updateInertiaTensor_0=r.asm.im).apply(null,arguments)},sd=r._emscripten_bind_btRigidBody_getLinearVelocity_0=function(){return(sd=r._emscripten_bind_btRigidBody_getLinearVelocity_0=r.asm.jm).apply(null,arguments)},ld=r._emscripten_bind_btRigidBody_getAngularVelocity_0=function(){return(ld=r._emscripten_bind_btRigidBody_getAngularVelocity_0=r.asm.km).apply(null,arguments)},cd=r._emscripten_bind_btRigidBody_setLinearVelocity_1=function(){return(cd=r._emscripten_bind_btRigidBody_setLinearVelocity_1=r.asm.lm).apply(null,arguments)},ud=r._emscripten_bind_btRigidBody_setAngularVelocity_1=function(){return(ud=r._emscripten_bind_btRigidBody_setAngularVelocity_1=r.asm.mm).apply(null,arguments)},pd=r._emscripten_bind_btRigidBody_getMotionState_0=function(){return(pd=r._emscripten_bind_btRigidBody_getMotionState_0=r.asm.nm).apply(null,arguments)},hd=r._emscripten_bind_btRigidBody_setMotionState_1=function(){return(hd=r._emscripten_bind_btRigidBody_setMotionState_1=r.asm.om).apply(null,arguments)},dd=r._emscripten_bind_btRigidBody_getAngularFactor_0=function(){return(dd=r._emscripten_bind_btRigidBody_getAngularFactor_0=r.asm.pm).apply(null,arguments)},_d=r._emscripten_bind_btRigidBody_setAngularFactor_1=function(){return(_d=r._emscripten_bind_btRigidBody_setAngularFactor_1=r.asm.qm).apply(null,arguments)},fd=r._emscripten_bind_btRigidBody_upcast_1=function(){return(fd=r._emscripten_bind_btRigidBody_upcast_1=r.asm.rm).apply(null,arguments)},md=r._emscripten_bind_btRigidBody_getAabb_2=function(){return(md=r._emscripten_bind_btRigidBody_getAabb_2=r.asm.sm).apply(null,arguments)},yd=r._emscripten_bind_btRigidBody_applyGravity_0=function(){return(yd=r._emscripten_bind_btRigidBody_applyGravity_0=r.asm.tm).apply(null,arguments)},gd=r._emscripten_bind_btRigidBody_getGravity_0=function(){return(gd=r._emscripten_bind_btRigidBody_getGravity_0=r.asm.um).apply(null,arguments)},vd=r._emscripten_bind_btRigidBody_setGravity_1=function(){return(vd=r._emscripten_bind_btRigidBody_setGravity_1=r.asm.vm).apply(null,arguments)},bd=r._emscripten_bind_btRigidBody_getBroadphaseProxy_0=function(){return(bd=r._emscripten_bind_btRigidBody_getBroadphaseProxy_0=r.asm.wm).apply(null,arguments)},xd=r._emscripten_bind_btRigidBody_clearForces_0=function(){return(xd=r._emscripten_bind_btRigidBody_clearForces_0=r.asm.xm).apply(null,arguments)},Sd=r._emscripten_bind_btRigidBody_setAnisotropicFriction_2=function(){return(Sd=r._emscripten_bind_btRigidBody_setAnisotropicFriction_2=r.asm.ym).apply(null,arguments)},wd=r._emscripten_bind_btRigidBody_getCollisionShape_0=function(){return(wd=r._emscripten_bind_btRigidBody_getCollisionShape_0=r.asm.zm).apply(null,arguments)},Md=r._emscripten_bind_btRigidBody_setContactProcessingThreshold_1=function(){return(Md=r._emscripten_bind_btRigidBody_setContactProcessingThreshold_1=r.asm.Am).apply(null,arguments)},Td=r._emscripten_bind_btRigidBody_setActivationState_1=function(){return(Td=r._emscripten_bind_btRigidBody_setActivationState_1=r.asm.Bm).apply(null,arguments)},Cd=r._emscripten_bind_btRigidBody_forceActivationState_1=function(){return(Cd=r._emscripten_bind_btRigidBody_forceActivationState_1=r.asm.Cm).apply(null,arguments)},Ed=r._emscripten_bind_btRigidBody_activate_0=function(){return(Ed=r._emscripten_bind_btRigidBody_activate_0=r.asm.Dm).apply(null,arguments)},Ad=r._emscripten_bind_btRigidBody_activate_1=function(){return(Ad=r._emscripten_bind_btRigidBody_activate_1=r.asm.Em).apply(null,arguments)},Rd=r._emscripten_bind_btRigidBody_isActive_0=function(){return(Rd=r._emscripten_bind_btRigidBody_isActive_0=r.asm.Fm).apply(null,arguments)},Ld=r._emscripten_bind_btRigidBody_isKinematicObject_0=function(){return(Ld=r._emscripten_bind_btRigidBody_isKinematicObject_0=r.asm.Gm).apply(null,arguments)},Pd=r._emscripten_bind_btRigidBody_isStaticObject_0=function(){return(Pd=r._emscripten_bind_btRigidBody_isStaticObject_0=r.asm.Hm).apply(null,arguments)},Dd=r._emscripten_bind_btRigidBody_isStaticOrKinematicObject_0=function(){return(Dd=r._emscripten_bind_btRigidBody_isStaticOrKinematicObject_0=r.asm.Im).apply(null,arguments)},Id=r._emscripten_bind_btRigidBody_getRestitution_0=function(){return(Id=r._emscripten_bind_btRigidBody_getRestitution_0=r.asm.Jm).apply(null,arguments)},kd=r._emscripten_bind_btRigidBody_getFriction_0=function(){return(kd=r._emscripten_bind_btRigidBody_getFriction_0=r.asm.Km).apply(null,arguments)},Od=r._emscripten_bind_btRigidBody_getRollingFriction_0=function(){return(Od=r._emscripten_bind_btRigidBody_getRollingFriction_0=r.asm.Lm).apply(null,arguments)},Bd=r._emscripten_bind_btRigidBody_setRestitution_1=function(){return(Bd=r._emscripten_bind_btRigidBody_setRestitution_1=r.asm.Mm).apply(null,arguments)},jd=r._emscripten_bind_btRigidBody_setFriction_1=function(){return(jd=r._emscripten_bind_btRigidBody_setFriction_1=r.asm.Nm).apply(null,arguments)},Fd=r._emscripten_bind_btRigidBody_setRollingFriction_1=function(){return(Fd=r._emscripten_bind_btRigidBody_setRollingFriction_1=r.asm.Om).apply(null,arguments)},Nd=r._emscripten_bind_btRigidBody_getWorldTransform_0=function(){return(Nd=r._emscripten_bind_btRigidBody_getWorldTransform_0=r.asm.Pm).apply(null,arguments)},zd=r._emscripten_bind_btRigidBody_getCollisionFlags_0=function(){return(zd=r._emscripten_bind_btRigidBody_getCollisionFlags_0=r.asm.Qm).apply(null,arguments)},Hd=r._emscripten_bind_btRigidBody_setCollisionFlags_1=function(){return(Hd=r._emscripten_bind_btRigidBody_setCollisionFlags_1=r.asm.Rm).apply(null,arguments)},Ud=r._emscripten_bind_btRigidBody_setWorldTransform_1=function(){return(Ud=r._emscripten_bind_btRigidBody_setWorldTransform_1=r.asm.Sm).apply(null,arguments)},Wd=r._emscripten_bind_btRigidBody_setCollisionShape_1=function(){return(Wd=r._emscripten_bind_btRigidBody_setCollisionShape_1=r.asm.Tm).apply(null,arguments)},Gd=r._emscripten_bind_btRigidBody_setCcdMotionThreshold_1=function(){return(Gd=r._emscripten_bind_btRigidBody_setCcdMotionThreshold_1=r.asm.Um).apply(null,arguments)},Vd=r._emscripten_bind_btRigidBody_setCcdSweptSphereRadius_1=function(){return(Vd=r._emscripten_bind_btRigidBody_setCcdSweptSphereRadius_1=r.asm.Vm).apply(null,arguments)},qd=r._emscripten_bind_btRigidBody_getUserIndex_0=function(){return(qd=r._emscripten_bind_btRigidBody_getUserIndex_0=r.asm.Wm).apply(null,arguments)},Xd=r._emscripten_bind_btRigidBody_setUserIndex_1=function(){return(Xd=r._emscripten_bind_btRigidBody_setUserIndex_1=r.asm.Xm).apply(null,arguments)},Yd=r._emscripten_bind_btRigidBody_getUserPointer_0=function(){return(Yd=r._emscripten_bind_btRigidBody_getUserPointer_0=r.asm.Ym).apply(null,arguments)},Zd=r._emscripten_bind_btRigidBody_setUserPointer_1=function(){return(Zd=r._emscripten_bind_btRigidBody_setUserPointer_1=r.asm.Zm).apply(null,arguments)},Jd=r._emscripten_bind_btRigidBody_getBroadphaseHandle_0=function(){return(Jd=r._emscripten_bind_btRigidBody_getBroadphaseHandle_0=r.asm._m).apply(null,arguments)},Kd=r._emscripten_bind_btRigidBody___destroy___0=function(){return(Kd=r._emscripten_bind_btRigidBody___destroy___0=r.asm.$m).apply(null,arguments)},Qd=r._emscripten_bind_btConstraintSetting_btConstraintSetting_0=function(){return(Qd=r._emscripten_bind_btConstraintSetting_btConstraintSetting_0=r.asm.an).apply(null,arguments)},$d=r._emscripten_bind_btConstraintSetting_get_m_tau_0=function(){return($d=r._emscripten_bind_btConstraintSetting_get_m_tau_0=r.asm.bn).apply(null,arguments)},t_=r._emscripten_bind_btConstraintSetting_set_m_tau_1=function(){return(t_=r._emscripten_bind_btConstraintSetting_set_m_tau_1=r.asm.cn).apply(null,arguments)},e_=r._emscripten_bind_btConstraintSetting_get_m_damping_0=function(){return(e_=r._emscripten_bind_btConstraintSetting_get_m_damping_0=r.asm.dn).apply(null,arguments)},n_=r._emscripten_bind_btConstraintSetting_set_m_damping_1=function(){return(n_=r._emscripten_bind_btConstraintSetting_set_m_damping_1=r.asm.en).apply(null,arguments)},i_=r._emscripten_bind_btConstraintSetting_get_m_impulseClamp_0=function(){return(i_=r._emscripten_bind_btConstraintSetting_get_m_impulseClamp_0=r.asm.fn).apply(null,arguments)},r_=r._emscripten_bind_btConstraintSetting_set_m_impulseClamp_1=function(){return(r_=r._emscripten_bind_btConstraintSetting_set_m_impulseClamp_1=r.asm.gn).apply(null,arguments)},o_=r._emscripten_bind_btConstraintSetting___destroy___0=function(){return(o_=r._emscripten_bind_btConstraintSetting___destroy___0=r.asm.hn).apply(null,arguments)},a_=r._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2=function(){return(a_=r._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_2=r.asm.jn).apply(null,arguments)},s_=r._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4=function(){return(s_=r._emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_4=r.asm.kn).apply(null,arguments)},l_=r._emscripten_bind_btPoint2PointConstraint_setPivotA_1=function(){return(l_=r._emscripten_bind_btPoint2PointConstraint_setPivotA_1=r.asm.ln).apply(null,arguments)},c_=r._emscripten_bind_btPoint2PointConstraint_setPivotB_1=function(){return(c_=r._emscripten_bind_btPoint2PointConstraint_setPivotB_1=r.asm.mn).apply(null,arguments)},u_=r._emscripten_bind_btPoint2PointConstraint_getPivotInA_0=function(){return(u_=r._emscripten_bind_btPoint2PointConstraint_getPivotInA_0=r.asm.nn).apply(null,arguments)},p_=r._emscripten_bind_btPoint2PointConstraint_getPivotInB_0=function(){return(p_=r._emscripten_bind_btPoint2PointConstraint_getPivotInB_0=r.asm.on).apply(null,arguments)},h_=r._emscripten_bind_btPoint2PointConstraint_enableFeedback_1=function(){return(h_=r._emscripten_bind_btPoint2PointConstraint_enableFeedback_1=r.asm.pn).apply(null,arguments)},d_=r._emscripten_bind_btPoint2PointConstraint_getBreakingImpulseThreshold_0=function(){return(d_=r._emscripten_bind_btPoint2PointConstraint_getBreakingImpulseThreshold_0=r.asm.qn).apply(null,arguments)},__=r._emscripten_bind_btPoint2PointConstraint_setBreakingImpulseThreshold_1=function(){return(__=r._emscripten_bind_btPoint2PointConstraint_setBreakingImpulseThreshold_1=r.asm.rn).apply(null,arguments)},f_=r._emscripten_bind_btPoint2PointConstraint_getParam_2=function(){return(f_=r._emscripten_bind_btPoint2PointConstraint_getParam_2=r.asm.sn).apply(null,arguments)},m_=r._emscripten_bind_btPoint2PointConstraint_setParam_3=function(){return(m_=r._emscripten_bind_btPoint2PointConstraint_setParam_3=r.asm.tn).apply(null,arguments)},y_=r._emscripten_bind_btPoint2PointConstraint_get_m_setting_0=function(){return(y_=r._emscripten_bind_btPoint2PointConstraint_get_m_setting_0=r.asm.un).apply(null,arguments)},g_=r._emscripten_bind_btPoint2PointConstraint_set_m_setting_1=function(){return(g_=r._emscripten_bind_btPoint2PointConstraint_set_m_setting_1=r.asm.vn).apply(null,arguments)},v_=r._emscripten_bind_btPoint2PointConstraint___destroy___0=function(){return(v_=r._emscripten_bind_btPoint2PointConstraint___destroy___0=r.asm.wn).apply(null,arguments)},b_=r._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_3=function(){return(b_=r._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_3=r.asm.xn).apply(null,arguments)},x_=r._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_5=function(){return(x_=r._emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_5=r.asm.yn).apply(null,arguments)},S_=r._emscripten_bind_btGeneric6DofSpringConstraint_enableSpring_2=function(){return(S_=r._emscripten_bind_btGeneric6DofSpringConstraint_enableSpring_2=r.asm.zn).apply(null,arguments)},w_=r._emscripten_bind_btGeneric6DofSpringConstraint_setStiffness_2=function(){return(w_=r._emscripten_bind_btGeneric6DofSpringConstraint_setStiffness_2=r.asm.An).apply(null,arguments)},M_=r._emscripten_bind_btGeneric6DofSpringConstraint_setDamping_2=function(){return(M_=r._emscripten_bind_btGeneric6DofSpringConstraint_setDamping_2=r.asm.Bn).apply(null,arguments)},T_=r._emscripten_bind_btGeneric6DofSpringConstraint_setEquilibriumPoint_0=function(){return(T_=r._emscripten_bind_btGeneric6DofSpringConstraint_setEquilibriumPoint_0=r.asm.Cn).apply(null,arguments)},C_=r._emscripten_bind_btGeneric6DofSpringConstraint_setEquilibriumPoint_1=function(){return(C_=r._emscripten_bind_btGeneric6DofSpringConstraint_setEquilibriumPoint_1=r.asm.Dn).apply(null,arguments)},E_=r._emscripten_bind_btGeneric6DofSpringConstraint_setEquilibriumPoint_2=function(){return(E_=r._emscripten_bind_btGeneric6DofSpringConstraint_setEquilibriumPoint_2=r.asm.En).apply(null,arguments)},A_=r._emscripten_bind_btGeneric6DofSpringConstraint_setLinearLowerLimit_1=function(){return(A_=r._emscripten_bind_btGeneric6DofSpringConstraint_setLinearLowerLimit_1=r.asm.Fn).apply(null,arguments)},R_=r._emscripten_bind_btGeneric6DofSpringConstraint_setLinearUpperLimit_1=function(){return(R_=r._emscripten_bind_btGeneric6DofSpringConstraint_setLinearUpperLimit_1=r.asm.Gn).apply(null,arguments)},L_=r._emscripten_bind_btGeneric6DofSpringConstraint_setAngularLowerLimit_1=function(){return(L_=r._emscripten_bind_btGeneric6DofSpringConstraint_setAngularLowerLimit_1=r.asm.Hn).apply(null,arguments)},P_=r._emscripten_bind_btGeneric6DofSpringConstraint_setAngularUpperLimit_1=function(){return(P_=r._emscripten_bind_btGeneric6DofSpringConstraint_setAngularUpperLimit_1=r.asm.In).apply(null,arguments)},D_=r._emscripten_bind_btGeneric6DofSpringConstraint_getFrameOffsetA_0=function(){return(D_=r._emscripten_bind_btGeneric6DofSpringConstraint_getFrameOffsetA_0=r.asm.Jn).apply(null,arguments)},I_=r._emscripten_bind_btGeneric6DofSpringConstraint_enableFeedback_1=function(){return(I_=r._emscripten_bind_btGeneric6DofSpringConstraint_enableFeedback_1=r.asm.Kn).apply(null,arguments)},k_=r._emscripten_bind_btGeneric6DofSpringConstraint_getBreakingImpulseThreshold_0=function(){return(k_=r._emscripten_bind_btGeneric6DofSpringConstraint_getBreakingImpulseThreshold_0=r.asm.Ln).apply(null,arguments)},O_=r._emscripten_bind_btGeneric6DofSpringConstraint_setBreakingImpulseThreshold_1=function(){return(O_=r._emscripten_bind_btGeneric6DofSpringConstraint_setBreakingImpulseThreshold_1=r.asm.Mn).apply(null,arguments)},B_=r._emscripten_bind_btGeneric6DofSpringConstraint_getParam_2=function(){return(B_=r._emscripten_bind_btGeneric6DofSpringConstraint_getParam_2=r.asm.Nn).apply(null,arguments)},j_=r._emscripten_bind_btGeneric6DofSpringConstraint_setParam_3=function(){return(j_=r._emscripten_bind_btGeneric6DofSpringConstraint_setParam_3=r.asm.On).apply(null,arguments)},F_=r._emscripten_bind_btGeneric6DofSpringConstraint___destroy___0=function(){return(F_=r._emscripten_bind_btGeneric6DofSpringConstraint___destroy___0=r.asm.Pn).apply(null,arguments)},N_=r._emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0=function(){return(N_=r._emscripten_bind_btSequentialImpulseConstraintSolver_btSequentialImpulseConstraintSolver_0=r.asm.Qn).apply(null,arguments)},z_=r._emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0=function(){return(z_=r._emscripten_bind_btSequentialImpulseConstraintSolver___destroy___0=r.asm.Rn).apply(null,arguments)},H_=r._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2=function(){return(H_=r._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_2=r.asm.Sn).apply(null,arguments)},U_=r._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4=function(){return(U_=r._emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_4=r.asm.Tn).apply(null,arguments)},W_=r._emscripten_bind_btConeTwistConstraint_setLimit_2=function(){return(W_=r._emscripten_bind_btConeTwistConstraint_setLimit_2=r.asm.Un).apply(null,arguments)},G_=r._emscripten_bind_btConeTwistConstraint_setAngularOnly_1=function(){return(G_=r._emscripten_bind_btConeTwistConstraint_setAngularOnly_1=r.asm.Vn).apply(null,arguments)},V_=r._emscripten_bind_btConeTwistConstraint_setDamping_1=function(){return(V_=r._emscripten_bind_btConeTwistConstraint_setDamping_1=r.asm.Wn).apply(null,arguments)},q_=r._emscripten_bind_btConeTwistConstraint_enableMotor_1=function(){return(q_=r._emscripten_bind_btConeTwistConstraint_enableMotor_1=r.asm.Xn).apply(null,arguments)},X_=r._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1=function(){return(X_=r._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulse_1=r.asm.Yn).apply(null,arguments)},Y_=r._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1=function(){return(Y_=r._emscripten_bind_btConeTwistConstraint_setMaxMotorImpulseNormalized_1=r.asm.Zn).apply(null,arguments)},Z_=r._emscripten_bind_btConeTwistConstraint_setMotorTarget_1=function(){return(Z_=r._emscripten_bind_btConeTwistConstraint_setMotorTarget_1=r.asm._n).apply(null,arguments)},J_=r._emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1=function(){return(J_=r._emscripten_bind_btConeTwistConstraint_setMotorTargetInConstraintSpace_1=r.asm.$n).apply(null,arguments)},K_=r._emscripten_bind_btConeTwistConstraint_enableFeedback_1=function(){return(K_=r._emscripten_bind_btConeTwistConstraint_enableFeedback_1=r.asm.ao).apply(null,arguments)},Q_=r._emscripten_bind_btConeTwistConstraint_getBreakingImpulseThreshold_0=function(){return(Q_=r._emscripten_bind_btConeTwistConstraint_getBreakingImpulseThreshold_0=r.asm.bo).apply(null,arguments)},$_=r._emscripten_bind_btConeTwistConstraint_setBreakingImpulseThreshold_1=function(){return($_=r._emscripten_bind_btConeTwistConstraint_setBreakingImpulseThreshold_1=r.asm.co).apply(null,arguments)},tf=r._emscripten_bind_btConeTwistConstraint_getParam_2=function(){return(tf=r._emscripten_bind_btConeTwistConstraint_getParam_2=r.asm.eo).apply(null,arguments)},ef=r._emscripten_bind_btConeTwistConstraint_setParam_3=function(){return(ef=r._emscripten_bind_btConeTwistConstraint_setParam_3=r.asm.fo).apply(null,arguments)},nf=r._emscripten_bind_btConeTwistConstraint___destroy___0=function(){return(nf=r._emscripten_bind_btConeTwistConstraint___destroy___0=r.asm.go).apply(null,arguments)},rf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_2=function(){return(rf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_2=r.asm.ho).apply(null,arguments)},of=r._emscripten_bind_btHingeConstraint_btHingeConstraint_3=function(){return(of=r._emscripten_bind_btHingeConstraint_btHingeConstraint_3=r.asm.io).apply(null,arguments)},af=r._emscripten_bind_btHingeConstraint_btHingeConstraint_4=function(){return(af=r._emscripten_bind_btHingeConstraint_btHingeConstraint_4=r.asm.jo).apply(null,arguments)},sf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_5=function(){return(sf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_5=r.asm.ko).apply(null,arguments)},lf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_6=function(){return(lf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_6=r.asm.lo).apply(null,arguments)},cf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_7=function(){return(cf=r._emscripten_bind_btHingeConstraint_btHingeConstraint_7=r.asm.mo).apply(null,arguments)},uf=r._emscripten_bind_btHingeConstraint_setLimit_4=function(){return(uf=r._emscripten_bind_btHingeConstraint_setLimit_4=r.asm.no).apply(null,arguments)},pf=r._emscripten_bind_btHingeConstraint_setLimit_5=function(){return(pf=r._emscripten_bind_btHingeConstraint_setLimit_5=r.asm.oo).apply(null,arguments)},hf=r._emscripten_bind_btHingeConstraint_enableAngularMotor_3=function(){return(hf=r._emscripten_bind_btHingeConstraint_enableAngularMotor_3=r.asm.po).apply(null,arguments)},df=r._emscripten_bind_btHingeConstraint_setAngularOnly_1=function(){return(df=r._emscripten_bind_btHingeConstraint_setAngularOnly_1=r.asm.qo).apply(null,arguments)},_f=r._emscripten_bind_btHingeConstraint_enableMotor_1=function(){return(_f=r._emscripten_bind_btHingeConstraint_enableMotor_1=r.asm.ro).apply(null,arguments)},ff=r._emscripten_bind_btHingeConstraint_setMaxMotorImpulse_1=function(){return(ff=r._emscripten_bind_btHingeConstraint_setMaxMotorImpulse_1=r.asm.so).apply(null,arguments)},mf=r._emscripten_bind_btHingeConstraint_setMotorTarget_2=function(){return(mf=r._emscripten_bind_btHingeConstraint_setMotorTarget_2=r.asm.to).apply(null,arguments)},yf=r._emscripten_bind_btHingeConstraint_enableFeedback_1=function(){return(yf=r._emscripten_bind_btHingeConstraint_enableFeedback_1=r.asm.uo).apply(null,arguments)},gf=r._emscripten_bind_btHingeConstraint_getBreakingImpulseThreshold_0=function(){return(gf=r._emscripten_bind_btHingeConstraint_getBreakingImpulseThreshold_0=r.asm.vo).apply(null,arguments)},vf=r._emscripten_bind_btHingeConstraint_setBreakingImpulseThreshold_1=function(){return(vf=r._emscripten_bind_btHingeConstraint_setBreakingImpulseThreshold_1=r.asm.wo).apply(null,arguments)},bf=r._emscripten_bind_btHingeConstraint_getParam_2=function(){return(bf=r._emscripten_bind_btHingeConstraint_getParam_2=r.asm.xo).apply(null,arguments)},xf=r._emscripten_bind_btHingeConstraint_setParam_3=function(){return(xf=r._emscripten_bind_btHingeConstraint_setParam_3=r.asm.yo).apply(null,arguments)},Sf=r._emscripten_bind_btHingeConstraint___destroy___0=function(){return(Sf=r._emscripten_bind_btHingeConstraint___destroy___0=r.asm.zo).apply(null,arguments)},wf=r._emscripten_bind_btSliderConstraint_btSliderConstraint_3=function(){return(wf=r._emscripten_bind_btSliderConstraint_btSliderConstraint_3=r.asm.Ao).apply(null,arguments)},Mf=r._emscripten_bind_btSliderConstraint_btSliderConstraint_5=function(){return(Mf=r._emscripten_bind_btSliderConstraint_btSliderConstraint_5=r.asm.Bo).apply(null,arguments)},Tf=r._emscripten_bind_btSliderConstraint_setLowerLinLimit_1=function(){return(Tf=r._emscripten_bind_btSliderConstraint_setLowerLinLimit_1=r.asm.Co).apply(null,arguments)},Cf=r._emscripten_bind_btSliderConstraint_setUpperLinLimit_1=function(){return(Cf=r._emscripten_bind_btSliderConstraint_setUpperLinLimit_1=r.asm.Do).apply(null,arguments)},Ef=r._emscripten_bind_btSliderConstraint_setLowerAngLimit_1=function(){return(Ef=r._emscripten_bind_btSliderConstraint_setLowerAngLimit_1=r.asm.Eo).apply(null,arguments)},Af=r._emscripten_bind_btSliderConstraint_setUpperAngLimit_1=function(){return(Af=r._emscripten_bind_btSliderConstraint_setUpperAngLimit_1=r.asm.Fo).apply(null,arguments)},Rf=r._emscripten_bind_btSliderConstraint_enableFeedback_1=function(){return(Rf=r._emscripten_bind_btSliderConstraint_enableFeedback_1=r.asm.Go).apply(null,arguments)},Lf=r._emscripten_bind_btSliderConstraint_getBreakingImpulseThreshold_0=function(){return(Lf=r._emscripten_bind_btSliderConstraint_getBreakingImpulseThreshold_0=r.asm.Ho).apply(null,arguments)},Pf=r._emscripten_bind_btSliderConstraint_setBreakingImpulseThreshold_1=function(){return(Pf=r._emscripten_bind_btSliderConstraint_setBreakingImpulseThreshold_1=r.asm.Io).apply(null,arguments)},Df=r._emscripten_bind_btSliderConstraint_getParam_2=function(){return(Df=r._emscripten_bind_btSliderConstraint_getParam_2=r.asm.Jo).apply(null,arguments)},If=r._emscripten_bind_btSliderConstraint_setParam_3=function(){return(If=r._emscripten_bind_btSliderConstraint_setParam_3=r.asm.Ko).apply(null,arguments)},kf=r._emscripten_bind_btSliderConstraint___destroy___0=function(){return(kf=r._emscripten_bind_btSliderConstraint___destroy___0=r.asm.Lo).apply(null,arguments)},Of=r._emscripten_bind_btFixedConstraint_btFixedConstraint_4=function(){return(Of=r._emscripten_bind_btFixedConstraint_btFixedConstraint_4=r.asm.Mo).apply(null,arguments)},Bf=r._emscripten_bind_btFixedConstraint_enableFeedback_1=function(){return(Bf=r._emscripten_bind_btFixedConstraint_enableFeedback_1=r.asm.No).apply(null,arguments)},jf=r._emscripten_bind_btFixedConstraint_getBreakingImpulseThreshold_0=function(){return(jf=r._emscripten_bind_btFixedConstraint_getBreakingImpulseThreshold_0=r.asm.Oo).apply(null,arguments)},Ff=r._emscripten_bind_btFixedConstraint_setBreakingImpulseThreshold_1=function(){return(Ff=r._emscripten_bind_btFixedConstraint_setBreakingImpulseThreshold_1=r.asm.Po).apply(null,arguments)},Nf=r._emscripten_bind_btFixedConstraint_getParam_2=function(){return(Nf=r._emscripten_bind_btFixedConstraint_getParam_2=r.asm.Qo).apply(null,arguments)},zf=r._emscripten_bind_btFixedConstraint_setParam_3=function(){return(zf=r._emscripten_bind_btFixedConstraint_setParam_3=r.asm.Ro).apply(null,arguments)},Hf=r._emscripten_bind_btFixedConstraint___destroy___0=function(){return(Hf=r._emscripten_bind_btFixedConstraint___destroy___0=r.asm.So).apply(null,arguments)},Uf=r._emscripten_bind_btConstraintSolver___destroy___0=function(){return(Uf=r._emscripten_bind_btConstraintSolver___destroy___0=r.asm.To).apply(null,arguments)},Wf=r._emscripten_bind_btDispatcherInfo_get_m_timeStep_0=function(){return(Wf=r._emscripten_bind_btDispatcherInfo_get_m_timeStep_0=r.asm.Uo).apply(null,arguments)},Gf=r._emscripten_bind_btDispatcherInfo_set_m_timeStep_1=function(){return(Gf=r._emscripten_bind_btDispatcherInfo_set_m_timeStep_1=r.asm.Vo).apply(null,arguments)},Vf=r._emscripten_bind_btDispatcherInfo_get_m_stepCount_0=function(){return(Vf=r._emscripten_bind_btDispatcherInfo_get_m_stepCount_0=r.asm.Wo).apply(null,arguments)},qf=r._emscripten_bind_btDispatcherInfo_set_m_stepCount_1=function(){return(qf=r._emscripten_bind_btDispatcherInfo_set_m_stepCount_1=r.asm.Xo).apply(null,arguments)},Xf=r._emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0=function(){return(Xf=r._emscripten_bind_btDispatcherInfo_get_m_dispatchFunc_0=r.asm.Yo).apply(null,arguments)},Yf=r._emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1=function(){return(Yf=r._emscripten_bind_btDispatcherInfo_set_m_dispatchFunc_1=r.asm.Zo).apply(null,arguments)},Zf=r._emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0=function(){return(Zf=r._emscripten_bind_btDispatcherInfo_get_m_timeOfImpact_0=r.asm._o).apply(null,arguments)},Jf=r._emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1=function(){return(Jf=r._emscripten_bind_btDispatcherInfo_set_m_timeOfImpact_1=r.asm.$o).apply(null,arguments)},Kf=r._emscripten_bind_btDispatcherInfo_get_m_useContinuous_0=function(){return(Kf=r._emscripten_bind_btDispatcherInfo_get_m_useContinuous_0=r.asm.ap).apply(null,arguments)},Qf=r._emscripten_bind_btDispatcherInfo_set_m_useContinuous_1=function(){return(Qf=r._emscripten_bind_btDispatcherInfo_set_m_useContinuous_1=r.asm.bp).apply(null,arguments)},$f=r._emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0=function(){return($f=r._emscripten_bind_btDispatcherInfo_get_m_enableSatConvex_0=r.asm.cp).apply(null,arguments)},tm=r._emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1=function(){return(tm=r._emscripten_bind_btDispatcherInfo_set_m_enableSatConvex_1=r.asm.dp).apply(null,arguments)},em=r._emscripten_bind_btDispatcherInfo_get_m_enableSPU_0=function(){return(em=r._emscripten_bind_btDispatcherInfo_get_m_enableSPU_0=r.asm.ep).apply(null,arguments)},nm=r._emscripten_bind_btDispatcherInfo_set_m_enableSPU_1=function(){return(nm=r._emscripten_bind_btDispatcherInfo_set_m_enableSPU_1=r.asm.fp).apply(null,arguments)},im=r._emscripten_bind_btDispatcherInfo_get_m_useEpa_0=function(){return(im=r._emscripten_bind_btDispatcherInfo_get_m_useEpa_0=r.asm.gp).apply(null,arguments)},rm=r._emscripten_bind_btDispatcherInfo_set_m_useEpa_1=function(){return(rm=r._emscripten_bind_btDispatcherInfo_set_m_useEpa_1=r.asm.hp).apply(null,arguments)},om=r._emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0=function(){return(om=r._emscripten_bind_btDispatcherInfo_get_m_allowedCcdPenetration_0=r.asm.ip).apply(null,arguments)},am=r._emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1=function(){return(am=r._emscripten_bind_btDispatcherInfo_set_m_allowedCcdPenetration_1=r.asm.jp).apply(null,arguments)},sm=r._emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0=function(){return(sm=r._emscripten_bind_btDispatcherInfo_get_m_useConvexConservativeDistanceUtil_0=r.asm.kp).apply(null,arguments)},lm=r._emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1=function(){return(lm=r._emscripten_bind_btDispatcherInfo_set_m_useConvexConservativeDistanceUtil_1=r.asm.lp).apply(null,arguments)},cm=r._emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0=function(){return(cm=r._emscripten_bind_btDispatcherInfo_get_m_convexConservativeDistanceThreshold_0=r.asm.mp).apply(null,arguments)},um=r._emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1=function(){return(um=r._emscripten_bind_btDispatcherInfo_set_m_convexConservativeDistanceThreshold_1=r.asm.np).apply(null,arguments)},pm=r._emscripten_bind_btDispatcherInfo___destroy___0=function(){return(pm=r._emscripten_bind_btDispatcherInfo___destroy___0=r.asm.op).apply(null,arguments)},hm=r._emscripten_bind_btContactSolverInfo_get_m_splitImpulse_0=function(){return(hm=r._emscripten_bind_btContactSolverInfo_get_m_splitImpulse_0=r.asm.pp).apply(null,arguments)},dm=r._emscripten_bind_btContactSolverInfo_set_m_splitImpulse_1=function(){return(dm=r._emscripten_bind_btContactSolverInfo_set_m_splitImpulse_1=r.asm.qp).apply(null,arguments)},_m=r._emscripten_bind_btContactSolverInfo_get_m_splitImpulsePenetrationThreshold_0=function(){return(_m=r._emscripten_bind_btContactSolverInfo_get_m_splitImpulsePenetrationThreshold_0=r.asm.rp).apply(null,arguments)},fm=r._emscripten_bind_btContactSolverInfo_set_m_splitImpulsePenetrationThreshold_1=function(){return(fm=r._emscripten_bind_btContactSolverInfo_set_m_splitImpulsePenetrationThreshold_1=r.asm.sp).apply(null,arguments)},mm=r._emscripten_bind_btContactSolverInfo_get_m_numIterations_0=function(){return(mm=r._emscripten_bind_btContactSolverInfo_get_m_numIterations_0=r.asm.tp).apply(null,arguments)},ym=r._emscripten_bind_btContactSolverInfo_set_m_numIterations_1=function(){return(ym=r._emscripten_bind_btContactSolverInfo_set_m_numIterations_1=r.asm.up).apply(null,arguments)},gm=r._emscripten_bind_btContactSolverInfo___destroy___0=function(){return(gm=r._emscripten_bind_btContactSolverInfo___destroy___0=r.asm.vp).apply(null,arguments)},vm=r._emscripten_bind_btVehicleTuning_btVehicleTuning_0=function(){return(vm=r._emscripten_bind_btVehicleTuning_btVehicleTuning_0=r.asm.wp).apply(null,arguments)},bm=r._emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0=function(){return(bm=r._emscripten_bind_btVehicleTuning_get_m_suspensionStiffness_0=r.asm.xp).apply(null,arguments)},xm=r._emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1=function(){return(xm=r._emscripten_bind_btVehicleTuning_set_m_suspensionStiffness_1=r.asm.yp).apply(null,arguments)},Sm=r._emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0=function(){return(Sm=r._emscripten_bind_btVehicleTuning_get_m_suspensionCompression_0=r.asm.zp).apply(null,arguments)},wm=r._emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1=function(){return(wm=r._emscripten_bind_btVehicleTuning_set_m_suspensionCompression_1=r.asm.Ap).apply(null,arguments)},Mm=r._emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0=function(){return(Mm=r._emscripten_bind_btVehicleTuning_get_m_suspensionDamping_0=r.asm.Bp).apply(null,arguments)},Tm=r._emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1=function(){return(Tm=r._emscripten_bind_btVehicleTuning_set_m_suspensionDamping_1=r.asm.Cp).apply(null,arguments)},Cm=r._emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0=function(){return(Cm=r._emscripten_bind_btVehicleTuning_get_m_maxSuspensionTravelCm_0=r.asm.Dp).apply(null,arguments)},Em=r._emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1=function(){return(Em=r._emscripten_bind_btVehicleTuning_set_m_maxSuspensionTravelCm_1=r.asm.Ep).apply(null,arguments)},Am=r._emscripten_bind_btVehicleTuning_get_m_frictionSlip_0=function(){return(Am=r._emscripten_bind_btVehicleTuning_get_m_frictionSlip_0=r.asm.Fp).apply(null,arguments)},Rm=r._emscripten_bind_btVehicleTuning_set_m_frictionSlip_1=function(){return(Rm=r._emscripten_bind_btVehicleTuning_set_m_frictionSlip_1=r.asm.Gp).apply(null,arguments)},Lm=r._emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0=function(){return(Lm=r._emscripten_bind_btVehicleTuning_get_m_maxSuspensionForce_0=r.asm.Hp).apply(null,arguments)},Pm=r._emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1=function(){return(Pm=r._emscripten_bind_btVehicleTuning_set_m_maxSuspensionForce_1=r.asm.Ip).apply(null,arguments)},Dm=r._emscripten_bind_btVehicleRaycasterResult_get_m_hitPointInWorld_0=function(){return(Dm=r._emscripten_bind_btVehicleRaycasterResult_get_m_hitPointInWorld_0=r.asm.Jp).apply(null,arguments)},Im=r._emscripten_bind_btVehicleRaycasterResult_set_m_hitPointInWorld_1=function(){return(Im=r._emscripten_bind_btVehicleRaycasterResult_set_m_hitPointInWorld_1=r.asm.Kp).apply(null,arguments)},km=r._emscripten_bind_btVehicleRaycasterResult_get_m_hitNormalInWorld_0=function(){return(km=r._emscripten_bind_btVehicleRaycasterResult_get_m_hitNormalInWorld_0=r.asm.Lp).apply(null,arguments)},Om=r._emscripten_bind_btVehicleRaycasterResult_set_m_hitNormalInWorld_1=function(){return(Om=r._emscripten_bind_btVehicleRaycasterResult_set_m_hitNormalInWorld_1=r.asm.Mp).apply(null,arguments)},Bm=r._emscripten_bind_btVehicleRaycasterResult_get_m_distFraction_0=function(){return(Bm=r._emscripten_bind_btVehicleRaycasterResult_get_m_distFraction_0=r.asm.Np).apply(null,arguments)},jm=r._emscripten_bind_btVehicleRaycasterResult_set_m_distFraction_1=function(){return(jm=r._emscripten_bind_btVehicleRaycasterResult_set_m_distFraction_1=r.asm.Op).apply(null,arguments)},Fm=r._emscripten_bind_btVehicleRaycasterResult___destroy___0=function(){return(Fm=r._emscripten_bind_btVehicleRaycasterResult___destroy___0=r.asm.Pp).apply(null,arguments)},Nm=r._emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1=function(){return(Nm=r._emscripten_bind_btDefaultVehicleRaycaster_btDefaultVehicleRaycaster_1=r.asm.Qp).apply(null,arguments)},zm=r._emscripten_bind_btDefaultVehicleRaycaster_castRay_3=function(){return(zm=r._emscripten_bind_btDefaultVehicleRaycaster_castRay_3=r.asm.Rp).apply(null,arguments)},Hm=r._emscripten_bind_btDefaultVehicleRaycaster___destroy___0=function(){return(Hm=r._emscripten_bind_btDefaultVehicleRaycaster___destroy___0=r.asm.Sp).apply(null,arguments)},Um=r._emscripten_bind_RaycastInfo_get_m_contactNormalWS_0=function(){return(Um=r._emscripten_bind_RaycastInfo_get_m_contactNormalWS_0=r.asm.Tp).apply(null,arguments)},Wm=r._emscripten_bind_RaycastInfo_set_m_contactNormalWS_1=function(){return(Wm=r._emscripten_bind_RaycastInfo_set_m_contactNormalWS_1=r.asm.Up).apply(null,arguments)},Gm=r._emscripten_bind_RaycastInfo_get_m_contactPointWS_0=function(){return(Gm=r._emscripten_bind_RaycastInfo_get_m_contactPointWS_0=r.asm.Vp).apply(null,arguments)},Vm=r._emscripten_bind_RaycastInfo_set_m_contactPointWS_1=function(){return(Vm=r._emscripten_bind_RaycastInfo_set_m_contactPointWS_1=r.asm.Wp).apply(null,arguments)},qm=r._emscripten_bind_RaycastInfo_get_m_suspensionLength_0=function(){return(qm=r._emscripten_bind_RaycastInfo_get_m_suspensionLength_0=r.asm.Xp).apply(null,arguments)},Xm=r._emscripten_bind_RaycastInfo_set_m_suspensionLength_1=function(){return(Xm=r._emscripten_bind_RaycastInfo_set_m_suspensionLength_1=r.asm.Yp).apply(null,arguments)},Ym=r._emscripten_bind_RaycastInfo_get_m_hardPointWS_0=function(){return(Ym=r._emscripten_bind_RaycastInfo_get_m_hardPointWS_0=r.asm.Zp).apply(null,arguments)},Zm=r._emscripten_bind_RaycastInfo_set_m_hardPointWS_1=function(){return(Zm=r._emscripten_bind_RaycastInfo_set_m_hardPointWS_1=r.asm._p).apply(null,arguments)},Jm=r._emscripten_bind_RaycastInfo_get_m_wheelDirectionWS_0=function(){return(Jm=r._emscripten_bind_RaycastInfo_get_m_wheelDirectionWS_0=r.asm.$p).apply(null,arguments)},Km=r._emscripten_bind_RaycastInfo_set_m_wheelDirectionWS_1=function(){return(Km=r._emscripten_bind_RaycastInfo_set_m_wheelDirectionWS_1=r.asm.aq).apply(null,arguments)},Qm=r._emscripten_bind_RaycastInfo_get_m_wheelAxleWS_0=function(){return(Qm=r._emscripten_bind_RaycastInfo_get_m_wheelAxleWS_0=r.asm.bq).apply(null,arguments)},$m=r._emscripten_bind_RaycastInfo_set_m_wheelAxleWS_1=function(){return($m=r._emscripten_bind_RaycastInfo_set_m_wheelAxleWS_1=r.asm.cq).apply(null,arguments)},ty=r._emscripten_bind_RaycastInfo_get_m_isInContact_0=function(){return(ty=r._emscripten_bind_RaycastInfo_get_m_isInContact_0=r.asm.dq).apply(null,arguments)},ey=r._emscripten_bind_RaycastInfo_set_m_isInContact_1=function(){return(ey=r._emscripten_bind_RaycastInfo_set_m_isInContact_1=r.asm.eq).apply(null,arguments)},ny=r._emscripten_bind_RaycastInfo_get_m_groundObject_0=function(){return(ny=r._emscripten_bind_RaycastInfo_get_m_groundObject_0=r.asm.fq).apply(null,arguments)},iy=r._emscripten_bind_RaycastInfo_set_m_groundObject_1=function(){return(iy=r._emscripten_bind_RaycastInfo_set_m_groundObject_1=r.asm.gq).apply(null,arguments)},ry=r._emscripten_bind_RaycastInfo___destroy___0=function(){return(ry=r._emscripten_bind_RaycastInfo___destroy___0=r.asm.hq).apply(null,arguments)},oy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_chassisConnectionCS_0=function(){return(oy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_chassisConnectionCS_0=r.asm.iq).apply(null,arguments)},ay=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_chassisConnectionCS_1=function(){return(ay=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_chassisConnectionCS_1=r.asm.jq).apply(null,arguments)},sy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelDirectionCS_0=function(){return(sy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelDirectionCS_0=r.asm.kq).apply(null,arguments)},ly=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelDirectionCS_1=function(){return(ly=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelDirectionCS_1=r.asm.lq).apply(null,arguments)},cy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelAxleCS_0=function(){return(cy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelAxleCS_0=r.asm.mq).apply(null,arguments)},uy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelAxleCS_1=function(){return(uy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelAxleCS_1=r.asm.nq).apply(null,arguments)},py=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionRestLength_0=function(){return(py=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionRestLength_0=r.asm.oq).apply(null,arguments)},hy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionRestLength_1=function(){return(hy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionRestLength_1=r.asm.pq).apply(null,arguments)},dy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionTravelCm_0=function(){return(dy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionTravelCm_0=r.asm.qq).apply(null,arguments)},_y=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionTravelCm_1=function(){return(_y=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionTravelCm_1=r.asm.rq).apply(null,arguments)},fy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelRadius_0=function(){return(fy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelRadius_0=r.asm.sq).apply(null,arguments)},my=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelRadius_1=function(){return(my=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelRadius_1=r.asm.tq).apply(null,arguments)},yy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionStiffness_0=function(){return(yy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_suspensionStiffness_0=r.asm.uq).apply(null,arguments)},gy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionStiffness_1=function(){return(gy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_suspensionStiffness_1=r.asm.vq).apply(null,arguments)},vy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingCompression_0=function(){return(vy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingCompression_0=r.asm.wq).apply(null,arguments)},by=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingCompression_1=function(){return(by=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingCompression_1=r.asm.xq).apply(null,arguments)},xy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingRelaxation_0=function(){return(xy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_wheelsDampingRelaxation_0=r.asm.yq).apply(null,arguments)},Sy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingRelaxation_1=function(){return(Sy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_wheelsDampingRelaxation_1=r.asm.zq).apply(null,arguments)},wy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_frictionSlip_0=function(){return(wy=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_frictionSlip_0=r.asm.Aq).apply(null,arguments)},My=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_frictionSlip_1=function(){return(My=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_frictionSlip_1=r.asm.Bq).apply(null,arguments)},Ty=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionForce_0=function(){return(Ty=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_maxSuspensionForce_0=r.asm.Cq).apply(null,arguments)},Cy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionForce_1=function(){return(Cy=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_maxSuspensionForce_1=r.asm.Dq).apply(null,arguments)},Ey=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_bIsFrontWheel_0=function(){return(Ey=r._emscripten_bind_btWheelInfoConstructionInfo_get_m_bIsFrontWheel_0=r.asm.Eq).apply(null,arguments)},Ay=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_bIsFrontWheel_1=function(){return(Ay=r._emscripten_bind_btWheelInfoConstructionInfo_set_m_bIsFrontWheel_1=r.asm.Fq).apply(null,arguments)},Ry=r._emscripten_bind_btWheelInfoConstructionInfo___destroy___0=function(){return(Ry=r._emscripten_bind_btWheelInfoConstructionInfo___destroy___0=r.asm.Gq).apply(null,arguments)},Ly=r._emscripten_bind_btWheelInfo_btWheelInfo_1=function(){return(Ly=r._emscripten_bind_btWheelInfo_btWheelInfo_1=r.asm.Hq).apply(null,arguments)},Py=r._emscripten_bind_btWheelInfo_getSuspensionRestLength_0=function(){return(Py=r._emscripten_bind_btWheelInfo_getSuspensionRestLength_0=r.asm.Iq).apply(null,arguments)},Dy=r._emscripten_bind_btWheelInfo_updateWheel_2=function(){return(Dy=r._emscripten_bind_btWheelInfo_updateWheel_2=r.asm.Jq).apply(null,arguments)},Iy=r._emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0=function(){return(Iy=r._emscripten_bind_btWheelInfo_get_m_suspensionStiffness_0=r.asm.Kq).apply(null,arguments)},ky=r._emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1=function(){return(ky=r._emscripten_bind_btWheelInfo_set_m_suspensionStiffness_1=r.asm.Lq).apply(null,arguments)},Oy=r._emscripten_bind_btWheelInfo_get_m_frictionSlip_0=function(){return(Oy=r._emscripten_bind_btWheelInfo_get_m_frictionSlip_0=r.asm.Mq).apply(null,arguments)},By=r._emscripten_bind_btWheelInfo_set_m_frictionSlip_1=function(){return(By=r._emscripten_bind_btWheelInfo_set_m_frictionSlip_1=r.asm.Nq).apply(null,arguments)},jy=r._emscripten_bind_btWheelInfo_get_m_engineForce_0=function(){return(jy=r._emscripten_bind_btWheelInfo_get_m_engineForce_0=r.asm.Oq).apply(null,arguments)},Fy=r._emscripten_bind_btWheelInfo_set_m_engineForce_1=function(){return(Fy=r._emscripten_bind_btWheelInfo_set_m_engineForce_1=r.asm.Pq).apply(null,arguments)},Ny=r._emscripten_bind_btWheelInfo_get_m_rollInfluence_0=function(){return(Ny=r._emscripten_bind_btWheelInfo_get_m_rollInfluence_0=r.asm.Qq).apply(null,arguments)},zy=r._emscripten_bind_btWheelInfo_set_m_rollInfluence_1=function(){return(zy=r._emscripten_bind_btWheelInfo_set_m_rollInfluence_1=r.asm.Rq).apply(null,arguments)},Hy=r._emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0=function(){return(Hy=r._emscripten_bind_btWheelInfo_get_m_suspensionRestLength1_0=r.asm.Sq).apply(null,arguments)},Uy=r._emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1=function(){return(Uy=r._emscripten_bind_btWheelInfo_set_m_suspensionRestLength1_1=r.asm.Tq).apply(null,arguments)},Wy=r._emscripten_bind_btWheelInfo_get_m_wheelsRadius_0=function(){return(Wy=r._emscripten_bind_btWheelInfo_get_m_wheelsRadius_0=r.asm.Uq).apply(null,arguments)},Gy=r._emscripten_bind_btWheelInfo_set_m_wheelsRadius_1=function(){return(Gy=r._emscripten_bind_btWheelInfo_set_m_wheelsRadius_1=r.asm.Vq).apply(null,arguments)},Vy=r._emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0=function(){return(Vy=r._emscripten_bind_btWheelInfo_get_m_wheelsDampingCompression_0=r.asm.Wq).apply(null,arguments)},qy=r._emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1=function(){return(qy=r._emscripten_bind_btWheelInfo_set_m_wheelsDampingCompression_1=r.asm.Xq).apply(null,arguments)},Xy=r._emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0=function(){return(Xy=r._emscripten_bind_btWheelInfo_get_m_wheelsDampingRelaxation_0=r.asm.Yq).apply(null,arguments)},Yy=r._emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1=function(){return(Yy=r._emscripten_bind_btWheelInfo_set_m_wheelsDampingRelaxation_1=r.asm.Zq).apply(null,arguments)},Zy=r._emscripten_bind_btWheelInfo_get_m_steering_0=function(){return(Zy=r._emscripten_bind_btWheelInfo_get_m_steering_0=r.asm._q).apply(null,arguments)},Jy=r._emscripten_bind_btWheelInfo_set_m_steering_1=function(){return(Jy=r._emscripten_bind_btWheelInfo_set_m_steering_1=r.asm.$q).apply(null,arguments)},Ky=r._emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0=function(){return(Ky=r._emscripten_bind_btWheelInfo_get_m_maxSuspensionForce_0=r.asm.ar).apply(null,arguments)},Qy=r._emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1=function(){return(Qy=r._emscripten_bind_btWheelInfo_set_m_maxSuspensionForce_1=r.asm.br).apply(null,arguments)},$y=r._emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0=function(){return($y=r._emscripten_bind_btWheelInfo_get_m_maxSuspensionTravelCm_0=r.asm.cr).apply(null,arguments)},tg=r._emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1=function(){return(tg=r._emscripten_bind_btWheelInfo_set_m_maxSuspensionTravelCm_1=r.asm.dr).apply(null,arguments)},eg=r._emscripten_bind_btWheelInfo_get_m_wheelsSuspensionForce_0=function(){return(eg=r._emscripten_bind_btWheelInfo_get_m_wheelsSuspensionForce_0=r.asm.er).apply(null,arguments)},ng=r._emscripten_bind_btWheelInfo_set_m_wheelsSuspensionForce_1=function(){return(ng=r._emscripten_bind_btWheelInfo_set_m_wheelsSuspensionForce_1=r.asm.fr).apply(null,arguments)},ig=r._emscripten_bind_btWheelInfo_get_m_bIsFrontWheel_0=function(){return(ig=r._emscripten_bind_btWheelInfo_get_m_bIsFrontWheel_0=r.asm.gr).apply(null,arguments)},rg=r._emscripten_bind_btWheelInfo_set_m_bIsFrontWheel_1=function(){return(rg=r._emscripten_bind_btWheelInfo_set_m_bIsFrontWheel_1=r.asm.hr).apply(null,arguments)},og=r._emscripten_bind_btWheelInfo_get_m_raycastInfo_0=function(){return(og=r._emscripten_bind_btWheelInfo_get_m_raycastInfo_0=r.asm.ir).apply(null,arguments)},ag=r._emscripten_bind_btWheelInfo_set_m_raycastInfo_1=function(){return(ag=r._emscripten_bind_btWheelInfo_set_m_raycastInfo_1=r.asm.jr).apply(null,arguments)},sg=r._emscripten_bind_btWheelInfo_get_m_chassisConnectionPointCS_0=function(){return(sg=r._emscripten_bind_btWheelInfo_get_m_chassisConnectionPointCS_0=r.asm.kr).apply(null,arguments)},lg=r._emscripten_bind_btWheelInfo_set_m_chassisConnectionPointCS_1=function(){return(lg=r._emscripten_bind_btWheelInfo_set_m_chassisConnectionPointCS_1=r.asm.lr).apply(null,arguments)},cg=r._emscripten_bind_btWheelInfo_get_m_worldTransform_0=function(){return(cg=r._emscripten_bind_btWheelInfo_get_m_worldTransform_0=r.asm.mr).apply(null,arguments)},ug=r._emscripten_bind_btWheelInfo_set_m_worldTransform_1=function(){return(ug=r._emscripten_bind_btWheelInfo_set_m_worldTransform_1=r.asm.nr).apply(null,arguments)},pg=r._emscripten_bind_btWheelInfo_get_m_wheelDirectionCS_0=function(){return(pg=r._emscripten_bind_btWheelInfo_get_m_wheelDirectionCS_0=r.asm.or).apply(null,arguments)},hg=r._emscripten_bind_btWheelInfo_set_m_wheelDirectionCS_1=function(){return(hg=r._emscripten_bind_btWheelInfo_set_m_wheelDirectionCS_1=r.asm.pr).apply(null,arguments)},dg=r._emscripten_bind_btWheelInfo_get_m_wheelAxleCS_0=function(){return(dg=r._emscripten_bind_btWheelInfo_get_m_wheelAxleCS_0=r.asm.qr).apply(null,arguments)},_g=r._emscripten_bind_btWheelInfo_set_m_wheelAxleCS_1=function(){return(_g=r._emscripten_bind_btWheelInfo_set_m_wheelAxleCS_1=r.asm.rr).apply(null,arguments)},fg=r._emscripten_bind_btWheelInfo_get_m_rotation_0=function(){return(fg=r._emscripten_bind_btWheelInfo_get_m_rotation_0=r.asm.sr).apply(null,arguments)},mg=r._emscripten_bind_btWheelInfo_set_m_rotation_1=function(){return(mg=r._emscripten_bind_btWheelInfo_set_m_rotation_1=r.asm.tr).apply(null,arguments)},yg=r._emscripten_bind_btWheelInfo_get_m_deltaRotation_0=function(){return(yg=r._emscripten_bind_btWheelInfo_get_m_deltaRotation_0=r.asm.ur).apply(null,arguments)},gg=r._emscripten_bind_btWheelInfo_set_m_deltaRotation_1=function(){return(gg=r._emscripten_bind_btWheelInfo_set_m_deltaRotation_1=r.asm.vr).apply(null,arguments)},vg=r._emscripten_bind_btWheelInfo_get_m_brake_0=function(){return(vg=r._emscripten_bind_btWheelInfo_get_m_brake_0=r.asm.wr).apply(null,arguments)},bg=r._emscripten_bind_btWheelInfo_set_m_brake_1=function(){return(bg=r._emscripten_bind_btWheelInfo_set_m_brake_1=r.asm.xr).apply(null,arguments)},xg=r._emscripten_bind_btWheelInfo_get_m_clippedInvContactDotSuspension_0=function(){return(xg=r._emscripten_bind_btWheelInfo_get_m_clippedInvContactDotSuspension_0=r.asm.yr).apply(null,arguments)},Sg=r._emscripten_bind_btWheelInfo_set_m_clippedInvContactDotSuspension_1=function(){return(Sg=r._emscripten_bind_btWheelInfo_set_m_clippedInvContactDotSuspension_1=r.asm.zr).apply(null,arguments)},wg=r._emscripten_bind_btWheelInfo_get_m_suspensionRelativeVelocity_0=function(){return(wg=r._emscripten_bind_btWheelInfo_get_m_suspensionRelativeVelocity_0=r.asm.Ar).apply(null,arguments)},Mg=r._emscripten_bind_btWheelInfo_set_m_suspensionRelativeVelocity_1=function(){return(Mg=r._emscripten_bind_btWheelInfo_set_m_suspensionRelativeVelocity_1=r.asm.Br).apply(null,arguments)},Tg=r._emscripten_bind_btWheelInfo_get_m_skidInfo_0=function(){return(Tg=r._emscripten_bind_btWheelInfo_get_m_skidInfo_0=r.asm.Cr).apply(null,arguments)},Cg=r._emscripten_bind_btWheelInfo_set_m_skidInfo_1=function(){return(Cg=r._emscripten_bind_btWheelInfo_set_m_skidInfo_1=r.asm.Dr).apply(null,arguments)},Eg=r._emscripten_bind_btWheelInfo___destroy___0=function(){return(Eg=r._emscripten_bind_btWheelInfo___destroy___0=r.asm.Er).apply(null,arguments)},Ag=r._emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_3=function(){return(Ag=r._emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_3=r.asm.Fr).apply(null,arguments)},Rg=r._emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4=function(){return(Rg=r._emscripten_bind_btKinematicCharacterController_btKinematicCharacterController_4=r.asm.Gr).apply(null,arguments)},Lg=r._emscripten_bind_btKinematicCharacterController_setUpAxis_1=function(){return(Lg=r._emscripten_bind_btKinematicCharacterController_setUpAxis_1=r.asm.Hr).apply(null,arguments)},Pg=r._emscripten_bind_btKinematicCharacterController_setWalkDirection_1=function(){return(Pg=r._emscripten_bind_btKinematicCharacterController_setWalkDirection_1=r.asm.Ir).apply(null,arguments)},Dg=r._emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2=function(){return(Dg=r._emscripten_bind_btKinematicCharacterController_setVelocityForTimeInterval_2=r.asm.Jr).apply(null,arguments)},Ig=r._emscripten_bind_btKinematicCharacterController_warp_1=function(){return(Ig=r._emscripten_bind_btKinematicCharacterController_warp_1=r.asm.Kr).apply(null,arguments)},kg=r._emscripten_bind_btKinematicCharacterController_preStep_1=function(){return(kg=r._emscripten_bind_btKinematicCharacterController_preStep_1=r.asm.Lr).apply(null,arguments)},Og=r._emscripten_bind_btKinematicCharacterController_playerStep_2=function(){return(Og=r._emscripten_bind_btKinematicCharacterController_playerStep_2=r.asm.Mr).apply(null,arguments)},Bg=r._emscripten_bind_btKinematicCharacterController_setFallSpeed_1=function(){return(Bg=r._emscripten_bind_btKinematicCharacterController_setFallSpeed_1=r.asm.Nr).apply(null,arguments)},jg=r._emscripten_bind_btKinematicCharacterController_setJumpSpeed_1=function(){return(jg=r._emscripten_bind_btKinematicCharacterController_setJumpSpeed_1=r.asm.Or).apply(null,arguments)},Fg=r._emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1=function(){return(Fg=r._emscripten_bind_btKinematicCharacterController_setMaxJumpHeight_1=r.asm.Pr).apply(null,arguments)},Ng=r._emscripten_bind_btKinematicCharacterController_canJump_0=function(){return(Ng=r._emscripten_bind_btKinematicCharacterController_canJump_0=r.asm.Qr).apply(null,arguments)},zg=r._emscripten_bind_btKinematicCharacterController_jump_0=function(){return(zg=r._emscripten_bind_btKinematicCharacterController_jump_0=r.asm.Rr).apply(null,arguments)},Hg=r._emscripten_bind_btKinematicCharacterController_setGravity_1=function(){return(Hg=r._emscripten_bind_btKinematicCharacterController_setGravity_1=r.asm.Sr).apply(null,arguments)},Ug=r._emscripten_bind_btKinematicCharacterController_getGravity_0=function(){return(Ug=r._emscripten_bind_btKinematicCharacterController_getGravity_0=r.asm.Tr).apply(null,arguments)},Wg=r._emscripten_bind_btKinematicCharacterController_setMaxSlope_1=function(){return(Wg=r._emscripten_bind_btKinematicCharacterController_setMaxSlope_1=r.asm.Ur).apply(null,arguments)},Gg=r._emscripten_bind_btKinematicCharacterController_getMaxSlope_0=function(){return(Gg=r._emscripten_bind_btKinematicCharacterController_getMaxSlope_0=r.asm.Vr).apply(null,arguments)},Vg=r._emscripten_bind_btKinematicCharacterController_getGhostObject_0=function(){return(Vg=r._emscripten_bind_btKinematicCharacterController_getGhostObject_0=r.asm.Wr).apply(null,arguments)},qg=r._emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1=function(){return(qg=r._emscripten_bind_btKinematicCharacterController_setUseGhostSweepTest_1=r.asm.Xr).apply(null,arguments)},Xg=r._emscripten_bind_btKinematicCharacterController_onGround_0=function(){return(Xg=r._emscripten_bind_btKinematicCharacterController_onGround_0=r.asm.Yr).apply(null,arguments)},Yg=r._emscripten_bind_btKinematicCharacterController_setUpInterpolate_1=function(){return(Yg=r._emscripten_bind_btKinematicCharacterController_setUpInterpolate_1=r.asm.Zr).apply(null,arguments)},Zg=r._emscripten_bind_btKinematicCharacterController_updateAction_2=function(){return(Zg=r._emscripten_bind_btKinematicCharacterController_updateAction_2=r.asm._r).apply(null,arguments)},Jg=r._emscripten_bind_btKinematicCharacterController___destroy___0=function(){return(Jg=r._emscripten_bind_btKinematicCharacterController___destroy___0=r.asm.$r).apply(null,arguments)},Kg=r._emscripten_bind_btRaycastVehicle_btRaycastVehicle_3=function(){return(Kg=r._emscripten_bind_btRaycastVehicle_btRaycastVehicle_3=r.asm.as).apply(null,arguments)},Qg=r._emscripten_bind_btRaycastVehicle_applyEngineForce_2=function(){return(Qg=r._emscripten_bind_btRaycastVehicle_applyEngineForce_2=r.asm.bs).apply(null,arguments)},$g=r._emscripten_bind_btRaycastVehicle_setSteeringValue_2=function(){return($g=r._emscripten_bind_btRaycastVehicle_setSteeringValue_2=r.asm.cs).apply(null,arguments)},tv=r._emscripten_bind_btRaycastVehicle_getWheelTransformWS_1=function(){return(tv=r._emscripten_bind_btRaycastVehicle_getWheelTransformWS_1=r.asm.ds).apply(null,arguments)},ev=r._emscripten_bind_btRaycastVehicle_updateWheelTransform_2=function(){return(ev=r._emscripten_bind_btRaycastVehicle_updateWheelTransform_2=r.asm.es).apply(null,arguments)},nv=r._emscripten_bind_btRaycastVehicle_addWheel_7=function(){return(nv=r._emscripten_bind_btRaycastVehicle_addWheel_7=r.asm.fs).apply(null,arguments)},iv=r._emscripten_bind_btRaycastVehicle_getNumWheels_0=function(){return(iv=r._emscripten_bind_btRaycastVehicle_getNumWheels_0=r.asm.gs).apply(null,arguments)},rv=r._emscripten_bind_btRaycastVehicle_getRigidBody_0=function(){return(rv=r._emscripten_bind_btRaycastVehicle_getRigidBody_0=r.asm.hs).apply(null,arguments)},ov=r._emscripten_bind_btRaycastVehicle_getWheelInfo_1=function(){return(ov=r._emscripten_bind_btRaycastVehicle_getWheelInfo_1=r.asm.is).apply(null,arguments)},av=r._emscripten_bind_btRaycastVehicle_setBrake_2=function(){return(av=r._emscripten_bind_btRaycastVehicle_setBrake_2=r.asm.js).apply(null,arguments)},sv=r._emscripten_bind_btRaycastVehicle_setCoordinateSystem_3=function(){return(sv=r._emscripten_bind_btRaycastVehicle_setCoordinateSystem_3=r.asm.ks).apply(null,arguments)},lv=r._emscripten_bind_btRaycastVehicle_getCurrentSpeedKmHour_0=function(){return(lv=r._emscripten_bind_btRaycastVehicle_getCurrentSpeedKmHour_0=r.asm.ls).apply(null,arguments)},cv=r._emscripten_bind_btRaycastVehicle_getChassisWorldTransform_0=function(){return(cv=r._emscripten_bind_btRaycastVehicle_getChassisWorldTransform_0=r.asm.ms).apply(null,arguments)},uv=r._emscripten_bind_btRaycastVehicle_rayCast_1=function(){return(uv=r._emscripten_bind_btRaycastVehicle_rayCast_1=r.asm.ns).apply(null,arguments)},pv=r._emscripten_bind_btRaycastVehicle_updateVehicle_1=function(){return(pv=r._emscripten_bind_btRaycastVehicle_updateVehicle_1=r.asm.os).apply(null,arguments)},hv=r._emscripten_bind_btRaycastVehicle_resetSuspension_0=function(){return(hv=r._emscripten_bind_btRaycastVehicle_resetSuspension_0=r.asm.ps).apply(null,arguments)},dv=r._emscripten_bind_btRaycastVehicle_getSteeringValue_1=function(){return(dv=r._emscripten_bind_btRaycastVehicle_getSteeringValue_1=r.asm.qs).apply(null,arguments)},_v=r._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_1=function(){return(_v=r._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_1=r.asm.rs).apply(null,arguments)},fv=r._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_2=function(){return(fv=r._emscripten_bind_btRaycastVehicle_updateWheelTransformsWS_2=r.asm.ss).apply(null,arguments)},mv=r._emscripten_bind_btRaycastVehicle_setPitchControl_1=function(){return(mv=r._emscripten_bind_btRaycastVehicle_setPitchControl_1=r.asm.ts).apply(null,arguments)},yv=r._emscripten_bind_btRaycastVehicle_updateSuspension_1=function(){return(yv=r._emscripten_bind_btRaycastVehicle_updateSuspension_1=r.asm.us).apply(null,arguments)},gv=r._emscripten_bind_btRaycastVehicle_updateFriction_1=function(){return(gv=r._emscripten_bind_btRaycastVehicle_updateFriction_1=r.asm.vs).apply(null,arguments)},vv=r._emscripten_bind_btRaycastVehicle_getRightAxis_0=function(){return(vv=r._emscripten_bind_btRaycastVehicle_getRightAxis_0=r.asm.ws).apply(null,arguments)},bv=r._emscripten_bind_btRaycastVehicle_getUpAxis_0=function(){return(bv=r._emscripten_bind_btRaycastVehicle_getUpAxis_0=r.asm.xs).apply(null,arguments)},xv=r._emscripten_bind_btRaycastVehicle_getForwardAxis_0=function(){return(xv=r._emscripten_bind_btRaycastVehicle_getForwardAxis_0=r.asm.ys).apply(null,arguments)},Sv=r._emscripten_bind_btRaycastVehicle_getForwardVector_0=function(){return(Sv=r._emscripten_bind_btRaycastVehicle_getForwardVector_0=r.asm.zs).apply(null,arguments)},wv=r._emscripten_bind_btRaycastVehicle_getUserConstraintType_0=function(){return(wv=r._emscripten_bind_btRaycastVehicle_getUserConstraintType_0=r.asm.As).apply(null,arguments)},Mv=r._emscripten_bind_btRaycastVehicle_setUserConstraintType_1=function(){return(Mv=r._emscripten_bind_btRaycastVehicle_setUserConstraintType_1=r.asm.Bs).apply(null,arguments)},Tv=r._emscripten_bind_btRaycastVehicle_setUserConstraintId_1=function(){return(Tv=r._emscripten_bind_btRaycastVehicle_setUserConstraintId_1=r.asm.Cs).apply(null,arguments)},Cv=r._emscripten_bind_btRaycastVehicle_getUserConstraintId_0=function(){return(Cv=r._emscripten_bind_btRaycastVehicle_getUserConstraintId_0=r.asm.Ds).apply(null,arguments)},Ev=r._emscripten_bind_btRaycastVehicle_updateAction_2=function(){return(Ev=r._emscripten_bind_btRaycastVehicle_updateAction_2=r.asm.Es).apply(null,arguments)},Av=r._emscripten_bind_btRaycastVehicle___destroy___0=function(){return(Av=r._emscripten_bind_btRaycastVehicle___destroy___0=r.asm.Fs).apply(null,arguments)},Rv=r._emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0=function(){return(Rv=r._emscripten_bind_btPairCachingGhostObject_btPairCachingGhostObject_0=r.asm.Gs).apply(null,arguments)},Lv=r._emscripten_bind_btPairCachingGhostObject_setAnisotropicFriction_2=function(){return(Lv=r._emscripten_bind_btPairCachingGhostObject_setAnisotropicFriction_2=r.asm.Hs).apply(null,arguments)},Pv=r._emscripten_bind_btPairCachingGhostObject_getCollisionShape_0=function(){return(Pv=r._emscripten_bind_btPairCachingGhostObject_getCollisionShape_0=r.asm.Is).apply(null,arguments)},Dv=r._emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1=function(){return(Dv=r._emscripten_bind_btPairCachingGhostObject_setContactProcessingThreshold_1=r.asm.Js).apply(null,arguments)},Iv=r._emscripten_bind_btPairCachingGhostObject_setActivationState_1=function(){return(Iv=r._emscripten_bind_btPairCachingGhostObject_setActivationState_1=r.asm.Ks).apply(null,arguments)},kv=r._emscripten_bind_btPairCachingGhostObject_forceActivationState_1=function(){return(kv=r._emscripten_bind_btPairCachingGhostObject_forceActivationState_1=r.asm.Ls).apply(null,arguments)},Ov=r._emscripten_bind_btPairCachingGhostObject_activate_0=function(){return(Ov=r._emscripten_bind_btPairCachingGhostObject_activate_0=r.asm.Ms).apply(null,arguments)},Bv=r._emscripten_bind_btPairCachingGhostObject_activate_1=function(){return(Bv=r._emscripten_bind_btPairCachingGhostObject_activate_1=r.asm.Ns).apply(null,arguments)},jv=r._emscripten_bind_btPairCachingGhostObject_isActive_0=function(){return(jv=r._emscripten_bind_btPairCachingGhostObject_isActive_0=r.asm.Os).apply(null,arguments)},Fv=r._emscripten_bind_btPairCachingGhostObject_isKinematicObject_0=function(){return(Fv=r._emscripten_bind_btPairCachingGhostObject_isKinematicObject_0=r.asm.Ps).apply(null,arguments)},Nv=r._emscripten_bind_btPairCachingGhostObject_isStaticObject_0=function(){return(Nv=r._emscripten_bind_btPairCachingGhostObject_isStaticObject_0=r.asm.Qs).apply(null,arguments)},zv=r._emscripten_bind_btPairCachingGhostObject_isStaticOrKinematicObject_0=function(){return(zv=r._emscripten_bind_btPairCachingGhostObject_isStaticOrKinematicObject_0=r.asm.Rs).apply(null,arguments)},Hv=r._emscripten_bind_btPairCachingGhostObject_getRestitution_0=function(){return(Hv=r._emscripten_bind_btPairCachingGhostObject_getRestitution_0=r.asm.Ss).apply(null,arguments)},Uv=r._emscripten_bind_btPairCachingGhostObject_getFriction_0=function(){return(Uv=r._emscripten_bind_btPairCachingGhostObject_getFriction_0=r.asm.Ts).apply(null,arguments)},Wv=r._emscripten_bind_btPairCachingGhostObject_getRollingFriction_0=function(){return(Wv=r._emscripten_bind_btPairCachingGhostObject_getRollingFriction_0=r.asm.Us).apply(null,arguments)},Gv=r._emscripten_bind_btPairCachingGhostObject_setRestitution_1=function(){return(Gv=r._emscripten_bind_btPairCachingGhostObject_setRestitution_1=r.asm.Vs).apply(null,arguments)},Vv=r._emscripten_bind_btPairCachingGhostObject_setFriction_1=function(){return(Vv=r._emscripten_bind_btPairCachingGhostObject_setFriction_1=r.asm.Ws).apply(null,arguments)},qv=r._emscripten_bind_btPairCachingGhostObject_setRollingFriction_1=function(){return(qv=r._emscripten_bind_btPairCachingGhostObject_setRollingFriction_1=r.asm.Xs).apply(null,arguments)},Xv=r._emscripten_bind_btPairCachingGhostObject_getWorldTransform_0=function(){return(Xv=r._emscripten_bind_btPairCachingGhostObject_getWorldTransform_0=r.asm.Ys).apply(null,arguments)},Yv=r._emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0=function(){return(Yv=r._emscripten_bind_btPairCachingGhostObject_getCollisionFlags_0=r.asm.Zs).apply(null,arguments)},Zv=r._emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1=function(){return(Zv=r._emscripten_bind_btPairCachingGhostObject_setCollisionFlags_1=r.asm._s).apply(null,arguments)},Jv=r._emscripten_bind_btPairCachingGhostObject_setWorldTransform_1=function(){return(Jv=r._emscripten_bind_btPairCachingGhostObject_setWorldTransform_1=r.asm.$s).apply(null,arguments)},Kv=r._emscripten_bind_btPairCachingGhostObject_setCollisionShape_1=function(){return(Kv=r._emscripten_bind_btPairCachingGhostObject_setCollisionShape_1=r.asm.at).apply(null,arguments)},Qv=r._emscripten_bind_btPairCachingGhostObject_setCcdMotionThreshold_1=function(){return(Qv=r._emscripten_bind_btPairCachingGhostObject_setCcdMotionThreshold_1=r.asm.bt).apply(null,arguments)},$v=r._emscripten_bind_btPairCachingGhostObject_setCcdSweptSphereRadius_1=function(){return($v=r._emscripten_bind_btPairCachingGhostObject_setCcdSweptSphereRadius_1=r.asm.ct).apply(null,arguments)},tb=r._emscripten_bind_btPairCachingGhostObject_getUserIndex_0=function(){return(tb=r._emscripten_bind_btPairCachingGhostObject_getUserIndex_0=r.asm.dt).apply(null,arguments)},eb=r._emscripten_bind_btPairCachingGhostObject_setUserIndex_1=function(){return(eb=r._emscripten_bind_btPairCachingGhostObject_setUserIndex_1=r.asm.et).apply(null,arguments)},nb=r._emscripten_bind_btPairCachingGhostObject_getUserPointer_0=function(){return(nb=r._emscripten_bind_btPairCachingGhostObject_getUserPointer_0=r.asm.ft).apply(null,arguments)},ib=r._emscripten_bind_btPairCachingGhostObject_setUserPointer_1=function(){return(ib=r._emscripten_bind_btPairCachingGhostObject_setUserPointer_1=r.asm.gt).apply(null,arguments)},rb=r._emscripten_bind_btPairCachingGhostObject_getBroadphaseHandle_0=function(){return(rb=r._emscripten_bind_btPairCachingGhostObject_getBroadphaseHandle_0=r.asm.ht).apply(null,arguments)},ob=r._emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0=function(){return(ob=r._emscripten_bind_btPairCachingGhostObject_getNumOverlappingObjects_0=r.asm.it).apply(null,arguments)},ab=r._emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1=function(){return(ab=r._emscripten_bind_btPairCachingGhostObject_getOverlappingObject_1=r.asm.jt).apply(null,arguments)},sb=r._emscripten_bind_btPairCachingGhostObject___destroy___0=function(){return(sb=r._emscripten_bind_btPairCachingGhostObject___destroy___0=r.asm.kt).apply(null,arguments)},lb=r._emscripten_bind_btGhostPairCallback_btGhostPairCallback_0=function(){return(lb=r._emscripten_bind_btGhostPairCallback_btGhostPairCallback_0=r.asm.lt).apply(null,arguments)},cb=r._emscripten_bind_btGhostPairCallback___destroy___0=function(){return(cb=r._emscripten_bind_btGhostPairCallback___destroy___0=r.asm.mt).apply(null,arguments)},ub=r._emscripten_bind_btSoftBodyWorldInfo_btSoftBodyWorldInfo_0=function(){return(ub=r._emscripten_bind_btSoftBodyWorldInfo_btSoftBodyWorldInfo_0=r.asm.nt).apply(null,arguments)},pb=r._emscripten_bind_btSoftBodyWorldInfo_get_air_density_0=function(){return(pb=r._emscripten_bind_btSoftBodyWorldInfo_get_air_density_0=r.asm.ot).apply(null,arguments)},hb=r._emscripten_bind_btSoftBodyWorldInfo_set_air_density_1=function(){return(hb=r._emscripten_bind_btSoftBodyWorldInfo_set_air_density_1=r.asm.pt).apply(null,arguments)},db=r._emscripten_bind_btSoftBodyWorldInfo_get_water_density_0=function(){return(db=r._emscripten_bind_btSoftBodyWorldInfo_get_water_density_0=r.asm.qt).apply(null,arguments)},_b=r._emscripten_bind_btSoftBodyWorldInfo_set_water_density_1=function(){return(_b=r._emscripten_bind_btSoftBodyWorldInfo_set_water_density_1=r.asm.rt).apply(null,arguments)},fb=r._emscripten_bind_btSoftBodyWorldInfo_get_water_offset_0=function(){return(fb=r._emscripten_bind_btSoftBodyWorldInfo_get_water_offset_0=r.asm.st).apply(null,arguments)},mb=r._emscripten_bind_btSoftBodyWorldInfo_set_water_offset_1=function(){return(mb=r._emscripten_bind_btSoftBodyWorldInfo_set_water_offset_1=r.asm.tt).apply(null,arguments)},yb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_maxDisplacement_0=function(){return(yb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_maxDisplacement_0=r.asm.ut).apply(null,arguments)},gb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_maxDisplacement_1=function(){return(gb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_maxDisplacement_1=r.asm.vt).apply(null,arguments)},vb=r._emscripten_bind_btSoftBodyWorldInfo_get_water_normal_0=function(){return(vb=r._emscripten_bind_btSoftBodyWorldInfo_get_water_normal_0=r.asm.wt).apply(null,arguments)},bb=r._emscripten_bind_btSoftBodyWorldInfo_set_water_normal_1=function(){return(bb=r._emscripten_bind_btSoftBodyWorldInfo_set_water_normal_1=r.asm.xt).apply(null,arguments)},xb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_broadphase_0=function(){return(xb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_broadphase_0=r.asm.yt).apply(null,arguments)},Sb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_broadphase_1=function(){return(Sb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_broadphase_1=r.asm.zt).apply(null,arguments)},wb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_dispatcher_0=function(){return(wb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_dispatcher_0=r.asm.At).apply(null,arguments)},Mb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_dispatcher_1=function(){return(Mb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_dispatcher_1=r.asm.Bt).apply(null,arguments)},Tb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_gravity_0=function(){return(Tb=r._emscripten_bind_btSoftBodyWorldInfo_get_m_gravity_0=r.asm.Ct).apply(null,arguments)},Cb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_gravity_1=function(){return(Cb=r._emscripten_bind_btSoftBodyWorldInfo_set_m_gravity_1=r.asm.Dt).apply(null,arguments)},Eb=r._emscripten_bind_btSoftBodyWorldInfo___destroy___0=function(){return(Eb=r._emscripten_bind_btSoftBodyWorldInfo___destroy___0=r.asm.Et).apply(null,arguments)},Ab=r._emscripten_bind_Face_get_m_n_1=function(){return(Ab=r._emscripten_bind_Face_get_m_n_1=r.asm.Ft).apply(null,arguments)},Rb=r._emscripten_bind_Face_set_m_n_2=function(){return(Rb=r._emscripten_bind_Face_set_m_n_2=r.asm.Gt).apply(null,arguments)},Lb=r._emscripten_bind_Face_get_m_normal_0=function(){return(Lb=r._emscripten_bind_Face_get_m_normal_0=r.asm.Ht).apply(null,arguments)},Pb=r._emscripten_bind_Face_set_m_normal_1=function(){return(Pb=r._emscripten_bind_Face_set_m_normal_1=r.asm.It).apply(null,arguments)},Db=r._emscripten_bind_Face_get_m_ra_0=function(){return(Db=r._emscripten_bind_Face_get_m_ra_0=r.asm.Jt).apply(null,arguments)},Ib=r._emscripten_bind_Face_set_m_ra_1=function(){return(Ib=r._emscripten_bind_Face_set_m_ra_1=r.asm.Kt).apply(null,arguments)},kb=r._emscripten_bind_Face___destroy___0=function(){return(kb=r._emscripten_bind_Face___destroy___0=r.asm.Lt).apply(null,arguments)},Ob=r._emscripten_bind_tFaceArray_size_0=function(){return(Ob=r._emscripten_bind_tFaceArray_size_0=r.asm.Mt).apply(null,arguments)},Bb=r._emscripten_bind_tFaceArray_at_1=function(){return(Bb=r._emscripten_bind_tFaceArray_at_1=r.asm.Nt).apply(null,arguments)},jb=r._emscripten_bind_tFaceArray___destroy___0=function(){return(jb=r._emscripten_bind_tFaceArray___destroy___0=r.asm.Ot).apply(null,arguments)},Fb=r._emscripten_bind_Node_get_m_x_0=function(){return(Fb=r._emscripten_bind_Node_get_m_x_0=r.asm.Pt).apply(null,arguments)},Nb=r._emscripten_bind_Node_set_m_x_1=function(){return(Nb=r._emscripten_bind_Node_set_m_x_1=r.asm.Qt).apply(null,arguments)},zb=r._emscripten_bind_Node_get_m_q_0=function(){return(zb=r._emscripten_bind_Node_get_m_q_0=r.asm.Rt).apply(null,arguments)},Hb=r._emscripten_bind_Node_set_m_q_1=function(){return(Hb=r._emscripten_bind_Node_set_m_q_1=r.asm.St).apply(null,arguments)},Ub=r._emscripten_bind_Node_get_m_v_0=function(){return(Ub=r._emscripten_bind_Node_get_m_v_0=r.asm.Tt).apply(null,arguments)},Wb=r._emscripten_bind_Node_set_m_v_1=function(){return(Wb=r._emscripten_bind_Node_set_m_v_1=r.asm.Ut).apply(null,arguments)},Gb=r._emscripten_bind_Node_get_m_f_0=function(){return(Gb=r._emscripten_bind_Node_get_m_f_0=r.asm.Vt).apply(null,arguments)},Vb=r._emscripten_bind_Node_set_m_f_1=function(){return(Vb=r._emscripten_bind_Node_set_m_f_1=r.asm.Wt).apply(null,arguments)},qb=r._emscripten_bind_Node_get_m_n_0=function(){return(qb=r._emscripten_bind_Node_get_m_n_0=r.asm.Xt).apply(null,arguments)},Xb=r._emscripten_bind_Node_set_m_n_1=function(){return(Xb=r._emscripten_bind_Node_set_m_n_1=r.asm.Yt).apply(null,arguments)},Yb=r._emscripten_bind_Node_get_m_im_0=function(){return(Yb=r._emscripten_bind_Node_get_m_im_0=r.asm.Zt).apply(null,arguments)},Zb=r._emscripten_bind_Node_set_m_im_1=function(){return(Zb=r._emscripten_bind_Node_set_m_im_1=r.asm._t).apply(null,arguments)},Jb=r._emscripten_bind_Node_get_m_area_0=function(){return(Jb=r._emscripten_bind_Node_get_m_area_0=r.asm.$t).apply(null,arguments)},Kb=r._emscripten_bind_Node_set_m_area_1=function(){return(Kb=r._emscripten_bind_Node_set_m_area_1=r.asm.au).apply(null,arguments)},Qb=r._emscripten_bind_Node___destroy___0=function(){return(Qb=r._emscripten_bind_Node___destroy___0=r.asm.bu).apply(null,arguments)},$b=r._emscripten_bind_tNodeArray_size_0=function(){return($b=r._emscripten_bind_tNodeArray_size_0=r.asm.cu).apply(null,arguments)},tx=r._emscripten_bind_tNodeArray_at_1=function(){return(tx=r._emscripten_bind_tNodeArray_at_1=r.asm.du).apply(null,arguments)},ex=r._emscripten_bind_tNodeArray___destroy___0=function(){return(ex=r._emscripten_bind_tNodeArray___destroy___0=r.asm.eu).apply(null,arguments)},nx=r._emscripten_bind_Material_get_m_kLST_0=function(){return(nx=r._emscripten_bind_Material_get_m_kLST_0=r.asm.fu).apply(null,arguments)},ix=r._emscripten_bind_Material_set_m_kLST_1=function(){return(ix=r._emscripten_bind_Material_set_m_kLST_1=r.asm.gu).apply(null,arguments)},rx=r._emscripten_bind_Material_get_m_kAST_0=function(){return(rx=r._emscripten_bind_Material_get_m_kAST_0=r.asm.hu).apply(null,arguments)},ox=r._emscripten_bind_Material_set_m_kAST_1=function(){return(ox=r._emscripten_bind_Material_set_m_kAST_1=r.asm.iu).apply(null,arguments)},ax=r._emscripten_bind_Material_get_m_kVST_0=function(){return(ax=r._emscripten_bind_Material_get_m_kVST_0=r.asm.ju).apply(null,arguments)},sx=r._emscripten_bind_Material_set_m_kVST_1=function(){return(sx=r._emscripten_bind_Material_set_m_kVST_1=r.asm.ku).apply(null,arguments)},lx=r._emscripten_bind_Material_get_m_flags_0=function(){return(lx=r._emscripten_bind_Material_get_m_flags_0=r.asm.lu).apply(null,arguments)},cx=r._emscripten_bind_Material_set_m_flags_1=function(){return(cx=r._emscripten_bind_Material_set_m_flags_1=r.asm.mu).apply(null,arguments)},ux=r._emscripten_bind_Material___destroy___0=function(){return(ux=r._emscripten_bind_Material___destroy___0=r.asm.nu).apply(null,arguments)},px=r._emscripten_bind_tMaterialArray_size_0=function(){return(px=r._emscripten_bind_tMaterialArray_size_0=r.asm.ou).apply(null,arguments)},hx=r._emscripten_bind_tMaterialArray_at_1=function(){return(hx=r._emscripten_bind_tMaterialArray_at_1=r.asm.pu).apply(null,arguments)},dx=r._emscripten_bind_tMaterialArray___destroy___0=function(){return(dx=r._emscripten_bind_tMaterialArray___destroy___0=r.asm.qu).apply(null,arguments)},_x=r._emscripten_bind_Anchor_get_m_node_0=function(){return(_x=r._emscripten_bind_Anchor_get_m_node_0=r.asm.ru).apply(null,arguments)},fx=r._emscripten_bind_Anchor_set_m_node_1=function(){return(fx=r._emscripten_bind_Anchor_set_m_node_1=r.asm.su).apply(null,arguments)},mx=r._emscripten_bind_Anchor_get_m_local_0=function(){return(mx=r._emscripten_bind_Anchor_get_m_local_0=r.asm.tu).apply(null,arguments)},yx=r._emscripten_bind_Anchor_set_m_local_1=function(){return(yx=r._emscripten_bind_Anchor_set_m_local_1=r.asm.uu).apply(null,arguments)},gx=r._emscripten_bind_Anchor_get_m_body_0=function(){return(gx=r._emscripten_bind_Anchor_get_m_body_0=r.asm.vu).apply(null,arguments)},vx=r._emscripten_bind_Anchor_set_m_body_1=function(){return(vx=r._emscripten_bind_Anchor_set_m_body_1=r.asm.wu).apply(null,arguments)},bx=r._emscripten_bind_Anchor_get_m_influence_0=function(){return(bx=r._emscripten_bind_Anchor_get_m_influence_0=r.asm.xu).apply(null,arguments)},xx=r._emscripten_bind_Anchor_set_m_influence_1=function(){return(xx=r._emscripten_bind_Anchor_set_m_influence_1=r.asm.yu).apply(null,arguments)},Sx=r._emscripten_bind_Anchor_get_m_c0_0=function(){return(Sx=r._emscripten_bind_Anchor_get_m_c0_0=r.asm.zu).apply(null,arguments)},wx=r._emscripten_bind_Anchor_set_m_c0_1=function(){return(wx=r._emscripten_bind_Anchor_set_m_c0_1=r.asm.Au).apply(null,arguments)},Mx=r._emscripten_bind_Anchor_get_m_c1_0=function(){return(Mx=r._emscripten_bind_Anchor_get_m_c1_0=r.asm.Bu).apply(null,arguments)},Tx=r._emscripten_bind_Anchor_set_m_c1_1=function(){return(Tx=r._emscripten_bind_Anchor_set_m_c1_1=r.asm.Cu).apply(null,arguments)},Cx=r._emscripten_bind_Anchor_get_m_c2_0=function(){return(Cx=r._emscripten_bind_Anchor_get_m_c2_0=r.asm.Du).apply(null,arguments)},Ex=r._emscripten_bind_Anchor_set_m_c2_1=function(){return(Ex=r._emscripten_bind_Anchor_set_m_c2_1=r.asm.Eu).apply(null,arguments)},Ax=r._emscripten_bind_Anchor___destroy___0=function(){return(Ax=r._emscripten_bind_Anchor___destroy___0=r.asm.Fu).apply(null,arguments)},Rx=r._emscripten_bind_tAnchorArray_size_0=function(){return(Rx=r._emscripten_bind_tAnchorArray_size_0=r.asm.Gu).apply(null,arguments)},Lx=r._emscripten_bind_tAnchorArray_at_1=function(){return(Lx=r._emscripten_bind_tAnchorArray_at_1=r.asm.Hu).apply(null,arguments)},Px=r._emscripten_bind_tAnchorArray_clear_0=function(){return(Px=r._emscripten_bind_tAnchorArray_clear_0=r.asm.Iu).apply(null,arguments)},Dx=r._emscripten_bind_tAnchorArray_push_back_1=function(){return(Dx=r._emscripten_bind_tAnchorArray_push_back_1=r.asm.Ju).apply(null,arguments)},Ix=r._emscripten_bind_tAnchorArray_pop_back_0=function(){return(Ix=r._emscripten_bind_tAnchorArray_pop_back_0=r.asm.Ku).apply(null,arguments)},kx=r._emscripten_bind_tAnchorArray___destroy___0=function(){return(kx=r._emscripten_bind_tAnchorArray___destroy___0=r.asm.Lu).apply(null,arguments)},Ox=r._emscripten_bind_Config_get_kVCF_0=function(){return(Ox=r._emscripten_bind_Config_get_kVCF_0=r.asm.Mu).apply(null,arguments)},Bx=r._emscripten_bind_Config_set_kVCF_1=function(){return(Bx=r._emscripten_bind_Config_set_kVCF_1=r.asm.Nu).apply(null,arguments)},jx=r._emscripten_bind_Config_get_kDP_0=function(){return(jx=r._emscripten_bind_Config_get_kDP_0=r.asm.Ou).apply(null,arguments)},Fx=r._emscripten_bind_Config_set_kDP_1=function(){return(Fx=r._emscripten_bind_Config_set_kDP_1=r.asm.Pu).apply(null,arguments)},Nx=r._emscripten_bind_Config_get_kDG_0=function(){return(Nx=r._emscripten_bind_Config_get_kDG_0=r.asm.Qu).apply(null,arguments)},zx=r._emscripten_bind_Config_set_kDG_1=function(){return(zx=r._emscripten_bind_Config_set_kDG_1=r.asm.Ru).apply(null,arguments)},Hx=r._emscripten_bind_Config_get_kLF_0=function(){return(Hx=r._emscripten_bind_Config_get_kLF_0=r.asm.Su).apply(null,arguments)},Ux=r._emscripten_bind_Config_set_kLF_1=function(){return(Ux=r._emscripten_bind_Config_set_kLF_1=r.asm.Tu).apply(null,arguments)},Wx=r._emscripten_bind_Config_get_kPR_0=function(){return(Wx=r._emscripten_bind_Config_get_kPR_0=r.asm.Uu).apply(null,arguments)},Gx=r._emscripten_bind_Config_set_kPR_1=function(){return(Gx=r._emscripten_bind_Config_set_kPR_1=r.asm.Vu).apply(null,arguments)},Vx=r._emscripten_bind_Config_get_kVC_0=function(){return(Vx=r._emscripten_bind_Config_get_kVC_0=r.asm.Wu).apply(null,arguments)},qx=r._emscripten_bind_Config_set_kVC_1=function(){return(qx=r._emscripten_bind_Config_set_kVC_1=r.asm.Xu).apply(null,arguments)},Xx=r._emscripten_bind_Config_get_kDF_0=function(){return(Xx=r._emscripten_bind_Config_get_kDF_0=r.asm.Yu).apply(null,arguments)},Yx=r._emscripten_bind_Config_set_kDF_1=function(){return(Yx=r._emscripten_bind_Config_set_kDF_1=r.asm.Zu).apply(null,arguments)},Zx=r._emscripten_bind_Config_get_kMT_0=function(){return(Zx=r._emscripten_bind_Config_get_kMT_0=r.asm._u).apply(null,arguments)},Jx=r._emscripten_bind_Config_set_kMT_1=function(){return(Jx=r._emscripten_bind_Config_set_kMT_1=r.asm.$u).apply(null,arguments)},Kx=r._emscripten_bind_Config_get_kCHR_0=function(){return(Kx=r._emscripten_bind_Config_get_kCHR_0=r.asm.av).apply(null,arguments)},Qx=r._emscripten_bind_Config_set_kCHR_1=function(){return(Qx=r._emscripten_bind_Config_set_kCHR_1=r.asm.bv).apply(null,arguments)},$x=r._emscripten_bind_Config_get_kKHR_0=function(){return($x=r._emscripten_bind_Config_get_kKHR_0=r.asm.cv).apply(null,arguments)},tS=r._emscripten_bind_Config_set_kKHR_1=function(){return(tS=r._emscripten_bind_Config_set_kKHR_1=r.asm.dv).apply(null,arguments)},eS=r._emscripten_bind_Config_get_kSHR_0=function(){return(eS=r._emscripten_bind_Config_get_kSHR_0=r.asm.ev).apply(null,arguments)},nS=r._emscripten_bind_Config_set_kSHR_1=function(){return(nS=r._emscripten_bind_Config_set_kSHR_1=r.asm.fv).apply(null,arguments)},iS=r._emscripten_bind_Config_get_kAHR_0=function(){return(iS=r._emscripten_bind_Config_get_kAHR_0=r.asm.gv).apply(null,arguments)},rS=r._emscripten_bind_Config_set_kAHR_1=function(){return(rS=r._emscripten_bind_Config_set_kAHR_1=r.asm.hv).apply(null,arguments)},oS=r._emscripten_bind_Config_get_kSRHR_CL_0=function(){return(oS=r._emscripten_bind_Config_get_kSRHR_CL_0=r.asm.iv).apply(null,arguments)},aS=r._emscripten_bind_Config_set_kSRHR_CL_1=function(){return(aS=r._emscripten_bind_Config_set_kSRHR_CL_1=r.asm.jv).apply(null,arguments)},sS=r._emscripten_bind_Config_get_kSKHR_CL_0=function(){return(sS=r._emscripten_bind_Config_get_kSKHR_CL_0=r.asm.kv).apply(null,arguments)},lS=r._emscripten_bind_Config_set_kSKHR_CL_1=function(){return(lS=r._emscripten_bind_Config_set_kSKHR_CL_1=r.asm.lv).apply(null,arguments)},cS=r._emscripten_bind_Config_get_kSSHR_CL_0=function(){return(cS=r._emscripten_bind_Config_get_kSSHR_CL_0=r.asm.mv).apply(null,arguments)},uS=r._emscripten_bind_Config_set_kSSHR_CL_1=function(){return(uS=r._emscripten_bind_Config_set_kSSHR_CL_1=r.asm.nv).apply(null,arguments)},pS=r._emscripten_bind_Config_get_kSR_SPLT_CL_0=function(){return(pS=r._emscripten_bind_Config_get_kSR_SPLT_CL_0=r.asm.ov).apply(null,arguments)},hS=r._emscripten_bind_Config_set_kSR_SPLT_CL_1=function(){return(hS=r._emscripten_bind_Config_set_kSR_SPLT_CL_1=r.asm.pv).apply(null,arguments)},dS=r._emscripten_bind_Config_get_kSK_SPLT_CL_0=function(){return(dS=r._emscripten_bind_Config_get_kSK_SPLT_CL_0=r.asm.qv).apply(null,arguments)},_S=r._emscripten_bind_Config_set_kSK_SPLT_CL_1=function(){return(_S=r._emscripten_bind_Config_set_kSK_SPLT_CL_1=r.asm.rv).apply(null,arguments)},fS=r._emscripten_bind_Config_get_kSS_SPLT_CL_0=function(){return(fS=r._emscripten_bind_Config_get_kSS_SPLT_CL_0=r.asm.sv).apply(null,arguments)},mS=r._emscripten_bind_Config_set_kSS_SPLT_CL_1=function(){return(mS=r._emscripten_bind_Config_set_kSS_SPLT_CL_1=r.asm.tv).apply(null,arguments)},yS=r._emscripten_bind_Config_get_maxvolume_0=function(){return(yS=r._emscripten_bind_Config_get_maxvolume_0=r.asm.uv).apply(null,arguments)},gS=r._emscripten_bind_Config_set_maxvolume_1=function(){return(gS=r._emscripten_bind_Config_set_maxvolume_1=r.asm.vv).apply(null,arguments)},vS=r._emscripten_bind_Config_get_timescale_0=function(){return(vS=r._emscripten_bind_Config_get_timescale_0=r.asm.wv).apply(null,arguments)},bS=r._emscripten_bind_Config_set_timescale_1=function(){return(bS=r._emscripten_bind_Config_set_timescale_1=r.asm.xv).apply(null,arguments)},xS=r._emscripten_bind_Config_get_viterations_0=function(){return(xS=r._emscripten_bind_Config_get_viterations_0=r.asm.yv).apply(null,arguments)},SS=r._emscripten_bind_Config_set_viterations_1=function(){return(SS=r._emscripten_bind_Config_set_viterations_1=r.asm.zv).apply(null,arguments)},wS=r._emscripten_bind_Config_get_piterations_0=function(){return(wS=r._emscripten_bind_Config_get_piterations_0=r.asm.Av).apply(null,arguments)},MS=r._emscripten_bind_Config_set_piterations_1=function(){return(MS=r._emscripten_bind_Config_set_piterations_1=r.asm.Bv).apply(null,arguments)},TS=r._emscripten_bind_Config_get_diterations_0=function(){return(TS=r._emscripten_bind_Config_get_diterations_0=r.asm.Cv).apply(null,arguments)},CS=r._emscripten_bind_Config_set_diterations_1=function(){return(CS=r._emscripten_bind_Config_set_diterations_1=r.asm.Dv).apply(null,arguments)},ES=r._emscripten_bind_Config_get_citerations_0=function(){return(ES=r._emscripten_bind_Config_get_citerations_0=r.asm.Ev).apply(null,arguments)},AS=r._emscripten_bind_Config_set_citerations_1=function(){return(AS=r._emscripten_bind_Config_set_citerations_1=r.asm.Fv).apply(null,arguments)},RS=r._emscripten_bind_Config_get_collisions_0=function(){return(RS=r._emscripten_bind_Config_get_collisions_0=r.asm.Gv).apply(null,arguments)},LS=r._emscripten_bind_Config_set_collisions_1=function(){return(LS=r._emscripten_bind_Config_set_collisions_1=r.asm.Hv).apply(null,arguments)},PS=r._emscripten_bind_Config___destroy___0=function(){return(PS=r._emscripten_bind_Config___destroy___0=r.asm.Iv).apply(null,arguments)},DS=r._emscripten_bind_btSoftBody_btSoftBody_4=function(){return(DS=r._emscripten_bind_btSoftBody_btSoftBody_4=r.asm.Jv).apply(null,arguments)},IS=r._emscripten_bind_btSoftBody_checkLink_2=function(){return(IS=r._emscripten_bind_btSoftBody_checkLink_2=r.asm.Kv).apply(null,arguments)},kS=r._emscripten_bind_btSoftBody_checkFace_3=function(){return(kS=r._emscripten_bind_btSoftBody_checkFace_3=r.asm.Lv).apply(null,arguments)},OS=r._emscripten_bind_btSoftBody_appendMaterial_0=function(){return(OS=r._emscripten_bind_btSoftBody_appendMaterial_0=r.asm.Mv).apply(null,arguments)},BS=r._emscripten_bind_btSoftBody_appendNode_2=function(){return(BS=r._emscripten_bind_btSoftBody_appendNode_2=r.asm.Nv).apply(null,arguments)},jS=r._emscripten_bind_btSoftBody_appendLink_4=function(){return(jS=r._emscripten_bind_btSoftBody_appendLink_4=r.asm.Ov).apply(null,arguments)},FS=r._emscripten_bind_btSoftBody_appendFace_4=function(){return(FS=r._emscripten_bind_btSoftBody_appendFace_4=r.asm.Pv).apply(null,arguments)},NS=r._emscripten_bind_btSoftBody_appendTetra_5=function(){return(NS=r._emscripten_bind_btSoftBody_appendTetra_5=r.asm.Qv).apply(null,arguments)},zS=r._emscripten_bind_btSoftBody_appendAnchor_4=function(){return(zS=r._emscripten_bind_btSoftBody_appendAnchor_4=r.asm.Rv).apply(null,arguments)},HS=r._emscripten_bind_btSoftBody_addForce_1=function(){return(HS=r._emscripten_bind_btSoftBody_addForce_1=r.asm.Sv).apply(null,arguments)},US=r._emscripten_bind_btSoftBody_addForce_2=function(){return(US=r._emscripten_bind_btSoftBody_addForce_2=r.asm.Tv).apply(null,arguments)},WS=r._emscripten_bind_btSoftBody_addAeroForceToNode_2=function(){return(WS=r._emscripten_bind_btSoftBody_addAeroForceToNode_2=r.asm.Uv).apply(null,arguments)},GS=r._emscripten_bind_btSoftBody_getTotalMass_0=function(){return(GS=r._emscripten_bind_btSoftBody_getTotalMass_0=r.asm.Vv).apply(null,arguments)},VS=r._emscripten_bind_btSoftBody_setTotalMass_2=function(){return(VS=r._emscripten_bind_btSoftBody_setTotalMass_2=r.asm.Wv).apply(null,arguments)},qS=r._emscripten_bind_btSoftBody_setMass_2=function(){return(qS=r._emscripten_bind_btSoftBody_setMass_2=r.asm.Xv).apply(null,arguments)},XS=r._emscripten_bind_btSoftBody_transform_1=function(){return(XS=r._emscripten_bind_btSoftBody_transform_1=r.asm.Yv).apply(null,arguments)},YS=r._emscripten_bind_btSoftBody_translate_1=function(){return(YS=r._emscripten_bind_btSoftBody_translate_1=r.asm.Zv).apply(null,arguments)},ZS=r._emscripten_bind_btSoftBody_rotate_1=function(){return(ZS=r._emscripten_bind_btSoftBody_rotate_1=r.asm._v).apply(null,arguments)},JS=r._emscripten_bind_btSoftBody_scale_1=function(){return(JS=r._emscripten_bind_btSoftBody_scale_1=r.asm.$v).apply(null,arguments)},KS=r._emscripten_bind_btSoftBody_generateClusters_1=function(){return(KS=r._emscripten_bind_btSoftBody_generateClusters_1=r.asm.aw).apply(null,arguments)},QS=r._emscripten_bind_btSoftBody_generateClusters_2=function(){return(QS=r._emscripten_bind_btSoftBody_generateClusters_2=r.asm.bw).apply(null,arguments)},$S=r._emscripten_bind_btSoftBody_generateBendingConstraints_2=function(){return($S=r._emscripten_bind_btSoftBody_generateBendingConstraints_2=r.asm.cw).apply(null,arguments)},tw=r._emscripten_bind_btSoftBody_upcast_1=function(){return(tw=r._emscripten_bind_btSoftBody_upcast_1=r.asm.dw).apply(null,arguments)},ew=r._emscripten_bind_btSoftBody_getRestLengthScale_0=function(){return(ew=r._emscripten_bind_btSoftBody_getRestLengthScale_0=r.asm.ew).apply(null,arguments)},nw=r._emscripten_bind_btSoftBody_setRestLengthScale_1=function(){return(nw=r._emscripten_bind_btSoftBody_setRestLengthScale_1=r.asm.fw).apply(null,arguments)},iw=r._emscripten_bind_btSoftBody_setAnisotropicFriction_2=function(){return(iw=r._emscripten_bind_btSoftBody_setAnisotropicFriction_2=r.asm.gw).apply(null,arguments)},rw=r._emscripten_bind_btSoftBody_getCollisionShape_0=function(){return(rw=r._emscripten_bind_btSoftBody_getCollisionShape_0=r.asm.hw).apply(null,arguments)},ow=r._emscripten_bind_btSoftBody_setContactProcessingThreshold_1=function(){return(ow=r._emscripten_bind_btSoftBody_setContactProcessingThreshold_1=r.asm.iw).apply(null,arguments)},aw=r._emscripten_bind_btSoftBody_setActivationState_1=function(){return(aw=r._emscripten_bind_btSoftBody_setActivationState_1=r.asm.jw).apply(null,arguments)},sw=r._emscripten_bind_btSoftBody_forceActivationState_1=function(){return(sw=r._emscripten_bind_btSoftBody_forceActivationState_1=r.asm.kw).apply(null,arguments)},lw=r._emscripten_bind_btSoftBody_activate_0=function(){return(lw=r._emscripten_bind_btSoftBody_activate_0=r.asm.lw).apply(null,arguments)},cw=r._emscripten_bind_btSoftBody_activate_1=function(){return(cw=r._emscripten_bind_btSoftBody_activate_1=r.asm.mw).apply(null,arguments)},uw=r._emscripten_bind_btSoftBody_isActive_0=function(){return(uw=r._emscripten_bind_btSoftBody_isActive_0=r.asm.nw).apply(null,arguments)},pw=r._emscripten_bind_btSoftBody_isKinematicObject_0=function(){return(pw=r._emscripten_bind_btSoftBody_isKinematicObject_0=r.asm.ow).apply(null,arguments)},hw=r._emscripten_bind_btSoftBody_isStaticObject_0=function(){return(hw=r._emscripten_bind_btSoftBody_isStaticObject_0=r.asm.pw).apply(null,arguments)},dw=r._emscripten_bind_btSoftBody_isStaticOrKinematicObject_0=function(){return(dw=r._emscripten_bind_btSoftBody_isStaticOrKinematicObject_0=r.asm.qw).apply(null,arguments)},_w=r._emscripten_bind_btSoftBody_getRestitution_0=function(){return(_w=r._emscripten_bind_btSoftBody_getRestitution_0=r.asm.rw).apply(null,arguments)},fw=r._emscripten_bind_btSoftBody_getFriction_0=function(){return(fw=r._emscripten_bind_btSoftBody_getFriction_0=r.asm.sw).apply(null,arguments)},mw=r._emscripten_bind_btSoftBody_getRollingFriction_0=function(){return(mw=r._emscripten_bind_btSoftBody_getRollingFriction_0=r.asm.tw).apply(null,arguments)},yw=r._emscripten_bind_btSoftBody_setRestitution_1=function(){return(yw=r._emscripten_bind_btSoftBody_setRestitution_1=r.asm.uw).apply(null,arguments)},gw=r._emscripten_bind_btSoftBody_setFriction_1=function(){return(gw=r._emscripten_bind_btSoftBody_setFriction_1=r.asm.vw).apply(null,arguments)},vw=r._emscripten_bind_btSoftBody_setRollingFriction_1=function(){return(vw=r._emscripten_bind_btSoftBody_setRollingFriction_1=r.asm.ww).apply(null,arguments)},bw=r._emscripten_bind_btSoftBody_getWorldTransform_0=function(){return(bw=r._emscripten_bind_btSoftBody_getWorldTransform_0=r.asm.xw).apply(null,arguments)},xw=r._emscripten_bind_btSoftBody_getCollisionFlags_0=function(){return(xw=r._emscripten_bind_btSoftBody_getCollisionFlags_0=r.asm.yw).apply(null,arguments)},Sw=r._emscripten_bind_btSoftBody_setCollisionFlags_1=function(){return(Sw=r._emscripten_bind_btSoftBody_setCollisionFlags_1=r.asm.zw).apply(null,arguments)},ww=r._emscripten_bind_btSoftBody_setWorldTransform_1=function(){return(ww=r._emscripten_bind_btSoftBody_setWorldTransform_1=r.asm.Aw).apply(null,arguments)},Mw=r._emscripten_bind_btSoftBody_setCollisionShape_1=function(){return(Mw=r._emscripten_bind_btSoftBody_setCollisionShape_1=r.asm.Bw).apply(null,arguments)},Tw=r._emscripten_bind_btSoftBody_setCcdMotionThreshold_1=function(){return(Tw=r._emscripten_bind_btSoftBody_setCcdMotionThreshold_1=r.asm.Cw).apply(null,arguments)},Cw=r._emscripten_bind_btSoftBody_setCcdSweptSphereRadius_1=function(){return(Cw=r._emscripten_bind_btSoftBody_setCcdSweptSphereRadius_1=r.asm.Dw).apply(null,arguments)},Ew=r._emscripten_bind_btSoftBody_getUserIndex_0=function(){return(Ew=r._emscripten_bind_btSoftBody_getUserIndex_0=r.asm.Ew).apply(null,arguments)},Aw=r._emscripten_bind_btSoftBody_setUserIndex_1=function(){return(Aw=r._emscripten_bind_btSoftBody_setUserIndex_1=r.asm.Fw).apply(null,arguments)},Rw=r._emscripten_bind_btSoftBody_getUserPointer_0=function(){return(Rw=r._emscripten_bind_btSoftBody_getUserPointer_0=r.asm.Gw).apply(null,arguments)},Lw=r._emscripten_bind_btSoftBody_setUserPointer_1=function(){return(Lw=r._emscripten_bind_btSoftBody_setUserPointer_1=r.asm.Hw).apply(null,arguments)},Pw=r._emscripten_bind_btSoftBody_getBroadphaseHandle_0=function(){return(Pw=r._emscripten_bind_btSoftBody_getBroadphaseHandle_0=r.asm.Iw).apply(null,arguments)},Dw=r._emscripten_bind_btSoftBody_get_m_cfg_0=function(){return(Dw=r._emscripten_bind_btSoftBody_get_m_cfg_0=r.asm.Jw).apply(null,arguments)},Iw=r._emscripten_bind_btSoftBody_set_m_cfg_1=function(){return(Iw=r._emscripten_bind_btSoftBody_set_m_cfg_1=r.asm.Kw).apply(null,arguments)},kw=r._emscripten_bind_btSoftBody_get_m_nodes_0=function(){return(kw=r._emscripten_bind_btSoftBody_get_m_nodes_0=r.asm.Lw).apply(null,arguments)},Ow=r._emscripten_bind_btSoftBody_set_m_nodes_1=function(){return(Ow=r._emscripten_bind_btSoftBody_set_m_nodes_1=r.asm.Mw).apply(null,arguments)},Bw=r._emscripten_bind_btSoftBody_get_m_faces_0=function(){return(Bw=r._emscripten_bind_btSoftBody_get_m_faces_0=r.asm.Nw).apply(null,arguments)},jw=r._emscripten_bind_btSoftBody_set_m_faces_1=function(){return(jw=r._emscripten_bind_btSoftBody_set_m_faces_1=r.asm.Ow).apply(null,arguments)},Fw=r._emscripten_bind_btSoftBody_get_m_materials_0=function(){return(Fw=r._emscripten_bind_btSoftBody_get_m_materials_0=r.asm.Pw).apply(null,arguments)},Nw=r._emscripten_bind_btSoftBody_set_m_materials_1=function(){return(Nw=r._emscripten_bind_btSoftBody_set_m_materials_1=r.asm.Qw).apply(null,arguments)},zw=r._emscripten_bind_btSoftBody_get_m_anchors_0=function(){return(zw=r._emscripten_bind_btSoftBody_get_m_anchors_0=r.asm.Rw).apply(null,arguments)},Hw=r._emscripten_bind_btSoftBody_set_m_anchors_1=function(){return(Hw=r._emscripten_bind_btSoftBody_set_m_anchors_1=r.asm.Sw).apply(null,arguments)},Uw=r._emscripten_bind_btSoftBody___destroy___0=function(){return(Uw=r._emscripten_bind_btSoftBody___destroy___0=r.asm.Tw).apply(null,arguments)},Ww=r._emscripten_bind_btSoftBodyRigidBodyCollisionConfiguration_btSoftBodyRigidBodyCollisionConfiguration_0=function(){return(Ww=r._emscripten_bind_btSoftBodyRigidBodyCollisionConfiguration_btSoftBodyRigidBodyCollisionConfiguration_0=r.asm.Uw).apply(null,arguments)},Gw=r._emscripten_bind_btSoftBodyRigidBodyCollisionConfiguration_btSoftBodyRigidBodyCollisionConfiguration_1=function(){return(Gw=r._emscripten_bind_btSoftBodyRigidBodyCollisionConfiguration_btSoftBodyRigidBodyCollisionConfiguration_1=r.asm.Vw).apply(null,arguments)},Vw=r._emscripten_bind_btSoftBodyRigidBodyCollisionConfiguration___destroy___0=function(){return(Vw=r._emscripten_bind_btSoftBodyRigidBodyCollisionConfiguration___destroy___0=r.asm.Ww).apply(null,arguments)},qw=r._emscripten_bind_btDefaultSoftBodySolver_btDefaultSoftBodySolver_0=function(){return(qw=r._emscripten_bind_btDefaultSoftBodySolver_btDefaultSoftBodySolver_0=r.asm.Xw).apply(null,arguments)},Xw=r._emscripten_bind_btDefaultSoftBodySolver___destroy___0=function(){return(Xw=r._emscripten_bind_btDefaultSoftBodySolver___destroy___0=r.asm.Yw).apply(null,arguments)},Yw=r._emscripten_bind_btSoftBodyArray_size_0=function(){return(Yw=r._emscripten_bind_btSoftBodyArray_size_0=r.asm.Zw).apply(null,arguments)},Zw=r._emscripten_bind_btSoftBodyArray_at_1=function(){return(Zw=r._emscripten_bind_btSoftBodyArray_at_1=r.asm._w).apply(null,arguments)},Jw=r._emscripten_bind_btSoftBodyArray___destroy___0=function(){return(Jw=r._emscripten_bind_btSoftBodyArray___destroy___0=r.asm.$w).apply(null,arguments)},Kw=r._emscripten_bind_btSoftRigidDynamicsWorld_btSoftRigidDynamicsWorld_5=function(){return(Kw=r._emscripten_bind_btSoftRigidDynamicsWorld_btSoftRigidDynamicsWorld_5=r.asm.ax).apply(null,arguments)},Qw=r._emscripten_bind_btSoftRigidDynamicsWorld_addSoftBody_3=function(){return(Qw=r._emscripten_bind_btSoftRigidDynamicsWorld_addSoftBody_3=r.asm.bx).apply(null,arguments)},$w=r._emscripten_bind_btSoftRigidDynamicsWorld_removeSoftBody_1=function(){return($w=r._emscripten_bind_btSoftRigidDynamicsWorld_removeSoftBody_1=r.asm.cx).apply(null,arguments)},tM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeCollisionObject_1=function(){return(tM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeCollisionObject_1=r.asm.dx).apply(null,arguments)},eM=r._emscripten_bind_btSoftRigidDynamicsWorld_getWorldInfo_0=function(){return(eM=r._emscripten_bind_btSoftRigidDynamicsWorld_getWorldInfo_0=r.asm.ex).apply(null,arguments)},nM=r._emscripten_bind_btSoftRigidDynamicsWorld_getSoftBodyArray_0=function(){return(nM=r._emscripten_bind_btSoftRigidDynamicsWorld_getSoftBodyArray_0=r.asm.fx).apply(null,arguments)},iM=r._emscripten_bind_btSoftRigidDynamicsWorld_getDispatcher_0=function(){return(iM=r._emscripten_bind_btSoftRigidDynamicsWorld_getDispatcher_0=r.asm.gx).apply(null,arguments)},rM=r._emscripten_bind_btSoftRigidDynamicsWorld_rayTest_3=function(){return(rM=r._emscripten_bind_btSoftRigidDynamicsWorld_rayTest_3=r.asm.hx).apply(null,arguments)},oM=r._emscripten_bind_btSoftRigidDynamicsWorld_getPairCache_0=function(){return(oM=r._emscripten_bind_btSoftRigidDynamicsWorld_getPairCache_0=r.asm.ix).apply(null,arguments)},aM=r._emscripten_bind_btSoftRigidDynamicsWorld_getDispatchInfo_0=function(){return(aM=r._emscripten_bind_btSoftRigidDynamicsWorld_getDispatchInfo_0=r.asm.jx).apply(null,arguments)},sM=r._emscripten_bind_btSoftRigidDynamicsWorld_addCollisionObject_1=function(){return(sM=r._emscripten_bind_btSoftRigidDynamicsWorld_addCollisionObject_1=r.asm.kx).apply(null,arguments)},lM=r._emscripten_bind_btSoftRigidDynamicsWorld_addCollisionObject_2=function(){return(lM=r._emscripten_bind_btSoftRigidDynamicsWorld_addCollisionObject_2=r.asm.lx).apply(null,arguments)},cM=r._emscripten_bind_btSoftRigidDynamicsWorld_addCollisionObject_3=function(){return(cM=r._emscripten_bind_btSoftRigidDynamicsWorld_addCollisionObject_3=r.asm.mx).apply(null,arguments)},uM=r._emscripten_bind_btSoftRigidDynamicsWorld_getBroadphase_0=function(){return(uM=r._emscripten_bind_btSoftRigidDynamicsWorld_getBroadphase_0=r.asm.nx).apply(null,arguments)},pM=r._emscripten_bind_btSoftRigidDynamicsWorld_convexSweepTest_5=function(){return(pM=r._emscripten_bind_btSoftRigidDynamicsWorld_convexSweepTest_5=r.asm.ox).apply(null,arguments)},hM=r._emscripten_bind_btSoftRigidDynamicsWorld_contactPairTest_3=function(){return(hM=r._emscripten_bind_btSoftRigidDynamicsWorld_contactPairTest_3=r.asm.px).apply(null,arguments)},dM=r._emscripten_bind_btSoftRigidDynamicsWorld_contactTest_2=function(){return(dM=r._emscripten_bind_btSoftRigidDynamicsWorld_contactTest_2=r.asm.qx).apply(null,arguments)},_M=r._emscripten_bind_btSoftRigidDynamicsWorld_updateSingleAabb_1=function(){return(_M=r._emscripten_bind_btSoftRigidDynamicsWorld_updateSingleAabb_1=r.asm.rx).apply(null,arguments)},fM=r._emscripten_bind_btSoftRigidDynamicsWorld_setDebugDrawer_1=function(){return(fM=r._emscripten_bind_btSoftRigidDynamicsWorld_setDebugDrawer_1=r.asm.sx).apply(null,arguments)},mM=r._emscripten_bind_btSoftRigidDynamicsWorld_getDebugDrawer_0=function(){return(mM=r._emscripten_bind_btSoftRigidDynamicsWorld_getDebugDrawer_0=r.asm.tx).apply(null,arguments)},yM=r._emscripten_bind_btSoftRigidDynamicsWorld_debugDrawWorld_0=function(){return(yM=r._emscripten_bind_btSoftRigidDynamicsWorld_debugDrawWorld_0=r.asm.ux).apply(null,arguments)},gM=r._emscripten_bind_btSoftRigidDynamicsWorld_debugDrawObject_3=function(){return(gM=r._emscripten_bind_btSoftRigidDynamicsWorld_debugDrawObject_3=r.asm.vx).apply(null,arguments)},vM=r._emscripten_bind_btSoftRigidDynamicsWorld_setGravity_1=function(){return(vM=r._emscripten_bind_btSoftRigidDynamicsWorld_setGravity_1=r.asm.wx).apply(null,arguments)},bM=r._emscripten_bind_btSoftRigidDynamicsWorld_getGravity_0=function(){return(bM=r._emscripten_bind_btSoftRigidDynamicsWorld_getGravity_0=r.asm.xx).apply(null,arguments)},xM=r._emscripten_bind_btSoftRigidDynamicsWorld_addRigidBody_1=function(){return(xM=r._emscripten_bind_btSoftRigidDynamicsWorld_addRigidBody_1=r.asm.yx).apply(null,arguments)},SM=r._emscripten_bind_btSoftRigidDynamicsWorld_addRigidBody_3=function(){return(SM=r._emscripten_bind_btSoftRigidDynamicsWorld_addRigidBody_3=r.asm.zx).apply(null,arguments)},wM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeRigidBody_1=function(){return(wM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeRigidBody_1=r.asm.Ax).apply(null,arguments)},MM=r._emscripten_bind_btSoftRigidDynamicsWorld_addConstraint_1=function(){return(MM=r._emscripten_bind_btSoftRigidDynamicsWorld_addConstraint_1=r.asm.Bx).apply(null,arguments)},TM=r._emscripten_bind_btSoftRigidDynamicsWorld_addConstraint_2=function(){return(TM=r._emscripten_bind_btSoftRigidDynamicsWorld_addConstraint_2=r.asm.Cx).apply(null,arguments)},CM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeConstraint_1=function(){return(CM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeConstraint_1=r.asm.Dx).apply(null,arguments)},EM=r._emscripten_bind_btSoftRigidDynamicsWorld_stepSimulation_1=function(){return(EM=r._emscripten_bind_btSoftRigidDynamicsWorld_stepSimulation_1=r.asm.Ex).apply(null,arguments)},AM=r._emscripten_bind_btSoftRigidDynamicsWorld_stepSimulation_2=function(){return(AM=r._emscripten_bind_btSoftRigidDynamicsWorld_stepSimulation_2=r.asm.Fx).apply(null,arguments)},RM=r._emscripten_bind_btSoftRigidDynamicsWorld_stepSimulation_3=function(){return(RM=r._emscripten_bind_btSoftRigidDynamicsWorld_stepSimulation_3=r.asm.Gx).apply(null,arguments)},LM=r._emscripten_bind_btSoftRigidDynamicsWorld_setContactAddedCallback_1=function(){return(LM=r._emscripten_bind_btSoftRigidDynamicsWorld_setContactAddedCallback_1=r.asm.Hx).apply(null,arguments)},PM=r._emscripten_bind_btSoftRigidDynamicsWorld_setContactProcessedCallback_1=function(){return(PM=r._emscripten_bind_btSoftRigidDynamicsWorld_setContactProcessedCallback_1=r.asm.Ix).apply(null,arguments)},DM=r._emscripten_bind_btSoftRigidDynamicsWorld_setContactDestroyedCallback_1=function(){return(DM=r._emscripten_bind_btSoftRigidDynamicsWorld_setContactDestroyedCallback_1=r.asm.Jx).apply(null,arguments)},IM=r._emscripten_bind_btSoftRigidDynamicsWorld_addAction_1=function(){return(IM=r._emscripten_bind_btSoftRigidDynamicsWorld_addAction_1=r.asm.Kx).apply(null,arguments)},kM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeAction_1=function(){return(kM=r._emscripten_bind_btSoftRigidDynamicsWorld_removeAction_1=r.asm.Lx).apply(null,arguments)},OM=r._emscripten_bind_btSoftRigidDynamicsWorld_getSolverInfo_0=function(){return(OM=r._emscripten_bind_btSoftRigidDynamicsWorld_getSolverInfo_0=r.asm.Mx).apply(null,arguments)},BM=r._emscripten_bind_btSoftRigidDynamicsWorld_setInternalTickCallback_1=function(){return(BM=r._emscripten_bind_btSoftRigidDynamicsWorld_setInternalTickCallback_1=r.asm.Nx).apply(null,arguments)},jM=r._emscripten_bind_btSoftRigidDynamicsWorld_setInternalTickCallback_2=function(){return(jM=r._emscripten_bind_btSoftRigidDynamicsWorld_setInternalTickCallback_2=r.asm.Ox).apply(null,arguments)},FM=r._emscripten_bind_btSoftRigidDynamicsWorld_setInternalTickCallback_3=function(){return(FM=r._emscripten_bind_btSoftRigidDynamicsWorld_setInternalTickCallback_3=r.asm.Px).apply(null,arguments)},NM=r._emscripten_bind_btSoftRigidDynamicsWorld___destroy___0=function(){return(NM=r._emscripten_bind_btSoftRigidDynamicsWorld___destroy___0=r.asm.Qx).apply(null,arguments)},zM=r._emscripten_bind_btSoftBodyHelpers_btSoftBodyHelpers_0=function(){return(zM=r._emscripten_bind_btSoftBodyHelpers_btSoftBodyHelpers_0=r.asm.Rx).apply(null,arguments)},HM=r._emscripten_bind_btSoftBodyHelpers_CreateRope_5=function(){return(HM=r._emscripten_bind_btSoftBodyHelpers_CreateRope_5=r.asm.Sx).apply(null,arguments)},UM=r._emscripten_bind_btSoftBodyHelpers_CreatePatch_9=function(){return(UM=r._emscripten_bind_btSoftBodyHelpers_CreatePatch_9=r.asm.Tx).apply(null,arguments)},WM=r._emscripten_bind_btSoftBodyHelpers_CreatePatchUV_10=function(){return(WM=r._emscripten_bind_btSoftBodyHelpers_CreatePatchUV_10=r.asm.Ux).apply(null,arguments)},GM=r._emscripten_bind_btSoftBodyHelpers_CreateEllipsoid_4=function(){return(GM=r._emscripten_bind_btSoftBodyHelpers_CreateEllipsoid_4=r.asm.Vx).apply(null,arguments)},VM=r._emscripten_bind_btSoftBodyHelpers_CreateFromTriMesh_5=function(){return(VM=r._emscripten_bind_btSoftBodyHelpers_CreateFromTriMesh_5=r.asm.Wx).apply(null,arguments)},qM=r._emscripten_bind_btSoftBodyHelpers_CreateFromConvexHull_4=function(){return(qM=r._emscripten_bind_btSoftBodyHelpers_CreateFromConvexHull_4=r.asm.Xx).apply(null,arguments)},XM=r._emscripten_bind_btSoftBodyHelpers___destroy___0=function(){return(XM=r._emscripten_bind_btSoftBodyHelpers___destroy___0=r.asm.Yx).apply(null,arguments)},YM=r._emscripten_enum_PHY_ScalarType_PHY_FLOAT=function(){return(YM=r._emscripten_enum_PHY_ScalarType_PHY_FLOAT=r.asm.Zx).apply(null,arguments)},ZM=r._emscripten_enum_PHY_ScalarType_PHY_DOUBLE=function(){return(ZM=r._emscripten_enum_PHY_ScalarType_PHY_DOUBLE=r.asm._x).apply(null,arguments)},JM=r._emscripten_enum_PHY_ScalarType_PHY_INTEGER=function(){return(JM=r._emscripten_enum_PHY_ScalarType_PHY_INTEGER=r.asm.$x).apply(null,arguments)},KM=r._emscripten_enum_PHY_ScalarType_PHY_SHORT=function(){return(KM=r._emscripten_enum_PHY_ScalarType_PHY_SHORT=r.asm.ay).apply(null,arguments)},QM=r._emscripten_enum_PHY_ScalarType_PHY_FIXEDPOINT88=function(){return(QM=r._emscripten_enum_PHY_ScalarType_PHY_FIXEDPOINT88=r.asm.by).apply(null,arguments)},$M=r._emscripten_enum_PHY_ScalarType_PHY_UCHAR=function(){return($M=r._emscripten_enum_PHY_ScalarType_PHY_UCHAR=r.asm.cy).apply(null,arguments)},tT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_ERP=function(){return(tT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_ERP=r.asm.dy).apply(null,arguments)},eT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_ERP=function(){return(eT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_ERP=r.asm.ey).apply(null,arguments)},nT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_CFM=function(){return(nT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_CFM=r.asm.fy).apply(null,arguments)},iT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_CFM=function(){return(iT=r._emscripten_enum_btConstraintParams_BT_CONSTRAINT_STOP_CFM=r.asm.gy).apply(null,arguments)};function rT(){function t(){if(!rt&&(rt=!0,r.calledRun=!0,!C)){if(U=!0,j(N),j(z),a(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;){var t=r.postRun.shift();H.unshift(t)}j(H)}}if(!(0<G)){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)W();j(F),0<G||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),t()}),1)):t())}}if(r._malloc=function(){return(r._malloc=r.asm.hy).apply(null,arguments)},r._free=function(){return(r._free=r.asm.iy).apply(null,arguments)},r.dynCall_vi=function(){return(r.dynCall_vi=r.asm.jy).apply(null,arguments)},r.dynCall_v=function(){return(r.dynCall_v=r.asm.ky).apply(null,arguments)},r.UTF8ToString=function(t,e){if(t){var n=t+e;for(e=t;L[e]&&!(e>=n);)++e;if(16<e-t&&L.subarray&&k)t=k.decode(L.subarray(t,e));else{for(n="";t<e;){var i=L[t++];if(128&i){var r=63&L[t++];if(192==(224&i))n+=String.fromCharCode((31&i)<<6|r);else{var o=63&L[t++];65536>(i=224==(240&i)?(15&i)<<12|r<<6|o:(7&i)<<18|r<<12|o<<6|63&L[t++])?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else n+=String.fromCharCode(i)}t=n}}else t="";return t},r.addFunction=function(t,e){if(!x){x=new WeakMap;for(var n=0;n<T.length;n++){var i=T.get(n);i&&x.set(i,n)}}if(x.has(t))t=x.get(t);else{if(w.length)n=w.pop();else{n=T.length;try{T.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}}try{T.set(n,t)}catch(s){if(!(s instanceof TypeError))throw s;if("function"==typeof WebAssembly.Function){var r={i:"i32",j:"i64",f:"f32",d:"f64"},o={parameters:[],results:"v"==e[0]?[]:[r[e[0]]]};for(i=1;i<e.length;++i)o.parameters.push(r[e[i]]);e=new WebAssembly.Function(o,t)}else{r=[1,0,1,96],o=e.slice(0,1),e=e.slice(1);var a={i:127,j:126,f:125,d:124};for(r.push(e.length),i=0;i<e.length;++i)r.push(a[e[i]]);"v"==o?r.push(0):r=r.concat([1,a[o]]),r[1]=r.length-2,e=new Uint8Array([0,97,115,109,1,0,0,0].concat(r,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),e=new WebAssembly.Module(e),e=new WebAssembly.Instance(e,{e:{f:t}}).exports.f}T.set(n,e)}x.set(t,n),t=n}return t},q=function t(){rt||rT(),rt||(q=t)},r.run=rT,r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);0<r.preInit.length;)r.preInit.pop()();function oT(){}function aT(t){return(t||oT).ny}function sT(t,e){var n=aT(e),i=n[t];return i||((i=Object.create((e||oT).prototype)).ly=t,n[t]=i)}rT(),oT.prototype=Object.create(oT.prototype),oT.prototype.constructor=oT,oT.prototype.my=oT,oT.ny={},r.WrapperObject=oT,r.getCache=aT,r.wrapPointer=sT,r.castObject=function(t,e){return sT(t.ly,e)},r.NULL=sT(0),r.destroy=function(t){if(!t.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";t.__destroy__(),delete aT(t.my)[t.ly]},r.compare=function(t,e){return t.ly===e.ly},r.getPointer=function(t){return t.ly},r.getClass=function(t){return t.my};var lT=0,cT=0,uT=0,pT=[],hT=0;function dT(){if(hT){for(var t=0;t<pT.length;t++)r._free(pT[t]);pT.length=0,r._free(lT),lT=0,cT+=hT,hT=0}lT||(cT+=128,E(lT=r._malloc(cT))),uT=0}function _T(t,e){return E(lT),t=t.length*e.BYTES_PER_ELEMENT,uT+(t=t+7&-8)>=cT?(E(0<t),hT+=t,e=r._malloc(t),pT.push(e)):(e=lT+uT,uT+=t),e}function fT(t,e,n){switch(n>>>=0,e.BYTES_PER_ELEMENT){case 2:n>>>=1;break;case 4:n>>>=2;break;case 8:n>>>=3}for(var i=0;i<t.length;i++)e[n+i]=t[i]}function mT(t){if("string"==typeof t){for(var e=0,n=0;n<t.length;++n){var i=t.charCodeAt(n);55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++n)),127>=i?++e:e=2047>=i?e+2:65535>=i?e+3:e+4}if(n=0,0<(i=(e=Array(e+1)).length)){i=n+i-1;for(var r=0;r<t.length;++r){var o=t.charCodeAt(r);if(55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++r)),127>=o){if(n>=i)break;e[n++]=o}else{if(2047>=o){if(n+1>=i)break;e[n++]=192|o>>6}else{if(65535>=o){if(n+2>=i)break;e[n++]=224|o>>12}else{if(n+3>=i)break;e[n++]=240|o>>18,e[n++]=128|o>>12&63}e[n++]=128|o>>6&63}e[n++]=128|63&o}}e[n]=0}t=_T(e,R),fT(e,R,t)}return t}function yT(t){if("object"===s()(t)){var e=_T(t,D);return fT(t,D,e),e}return t}function gT(){throw"cannot construct a btCollisionShape, no constructor in IDL"}function vT(){throw"cannot construct a btCollisionWorld, no constructor in IDL"}function bT(){throw"cannot construct a btCollisionObject, no constructor in IDL"}function xT(){throw"cannot construct a btConcaveShape, no constructor in IDL"}function ST(){throw"cannot construct a btTypedConstraint, no constructor in IDL"}function wT(){throw"cannot construct a btDynamicsWorld, no constructor in IDL"}function MT(){throw"cannot construct a btIDebugDraw, no constructor in IDL"}function TT(t,e,n){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),this.ly=void 0===t?qe():void 0===e?_emscripten_bind_btVector3_btVector3_1(t):void 0===n?_emscripten_bind_btVector3_btVector3_2(t,e):Xe(t,e,n),aT(TT)[this.ly]=this}function CT(){throw"cannot construct a btQuadWord, no constructor in IDL"}function ET(){throw"cannot construct a btMotionState, no constructor in IDL"}function AT(){throw"cannot construct a RayResultCallback, no constructor in IDL"}function RT(){throw"cannot construct a ContactResultCallback, no constructor in IDL"}function LT(){throw"cannot construct a ConvexResultCallback, no constructor in IDL"}function PT(){throw"cannot construct a btConvexShape, no constructor in IDL"}function DT(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=Yn(t,e),aT(DT)[this.ly]=this}function IT(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=ri(t),aT(IT)[this.ly]=this}function kT(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=pi(t,e),aT(kT)[this.ly]=this}function OT(){throw"cannot construct a btStridingMeshInterface, no constructor in IDL"}function BT(){throw"cannot construct a btTriangleMeshShape, no constructor in IDL"}function jT(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=void 0===t?Si():wi(t),aT(jT)[this.ly]=this}function FT(){throw"cannot construct a btDispatcher, no constructor in IDL"}function NT(t,e,n,i,r){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),this.ly=void 0===i?Ai(t,e,n):void 0===r?_emscripten_bind_btGeneric6DofConstraint_btGeneric6DofConstraint_4(t,e,n,i):Ri(t,e,n,i,r),aT(NT)[this.ly]=this}function zT(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=Hi(t,e,n,i),aT(zT)[this.ly]=this}function HT(){throw"cannot construct a btVehicleRaycaster, no constructor in IDL"}function UT(){throw"cannot construct a btActionInterface, no constructor in IDL"}function WT(){this.ly=Lr(),aT(WT)[this.ly]=this}function GT(){throw"cannot construct a btSoftBodySolver, no constructor in IDL"}function VT(){throw"cannot construct a VoidPtr, no constructor in IDL"}function qT(){this.ly=po(),aT(qT)[this.ly]=this}function XT(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=void 0===t?bo():void 0===e?_emscripten_bind_btVector4_btVector4_1(t):void 0===n?_emscripten_bind_btVector4_btVector4_2(t,e):void 0===i?_emscripten_bind_btVector4_btVector4_3(t,e,n):xo(t,e,n,i),aT(XT)[this.ly]=this}function YT(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=Fo(t,e,n,i),aT(YT)[this.ly]=this}function ZT(){throw"cannot construct a btMatrix3x3, no constructor in IDL"}function JT(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=void 0===t?ya():void 0===e?_emscripten_bind_btTransform_btTransform_1(t):ga(t,e),aT(JT)[this.ly]=this}function KT(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=void 0===t?Ra():void 0===e?La(t):Pa(t,e),aT(KT)[this.ly]=this}function QT(){throw"cannot construct a btCollisionObjectWrapper, no constructor in IDL"}function $T(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=za(t,e),aT($T)[this.ly]=this}function tC(){throw"cannot construct a btConstCollisionObjectArray, no constructor in IDL"}function eC(){throw"cannot construct a btScalarArray, no constructor in IDL"}function nC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=ps(t,e),aT(nC)[this.ly]=this}function iC(){throw"cannot construct a btManifoldPoint, no constructor in IDL"}function rC(){this.ly=Ks(),aT(rC)[this.ly]=this}function oC(){throw"cannot construct a LocalShapeInfo, no constructor in IDL"}function aC(t,e,n,i,r){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),this.ly=ol(t,e,n,i,r),aT(aC)[this.ly]=this}function sC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=yl(t,e),aT(sC)[this.ly]=this}function lC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=void 0===e?Bl(t):jl(t,e),aT(lC)[this.ly]=this}function cC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Gl(t),aT(cC)[this.ly]=this}function uC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=Kl(t,e),aT(uC)[this.ly]=this}function pC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=sc(t,e),aT(pC)[this.ly]=this}function hC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=yc(t),aT(hC)[this.ly]=this}function dC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Mc(t),aT(dC)[this.ly]=this}function _C(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Pc(t),aT(_C)[this.ly]=this}function fC(t,e,n){dT(),t&&"object"===s()(t)&&(t=t.ly),"object"==s()(e)&&(e=yT(e)),n&&"object"===s()(n)&&(n=n.ly),this.ly=Fc(t,e,n),aT(fC)[this.ly]=this}function mC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=Wc(t,e),aT(mC)[this.ly]=this}function yC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=Yc(t,e),aT(yC)[this.ly]=this}function gC(){throw"cannot construct a btIntArray, no constructor in IDL"}function vC(){throw"cannot construct a btFace, no constructor in IDL"}function bC(){throw"cannot construct a btVector3Array, no constructor in IDL"}function xC(){throw"cannot construct a btFaceArray, no constructor in IDL"}function SC(){throw"cannot construct a btConvexPolyhedron, no constructor in IDL"}function wC(t,e){dT(),"object"==s()(t)&&(t=yT(t)),e&&"object"===s()(e)&&(e=e.ly),this.ly=void 0===t?gu():void 0===e?vu(t):bu(t,e),aT(wC)[this.ly]=this}function MC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Iu(t),aT(MC)[this.ly]=this}function TC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=void 0===t?Fu():Nu(t),aT(TC)[this.ly]=this}function CC(){throw"cannot construct a btIndexedMesh, no constructor in IDL"}function EC(){throw"cannot construct a btIndexedMeshArray, no constructor in IDL"}function AC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=void 0===t?op():void 0===e?ap(t):sp(t,e),aT(AC)[this.ly]=this}function RC(){this.ly=fp(),aT(RC)[this.ly]=this}function LC(t,e){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),this.ly=bp(t,e),aT(LC)[this.ly]=this}function PC(t,e,n){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),this.ly=void 0===n?Tp(t,e):Cp(t,e,n),aT(PC)[this.ly]=this}function DC(t,e,n,i,r,o,a,l,c){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),l&&"object"===s()(l)&&(l=l.ly),c&&"object"===s()(c)&&(c=c.ly),this.ly=Pp(t,e,n,i,r,o,a,l,c),aT(DC)[this.ly]=this}function IC(){this.ly=Fp(),aT(IC)[this.ly]=this}function kC(){this.ly=zp(),aT(kC)[this.ly]=this}function OC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=qp(t),aT(OC)[this.ly]=this}function BC(){throw"cannot construct a btOverlappingPairCallback, no constructor in IDL"}function jC(){throw"cannot construct a btOverlappingPairCache, no constructor in IDL"}function FC(t,e,n,i,r){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),this.ly=void 0===n?th(t,e):void 0===i?eh(t,e,n):void 0===r?nh(t,e,n,i):ih(t,e,n,i,r),aT(FC)[this.ly]=this}function NC(){throw"cannot construct a btBroadphaseInterface, no constructor in IDL"}function zC(){throw"cannot construct a btCollisionConfiguration, no constructor in IDL"}function HC(){this.ly=lh(),aT(HC)[this.ly]=this}function UC(){throw"cannot construct a btBroadphaseProxy, no constructor in IDL"}function WC(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=void 0===i?fh(t,e,n):mh(t,e,n,i),aT(WC)[this.ly]=this}function GC(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Uh(t),aT(GC)[this.ly]=this}function VC(){this.ly=Qd(),aT(VC)[this.ly]=this}function qC(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=void 0===n?a_(t,e):void 0===i?_emscripten_bind_btPoint2PointConstraint_btPoint2PointConstraint_3(t,e,n):s_(t,e,n,i),aT(qC)[this.ly]=this}function XC(t,e,n,i,r){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),this.ly=void 0===i?b_(t,e,n):void 0===r?_emscripten_bind_btGeneric6DofSpringConstraint_btGeneric6DofSpringConstraint_4(t,e,n,i):x_(t,e,n,i,r),aT(XC)[this.ly]=this}function YC(){this.ly=N_(),aT(YC)[this.ly]=this}function ZC(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=void 0===n?H_(t,e):void 0===i?_emscripten_bind_btConeTwistConstraint_btConeTwistConstraint_3(t,e,n):U_(t,e,n,i),aT(ZC)[this.ly]=this}function JC(t,e,n,i,r,o,a){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),this.ly=void 0===n?rf(t,e):void 0===i?of(t,e,n):void 0===r?af(t,e,n,i):void 0===o?sf(t,e,n,i,r):void 0===a?lf(t,e,n,i,r,o):cf(t,e,n,i,r,o,a),aT(JC)[this.ly]=this}function KC(t,e,n,i,r){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),this.ly=void 0===i?wf(t,e,n):void 0===r?_emscripten_bind_btSliderConstraint_btSliderConstraint_4(t,e,n,i):Mf(t,e,n,i,r),aT(KC)[this.ly]=this}function QC(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=Of(t,e,n,i),aT(QC)[this.ly]=this}function $C(){throw"cannot construct a btConstraintSolver, no constructor in IDL"}function tE(){throw"cannot construct a btDispatcherInfo, no constructor in IDL"}function eE(){throw"cannot construct a btContactSolverInfo, no constructor in IDL"}function nE(){this.ly=vm(),aT(nE)[this.ly]=this}function iE(){throw"cannot construct a btVehicleRaycasterResult, no constructor in IDL"}function rE(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Nm(t),aT(rE)[this.ly]=this}function oE(){throw"cannot construct a RaycastInfo, no constructor in IDL"}function aE(){throw"cannot construct a btWheelInfoConstructionInfo, no constructor in IDL"}function sE(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=Ly(t),aT(sE)[this.ly]=this}function lE(t,e,n,i){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),this.ly=void 0===i?Ag(t,e,n):Rg(t,e,n,i),aT(lE)[this.ly]=this}function cE(t,e,n){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),this.ly=Kg(t,e,n),aT(cE)[this.ly]=this}function uE(){this.ly=Rv(),aT(uE)[this.ly]=this}function pE(){this.ly=lb(),aT(pE)[this.ly]=this}function hE(){this.ly=ub(),aT(hE)[this.ly]=this}function dE(){throw"cannot construct a Face, no constructor in IDL"}function _E(){throw"cannot construct a tFaceArray, no constructor in IDL"}function fE(){throw"cannot construct a Node, no constructor in IDL"}function mE(){throw"cannot construct a tNodeArray, no constructor in IDL"}function yE(){throw"cannot construct a Material, no constructor in IDL"}function gE(){throw"cannot construct a tMaterialArray, no constructor in IDL"}function vE(){throw"cannot construct a Anchor, no constructor in IDL"}function bE(){throw"cannot construct a tAnchorArray, no constructor in IDL"}function xE(){throw"cannot construct a Config, no constructor in IDL"}function SE(t,e,n,i){dT(),t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),"object"==s()(i)&&(i=yT(i)),this.ly=DS(t,e,n,i),aT(SE)[this.ly]=this}function wE(t){t&&"object"===s()(t)&&(t=t.ly),this.ly=void 0===t?Ww():Gw(t),aT(wE)[this.ly]=this}function ME(){this.ly=qw(),aT(ME)[this.ly]=this}function TE(){throw"cannot construct a btSoftBodyArray, no constructor in IDL"}function CE(t,e,n,i,r){t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),this.ly=Kw(t,e,n,i,r),aT(CE)[this.ly]=this}function EE(){this.ly=zM(),aT(EE)[this.ly]=this}return gT.prototype=Object.create(oT.prototype),gT.prototype.constructor=gT,gT.prototype.my=gT,gT.ny={},r.btCollisionShape=gT,gT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ot(e,t)},gT.prototype.getLocalScaling=function(){return sT(at(this.ly),TT)},gT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),st(n,t,e)},gT.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),lt(e,t)},gT.prototype.getMargin=function(){return ct(this.ly)},gT.prototype.__destroy__=function(){ut(this.ly)},vT.prototype=Object.create(oT.prototype),vT.prototype.constructor=vT,vT.prototype.my=vT,vT.ny={},r.btCollisionWorld=vT,vT.prototype.getDispatcher=function(){return sT(pt(this.ly),FT)},vT.prototype.rayTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),ht(i,t,e,n)},vT.prototype.getPairCache=function(){return sT(dt(this.ly),jC)},vT.prototype.getDispatchInfo=function(){return sT(_t(this.ly),tE)},vT.prototype.addCollisionObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?ft(i,t):void 0===n?mt(i,t,e):yt(i,t,e,n)},vT.prototype.removeCollisionObject=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gt(e,t)},vT.prototype.getBroadphase=function(){return sT(vt(this.ly),NC)},vT.prototype.convexSweepTest=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),bt(o,t,e,n,i,r)},vT.prototype.contactPairTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),xt(i,t,e,n)},vT.prototype.contactTest=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),St(n,t,e)},vT.prototype.updateSingleAabb=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),wt(e,t)},vT.prototype.setDebugDrawer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mt(e,t)},vT.prototype.getDebugDrawer=function(){return sT(Tt(this.ly),MT)},vT.prototype.debugDrawWorld=function(){Ct(this.ly)},vT.prototype.debugDrawObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Et(i,t,e,n)},vT.prototype.__destroy__=function(){At(this.ly)},bT.prototype=Object.create(oT.prototype),bT.prototype.constructor=bT,bT.prototype.my=bT,bT.ny={},r.btCollisionObject=bT,bT.prototype.setAnisotropicFriction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Rt(n,t,e)},bT.prototype.getCollisionShape=function(){return sT(Lt(this.ly),gT)},bT.prototype.setContactProcessingThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Pt(e,t)},bT.prototype.setActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dt(e,t)},bT.prototype.forceActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),It(e,t)},bT.prototype.activate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),void 0===t?kt(e):Ot(e,t)},bT.prototype.isActive=function(){return!!Bt(this.ly)},bT.prototype.isKinematicObject=function(){return!!jt(this.ly)},bT.prototype.isStaticObject=function(){return!!Ft(this.ly)},bT.prototype.isStaticOrKinematicObject=function(){return!!Nt(this.ly)},bT.prototype.getRestitution=function(){return zt(this.ly)},bT.prototype.getFriction=function(){return Ht(this.ly)},bT.prototype.getRollingFriction=function(){return Ut(this.ly)},bT.prototype.setRestitution=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Wt(e,t)},bT.prototype.setFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gt(e,t)},bT.prototype.setRollingFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vt(e,t)},bT.prototype.getWorldTransform=function(){return sT(qt(this.ly),JT)},bT.prototype.getCollisionFlags=function(){return Xt(this.ly)},bT.prototype.setCollisionFlags=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Yt(e,t)},bT.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zt(e,t)},bT.prototype.setCollisionShape=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Jt(e,t)},bT.prototype.setCcdMotionThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Kt(e,t)},bT.prototype.setCcdSweptSphereRadius=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qt(e,t)},bT.prototype.getUserIndex=function(){return $t(this.ly)},bT.prototype.setUserIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),te(e,t)},bT.prototype.getUserPointer=function(){return sT(ee(this.ly),VT)},bT.prototype.setUserPointer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ne(e,t)},bT.prototype.getBroadphaseHandle=function(){return sT(ie(this.ly),UC)},bT.prototype.__destroy__=function(){re(this.ly)},xT.prototype=Object.create(gT.prototype),xT.prototype.constructor=xT,xT.prototype.my=xT,xT.ny={},r.btConcaveShape=xT,xT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),oe(e,t)},xT.prototype.getLocalScaling=function(){return sT(ae(this.ly),TT)},xT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),se(n,t,e)},xT.prototype.__destroy__=function(){le(this.ly)},ST.prototype=Object.create(oT.prototype),ST.prototype.constructor=ST,ST.prototype.my=ST,ST.ny={},r.btTypedConstraint=ST,ST.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ce(e,t)},ST.prototype.getBreakingImpulseThreshold=function(){return ue(this.ly)},ST.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),pe(e,t)},ST.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),he(n,t,e)},ST.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),de(i,t,e,n)},ST.prototype.__destroy__=function(){_e(this.ly)},wT.prototype=Object.create(vT.prototype),wT.prototype.constructor=wT,wT.prototype.my=wT,wT.ny={},r.btDynamicsWorld=wT,wT.prototype.addAction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fe(e,t)},wT.prototype.removeAction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),me(e,t)},wT.prototype.getSolverInfo=function(){return sT(ye(this.ly),eE)},wT.prototype.setInternalTickCallback=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?ge(i,t):void 0===n?ve(i,t,e):be(i,t,e,n)},wT.prototype.getDispatcher=function(){return sT(xe(this.ly),FT)},wT.prototype.rayTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Se(i,t,e,n)},wT.prototype.getPairCache=function(){return sT(we(this.ly),jC)},wT.prototype.getDispatchInfo=function(){return sT(Me(this.ly),tE)},wT.prototype.addCollisionObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?Te(i,t):void 0===n?Ce(i,t,e):Ee(i,t,e,n)},wT.prototype.removeCollisionObject=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ae(e,t)},wT.prototype.getBroadphase=function(){return sT(Re(this.ly),NC)},wT.prototype.convexSweepTest=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),Le(o,t,e,n,i,r)},wT.prototype.contactPairTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Pe(i,t,e,n)},wT.prototype.contactTest=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),De(n,t,e)},wT.prototype.updateSingleAabb=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ie(e,t)},wT.prototype.setDebugDrawer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ke(e,t)},wT.prototype.getDebugDrawer=function(){return sT(Oe(this.ly),MT)},wT.prototype.debugDrawWorld=function(){Be(this.ly)},wT.prototype.debugDrawObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),je(i,t,e,n)},wT.prototype.__destroy__=function(){Fe(this.ly)},MT.prototype=Object.create(oT.prototype),MT.prototype.constructor=MT,MT.prototype.my=MT,MT.ny={},r.btIDebugDraw=MT,MT.prototype.drawLine=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Ne(i,t,e,n)},MT.prototype.drawContactPoint=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),ze(o,t,e,n,i,r)},MT.prototype.reportErrorWarning=function(t){var e=this.ly;dT(),t=t&&"object"===s()(t)?t.ly:mT(t),He(e,t)},MT.prototype.draw3dText=function(t,e){var n=this.ly;dT(),t&&"object"===s()(t)&&(t=t.ly),e=e&&"object"===s()(e)?e.ly:mT(e),Ue(n,t,e)},MT.prototype.setDebugMode=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),We(e,t)},MT.prototype.getDebugMode=function(){return Ge(this.ly)},MT.prototype.__destroy__=function(){Ve(this.ly)},TT.prototype=Object.create(oT.prototype),TT.prototype.constructor=TT,TT.prototype.my=TT,TT.ny={},r.btVector3=TT,TT.prototype.length=TT.prototype.length=function(){return Ye(this.ly)},TT.prototype.x=TT.prototype.x=function(){return Ze(this.ly)},TT.prototype.y=TT.prototype.y=function(){return Je(this.ly)},TT.prototype.z=TT.prototype.z=function(){return Ke(this.ly)},TT.prototype.setX=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qe(e,t)},TT.prototype.setY=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$e(e,t)},TT.prototype.setZ=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tn(e,t)},TT.prototype.setValue=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),en(i,t,e,n)},TT.prototype.normalize=TT.prototype.normalize=function(){nn(this.ly)},TT.prototype.rotate=TT.prototype.rotate=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),sT(rn(n,t,e),TT)},TT.prototype.dot=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),on(e,t)},TT.prototype.op_mul=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(an(e,t),TT)},TT.prototype.op_add=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(sn(e,t),TT)},TT.prototype.op_sub=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ln(e,t),TT)},TT.prototype.__destroy__=function(){cn(this.ly)},CT.prototype=Object.create(oT.prototype),CT.prototype.constructor=CT,CT.prototype.my=CT,CT.ny={},r.btQuadWord=CT,CT.prototype.x=CT.prototype.x=function(){return un(this.ly)},CT.prototype.y=CT.prototype.y=function(){return pn(this.ly)},CT.prototype.z=CT.prototype.z=function(){return hn(this.ly)},CT.prototype.w=function(){return dn(this.ly)},CT.prototype.setX=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_n(e,t)},CT.prototype.setY=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fn(e,t)},CT.prototype.setZ=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mn(e,t)},CT.prototype.setW=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),yn(e,t)},CT.prototype.__destroy__=function(){gn(this.ly)},ET.prototype=Object.create(oT.prototype),ET.prototype.constructor=ET,ET.prototype.my=ET,ET.ny={},r.btMotionState=ET,ET.prototype.getWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vn(e,t)},ET.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bn(e,t)},ET.prototype.__destroy__=function(){xn(this.ly)},AT.prototype=Object.create(oT.prototype),AT.prototype.constructor=AT,AT.prototype.my=AT,AT.ny={},r.RayResultCallback=AT,AT.prototype.hasHit=function(){return!!Sn(this.ly)},AT.prototype.get_m_collisionFilterGroup=AT.prototype.oy=function(){return wn(this.ly)},AT.prototype.set_m_collisionFilterGroup=AT.prototype.qy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mn(e,t)},Object.defineProperty(AT.prototype,"m_collisionFilterGroup",{get:AT.prototype.oy,set:AT.prototype.qy}),AT.prototype.get_m_collisionFilterMask=AT.prototype.py=function(){return Tn(this.ly)},AT.prototype.set_m_collisionFilterMask=AT.prototype.ry=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cn(e,t)},Object.defineProperty(AT.prototype,"m_collisionFilterMask",{get:AT.prototype.py,set:AT.prototype.ry}),AT.prototype.get_m_closestHitFraction=AT.prototype.sy=function(){return En(this.ly)},AT.prototype.set_m_closestHitFraction=AT.prototype.ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),An(e,t)},Object.defineProperty(AT.prototype,"m_closestHitFraction",{get:AT.prototype.sy,set:AT.prototype.ty}),AT.prototype.get_m_collisionObject=AT.prototype.uy=function(){return sT(Rn(this.ly),bT)},AT.prototype.set_m_collisionObject=AT.prototype.By=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ln(e,t)},Object.defineProperty(AT.prototype,"m_collisionObject",{get:AT.prototype.uy,set:AT.prototype.By}),AT.prototype.__destroy__=function(){Pn(this.ly)},RT.prototype=Object.create(oT.prototype),RT.prototype.constructor=RT,RT.prototype.my=RT,RT.ny={},r.ContactResultCallback=RT,RT.prototype.addSingleResult=function(t,e,n,i,r,o,a){var l=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),Dn(l,t,e,n,i,r,o,a)},RT.prototype.__destroy__=function(){In(this.ly)},LT.prototype=Object.create(oT.prototype),LT.prototype.constructor=LT,LT.prototype.my=LT,LT.ny={},r.ConvexResultCallback=LT,LT.prototype.hasHit=function(){return!!kn(this.ly)},LT.prototype.get_m_collisionFilterGroup=LT.prototype.oy=function(){return On(this.ly)},LT.prototype.set_m_collisionFilterGroup=LT.prototype.qy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Bn(e,t)},Object.defineProperty(LT.prototype,"m_collisionFilterGroup",{get:LT.prototype.oy,set:LT.prototype.qy}),LT.prototype.get_m_collisionFilterMask=LT.prototype.py=function(){return jn(this.ly)},LT.prototype.set_m_collisionFilterMask=LT.prototype.ry=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fn(e,t)},Object.defineProperty(LT.prototype,"m_collisionFilterMask",{get:LT.prototype.py,set:LT.prototype.ry}),LT.prototype.get_m_closestHitFraction=LT.prototype.sy=function(){return Nn(this.ly)},LT.prototype.set_m_closestHitFraction=LT.prototype.ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),zn(e,t)},Object.defineProperty(LT.prototype,"m_closestHitFraction",{get:LT.prototype.sy,set:LT.prototype.ty}),LT.prototype.__destroy__=function(){Hn(this.ly)},PT.prototype=Object.create(gT.prototype),PT.prototype.constructor=PT,PT.prototype.my=PT,PT.ny={},r.btConvexShape=PT,PT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Un(e,t)},PT.prototype.getLocalScaling=function(){return sT(Wn(this.ly),TT)},PT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Gn(n,t,e)},PT.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vn(e,t)},PT.prototype.getMargin=function(){return qn(this.ly)},PT.prototype.__destroy__=function(){Xn(this.ly)},DT.prototype=Object.create(gT.prototype),DT.prototype.constructor=DT,DT.prototype.my=DT,DT.ny={},r.btCapsuleShape=DT,DT.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zn(e,t)},DT.prototype.getMargin=function(){return Jn(this.ly)},DT.prototype.getUpAxis=function(){return Kn(this.ly)},DT.prototype.getRadius=function(){return Qn(this.ly)},DT.prototype.getHalfHeight=function(){return $n(this.ly)},DT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ti(e,t)},DT.prototype.getLocalScaling=function(){return sT(ei(this.ly),TT)},DT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),ni(n,t,e)},DT.prototype.__destroy__=function(){ii(this.ly)},IT.prototype=Object.create(gT.prototype),IT.prototype.constructor=IT,IT.prototype.my=IT,IT.ny={},r.btCylinderShape=IT,IT.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),oi(e,t)},IT.prototype.getMargin=function(){return ai(this.ly)},IT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),si(e,t)},IT.prototype.getLocalScaling=function(){return sT(li(this.ly),TT)},IT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),ci(n,t,e)},IT.prototype.__destroy__=function(){ui(this.ly)},kT.prototype=Object.create(gT.prototype),kT.prototype.constructor=kT,kT.prototype.my=kT,kT.ny={},r.btConeShape=kT,kT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),hi(e,t)},kT.prototype.getLocalScaling=function(){return sT(di(this.ly),TT)},kT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),_i(n,t,e)},kT.prototype.__destroy__=function(){fi(this.ly)},OT.prototype=Object.create(oT.prototype),OT.prototype.constructor=OT,OT.prototype.my=OT,OT.ny={},r.btStridingMeshInterface=OT,OT.prototype.setScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mi(e,t)},OT.prototype.__destroy__=function(){yi(this.ly)},BT.prototype=Object.create(xT.prototype),BT.prototype.constructor=BT,BT.prototype.my=BT,BT.ny={},r.btTriangleMeshShape=BT,BT.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gi(e,t)},BT.prototype.getLocalScaling=function(){return sT(vi(this.ly),TT)},BT.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),bi(n,t,e)},BT.prototype.__destroy__=function(){xi(this.ly)},jT.prototype=Object.create(oT.prototype),jT.prototype.constructor=jT,jT.prototype.my=jT,jT.ny={},r.btDefaultCollisionConfiguration=jT,jT.prototype.__destroy__=function(){Mi(this.ly)},FT.prototype=Object.create(oT.prototype),FT.prototype.constructor=FT,FT.prototype.my=FT,FT.ny={},r.btDispatcher=FT,FT.prototype.getNumManifolds=function(){return Ti(this.ly)},FT.prototype.getManifoldByIndexInternal=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Ci(e,t),kC)},FT.prototype.__destroy__=function(){Ei(this.ly)},NT.prototype=Object.create(ST.prototype),NT.prototype.constructor=NT,NT.prototype.my=NT,NT.ny={},r.btGeneric6DofConstraint=NT,NT.prototype.setLinearLowerLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Li(e,t)},NT.prototype.setLinearUpperLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Pi(e,t)},NT.prototype.setAngularLowerLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Di(e,t)},NT.prototype.setAngularUpperLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ii(e,t)},NT.prototype.getFrameOffsetA=function(){return sT(ki(this.ly),JT)},NT.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Oi(e,t)},NT.prototype.getBreakingImpulseThreshold=function(){return Bi(this.ly)},NT.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ji(e,t)},NT.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Fi(n,t,e)},NT.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Ni(i,t,e,n)},NT.prototype.__destroy__=function(){zi(this.ly)},zT.prototype=Object.create(wT.prototype),zT.prototype.constructor=zT,zT.prototype.my=zT,zT.ny={},r.btDiscreteDynamicsWorld=zT,zT.prototype.setGravity=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ui(e,t)},zT.prototype.getGravity=function(){return sT(Wi(this.ly),TT)},zT.prototype.addRigidBody=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?Gi(i,t):void 0===n?_emscripten_bind_btDiscreteDynamicsWorld_addRigidBody_2(i,t,e):Vi(i,t,e,n)},zT.prototype.removeRigidBody=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),qi(e,t)},zT.prototype.addConstraint=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===e?Xi(n,t):Yi(n,t,e)},zT.prototype.removeConstraint=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zi(e,t)},zT.prototype.stepSimulation=function(t,e,n){var i=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?Ji(i,t):void 0===n?Ki(i,t,e):Qi(i,t,e,n)},zT.prototype.setContactAddedCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$i(e,t)},zT.prototype.setContactProcessedCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tr(e,t)},zT.prototype.setContactDestroyedCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),er(e,t)},zT.prototype.getDispatcher=function(){return sT(nr(this.ly),FT)},zT.prototype.rayTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),ir(i,t,e,n)},zT.prototype.getPairCache=function(){return sT(rr(this.ly),jC)},zT.prototype.getDispatchInfo=function(){return sT(or(this.ly),tE)},zT.prototype.addCollisionObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?ar(i,t):void 0===n?sr(i,t,e):lr(i,t,e,n)},zT.prototype.removeCollisionObject=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),cr(e,t)},zT.prototype.getBroadphase=function(){return sT(ur(this.ly),NC)},zT.prototype.convexSweepTest=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),pr(o,t,e,n,i,r)},zT.prototype.contactPairTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),hr(i,t,e,n)},zT.prototype.contactTest=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),dr(n,t,e)},zT.prototype.updateSingleAabb=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_r(e,t)},zT.prototype.setDebugDrawer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fr(e,t)},zT.prototype.getDebugDrawer=function(){return sT(mr(this.ly),MT)},zT.prototype.debugDrawWorld=function(){yr(this.ly)},zT.prototype.debugDrawObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),gr(i,t,e,n)},zT.prototype.addAction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vr(e,t)},zT.prototype.removeAction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),br(e,t)},zT.prototype.getSolverInfo=function(){return sT(xr(this.ly),eE)},zT.prototype.setInternalTickCallback=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?Sr(i,t):void 0===n?wr(i,t,e):Mr(i,t,e,n)},zT.prototype.__destroy__=function(){Tr(this.ly)},HT.prototype=Object.create(oT.prototype),HT.prototype.constructor=HT,HT.prototype.my=HT,HT.ny={},r.btVehicleRaycaster=HT,HT.prototype.castRay=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Cr(i,t,e,n)},HT.prototype.__destroy__=function(){Er(this.ly)},UT.prototype=Object.create(oT.prototype),UT.prototype.constructor=UT,UT.prototype.my=UT,UT.ny={},r.btActionInterface=UT,UT.prototype.updateAction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Ar(n,t,e)},UT.prototype.__destroy__=function(){Rr(this.ly)},WT.prototype=Object.create(bT.prototype),WT.prototype.constructor=WT,WT.prototype.my=WT,WT.ny={},r.btGhostObject=WT,WT.prototype.getNumOverlappingObjects=function(){return Pr(this.ly)},WT.prototype.getOverlappingObject=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Dr(e,t),bT)},WT.prototype.setAnisotropicFriction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Ir(n,t,e)},WT.prototype.getCollisionShape=function(){return sT(kr(this.ly),gT)},WT.prototype.setContactProcessingThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Or(e,t)},WT.prototype.setActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Br(e,t)},WT.prototype.forceActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),jr(e,t)},WT.prototype.activate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),void 0===t?Fr(e):Nr(e,t)},WT.prototype.isActive=function(){return!!zr(this.ly)},WT.prototype.isKinematicObject=function(){return!!Hr(this.ly)},WT.prototype.isStaticObject=function(){return!!Ur(this.ly)},WT.prototype.isStaticOrKinematicObject=function(){return!!Wr(this.ly)},WT.prototype.getRestitution=function(){return Gr(this.ly)},WT.prototype.getFriction=function(){return Vr(this.ly)},WT.prototype.getRollingFriction=function(){return qr(this.ly)},WT.prototype.setRestitution=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xr(e,t)},WT.prototype.setFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Yr(e,t)},WT.prototype.setRollingFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zr(e,t)},WT.prototype.getWorldTransform=function(){return sT(Jr(this.ly),JT)},WT.prototype.getCollisionFlags=function(){return Kr(this.ly)},WT.prototype.setCollisionFlags=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qr(e,t)},WT.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$r(e,t)},WT.prototype.setCollisionShape=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),to(e,t)},WT.prototype.setCcdMotionThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),eo(e,t)},WT.prototype.setCcdSweptSphereRadius=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),no(e,t)},WT.prototype.getUserIndex=function(){return io(this.ly)},WT.prototype.setUserIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ro(e,t)},WT.prototype.getUserPointer=function(){return sT(oo(this.ly),VT)},WT.prototype.setUserPointer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ao(e,t)},WT.prototype.getBroadphaseHandle=function(){return sT(so(this.ly),UC)},WT.prototype.__destroy__=function(){lo(this.ly)},GT.prototype=Object.create(oT.prototype),GT.prototype.constructor=GT,GT.prototype.my=GT,GT.ny={},r.btSoftBodySolver=GT,GT.prototype.__destroy__=function(){co(this.ly)},VT.prototype=Object.create(oT.prototype),VT.prototype.constructor=VT,VT.prototype.my=VT,VT.ny={},r.VoidPtr=VT,VT.prototype.__destroy__=function(){uo(this.ly)},qT.prototype=Object.create(MT.prototype),qT.prototype.constructor=qT,qT.prototype.my=qT,qT.ny={},r.DebugDrawer=qT,qT.prototype.drawLine=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),ho(i,t,e,n)},qT.prototype.drawContactPoint=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),_o(o,t,e,n,i,r)},qT.prototype.reportErrorWarning=function(t){var e=this.ly;dT(),t=t&&"object"===s()(t)?t.ly:mT(t),fo(e,t)},qT.prototype.draw3dText=function(t,e){var n=this.ly;dT(),t&&"object"===s()(t)&&(t=t.ly),e=e&&"object"===s()(e)?e.ly:mT(e),mo(n,t,e)},qT.prototype.setDebugMode=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),yo(e,t)},qT.prototype.getDebugMode=function(){return go(this.ly)},qT.prototype.__destroy__=function(){vo(this.ly)},XT.prototype=Object.create(TT.prototype),XT.prototype.constructor=XT,XT.prototype.my=XT,XT.ny={},r.btVector4=XT,XT.prototype.w=function(){return So(this.ly)},XT.prototype.setValue=function(t,e,n,i){var r=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),wo(r,t,e,n,i)},XT.prototype.length=XT.prototype.length=function(){return Mo(this.ly)},XT.prototype.x=XT.prototype.x=function(){return To(this.ly)},XT.prototype.y=XT.prototype.y=function(){return Co(this.ly)},XT.prototype.z=XT.prototype.z=function(){return Eo(this.ly)},XT.prototype.setX=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ao(e,t)},XT.prototype.setY=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ro(e,t)},XT.prototype.setZ=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Lo(e,t)},XT.prototype.normalize=XT.prototype.normalize=function(){Po(this.ly)},XT.prototype.rotate=XT.prototype.rotate=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),sT(Do(n,t,e),TT)},XT.prototype.dot=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),Io(e,t)},XT.prototype.op_mul=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ko(e,t),TT)},XT.prototype.op_add=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Oo(e,t),TT)},XT.prototype.op_sub=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Bo(e,t),TT)},XT.prototype.__destroy__=function(){jo(this.ly)},YT.prototype=Object.create(CT.prototype),YT.prototype.constructor=YT,YT.prototype.my=YT,YT.ny={},r.btQuaternion=YT,YT.prototype.setValue=function(t,e,n,i){var r=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),No(r,t,e,n,i)},YT.prototype.setEulerZYX=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),zo(i,t,e,n)},YT.prototype.setRotation=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Ho(n,t,e)},YT.prototype.normalize=YT.prototype.normalize=function(){Uo(this.ly)},YT.prototype.length2=function(){return Wo(this.ly)},YT.prototype.length=YT.prototype.length=function(){return Go(this.ly)},YT.prototype.dot=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),Vo(e,t)},YT.prototype.normalized=function(){return sT(qo(this.ly),YT)},YT.prototype.getAxis=function(){return sT(Xo(this.ly),TT)},YT.prototype.inverse=YT.prototype.inverse=function(){return sT(Yo(this.ly),YT)},YT.prototype.getAngle=function(){return Zo(this.ly)},YT.prototype.getAngleShortestPath=function(){return Jo(this.ly)},YT.prototype.angle=YT.prototype.angle=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),Ko(e,t)},YT.prototype.angleShortestPath=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),Qo(e,t)},YT.prototype.op_add=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT($o(e,t),YT)},YT.prototype.op_sub=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ta(e,t),YT)},YT.prototype.op_mul=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ea(e,t),YT)},YT.prototype.op_mulq=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(na(e,t),YT)},YT.prototype.op_div=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ia(e,t),YT)},YT.prototype.x=YT.prototype.x=function(){return ra(this.ly)},YT.prototype.y=YT.prototype.y=function(){return oa(this.ly)},YT.prototype.z=YT.prototype.z=function(){return aa(this.ly)},YT.prototype.w=function(){return sa(this.ly)},YT.prototype.setX=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),la(e,t)},YT.prototype.setY=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ca(e,t)},YT.prototype.setZ=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ua(e,t)},YT.prototype.setW=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),pa(e,t)},YT.prototype.__destroy__=function(){ha(this.ly)},ZT.prototype=Object.create(oT.prototype),ZT.prototype.constructor=ZT,ZT.prototype.my=ZT,ZT.ny={},r.btMatrix3x3=ZT,ZT.prototype.setEulerZYX=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),da(i,t,e,n)},ZT.prototype.getRotation=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_a(e,t)},ZT.prototype.getRow=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(fa(e,t),TT)},ZT.prototype.__destroy__=function(){ma(this.ly)},JT.prototype=Object.create(oT.prototype),JT.prototype.constructor=JT,JT.prototype.my=JT,JT.ny={},r.btTransform=JT,JT.prototype.setIdentity=function(){va(this.ly)},JT.prototype.setOrigin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ba(e,t)},JT.prototype.setRotation=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),xa(e,t)},JT.prototype.getOrigin=function(){return sT(Sa(this.ly),TT)},JT.prototype.getRotation=function(){return sT(wa(this.ly),YT)},JT.prototype.getBasis=function(){return sT(Ma(this.ly),ZT)},JT.prototype.setFromOpenGLMatrix=function(t){var e=this.ly;dT(),"object"==s()(t)&&(t=yT(t)),Ta(e,t)},JT.prototype.inverse=JT.prototype.inverse=function(){return sT(Ca(this.ly),JT)},JT.prototype.op_mul=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Ea(e,t),JT)},JT.prototype.__destroy__=function(){Aa(this.ly)},KT.prototype=Object.create(ET.prototype),KT.prototype.constructor=KT,KT.prototype.my=KT,KT.ny={},r.btDefaultMotionState=KT,KT.prototype.getWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Da(e,t)},KT.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ia(e,t)},KT.prototype.get_m_graphicsWorldTrans=KT.prototype.kA=function(){return sT(ka(this.ly),JT)},KT.prototype.set_m_graphicsWorldTrans=KT.prototype.QC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Oa(e,t)},Object.defineProperty(KT.prototype,"m_graphicsWorldTrans",{get:KT.prototype.kA,set:KT.prototype.QC}),KT.prototype.__destroy__=function(){Ba(this.ly)},QT.prototype=Object.create(oT.prototype),QT.prototype.constructor=QT,QT.prototype.my=QT,QT.ny={},r.btCollisionObjectWrapper=QT,QT.prototype.getWorldTransform=function(){return sT(ja(this.ly),JT)},QT.prototype.getCollisionObject=function(){return sT(Fa(this.ly),bT)},QT.prototype.getCollisionShape=function(){return sT(Na(this.ly),gT)},$T.prototype=Object.create(AT.prototype),$T.prototype.constructor=$T,$T.prototype.my=$T,$T.ny={},r.ClosestRayResultCallback=$T,$T.prototype.hasHit=function(){return!!Ha(this.ly)},$T.prototype.get_m_rayFromWorld=$T.prototype.Ny=function(){return sT(Ua(this.ly),TT)},$T.prototype.set_m_rayFromWorld=$T.prototype.Xy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Wa(e,t)},Object.defineProperty($T.prototype,"m_rayFromWorld",{get:$T.prototype.Ny,set:$T.prototype.Xy}),$T.prototype.get_m_rayToWorld=$T.prototype.Oy=function(){return sT(Ga(this.ly),TT)},$T.prototype.set_m_rayToWorld=$T.prototype.Yy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Va(e,t)},Object.defineProperty($T.prototype,"m_rayToWorld",{get:$T.prototype.Oy,set:$T.prototype.Yy}),$T.prototype.get_m_hitNormalWorld=$T.prototype.wy=function(){return sT(qa(this.ly),TT)},$T.prototype.set_m_hitNormalWorld=$T.prototype.Dy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xa(e,t)},Object.defineProperty($T.prototype,"m_hitNormalWorld",{get:$T.prototype.wy,set:$T.prototype.Dy}),$T.prototype.get_m_hitPointWorld=$T.prototype.xy=function(){return sT(Ya(this.ly),TT)},$T.prototype.set_m_hitPointWorld=$T.prototype.Ey=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Za(e,t)},Object.defineProperty($T.prototype,"m_hitPointWorld",{get:$T.prototype.xy,set:$T.prototype.Ey}),$T.prototype.get_m_collisionFilterGroup=$T.prototype.oy=function(){return Ja(this.ly)},$T.prototype.set_m_collisionFilterGroup=$T.prototype.qy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ka(e,t)},Object.defineProperty($T.prototype,"m_collisionFilterGroup",{get:$T.prototype.oy,set:$T.prototype.qy}),$T.prototype.get_m_collisionFilterMask=$T.prototype.py=function(){return Qa(this.ly)},$T.prototype.set_m_collisionFilterMask=$T.prototype.ry=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$a(e,t)},Object.defineProperty($T.prototype,"m_collisionFilterMask",{get:$T.prototype.py,set:$T.prototype.ry}),$T.prototype.get_m_closestHitFraction=$T.prototype.sy=function(){return ts(this.ly)},$T.prototype.set_m_closestHitFraction=$T.prototype.ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),es(e,t)},Object.defineProperty($T.prototype,"m_closestHitFraction",{get:$T.prototype.sy,set:$T.prototype.ty}),$T.prototype.get_m_collisionObject=$T.prototype.uy=function(){return sT(ns(this.ly),bT)},$T.prototype.set_m_collisionObject=$T.prototype.By=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),is(e,t)},Object.defineProperty($T.prototype,"m_collisionObject",{get:$T.prototype.uy,set:$T.prototype.By}),$T.prototype.__destroy__=function(){rs(this.ly)},tC.prototype=Object.create(oT.prototype),tC.prototype.constructor=tC,tC.prototype.my=tC,tC.ny={},r.btConstCollisionObjectArray=tC,tC.prototype.size=tC.prototype.size=function(){return os(this.ly)},tC.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(as(e,t),bT)},tC.prototype.__destroy__=function(){ss(this.ly)},eC.prototype=Object.create(oT.prototype),eC.prototype.constructor=eC,eC.prototype.my=eC,eC.ny={},r.btScalarArray=eC,eC.prototype.size=eC.prototype.size=function(){return ls(this.ly)},eC.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),cs(e,t)},eC.prototype.__destroy__=function(){us(this.ly)},nC.prototype=Object.create(AT.prototype),nC.prototype.constructor=nC,nC.prototype.my=nC,nC.ny={},r.AllHitsRayResultCallback=nC,nC.prototype.hasHit=function(){return!!hs(this.ly)},nC.prototype.get_m_collisionObjects=nC.prototype.Uz=function(){return sT(ds(this.ly),tC)},nC.prototype.set_m_collisionObjects=nC.prototype.zC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_s(e,t)},Object.defineProperty(nC.prototype,"m_collisionObjects",{get:nC.prototype.Uz,set:nC.prototype.zC}),nC.prototype.get_m_rayFromWorld=nC.prototype.Ny=function(){return sT(fs(this.ly),TT)},nC.prototype.set_m_rayFromWorld=nC.prototype.Xy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ms(e,t)},Object.defineProperty(nC.prototype,"m_rayFromWorld",{get:nC.prototype.Ny,set:nC.prototype.Xy}),nC.prototype.get_m_rayToWorld=nC.prototype.Oy=function(){return sT(ys(this.ly),TT)},nC.prototype.set_m_rayToWorld=nC.prototype.Yy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gs(e,t)},Object.defineProperty(nC.prototype,"m_rayToWorld",{get:nC.prototype.Oy,set:nC.prototype.Yy}),nC.prototype.get_m_hitNormalWorld=nC.prototype.wy=function(){return sT(vs(this.ly),bC)},nC.prototype.set_m_hitNormalWorld=nC.prototype.Dy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bs(e,t)},Object.defineProperty(nC.prototype,"m_hitNormalWorld",{get:nC.prototype.wy,set:nC.prototype.Dy}),nC.prototype.get_m_hitPointWorld=nC.prototype.xy=function(){return sT(xs(this.ly),bC)},nC.prototype.set_m_hitPointWorld=nC.prototype.Ey=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ss(e,t)},Object.defineProperty(nC.prototype,"m_hitPointWorld",{get:nC.prototype.xy,set:nC.prototype.Ey}),nC.prototype.get_m_hitFractions=nC.prototype.pA=function(){return sT(ws(this.ly),eC)},nC.prototype.set_m_hitFractions=nC.prototype.VC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ms(e,t)},Object.defineProperty(nC.prototype,"m_hitFractions",{get:nC.prototype.pA,set:nC.prototype.VC}),nC.prototype.get_m_collisionFilterGroup=nC.prototype.oy=function(){return Ts(this.ly)},nC.prototype.set_m_collisionFilterGroup=nC.prototype.qy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cs(e,t)},Object.defineProperty(nC.prototype,"m_collisionFilterGroup",{get:nC.prototype.oy,set:nC.prototype.qy}),nC.prototype.get_m_collisionFilterMask=nC.prototype.py=function(){return Es(this.ly)},nC.prototype.set_m_collisionFilterMask=nC.prototype.ry=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),As(e,t)},Object.defineProperty(nC.prototype,"m_collisionFilterMask",{get:nC.prototype.py,set:nC.prototype.ry}),nC.prototype.get_m_closestHitFraction=nC.prototype.sy=function(){return Rs(this.ly)},nC.prototype.set_m_closestHitFraction=nC.prototype.ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ls(e,t)},Object.defineProperty(nC.prototype,"m_closestHitFraction",{get:nC.prototype.sy,set:nC.prototype.ty}),nC.prototype.get_m_collisionObject=nC.prototype.uy=function(){return sT(Ps(this.ly),bT)},nC.prototype.set_m_collisionObject=nC.prototype.By=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ds(e,t)},Object.defineProperty(nC.prototype,"m_collisionObject",{get:nC.prototype.uy,set:nC.prototype.By}),nC.prototype.__destroy__=function(){Is(this.ly)},iC.prototype=Object.create(oT.prototype),iC.prototype.constructor=iC,iC.prototype.my=iC,iC.ny={},r.btManifoldPoint=iC,iC.prototype.getPositionWorldOnA=function(){return sT(ks(this.ly),TT)},iC.prototype.getPositionWorldOnB=function(){return sT(Os(this.ly),TT)},iC.prototype.getAppliedImpulse=function(){return Bs(this.ly)},iC.prototype.getDistance=function(){return js(this.ly)},iC.prototype.get_m_localPointA=iC.prototype.FA=function(){return sT(Fs(this.ly),TT)},iC.prototype.set_m_localPointA=iC.prototype.kD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ns(e,t)},Object.defineProperty(iC.prototype,"m_localPointA",{get:iC.prototype.FA,set:iC.prototype.kD}),iC.prototype.get_m_localPointB=iC.prototype.GA=function(){return sT(zs(this.ly),TT)},iC.prototype.set_m_localPointB=iC.prototype.lD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hs(e,t)},Object.defineProperty(iC.prototype,"m_localPointB",{get:iC.prototype.GA,set:iC.prototype.lD}),iC.prototype.get_m_positionWorldOnB=iC.prototype.SA=function(){return sT(Us(this.ly),TT)},iC.prototype.set_m_positionWorldOnB=iC.prototype.xD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ws(e,t)},Object.defineProperty(iC.prototype,"m_positionWorldOnB",{get:iC.prototype.SA,set:iC.prototype.xD}),iC.prototype.get_m_positionWorldOnA=iC.prototype.RA=function(){return sT(Gs(this.ly),TT)},iC.prototype.set_m_positionWorldOnA=iC.prototype.wD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vs(e,t)},Object.defineProperty(iC.prototype,"m_positionWorldOnA",{get:iC.prototype.RA,set:iC.prototype.wD}),iC.prototype.get_m_normalWorldOnB=iC.prototype.NA=function(){return sT(qs(this.ly),TT)},iC.prototype.set_m_normalWorldOnB=iC.prototype.sD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xs(e,t)},Object.defineProperty(iC.prototype,"m_normalWorldOnB",{get:iC.prototype.NA,set:iC.prototype.sD}),iC.prototype.get_m_userPersistentData=iC.prototype.tB=function(){return Ys(this.ly)},iC.prototype.set_m_userPersistentData=iC.prototype.ZD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zs(e,t)},Object.defineProperty(iC.prototype,"m_userPersistentData",{get:iC.prototype.tB,set:iC.prototype.ZD}),iC.prototype.__destroy__=function(){Js(this.ly)},rC.prototype=Object.create(RT.prototype),rC.prototype.constructor=rC,rC.prototype.my=rC,rC.ny={},r.ConcreteContactResultCallback=rC,rC.prototype.addSingleResult=function(t,e,n,i,r,o,a){var l=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),Qs(l,t,e,n,i,r,o,a)},rC.prototype.__destroy__=function(){$s(this.ly)},oC.prototype=Object.create(oT.prototype),oC.prototype.constructor=oC,oC.prototype.my=oC,oC.ny={},r.LocalShapeInfo=oC,oC.prototype.get_m_shapePart=oC.prototype.aB=function(){return tl(this.ly)},oC.prototype.set_m_shapePart=oC.prototype.GD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),el(e,t)},Object.defineProperty(oC.prototype,"m_shapePart",{get:oC.prototype.aB,set:oC.prototype.GD}),oC.prototype.get_m_triangleIndex=oC.prototype.pB=function(){return nl(this.ly)},oC.prototype.set_m_triangleIndex=oC.prototype.VD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),il(e,t)},Object.defineProperty(oC.prototype,"m_triangleIndex",{get:oC.prototype.pB,set:oC.prototype.VD}),oC.prototype.__destroy__=function(){rl(this.ly)},aC.prototype=Object.create(oT.prototype),aC.prototype.constructor=aC,aC.prototype.my=aC,aC.ny={},r.LocalConvexResult=aC,aC.prototype.get_m_hitCollisionObject=aC.prototype.Ly=function(){return sT(al(this.ly),bT)},aC.prototype.set_m_hitCollisionObject=aC.prototype.Vy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),sl(e,t)},Object.defineProperty(aC.prototype,"m_hitCollisionObject",{get:aC.prototype.Ly,set:aC.prototype.Vy}),aC.prototype.get_m_localShapeInfo=aC.prototype.HA=function(){return sT(ll(this.ly),oC)},aC.prototype.set_m_localShapeInfo=aC.prototype.mD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),cl(e,t)},Object.defineProperty(aC.prototype,"m_localShapeInfo",{get:aC.prototype.HA,set:aC.prototype.mD}),aC.prototype.get_m_hitNormalLocal=aC.prototype.rA=function(){return sT(ul(this.ly),TT)},aC.prototype.set_m_hitNormalLocal=aC.prototype.XC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),pl(e,t)},Object.defineProperty(aC.prototype,"m_hitNormalLocal",{get:aC.prototype.rA,set:aC.prototype.XC}),aC.prototype.get_m_hitPointLocal=aC.prototype.tA=function(){return sT(hl(this.ly),TT)},aC.prototype.set_m_hitPointLocal=aC.prototype.ZC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),dl(e,t)},Object.defineProperty(aC.prototype,"m_hitPointLocal",{get:aC.prototype.tA,set:aC.prototype.ZC}),aC.prototype.get_m_hitFraction=aC.prototype.oA=function(){return _l(this.ly)},aC.prototype.set_m_hitFraction=aC.prototype.UC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fl(e,t)},Object.defineProperty(aC.prototype,"m_hitFraction",{get:aC.prototype.oA,set:aC.prototype.UC}),aC.prototype.__destroy__=function(){ml(this.ly)},sC.prototype=Object.create(LT.prototype),sC.prototype.constructor=sC,sC.prototype.my=sC,sC.ny={},r.ClosestConvexResultCallback=sC,sC.prototype.hasHit=function(){return!!gl(this.ly)},sC.prototype.get_m_hitCollisionObject=sC.prototype.Ly=function(){return sT(vl(this.ly),bT)},sC.prototype.set_m_hitCollisionObject=sC.prototype.Vy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bl(e,t)},Object.defineProperty(sC.prototype,"m_hitCollisionObject",{get:sC.prototype.Ly,set:sC.prototype.Vy}),sC.prototype.get_m_convexFromWorld=sC.prototype.Yz=function(){return sT(xl(this.ly),TT)},sC.prototype.set_m_convexFromWorld=sC.prototype.DC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Sl(e,t)},Object.defineProperty(sC.prototype,"m_convexFromWorld",{get:sC.prototype.Yz,set:sC.prototype.DC}),sC.prototype.get_m_convexToWorld=sC.prototype.Zz=function(){return sT(wl(this.ly),TT)},sC.prototype.set_m_convexToWorld=sC.prototype.EC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ml(e,t)},Object.defineProperty(sC.prototype,"m_convexToWorld",{get:sC.prototype.Zz,set:sC.prototype.EC}),sC.prototype.get_m_hitNormalWorld=sC.prototype.wy=function(){return sT(Tl(this.ly),TT)},sC.prototype.set_m_hitNormalWorld=sC.prototype.Dy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cl(e,t)},Object.defineProperty(sC.prototype,"m_hitNormalWorld",{get:sC.prototype.wy,set:sC.prototype.Dy}),sC.prototype.get_m_hitPointWorld=sC.prototype.xy=function(){return sT(El(this.ly),TT)},sC.prototype.set_m_hitPointWorld=sC.prototype.Ey=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Al(e,t)},Object.defineProperty(sC.prototype,"m_hitPointWorld",{get:sC.prototype.xy,set:sC.prototype.Ey}),sC.prototype.get_m_collisionFilterGroup=sC.prototype.oy=function(){return Rl(this.ly)},sC.prototype.set_m_collisionFilterGroup=sC.prototype.qy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ll(e,t)},Object.defineProperty(sC.prototype,"m_collisionFilterGroup",{get:sC.prototype.oy,set:sC.prototype.qy}),sC.prototype.get_m_collisionFilterMask=sC.prototype.py=function(){return Pl(this.ly)},sC.prototype.set_m_collisionFilterMask=sC.prototype.ry=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dl(e,t)},Object.defineProperty(sC.prototype,"m_collisionFilterMask",{get:sC.prototype.py,set:sC.prototype.ry}),sC.prototype.get_m_closestHitFraction=sC.prototype.sy=function(){return Il(this.ly)},sC.prototype.set_m_closestHitFraction=sC.prototype.ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kl(e,t)},Object.defineProperty(sC.prototype,"m_closestHitFraction",{get:sC.prototype.sy,set:sC.prototype.ty}),sC.prototype.__destroy__=function(){Ol(this.ly)},lC.prototype=Object.create(PT.prototype),lC.prototype.constructor=lC,lC.prototype.my=lC,lC.ny={},r.btConvexTriangleMeshShape=lC,lC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fl(e,t)},lC.prototype.getLocalScaling=function(){return sT(Nl(this.ly),TT)},lC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),zl(n,t,e)},lC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hl(e,t)},lC.prototype.getMargin=function(){return Ul(this.ly)},lC.prototype.__destroy__=function(){Wl(this.ly)},cC.prototype=Object.create(gT.prototype),cC.prototype.constructor=cC,cC.prototype.my=cC,cC.ny={},r.btBoxShape=cC,cC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vl(e,t)},cC.prototype.getMargin=function(){return ql(this.ly)},cC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xl(e,t)},cC.prototype.getLocalScaling=function(){return sT(Yl(this.ly),TT)},cC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Zl(n,t,e)},cC.prototype.__destroy__=function(){Jl(this.ly)},uC.prototype=Object.create(DT.prototype),uC.prototype.constructor=uC,uC.prototype.my=uC,uC.ny={},r.btCapsuleShapeX=uC,uC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ql(e,t)},uC.prototype.getMargin=function(){return $l(this.ly)},uC.prototype.getUpAxis=function(){return tc(this.ly)},uC.prototype.getRadius=function(){return ec(this.ly)},uC.prototype.getHalfHeight=function(){return nc(this.ly)},uC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ic(e,t)},uC.prototype.getLocalScaling=function(){return sT(rc(this.ly),TT)},uC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),oc(n,t,e)},uC.prototype.__destroy__=function(){ac(this.ly)},pC.prototype=Object.create(DT.prototype),pC.prototype.constructor=pC,pC.prototype.my=pC,pC.ny={},r.btCapsuleShapeZ=pC,pC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),lc(e,t)},pC.prototype.getMargin=function(){return cc(this.ly)},pC.prototype.getUpAxis=function(){return uc(this.ly)},pC.prototype.getRadius=function(){return pc(this.ly)},pC.prototype.getHalfHeight=function(){return hc(this.ly)},pC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),dc(e,t)},pC.prototype.getLocalScaling=function(){return sT(_c(this.ly),TT)},pC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),fc(n,t,e)},pC.prototype.__destroy__=function(){mc(this.ly)},hC.prototype=Object.create(IT.prototype),hC.prototype.constructor=hC,hC.prototype.my=hC,hC.ny={},r.btCylinderShapeX=hC,hC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gc(e,t)},hC.prototype.getMargin=function(){return vc(this.ly)},hC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bc(e,t)},hC.prototype.getLocalScaling=function(){return sT(xc(this.ly),TT)},hC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Sc(n,t,e)},hC.prototype.__destroy__=function(){wc(this.ly)},dC.prototype=Object.create(IT.prototype),dC.prototype.constructor=dC,dC.prototype.my=dC,dC.ny={},r.btCylinderShapeZ=dC,dC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Tc(e,t)},dC.prototype.getMargin=function(){return Cc(this.ly)},dC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ec(e,t)},dC.prototype.getLocalScaling=function(){return sT(Ac(this.ly),TT)},dC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Rc(n,t,e)},dC.prototype.__destroy__=function(){Lc(this.ly)},_C.prototype=Object.create(gT.prototype),_C.prototype.constructor=_C,_C.prototype.my=_C,_C.ny={},r.btSphereShape=_C,_C.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dc(e,t)},_C.prototype.getMargin=function(){return Ic(this.ly)},_C.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kc(e,t)},_C.prototype.getLocalScaling=function(){return sT(Oc(this.ly),TT)},_C.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Bc(n,t,e)},_C.prototype.__destroy__=function(){jc(this.ly)},fC.prototype=Object.create(gT.prototype),fC.prototype.constructor=fC,fC.prototype.my=fC,fC.ny={},r.btMultiSphereShape=fC,fC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Nc(e,t)},fC.prototype.getLocalScaling=function(){return sT(zc(this.ly),TT)},fC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Hc(n,t,e)},fC.prototype.__destroy__=function(){Uc(this.ly)},mC.prototype=Object.create(kT.prototype),mC.prototype.constructor=mC,mC.prototype.my=mC,mC.ny={},r.btConeShapeX=mC,mC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gc(e,t)},mC.prototype.getLocalScaling=function(){return sT(Vc(this.ly),TT)},mC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),qc(n,t,e)},mC.prototype.__destroy__=function(){Xc(this.ly)},yC.prototype=Object.create(kT.prototype),yC.prototype.constructor=yC,yC.prototype.my=yC,yC.ny={},r.btConeShapeZ=yC,yC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zc(e,t)},yC.prototype.getLocalScaling=function(){return sT(Jc(this.ly),TT)},yC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Kc(n,t,e)},yC.prototype.__destroy__=function(){Qc(this.ly)},gC.prototype=Object.create(oT.prototype),gC.prototype.constructor=gC,gC.prototype.my=gC,gC.ny={},r.btIntArray=gC,gC.prototype.size=gC.prototype.size=function(){return $c(this.ly)},gC.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),tu(e,t)},gC.prototype.__destroy__=function(){eu(this.ly)},vC.prototype=Object.create(oT.prototype),vC.prototype.constructor=vC,vC.prototype.my=vC,vC.ny={},r.btFace=vC,vC.prototype.get_m_indices=vC.prototype.wA=function(){return sT(nu(this.ly),gC)},vC.prototype.set_m_indices=vC.prototype.bD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),iu(e,t)},Object.defineProperty(vC.prototype,"m_indices",{get:vC.prototype.wA,set:vC.prototype.bD}),vC.prototype.get_m_plane=vC.prototype.QA=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),ru(e,t)},vC.prototype.set_m_plane=vC.prototype.vD=function(t,e){var n=this.ly;dT(),t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),ou(n,t,e)},Object.defineProperty(vC.prototype,"m_plane",{get:vC.prototype.QA,set:vC.prototype.vD}),vC.prototype.__destroy__=function(){au(this.ly)},bC.prototype=Object.create(oT.prototype),bC.prototype.constructor=bC,bC.prototype.my=bC,bC.ny={},r.btVector3Array=bC,bC.prototype.size=bC.prototype.size=function(){return su(this.ly)},bC.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(lu(e,t),TT)},bC.prototype.__destroy__=function(){cu(this.ly)},xC.prototype=Object.create(oT.prototype),xC.prototype.constructor=xC,xC.prototype.my=xC,xC.ny={},r.btFaceArray=xC,xC.prototype.size=xC.prototype.size=function(){return uu(this.ly)},xC.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(pu(e,t),vC)},xC.prototype.__destroy__=function(){hu(this.ly)},SC.prototype=Object.create(oT.prototype),SC.prototype.constructor=SC,SC.prototype.my=SC,SC.ny={},r.btConvexPolyhedron=SC,SC.prototype.get_m_vertices=SC.prototype.vB=function(){return sT(du(this.ly),bC)},SC.prototype.set_m_vertices=SC.prototype.aE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_u(e,t)},Object.defineProperty(SC.prototype,"m_vertices",{get:SC.prototype.vB,set:SC.prototype.aE}),SC.prototype.get_m_faces=SC.prototype.Ky=function(){return sT(fu(this.ly),xC)},SC.prototype.set_m_faces=SC.prototype.Uy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mu(e,t)},Object.defineProperty(SC.prototype,"m_faces",{get:SC.prototype.Ky,set:SC.prototype.Uy}),SC.prototype.__destroy__=function(){yu(this.ly)},wC.prototype=Object.create(gT.prototype),wC.prototype.constructor=wC,wC.prototype.my=wC,wC.ny={},r.btConvexHullShape=wC,wC.prototype.addPoint=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===e?xu(n,t):Su(n,t,e)},wC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),wu(e,t)},wC.prototype.getMargin=function(){return Mu(this.ly)},wC.prototype.getNumVertices=function(){return Tu(this.ly)},wC.prototype.initializePolyhedralFeatures=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),!!Cu(e,t)},wC.prototype.recalcLocalAabb=function(){Eu(this.ly)},wC.prototype.getConvexPolyhedron=function(){return sT(Au(this.ly),SC)},wC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ru(e,t)},wC.prototype.getLocalScaling=function(){return sT(Lu(this.ly),TT)},wC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Pu(n,t,e)},wC.prototype.__destroy__=function(){Du(this.ly)},MC.prototype=Object.create(oT.prototype),MC.prototype.constructor=MC,MC.prototype.my=MC,MC.ny={},r.btShapeHull=MC,MC.prototype.buildHull=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),!!ku(e,t)},MC.prototype.numVertices=function(){return Ou(this.ly)},MC.prototype.getVertexPointer=function(){return sT(Bu(this.ly),TT)},MC.prototype.__destroy__=function(){ju(this.ly)},TC.prototype=Object.create(gT.prototype),TC.prototype.constructor=TC,TC.prototype.my=TC,TC.ny={},r.btCompoundShape=TC,TC.prototype.addChildShape=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),zu(n,t,e)},TC.prototype.removeChildShape=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hu(e,t)},TC.prototype.removeChildShapeByIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Uu(e,t)},TC.prototype.getNumChildShapes=function(){return Wu(this.ly)},TC.prototype.getChildShape=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Gu(e,t),gT)},TC.prototype.updateChildTransform=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===n?Vu(i,t,e):qu(i,t,e,n)},TC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xu(e,t)},TC.prototype.getMargin=function(){return Yu(this.ly)},TC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zu(e,t)},TC.prototype.getLocalScaling=function(){return sT(Ju(this.ly),TT)},TC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Ku(n,t,e)},TC.prototype.__destroy__=function(){Qu(this.ly)},CC.prototype=Object.create(oT.prototype),CC.prototype.constructor=CC,CC.prototype.my=CC,CC.ny={},r.btIndexedMesh=CC,CC.prototype.get_m_numTriangles=CC.prototype.PA=function(){return $u(this.ly)},CC.prototype.set_m_numTriangles=CC.prototype.uD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tp(e,t)},Object.defineProperty(CC.prototype,"m_numTriangles",{get:CC.prototype.PA,set:CC.prototype.uD}),CC.prototype.__destroy__=function(){ep(this.ly)},EC.prototype=Object.create(oT.prototype),EC.prototype.constructor=EC,EC.prototype.my=EC,EC.ny={},r.btIndexedMeshArray=EC,EC.prototype.size=EC.prototype.size=function(){return np(this.ly)},EC.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ip(e,t),CC)},EC.prototype.__destroy__=function(){rp(this.ly)},AC.prototype=Object.create(OT.prototype),AC.prototype.constructor=AC,AC.prototype.my=AC,AC.ny={},r.btTriangleMesh=AC,AC.prototype.addTriangle=function(t,e,n,i){var r=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),void 0===i?lp(r,t,e,n):cp(r,t,e,n,i)},AC.prototype.findOrAddVertex=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),up(n,t,e)},AC.prototype.addIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),pp(e,t)},AC.prototype.getIndexedMeshArray=function(){return sT(hp(this.ly),EC)},AC.prototype.setScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),dp(e,t)},AC.prototype.__destroy__=function(){_p(this.ly)},RC.prototype=Object.create(xT.prototype),RC.prototype.constructor=RC,RC.prototype.my=RC,RC.ny={},r.btEmptyShape=RC,RC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mp(e,t)},RC.prototype.getLocalScaling=function(){return sT(yp(this.ly),TT)},RC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),gp(n,t,e)},RC.prototype.__destroy__=function(){vp(this.ly)},LC.prototype=Object.create(xT.prototype),LC.prototype.constructor=LC,LC.prototype.my=LC,LC.ny={},r.btStaticPlaneShape=LC,LC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),xp(e,t)},LC.prototype.getLocalScaling=function(){return sT(Sp(this.ly),TT)},LC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),wp(n,t,e)},LC.prototype.__destroy__=function(){Mp(this.ly)},PC.prototype=Object.create(BT.prototype),PC.prototype.constructor=PC,PC.prototype.my=PC,PC.ny={},r.btBvhTriangleMeshShape=PC,PC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ep(e,t)},PC.prototype.getLocalScaling=function(){return sT(Ap(this.ly),TT)},PC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Rp(n,t,e)},PC.prototype.__destroy__=function(){Lp(this.ly)},DC.prototype=Object.create(xT.prototype),DC.prototype.constructor=DC,DC.prototype.my=DC,DC.ny={},r.btHeightfieldTerrainShape=DC,DC.prototype.setMargin=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dp(e,t)},DC.prototype.getMargin=function(){return Ip(this.ly)},DC.prototype.setLocalScaling=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kp(e,t)},DC.prototype.getLocalScaling=function(){return sT(Op(this.ly),TT)},DC.prototype.calculateLocalInertia=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Bp(n,t,e)},DC.prototype.__destroy__=function(){jp(this.ly)},IC.prototype=Object.create(oT.prototype),IC.prototype.constructor=IC,IC.prototype.my=IC,IC.ny={},r.btDefaultCollisionConstructionInfo=IC,IC.prototype.__destroy__=function(){Np(this.ly)},kC.prototype=Object.create(oT.prototype),kC.prototype.constructor=kC,kC.prototype.my=kC,kC.ny={},r.btPersistentManifold=kC,kC.prototype.getBody0=function(){return sT(Hp(this.ly),bT)},kC.prototype.getBody1=function(){return sT(Up(this.ly),bT)},kC.prototype.getNumContacts=function(){return Wp(this.ly)},kC.prototype.getContactPoint=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Gp(e,t),iC)},kC.prototype.__destroy__=function(){Vp(this.ly)},OC.prototype=Object.create(FT.prototype),OC.prototype.constructor=OC,OC.prototype.my=OC,OC.ny={},r.btCollisionDispatcher=OC,OC.prototype.getNumManifolds=function(){return Xp(this.ly)},OC.prototype.getManifoldByIndexInternal=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Yp(e,t),kC)},OC.prototype.__destroy__=function(){Zp(this.ly)},BC.prototype=Object.create(oT.prototype),BC.prototype.constructor=BC,BC.prototype.my=BC,BC.ny={},r.btOverlappingPairCallback=BC,BC.prototype.__destroy__=function(){Jp(this.ly)},jC.prototype=Object.create(oT.prototype),jC.prototype.constructor=jC,jC.prototype.my=jC,jC.ny={},r.btOverlappingPairCache=jC,jC.prototype.setInternalGhostPairCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Kp(e,t)},jC.prototype.getNumOverlappingPairs=function(){return Qp(this.ly)},jC.prototype.__destroy__=function(){$p(this.ly)},FC.prototype=Object.create(oT.prototype),FC.prototype.constructor=FC,FC.prototype.my=FC,FC.ny={},r.btAxisSweep3=FC,FC.prototype.__destroy__=function(){rh(this.ly)},NC.prototype=Object.create(oT.prototype),NC.prototype.constructor=NC,NC.prototype.my=NC,NC.ny={},r.btBroadphaseInterface=NC,NC.prototype.getOverlappingPairCache=function(){return sT(oh(this.ly),jC)},NC.prototype.__destroy__=function(){ah(this.ly)},zC.prototype=Object.create(oT.prototype),zC.prototype.constructor=zC,zC.prototype.my=zC,zC.ny={},r.btCollisionConfiguration=zC,zC.prototype.__destroy__=function(){sh(this.ly)},HC.prototype=Object.create(oT.prototype),HC.prototype.constructor=HC,HC.prototype.my=HC,HC.ny={},r.btDbvtBroadphase=HC,HC.prototype.__destroy__=function(){ch(this.ly)},UC.prototype=Object.create(oT.prototype),UC.prototype.constructor=UC,UC.prototype.my=UC,UC.ny={},r.btBroadphaseProxy=UC,UC.prototype.get_m_collisionFilterGroup=UC.prototype.oy=function(){return uh(this.ly)},UC.prototype.set_m_collisionFilterGroup=UC.prototype.qy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ph(e,t)},Object.defineProperty(UC.prototype,"m_collisionFilterGroup",{get:UC.prototype.oy,set:UC.prototype.qy}),UC.prototype.get_m_collisionFilterMask=UC.prototype.py=function(){return hh(this.ly)},UC.prototype.set_m_collisionFilterMask=UC.prototype.ry=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),dh(e,t)},Object.defineProperty(UC.prototype,"m_collisionFilterMask",{get:UC.prototype.py,set:UC.prototype.ry}),UC.prototype.__destroy__=function(){_h(this.ly)},WC.prototype=Object.create(oT.prototype),WC.prototype.constructor=WC,WC.prototype.my=WC,WC.ny={},r.btRigidBodyConstructionInfo=WC,WC.prototype.get_m_linearDamping=WC.prototype.CA=function(){return yh(this.ly)},WC.prototype.set_m_linearDamping=WC.prototype.hD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gh(e,t)},Object.defineProperty(WC.prototype,"m_linearDamping",{get:WC.prototype.CA,set:WC.prototype.hD}),WC.prototype.get_m_angularDamping=WC.prototype.Hz=function(){return vh(this.ly)},WC.prototype.set_m_angularDamping=WC.prototype.mC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bh(e,t)},Object.defineProperty(WC.prototype,"m_angularDamping",{get:WC.prototype.Hz,set:WC.prototype.mC}),WC.prototype.get_m_friction=WC.prototype.jA=function(){return xh(this.ly)},WC.prototype.set_m_friction=WC.prototype.PC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Sh(e,t)},Object.defineProperty(WC.prototype,"m_friction",{get:WC.prototype.jA,set:WC.prototype.PC}),WC.prototype.get_m_rollingFriction=WC.prototype.YA=function(){return wh(this.ly)},WC.prototype.set_m_rollingFriction=WC.prototype.DD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mh(e,t)},Object.defineProperty(WC.prototype,"m_rollingFriction",{get:WC.prototype.YA,set:WC.prototype.DD}),WC.prototype.get_m_restitution=WC.prototype.WA=function(){return Th(this.ly)},WC.prototype.set_m_restitution=WC.prototype.BD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ch(e,t)},Object.defineProperty(WC.prototype,"m_restitution",{get:WC.prototype.WA,set:WC.prototype.BD}),WC.prototype.get_m_linearSleepingThreshold=WC.prototype.DA=function(){return Eh(this.ly)},WC.prototype.set_m_linearSleepingThreshold=WC.prototype.iD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ah(e,t)},Object.defineProperty(WC.prototype,"m_linearSleepingThreshold",{get:WC.prototype.DA,set:WC.prototype.iD}),WC.prototype.get_m_angularSleepingThreshold=WC.prototype.Iz=function(){return Rh(this.ly)},WC.prototype.set_m_angularSleepingThreshold=WC.prototype.nC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Lh(e,t)},Object.defineProperty(WC.prototype,"m_angularSleepingThreshold",{get:WC.prototype.Iz,set:WC.prototype.nC}),WC.prototype.get_m_additionalDamping=WC.prototype.Cz=function(){return!!Ph(this.ly)},WC.prototype.set_m_additionalDamping=WC.prototype.hC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dh(e,t)},Object.defineProperty(WC.prototype,"m_additionalDamping",{get:WC.prototype.Cz,set:WC.prototype.hC}),WC.prototype.get_m_additionalDampingFactor=WC.prototype.Dz=function(){return Ih(this.ly)},WC.prototype.set_m_additionalDampingFactor=WC.prototype.iC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kh(e,t)},Object.defineProperty(WC.prototype,"m_additionalDampingFactor",{get:WC.prototype.Dz,set:WC.prototype.iC}),WC.prototype.get_m_additionalLinearDampingThresholdSqr=WC.prototype.Ez=function(){return Oh(this.ly)},WC.prototype.set_m_additionalLinearDampingThresholdSqr=WC.prototype.jC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Bh(e,t)},Object.defineProperty(WC.prototype,"m_additionalLinearDampingThresholdSqr",{get:WC.prototype.Ez,set:WC.prototype.jC}),WC.prototype.get_m_additionalAngularDampingThresholdSqr=WC.prototype.Bz=function(){return jh(this.ly)},WC.prototype.set_m_additionalAngularDampingThresholdSqr=WC.prototype.gC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fh(e,t)},Object.defineProperty(WC.prototype,"m_additionalAngularDampingThresholdSqr",{get:WC.prototype.Bz,set:WC.prototype.gC}),WC.prototype.get_m_additionalAngularDampingFactor=WC.prototype.Az=function(){return Nh(this.ly)},WC.prototype.set_m_additionalAngularDampingFactor=WC.prototype.fC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),zh(e,t)},Object.defineProperty(WC.prototype,"m_additionalAngularDampingFactor",{get:WC.prototype.Az,set:WC.prototype.fC}),WC.prototype.__destroy__=function(){Hh(this.ly)},GC.prototype=Object.create(bT.prototype),GC.prototype.constructor=GC,GC.prototype.my=GC,GC.ny={},r.btRigidBody=GC,GC.prototype.getCenterOfMassTransform=function(){return sT(Wh(this.ly),JT)},GC.prototype.setCenterOfMassTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gh(e,t)},GC.prototype.setSleepingThresholds=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Vh(n,t,e)},GC.prototype.getLinearDamping=function(){return qh(this.ly)},GC.prototype.getAngularDamping=function(){return Xh(this.ly)},GC.prototype.setDamping=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Yh(n,t,e)},GC.prototype.setMassProps=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Zh(n,t,e)},GC.prototype.getLinearFactor=function(){return sT(Jh(this.ly),TT)},GC.prototype.setLinearFactor=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Kh(e,t)},GC.prototype.applyTorque=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qh(e,t)},GC.prototype.applyLocalTorque=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$h(e,t)},GC.prototype.applyForce=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),td(n,t,e)},GC.prototype.applyCentralForce=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ed(e,t)},GC.prototype.applyCentralLocalForce=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),nd(e,t)},GC.prototype.applyTorqueImpulse=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),id(e,t)},GC.prototype.applyImpulse=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),rd(n,t,e)},GC.prototype.applyCentralImpulse=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),od(e,t)},GC.prototype.updateInertiaTensor=function(){ad(this.ly)},GC.prototype.getLinearVelocity=function(){return sT(sd(this.ly),TT)},GC.prototype.getAngularVelocity=function(){return sT(ld(this.ly),TT)},GC.prototype.setLinearVelocity=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),cd(e,t)},GC.prototype.setAngularVelocity=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ud(e,t)},GC.prototype.getMotionState=function(){return sT(pd(this.ly),ET)},GC.prototype.setMotionState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),hd(e,t)},GC.prototype.getAngularFactor=function(){return sT(dd(this.ly),TT)},GC.prototype.setAngularFactor=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_d(e,t)},GC.prototype.upcast=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(fd(e,t),GC)},GC.prototype.getAabb=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),md(n,t,e)},GC.prototype.applyGravity=function(){yd(this.ly)},GC.prototype.getGravity=function(){return sT(gd(this.ly),TT)},GC.prototype.setGravity=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vd(e,t)},GC.prototype.getBroadphaseProxy=function(){return sT(bd(this.ly),UC)},GC.prototype.clearForces=function(){xd(this.ly)},GC.prototype.setAnisotropicFriction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Sd(n,t,e)},GC.prototype.getCollisionShape=function(){return sT(wd(this.ly),gT)},GC.prototype.setContactProcessingThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Md(e,t)},GC.prototype.setActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Td(e,t)},GC.prototype.forceActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cd(e,t)},GC.prototype.activate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),void 0===t?Ed(e):Ad(e,t)},GC.prototype.isActive=function(){return!!Rd(this.ly)},GC.prototype.isKinematicObject=function(){return!!Ld(this.ly)},GC.prototype.isStaticObject=function(){return!!Pd(this.ly)},GC.prototype.isStaticOrKinematicObject=function(){return!!Dd(this.ly)},GC.prototype.getRestitution=function(){return Id(this.ly)},GC.prototype.getFriction=function(){return kd(this.ly)},GC.prototype.getRollingFriction=function(){return Od(this.ly)},GC.prototype.setRestitution=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Bd(e,t)},GC.prototype.setFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),jd(e,t)},GC.prototype.setRollingFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fd(e,t)},GC.prototype.getWorldTransform=function(){return sT(Nd(this.ly),JT)},GC.prototype.getCollisionFlags=function(){return zd(this.ly)},GC.prototype.setCollisionFlags=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hd(e,t)},GC.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ud(e,t)},GC.prototype.setCollisionShape=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Wd(e,t)},GC.prototype.setCcdMotionThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gd(e,t)},GC.prototype.setCcdSweptSphereRadius=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vd(e,t)},GC.prototype.getUserIndex=function(){return qd(this.ly)},GC.prototype.setUserIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xd(e,t)},GC.prototype.getUserPointer=function(){return sT(Yd(this.ly),VT)},GC.prototype.setUserPointer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zd(e,t)},GC.prototype.getBroadphaseHandle=function(){return sT(Jd(this.ly),UC)},GC.prototype.__destroy__=function(){Kd(this.ly)},VC.prototype=Object.create(oT.prototype),VC.prototype.constructor=VC,VC.prototype.my=VC,VC.ny={},r.btConstraintSetting=VC,VC.prototype.get_m_tau=VC.prototype.mB=function(){return $d(this.ly)},VC.prototype.set_m_tau=VC.prototype.SD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),t_(e,t)},Object.defineProperty(VC.prototype,"m_tau",{get:VC.prototype.mB,set:VC.prototype.SD}),VC.prototype.get_m_damping=VC.prototype.$z=function(){return e_(this.ly)},VC.prototype.set_m_damping=VC.prototype.FC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),n_(e,t)},Object.defineProperty(VC.prototype,"m_damping",{get:VC.prototype.$z,set:VC.prototype.FC}),VC.prototype.get_m_impulseClamp=VC.prototype.vA=function(){return i_(this.ly)},VC.prototype.set_m_impulseClamp=VC.prototype.aD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),r_(e,t)},Object.defineProperty(VC.prototype,"m_impulseClamp",{get:VC.prototype.vA,set:VC.prototype.aD}),VC.prototype.__destroy__=function(){o_(this.ly)},qC.prototype=Object.create(ST.prototype),qC.prototype.constructor=qC,qC.prototype.my=qC,qC.ny={},r.btPoint2PointConstraint=qC,qC.prototype.setPivotA=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),l_(e,t)},qC.prototype.setPivotB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),c_(e,t)},qC.prototype.getPivotInA=function(){return sT(u_(this.ly),TT)},qC.prototype.getPivotInB=function(){return sT(p_(this.ly),TT)},qC.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),h_(e,t)},qC.prototype.getBreakingImpulseThreshold=function(){return d_(this.ly)},qC.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),__(e,t)},qC.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),f_(n,t,e)},qC.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),m_(i,t,e,n)},qC.prototype.get_m_setting=qC.prototype.$A=function(){return sT(y_(this.ly),VC)},qC.prototype.set_m_setting=qC.prototype.FD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),g_(e,t)},Object.defineProperty(qC.prototype,"m_setting",{get:qC.prototype.$A,set:qC.prototype.FD}),qC.prototype.__destroy__=function(){v_(this.ly)},XC.prototype=Object.create(NT.prototype),XC.prototype.constructor=XC,XC.prototype.my=XC,XC.ny={},r.btGeneric6DofSpringConstraint=XC,XC.prototype.enableSpring=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),S_(n,t,e)},XC.prototype.setStiffness=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),w_(n,t,e)},XC.prototype.setDamping=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),M_(n,t,e)},XC.prototype.setEquilibriumPoint=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===t?T_(n):void 0===e?C_(n,t):E_(n,t,e)},XC.prototype.setLinearLowerLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),A_(e,t)},XC.prototype.setLinearUpperLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),R_(e,t)},XC.prototype.setAngularLowerLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),L_(e,t)},XC.prototype.setAngularUpperLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),P_(e,t)},XC.prototype.getFrameOffsetA=function(){return sT(D_(this.ly),JT)},XC.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),I_(e,t)},XC.prototype.getBreakingImpulseThreshold=function(){return k_(this.ly)},XC.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),O_(e,t)},XC.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),B_(n,t,e)},XC.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),j_(i,t,e,n)},XC.prototype.__destroy__=function(){F_(this.ly)},YC.prototype=Object.create(oT.prototype),YC.prototype.constructor=YC,YC.prototype.my=YC,YC.ny={},r.btSequentialImpulseConstraintSolver=YC,YC.prototype.__destroy__=function(){z_(this.ly)},ZC.prototype=Object.create(ST.prototype),ZC.prototype.constructor=ZC,ZC.prototype.my=ZC,ZC.ny={},r.btConeTwistConstraint=ZC,ZC.prototype.setLimit=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),W_(n,t,e)},ZC.prototype.setAngularOnly=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),G_(e,t)},ZC.prototype.setDamping=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),V_(e,t)},ZC.prototype.enableMotor=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),q_(e,t)},ZC.prototype.setMaxMotorImpulse=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),X_(e,t)},ZC.prototype.setMaxMotorImpulseNormalized=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Y_(e,t)},ZC.prototype.setMotorTarget=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Z_(e,t)},ZC.prototype.setMotorTargetInConstraintSpace=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),J_(e,t)},ZC.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),K_(e,t)},ZC.prototype.getBreakingImpulseThreshold=function(){return Q_(this.ly)},ZC.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$_(e,t)},ZC.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),tf(n,t,e)},ZC.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),ef(i,t,e,n)},ZC.prototype.__destroy__=function(){nf(this.ly)},JC.prototype=Object.create(ST.prototype),JC.prototype.constructor=JC,JC.prototype.my=JC,JC.ny={},r.btHingeConstraint=JC,JC.prototype.setLimit=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),void 0===r?uf(o,t,e,n,i):pf(o,t,e,n,i,r)},JC.prototype.enableAngularMotor=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),hf(i,t,e,n)},JC.prototype.setAngularOnly=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),df(e,t)},JC.prototype.enableMotor=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_f(e,t)},JC.prototype.setMaxMotorImpulse=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ff(e,t)},JC.prototype.setMotorTarget=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),mf(n,t,e)},JC.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),yf(e,t)},JC.prototype.getBreakingImpulseThreshold=function(){return gf(this.ly)},JC.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vf(e,t)},JC.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),bf(n,t,e)},JC.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),xf(i,t,e,n)},JC.prototype.__destroy__=function(){Sf(this.ly)},KC.prototype=Object.create(ST.prototype),KC.prototype.constructor=KC,KC.prototype.my=KC,KC.ny={},r.btSliderConstraint=KC,KC.prototype.setLowerLinLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Tf(e,t)},KC.prototype.setUpperLinLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cf(e,t)},KC.prototype.setLowerAngLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ef(e,t)},KC.prototype.setUpperAngLimit=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Af(e,t)},KC.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Rf(e,t)},KC.prototype.getBreakingImpulseThreshold=function(){return Lf(this.ly)},KC.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Pf(e,t)},KC.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Df(n,t,e)},KC.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),If(i,t,e,n)},KC.prototype.__destroy__=function(){kf(this.ly)},QC.prototype=Object.create(ST.prototype),QC.prototype.constructor=QC,QC.prototype.my=QC,QC.ny={},r.btFixedConstraint=QC,QC.prototype.enableFeedback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Bf(e,t)},QC.prototype.getBreakingImpulseThreshold=function(){return jf(this.ly)},QC.prototype.setBreakingImpulseThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ff(e,t)},QC.prototype.getParam=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Nf(n,t,e)},QC.prototype.setParam=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),zf(i,t,e,n)},QC.prototype.__destroy__=function(){Hf(this.ly)},$C.prototype=Object.create(oT.prototype),$C.prototype.constructor=$C,$C.prototype.my=$C,$C.ny={},r.btConstraintSolver=$C,$C.prototype.__destroy__=function(){Uf(this.ly)},tE.prototype=Object.create(oT.prototype),tE.prototype.constructor=tE,tE.prototype.my=tE,tE.ny={},r.btDispatcherInfo=tE,tE.prototype.get_m_timeStep=tE.prototype.oB=function(){return Wf(this.ly)},tE.prototype.set_m_timeStep=tE.prototype.UD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gf(e,t)},Object.defineProperty(tE.prototype,"m_timeStep",{get:tE.prototype.oB,set:tE.prototype.UD}),tE.prototype.get_m_stepCount=tE.prototype.fB=function(){return Vf(this.ly)},tE.prototype.set_m_stepCount=tE.prototype.LD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),qf(e,t)},Object.defineProperty(tE.prototype,"m_stepCount",{get:tE.prototype.fB,set:tE.prototype.LD}),tE.prototype.get_m_dispatchFunc=tE.prototype.bA=function(){return Xf(this.ly)},tE.prototype.set_m_dispatchFunc=tE.prototype.HC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Yf(e,t)},Object.defineProperty(tE.prototype,"m_dispatchFunc",{get:tE.prototype.bA,set:tE.prototype.HC}),tE.prototype.get_m_timeOfImpact=tE.prototype.nB=function(){return Zf(this.ly)},tE.prototype.set_m_timeOfImpact=tE.prototype.TD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Jf(e,t)},Object.defineProperty(tE.prototype,"m_timeOfImpact",{get:tE.prototype.nB,set:tE.prototype.TD}),tE.prototype.get_m_useContinuous=tE.prototype.qB=function(){return!!Kf(this.ly)},tE.prototype.set_m_useContinuous=tE.prototype.WD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qf(e,t)},Object.defineProperty(tE.prototype,"m_useContinuous",{get:tE.prototype.qB,set:tE.prototype.WD}),tE.prototype.get_m_enableSatConvex=tE.prototype.fA=function(){return!!$f(this.ly)},tE.prototype.set_m_enableSatConvex=tE.prototype.LC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tm(e,t)},Object.defineProperty(tE.prototype,"m_enableSatConvex",{get:tE.prototype.fA,set:tE.prototype.LC}),tE.prototype.get_m_enableSPU=tE.prototype.eA=function(){return!!em(this.ly)},tE.prototype.set_m_enableSPU=tE.prototype.KC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),nm(e,t)},Object.defineProperty(tE.prototype,"m_enableSPU",{get:tE.prototype.eA,set:tE.prototype.KC}),tE.prototype.get_m_useEpa=tE.prototype.sB=function(){return!!im(this.ly)},tE.prototype.set_m_useEpa=tE.prototype.YD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),rm(e,t)},Object.defineProperty(tE.prototype,"m_useEpa",{get:tE.prototype.sB,set:tE.prototype.YD}),tE.prototype.get_m_allowedCcdPenetration=tE.prototype.Fz=function(){return om(this.ly)},tE.prototype.set_m_allowedCcdPenetration=tE.prototype.kC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),am(e,t)},Object.defineProperty(tE.prototype,"m_allowedCcdPenetration",{get:tE.prototype.Fz,set:tE.prototype.kC}),tE.prototype.get_m_useConvexConservativeDistanceUtil=tE.prototype.rB=function(){return!!sm(this.ly)},tE.prototype.set_m_useConvexConservativeDistanceUtil=tE.prototype.XD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),lm(e,t)},Object.defineProperty(tE.prototype,"m_useConvexConservativeDistanceUtil",{get:tE.prototype.rB,set:tE.prototype.XD}),tE.prototype.get_m_convexConservativeDistanceThreshold=tE.prototype.Xz=function(){return cm(this.ly)},tE.prototype.set_m_convexConservativeDistanceThreshold=tE.prototype.CC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),um(e,t)},Object.defineProperty(tE.prototype,"m_convexConservativeDistanceThreshold",{get:tE.prototype.Xz,set:tE.prototype.CC}),tE.prototype.__destroy__=function(){pm(this.ly)},eE.prototype=Object.create(oT.prototype),eE.prototype.constructor=eE,eE.prototype.my=eE,eE.ny={},r.btContactSolverInfo=eE,eE.prototype.get_m_splitImpulse=eE.prototype.cB=function(){return!!hm(this.ly)},eE.prototype.set_m_splitImpulse=eE.prototype.ID=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),dm(e,t)},Object.defineProperty(eE.prototype,"m_splitImpulse",{get:eE.prototype.cB,set:eE.prototype.ID}),eE.prototype.get_m_splitImpulsePenetrationThreshold=eE.prototype.dB=function(){return _m(this.ly)},eE.prototype.set_m_splitImpulsePenetrationThreshold=eE.prototype.JD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fm(e,t)},Object.defineProperty(eE.prototype,"m_splitImpulsePenetrationThreshold",{get:eE.prototype.dB,set:eE.prototype.JD}),eE.prototype.get_m_numIterations=eE.prototype.OA=function(){return mm(this.ly)},eE.prototype.set_m_numIterations=eE.prototype.tD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ym(e,t)},Object.defineProperty(eE.prototype,"m_numIterations",{get:eE.prototype.OA,set:eE.prototype.tD}),eE.prototype.__destroy__=function(){gm(this.ly)},nE.prototype=Object.create(oT.prototype),nE.prototype.constructor=nE,nE.prototype.my=nE,nE.ny={},r.btVehicleTuning=nE,nE.prototype.get_m_suspensionStiffness=nE.prototype.Ay=function(){return bm(this.ly)},nE.prototype.set_m_suspensionStiffness=nE.prototype.Hy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),xm(e,t)},Object.defineProperty(nE.prototype,"m_suspensionStiffness",{get:nE.prototype.Ay,set:nE.prototype.Hy}),nE.prototype.get_m_suspensionCompression=nE.prototype.gB=function(){return Sm(this.ly)},nE.prototype.set_m_suspensionCompression=nE.prototype.MD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),wm(e,t)},Object.defineProperty(nE.prototype,"m_suspensionCompression",{get:nE.prototype.gB,set:nE.prototype.MD}),nE.prototype.get_m_suspensionDamping=nE.prototype.hB=function(){return Mm(this.ly)},nE.prototype.set_m_suspensionDamping=nE.prototype.ND=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Tm(e,t)},Object.defineProperty(nE.prototype,"m_suspensionDamping",{get:nE.prototype.hB,set:nE.prototype.ND}),nE.prototype.get_m_maxSuspensionTravelCm=nE.prototype.zy=function(){return Cm(this.ly)},nE.prototype.set_m_maxSuspensionTravelCm=nE.prototype.Gy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Em(e,t)},Object.defineProperty(nE.prototype,"m_maxSuspensionTravelCm",{get:nE.prototype.zy,set:nE.prototype.Gy}),nE.prototype.get_m_frictionSlip=nE.prototype.vy=function(){return Am(this.ly)},nE.prototype.set_m_frictionSlip=nE.prototype.Cy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Rm(e,t)},Object.defineProperty(nE.prototype,"m_frictionSlip",{get:nE.prototype.vy,set:nE.prototype.Cy}),nE.prototype.get_m_maxSuspensionForce=nE.prototype.yy=function(){return Lm(this.ly)},nE.prototype.set_m_maxSuspensionForce=nE.prototype.Fy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Pm(e,t)},Object.defineProperty(nE.prototype,"m_maxSuspensionForce",{get:nE.prototype.yy,set:nE.prototype.Fy}),iE.prototype=Object.create(oT.prototype),iE.prototype.constructor=iE,iE.prototype.my=iE,iE.ny={},r.btVehicleRaycasterResult=iE,iE.prototype.get_m_hitPointInWorld=iE.prototype.sA=function(){return sT(Dm(this.ly),TT)},iE.prototype.set_m_hitPointInWorld=iE.prototype.YC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Im(e,t)},Object.defineProperty(iE.prototype,"m_hitPointInWorld",{get:iE.prototype.sA,set:iE.prototype.YC}),iE.prototype.get_m_hitNormalInWorld=iE.prototype.qA=function(){return sT(km(this.ly),TT)},iE.prototype.set_m_hitNormalInWorld=iE.prototype.WC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Om(e,t)},Object.defineProperty(iE.prototype,"m_hitNormalInWorld",{get:iE.prototype.qA,set:iE.prototype.WC}),iE.prototype.get_m_distFraction=iE.prototype.dA=function(){return Bm(this.ly)},iE.prototype.set_m_distFraction=iE.prototype.JC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),jm(e,t)},Object.defineProperty(iE.prototype,"m_distFraction",{get:iE.prototype.dA,set:iE.prototype.JC}),iE.prototype.__destroy__=function(){Fm(this.ly)},rE.prototype=Object.create(HT.prototype),rE.prototype.constructor=rE,rE.prototype.my=rE,rE.ny={},r.btDefaultVehicleRaycaster=rE,rE.prototype.castRay=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),zm(i,t,e,n)},rE.prototype.__destroy__=function(){Hm(this.ly)},oE.prototype=Object.create(oT.prototype),oE.prototype.constructor=oE,oE.prototype.my=oE,oE.ny={},r.RaycastInfo=oE,oE.prototype.get_m_contactNormalWS=oE.prototype.Vz=function(){return sT(Um(this.ly),TT)},oE.prototype.set_m_contactNormalWS=oE.prototype.AC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Wm(e,t)},Object.defineProperty(oE.prototype,"m_contactNormalWS",{get:oE.prototype.Vz,set:oE.prototype.AC}),oE.prototype.get_m_contactPointWS=oE.prototype.Wz=function(){return sT(Gm(this.ly),TT)},oE.prototype.set_m_contactPointWS=oE.prototype.BC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vm(e,t)},Object.defineProperty(oE.prototype,"m_contactPointWS",{get:oE.prototype.Wz,set:oE.prototype.BC}),oE.prototype.get_m_suspensionLength=oE.prototype.iB=function(){return qm(this.ly)},oE.prototype.set_m_suspensionLength=oE.prototype.OD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xm(e,t)},Object.defineProperty(oE.prototype,"m_suspensionLength",{get:oE.prototype.iB,set:oE.prototype.OD}),oE.prototype.get_m_hardPointWS=oE.prototype.nA=function(){return sT(Ym(this.ly),TT)},oE.prototype.set_m_hardPointWS=oE.prototype.TC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zm(e,t)},Object.defineProperty(oE.prototype,"m_hardPointWS",{get:oE.prototype.nA,set:oE.prototype.TC}),oE.prototype.get_m_wheelDirectionWS=oE.prototype.xB=function(){return sT(Jm(this.ly),TT)},oE.prototype.set_m_wheelDirectionWS=oE.prototype.cE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Km(e,t)},Object.defineProperty(oE.prototype,"m_wheelDirectionWS",{get:oE.prototype.xB,set:oE.prototype.cE}),oE.prototype.get_m_wheelAxleWS=oE.prototype.wB=function(){return sT(Qm(this.ly),TT)},oE.prototype.set_m_wheelAxleWS=oE.prototype.bE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$m(e,t)},Object.defineProperty(oE.prototype,"m_wheelAxleWS",{get:oE.prototype.wB,set:oE.prototype.bE}),oE.prototype.get_m_isInContact=oE.prototype.yA=function(){return!!ty(this.ly)},oE.prototype.set_m_isInContact=oE.prototype.dD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ey(e,t)},Object.defineProperty(oE.prototype,"m_isInContact",{get:oE.prototype.yA,set:oE.prototype.dD}),oE.prototype.get_m_groundObject=oE.prototype.mA=function(){return ny(this.ly)},oE.prototype.set_m_groundObject=oE.prototype.SC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),iy(e,t)},Object.defineProperty(oE.prototype,"m_groundObject",{get:oE.prototype.mA,set:oE.prototype.SC}),oE.prototype.__destroy__=function(){ry(this.ly)},aE.prototype=Object.create(oT.prototype),aE.prototype.constructor=aE,aE.prototype.my=aE,aE.ny={},r.btWheelInfoConstructionInfo=aE,aE.prototype.get_m_chassisConnectionCS=aE.prototype.Rz=function(){return sT(oy(this.ly),TT)},aE.prototype.set_m_chassisConnectionCS=aE.prototype.wC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ay(e,t)},Object.defineProperty(aE.prototype,"m_chassisConnectionCS",{get:aE.prototype.Rz,set:aE.prototype.wC}),aE.prototype.get_m_wheelDirectionCS=aE.prototype.Qy=function(){return sT(sy(this.ly),TT)},aE.prototype.set_m_wheelDirectionCS=aE.prototype.$y=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ly(e,t)},Object.defineProperty(aE.prototype,"m_wheelDirectionCS",{get:aE.prototype.Qy,set:aE.prototype.$y}),aE.prototype.get_m_wheelAxleCS=aE.prototype.Py=function(){return sT(cy(this.ly),TT)},aE.prototype.set_m_wheelAxleCS=aE.prototype.Zy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),uy(e,t)},Object.defineProperty(aE.prototype,"m_wheelAxleCS",{get:aE.prototype.Py,set:aE.prototype.Zy}),aE.prototype.get_m_suspensionRestLength=aE.prototype.kB=function(){return py(this.ly)},aE.prototype.set_m_suspensionRestLength=aE.prototype.QD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),hy(e,t)},Object.defineProperty(aE.prototype,"m_suspensionRestLength",{get:aE.prototype.kB,set:aE.prototype.QD}),aE.prototype.get_m_maxSuspensionTravelCm=aE.prototype.zy=function(){return dy(this.ly)},aE.prototype.set_m_maxSuspensionTravelCm=aE.prototype.Gy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_y(e,t)},Object.defineProperty(aE.prototype,"m_maxSuspensionTravelCm",{get:aE.prototype.zy,set:aE.prototype.Gy}),aE.prototype.get_m_wheelRadius=aE.prototype.yB=function(){return fy(this.ly)},aE.prototype.set_m_wheelRadius=aE.prototype.dE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),my(e,t)},Object.defineProperty(aE.prototype,"m_wheelRadius",{get:aE.prototype.yB,set:aE.prototype.dE}),aE.prototype.get_m_suspensionStiffness=aE.prototype.Ay=function(){return yy(this.ly)},aE.prototype.set_m_suspensionStiffness=aE.prototype.Hy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gy(e,t)},Object.defineProperty(aE.prototype,"m_suspensionStiffness",{get:aE.prototype.Ay,set:aE.prototype.Hy}),aE.prototype.get_m_wheelsDampingCompression=aE.prototype.Ry=function(){return vy(this.ly)},aE.prototype.set_m_wheelsDampingCompression=aE.prototype.az=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),by(e,t)},Object.defineProperty(aE.prototype,"m_wheelsDampingCompression",{get:aE.prototype.Ry,set:aE.prototype.az}),aE.prototype.get_m_wheelsDampingRelaxation=aE.prototype.Sy=function(){return xy(this.ly)},aE.prototype.set_m_wheelsDampingRelaxation=aE.prototype.bz=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Sy(e,t)},Object.defineProperty(aE.prototype,"m_wheelsDampingRelaxation",{get:aE.prototype.Sy,set:aE.prototype.bz}),aE.prototype.get_m_frictionSlip=aE.prototype.vy=function(){return wy(this.ly)},aE.prototype.set_m_frictionSlip=aE.prototype.Cy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),My(e,t)},Object.defineProperty(aE.prototype,"m_frictionSlip",{get:aE.prototype.vy,set:aE.prototype.Cy}),aE.prototype.get_m_maxSuspensionForce=aE.prototype.yy=function(){return Ty(this.ly)},aE.prototype.set_m_maxSuspensionForce=aE.prototype.Fy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cy(e,t)},Object.defineProperty(aE.prototype,"m_maxSuspensionForce",{get:aE.prototype.yy,set:aE.prototype.Fy}),aE.prototype.get_m_bIsFrontWheel=aE.prototype.Jy=function(){return!!Ey(this.ly)},aE.prototype.set_m_bIsFrontWheel=aE.prototype.Ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ay(e,t)},Object.defineProperty(aE.prototype,"m_bIsFrontWheel",{get:aE.prototype.Jy,set:aE.prototype.Ty}),aE.prototype.__destroy__=function(){Ry(this.ly)},sE.prototype=Object.create(oT.prototype),sE.prototype.constructor=sE,sE.prototype.my=sE,sE.ny={},r.btWheelInfo=sE,sE.prototype.getSuspensionRestLength=function(){return Py(this.ly)},sE.prototype.updateWheel=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Dy(n,t,e)},sE.prototype.get_m_suspensionStiffness=sE.prototype.Ay=function(){return Iy(this.ly)},sE.prototype.set_m_suspensionStiffness=sE.prototype.Hy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ky(e,t)},Object.defineProperty(sE.prototype,"m_suspensionStiffness",{get:sE.prototype.Ay,set:sE.prototype.Hy}),sE.prototype.get_m_frictionSlip=sE.prototype.vy=function(){return Oy(this.ly)},sE.prototype.set_m_frictionSlip=sE.prototype.Cy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),By(e,t)},Object.defineProperty(sE.prototype,"m_frictionSlip",{get:sE.prototype.vy,set:sE.prototype.Cy}),sE.prototype.get_m_engineForce=sE.prototype.gA=function(){return jy(this.ly)},sE.prototype.set_m_engineForce=sE.prototype.MC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fy(e,t)},Object.defineProperty(sE.prototype,"m_engineForce",{get:sE.prototype.gA,set:sE.prototype.MC}),sE.prototype.get_m_rollInfluence=sE.prototype.XA=function(){return Ny(this.ly)},sE.prototype.set_m_rollInfluence=sE.prototype.CD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),zy(e,t)},Object.defineProperty(sE.prototype,"m_rollInfluence",{get:sE.prototype.XA,set:sE.prototype.CD}),sE.prototype.get_m_suspensionRestLength1=sE.prototype.lB=function(){return Hy(this.ly)},sE.prototype.set_m_suspensionRestLength1=sE.prototype.RD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Uy(e,t)},Object.defineProperty(sE.prototype,"m_suspensionRestLength1",{get:sE.prototype.lB,set:sE.prototype.RD}),sE.prototype.get_m_wheelsRadius=sE.prototype.zB=function(){return Wy(this.ly)},sE.prototype.set_m_wheelsRadius=sE.prototype.eE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gy(e,t)},Object.defineProperty(sE.prototype,"m_wheelsRadius",{get:sE.prototype.zB,set:sE.prototype.eE}),sE.prototype.get_m_wheelsDampingCompression=sE.prototype.Ry=function(){return Vy(this.ly)},sE.prototype.set_m_wheelsDampingCompression=sE.prototype.az=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),qy(e,t)},Object.defineProperty(sE.prototype,"m_wheelsDampingCompression",{get:sE.prototype.Ry,set:sE.prototype.az}),sE.prototype.get_m_wheelsDampingRelaxation=sE.prototype.Sy=function(){return Xy(this.ly)},sE.prototype.set_m_wheelsDampingRelaxation=sE.prototype.bz=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Yy(e,t)},Object.defineProperty(sE.prototype,"m_wheelsDampingRelaxation",{get:sE.prototype.Sy,set:sE.prototype.bz}),sE.prototype.get_m_steering=sE.prototype.eB=function(){return Zy(this.ly)},sE.prototype.set_m_steering=sE.prototype.KD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Jy(e,t)},Object.defineProperty(sE.prototype,"m_steering",{get:sE.prototype.eB,set:sE.prototype.KD}),sE.prototype.get_m_maxSuspensionForce=sE.prototype.yy=function(){return Ky(this.ly)},sE.prototype.set_m_maxSuspensionForce=sE.prototype.Fy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qy(e,t)},Object.defineProperty(sE.prototype,"m_maxSuspensionForce",{get:sE.prototype.yy,set:sE.prototype.Fy}),sE.prototype.get_m_maxSuspensionTravelCm=sE.prototype.zy=function(){return $y(this.ly)},sE.prototype.set_m_maxSuspensionTravelCm=sE.prototype.Gy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tg(e,t)},Object.defineProperty(sE.prototype,"m_maxSuspensionTravelCm",{get:sE.prototype.zy,set:sE.prototype.Gy}),sE.prototype.get_m_wheelsSuspensionForce=sE.prototype.AB=function(){return eg(this.ly)},sE.prototype.set_m_wheelsSuspensionForce=sE.prototype.fE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ng(e,t)},Object.defineProperty(sE.prototype,"m_wheelsSuspensionForce",{get:sE.prototype.AB,set:sE.prototype.fE}),sE.prototype.get_m_bIsFrontWheel=sE.prototype.Jy=function(){return!!ig(this.ly)},sE.prototype.set_m_bIsFrontWheel=sE.prototype.Ty=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),rg(e,t)},Object.defineProperty(sE.prototype,"m_bIsFrontWheel",{get:sE.prototype.Jy,set:sE.prototype.Ty}),sE.prototype.get_m_raycastInfo=sE.prototype.VA=function(){return sT(og(this.ly),oE)},sE.prototype.set_m_raycastInfo=sE.prototype.AD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ag(e,t)},Object.defineProperty(sE.prototype,"m_raycastInfo",{get:sE.prototype.VA,set:sE.prototype.AD}),sE.prototype.get_m_chassisConnectionPointCS=sE.prototype.Sz=function(){return sT(sg(this.ly),TT)},sE.prototype.set_m_chassisConnectionPointCS=sE.prototype.xC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),lg(e,t)},Object.defineProperty(sE.prototype,"m_chassisConnectionPointCS",{get:sE.prototype.Sz,set:sE.prototype.xC}),sE.prototype.get_m_worldTransform=sE.prototype.BB=function(){return sT(cg(this.ly),JT)},sE.prototype.set_m_worldTransform=sE.prototype.gE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ug(e,t)},Object.defineProperty(sE.prototype,"m_worldTransform",{get:sE.prototype.BB,set:sE.prototype.gE}),sE.prototype.get_m_wheelDirectionCS=sE.prototype.Qy=function(){return sT(pg(this.ly),TT)},sE.prototype.set_m_wheelDirectionCS=sE.prototype.$y=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),hg(e,t)},Object.defineProperty(sE.prototype,"m_wheelDirectionCS",{get:sE.prototype.Qy,set:sE.prototype.$y}),sE.prototype.get_m_wheelAxleCS=sE.prototype.Py=function(){return sT(dg(this.ly),TT)},sE.prototype.set_m_wheelAxleCS=sE.prototype.Zy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_g(e,t)},Object.defineProperty(sE.prototype,"m_wheelAxleCS",{get:sE.prototype.Py,set:sE.prototype.Zy}),sE.prototype.get_m_rotation=sE.prototype.ZA=function(){return fg(this.ly)},sE.prototype.set_m_rotation=sE.prototype.ED=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mg(e,t)},Object.defineProperty(sE.prototype,"m_rotation",{get:sE.prototype.ZA,set:sE.prototype.ED}),sE.prototype.get_m_deltaRotation=sE.prototype.aA=function(){return yg(this.ly)},sE.prototype.set_m_deltaRotation=sE.prototype.GC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gg(e,t)},Object.defineProperty(sE.prototype,"m_deltaRotation",{get:sE.prototype.aA,set:sE.prototype.GC}),sE.prototype.get_m_brake=sE.prototype.Lz=function(){return vg(this.ly)},sE.prototype.set_m_brake=sE.prototype.qC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bg(e,t)},Object.defineProperty(sE.prototype,"m_brake",{get:sE.prototype.Lz,set:sE.prototype.qC}),sE.prototype.get_m_clippedInvContactDotSuspension=sE.prototype.Tz=function(){return xg(this.ly)},sE.prototype.set_m_clippedInvContactDotSuspension=sE.prototype.yC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Sg(e,t)},Object.defineProperty(sE.prototype,"m_clippedInvContactDotSuspension",{get:sE.prototype.Tz,set:sE.prototype.yC}),sE.prototype.get_m_suspensionRelativeVelocity=sE.prototype.jB=function(){return wg(this.ly)},sE.prototype.set_m_suspensionRelativeVelocity=sE.prototype.PD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mg(e,t)},Object.defineProperty(sE.prototype,"m_suspensionRelativeVelocity",{get:sE.prototype.jB,set:sE.prototype.PD}),sE.prototype.get_m_skidInfo=sE.prototype.bB=function(){return Tg(this.ly)},sE.prototype.set_m_skidInfo=sE.prototype.HD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cg(e,t)},Object.defineProperty(sE.prototype,"m_skidInfo",{get:sE.prototype.bB,set:sE.prototype.HD}),sE.prototype.__destroy__=function(){Eg(this.ly)},lE.prototype=Object.create(UT.prototype),lE.prototype.constructor=lE,lE.prototype.my=lE,lE.ny={},r.btKinematicCharacterController=lE,lE.prototype.setUpAxis=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Lg(e,t)},lE.prototype.setWalkDirection=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Pg(e,t)},lE.prototype.setVelocityForTimeInterval=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Dg(n,t,e)},lE.prototype.warp=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ig(e,t)},lE.prototype.preStep=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kg(e,t)},lE.prototype.playerStep=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Og(n,t,e)},lE.prototype.setFallSpeed=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Bg(e,t)},lE.prototype.setJumpSpeed=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),jg(e,t)},lE.prototype.setMaxJumpHeight=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fg(e,t)},lE.prototype.canJump=function(){return!!Ng(this.ly)},lE.prototype.jump=function(){zg(this.ly)},lE.prototype.setGravity=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hg(e,t)},lE.prototype.getGravity=function(){return Ug(this.ly)},lE.prototype.setMaxSlope=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Wg(e,t)},lE.prototype.getMaxSlope=function(){return Gg(this.ly)},lE.prototype.getGhostObject=function(){return sT(Vg(this.ly),uE)},lE.prototype.setUseGhostSweepTest=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),qg(e,t)},lE.prototype.onGround=function(){return!!Xg(this.ly)},lE.prototype.setUpInterpolate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Yg(e,t)},lE.prototype.updateAction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Zg(n,t,e)},lE.prototype.__destroy__=function(){Jg(this.ly)},cE.prototype=Object.create(UT.prototype),cE.prototype.constructor=cE,cE.prototype.my=cE,cE.ny={},r.btRaycastVehicle=cE,cE.prototype.applyEngineForce=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Qg(n,t,e)},cE.prototype.setSteeringValue=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),$g(n,t,e)},cE.prototype.getWheelTransformWS=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(tv(e,t),JT)},cE.prototype.updateWheelTransform=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),ev(n,t,e)},cE.prototype.addWheel=function(t,e,n,i,r,o,a){var l=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),sT(nv(l,t,e,n,i,r,o,a),sE)},cE.prototype.getNumWheels=function(){return iv(this.ly)},cE.prototype.getRigidBody=function(){return sT(rv(this.ly),GC)},cE.prototype.getWheelInfo=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ov(e,t),sE)},cE.prototype.setBrake=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),av(n,t,e)},cE.prototype.setCoordinateSystem=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),sv(i,t,e,n)},cE.prototype.getCurrentSpeedKmHour=function(){return lv(this.ly)},cE.prototype.getChassisWorldTransform=function(){return sT(cv(this.ly),JT)},cE.prototype.rayCast=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),uv(e,t)},cE.prototype.updateVehicle=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),pv(e,t)},cE.prototype.resetSuspension=function(){hv(this.ly)},cE.prototype.getSteeringValue=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),dv(e,t)},cE.prototype.updateWheelTransformsWS=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===e?_v(n,t):fv(n,t,e)},cE.prototype.setPitchControl=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mv(e,t)},cE.prototype.updateSuspension=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),yv(e,t)},cE.prototype.updateFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gv(e,t)},cE.prototype.getRightAxis=function(){return vv(this.ly)},cE.prototype.getUpAxis=function(){return bv(this.ly)},cE.prototype.getForwardAxis=function(){return xv(this.ly)},cE.prototype.getForwardVector=function(){return sT(Sv(this.ly),TT)},cE.prototype.getUserConstraintType=function(){return wv(this.ly)},cE.prototype.setUserConstraintType=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mv(e,t)},cE.prototype.setUserConstraintId=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Tv(e,t)},cE.prototype.getUserConstraintId=function(){return Cv(this.ly)},cE.prototype.updateAction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Ev(n,t,e)},cE.prototype.__destroy__=function(){Av(this.ly)},uE.prototype=Object.create(WT.prototype),uE.prototype.constructor=uE,uE.prototype.my=uE,uE.ny={},r.btPairCachingGhostObject=uE,uE.prototype.setAnisotropicFriction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Lv(n,t,e)},uE.prototype.getCollisionShape=function(){return sT(Pv(this.ly),gT)},uE.prototype.setContactProcessingThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dv(e,t)},uE.prototype.setActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Iv(e,t)},uE.prototype.forceActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kv(e,t)},uE.prototype.activate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),void 0===t?Ov(e):Bv(e,t)},uE.prototype.isActive=function(){return!!jv(this.ly)},uE.prototype.isKinematicObject=function(){return!!Fv(this.ly)},uE.prototype.isStaticObject=function(){return!!Nv(this.ly)},uE.prototype.isStaticOrKinematicObject=function(){return!!zv(this.ly)},uE.prototype.getRestitution=function(){return Hv(this.ly)},uE.prototype.getFriction=function(){return Uv(this.ly)},uE.prototype.getRollingFriction=function(){return Wv(this.ly)},uE.prototype.setRestitution=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gv(e,t)},uE.prototype.setFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vv(e,t)},uE.prototype.setRollingFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),qv(e,t)},uE.prototype.getWorldTransform=function(){return sT(Xv(this.ly),JT)},uE.prototype.getCollisionFlags=function(){return Yv(this.ly)},uE.prototype.setCollisionFlags=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zv(e,t)},uE.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Jv(e,t)},uE.prototype.setCollisionShape=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Kv(e,t)},uE.prototype.setCcdMotionThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qv(e,t)},uE.prototype.setCcdSweptSphereRadius=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$v(e,t)},uE.prototype.getUserIndex=function(){return tb(this.ly)},uE.prototype.setUserIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),eb(e,t)},uE.prototype.getUserPointer=function(){return sT(nb(this.ly),VT)},uE.prototype.setUserPointer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ib(e,t)},uE.prototype.getBroadphaseHandle=function(){return sT(rb(this.ly),UC)},uE.prototype.getNumOverlappingObjects=function(){return ob(this.ly)},uE.prototype.getOverlappingObject=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(ab(e,t),bT)},uE.prototype.__destroy__=function(){sb(this.ly)},pE.prototype=Object.create(oT.prototype),pE.prototype.constructor=pE,pE.prototype.my=pE,pE.ny={},r.btGhostPairCallback=pE,pE.prototype.__destroy__=function(){cb(this.ly)},hE.prototype=Object.create(oT.prototype),hE.prototype.constructor=hE,hE.prototype.my=hE,hE.ny={},r.btSoftBodyWorldInfo=hE,hE.prototype.get_air_density=hE.prototype.dz=function(){return pb(this.ly)},hE.prototype.set_air_density=hE.prototype.KB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),hb(e,t)},Object.defineProperty(hE.prototype,"air_density",{get:hE.prototype.dz,set:hE.prototype.KB}),hE.prototype.get_water_density=hE.prototype.HB=function(){return db(this.ly)},hE.prototype.set_water_density=hE.prototype.mE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_b(e,t)},Object.defineProperty(hE.prototype,"water_density",{get:hE.prototype.HB,set:hE.prototype.mE}),hE.prototype.get_water_offset=hE.prototype.JB=function(){return fb(this.ly)},hE.prototype.set_water_offset=hE.prototype.oE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mb(e,t)},Object.defineProperty(hE.prototype,"water_offset",{get:hE.prototype.JB,set:hE.prototype.oE}),hE.prototype.get_m_maxDisplacement=hE.prototype.JA=function(){return yb(this.ly)},hE.prototype.set_m_maxDisplacement=hE.prototype.oD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gb(e,t)},Object.defineProperty(hE.prototype,"m_maxDisplacement",{get:hE.prototype.JA,set:hE.prototype.oD}),hE.prototype.get_water_normal=hE.prototype.IB=function(){return sT(vb(this.ly),TT)},hE.prototype.set_water_normal=hE.prototype.nE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bb(e,t)},Object.defineProperty(hE.prototype,"water_normal",{get:hE.prototype.IB,set:hE.prototype.nE}),hE.prototype.get_m_broadphase=hE.prototype.Mz=function(){return sT(xb(this.ly),NC)},hE.prototype.set_m_broadphase=hE.prototype.rC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Sb(e,t)},Object.defineProperty(hE.prototype,"m_broadphase",{get:hE.prototype.Mz,set:hE.prototype.rC}),hE.prototype.get_m_dispatcher=hE.prototype.cA=function(){return sT(wb(this.ly),FT)},hE.prototype.set_m_dispatcher=hE.prototype.IC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mb(e,t)},Object.defineProperty(hE.prototype,"m_dispatcher",{get:hE.prototype.cA,set:hE.prototype.IC}),hE.prototype.get_m_gravity=hE.prototype.lA=function(){return sT(Tb(this.ly),TT)},hE.prototype.set_m_gravity=hE.prototype.RC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cb(e,t)},Object.defineProperty(hE.prototype,"m_gravity",{get:hE.prototype.lA,set:hE.prototype.RC}),hE.prototype.__destroy__=function(){Eb(this.ly)},dE.prototype=Object.create(oT.prototype),dE.prototype.constructor=dE,dE.prototype.my=dE,dE.ny={},r.Face=dE,dE.prototype.get_m_n=dE.prototype.My=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Ab(e,t),fE)},dE.prototype.set_m_n=dE.prototype.Wy=function(t,e){var n=this.ly;dT(),t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),Rb(n,t,e)},Object.defineProperty(dE.prototype,"m_n",{get:dE.prototype.My,set:dE.prototype.Wy}),dE.prototype.get_m_normal=dE.prototype.MA=function(){return sT(Lb(this.ly),TT)},dE.prototype.set_m_normal=dE.prototype.rD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Pb(e,t)},Object.defineProperty(dE.prototype,"m_normal",{get:dE.prototype.MA,set:dE.prototype.rD}),dE.prototype.get_m_ra=dE.prototype.UA=function(){return Db(this.ly)},dE.prototype.set_m_ra=dE.prototype.zD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ib(e,t)},Object.defineProperty(dE.prototype,"m_ra",{get:dE.prototype.UA,set:dE.prototype.zD}),dE.prototype.__destroy__=function(){kb(this.ly)},_E.prototype=Object.create(oT.prototype),_E.prototype.constructor=_E,_E.prototype.my=_E,_E.ny={},r.tFaceArray=_E,_E.prototype.size=_E.prototype.size=function(){return Ob(this.ly)},_E.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Bb(e,t),dE)},_E.prototype.__destroy__=function(){jb(this.ly)},fE.prototype=Object.create(oT.prototype),fE.prototype.constructor=fE,fE.prototype.my=fE,fE.ny={},r.Node=fE,fE.prototype.get_m_x=fE.prototype.CB=function(){return sT(Fb(this.ly),TT)},fE.prototype.set_m_x=fE.prototype.hE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Nb(e,t)},Object.defineProperty(fE.prototype,"m_x",{get:fE.prototype.CB,set:fE.prototype.hE}),fE.prototype.get_m_q=fE.prototype.TA=function(){return sT(zb(this.ly),TT)},fE.prototype.set_m_q=fE.prototype.yD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hb(e,t)},Object.defineProperty(fE.prototype,"m_q",{get:fE.prototype.TA,set:fE.prototype.yD}),fE.prototype.get_m_v=fE.prototype.uB=function(){return sT(Ub(this.ly),TT)},fE.prototype.set_m_v=fE.prototype.$D=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Wb(e,t)},Object.defineProperty(fE.prototype,"m_v",{get:fE.prototype.uB,set:fE.prototype.$D}),fE.prototype.get_m_f=fE.prototype.hA=function(){return sT(Gb(this.ly),TT)},fE.prototype.set_m_f=fE.prototype.NC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Vb(e,t)},Object.defineProperty(fE.prototype,"m_f",{get:fE.prototype.hA,set:fE.prototype.NC}),fE.prototype.get_m_n=fE.prototype.My=function(){return sT(qb(this.ly),TT)},fE.prototype.set_m_n=fE.prototype.Wy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Xb(e,t)},Object.defineProperty(fE.prototype,"m_n",{get:fE.prototype.My,set:fE.prototype.Wy}),fE.prototype.get_m_im=fE.prototype.uA=function(){return Yb(this.ly)},fE.prototype.set_m_im=fE.prototype.$C=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Zb(e,t)},Object.defineProperty(fE.prototype,"m_im",{get:fE.prototype.uA,set:fE.prototype.$C}),fE.prototype.get_m_area=fE.prototype.Jz=function(){return Jb(this.ly)},fE.prototype.set_m_area=fE.prototype.oC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Kb(e,t)},Object.defineProperty(fE.prototype,"m_area",{get:fE.prototype.Jz,set:fE.prototype.oC}),fE.prototype.__destroy__=function(){Qb(this.ly)},mE.prototype=Object.create(oT.prototype),mE.prototype.constructor=mE,mE.prototype.my=mE,mE.ny={},r.tNodeArray=mE,mE.prototype.size=mE.prototype.size=function(){return $b(this.ly)},mE.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(tx(e,t),fE)},mE.prototype.__destroy__=function(){ex(this.ly)},yE.prototype=Object.create(oT.prototype),yE.prototype.constructor=yE,yE.prototype.my=yE,yE.ny={},r.Material=yE,yE.prototype.get_m_kLST=yE.prototype.AA=function(){return nx(this.ly)},yE.prototype.set_m_kLST=yE.prototype.fD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ix(e,t)},Object.defineProperty(yE.prototype,"m_kLST",{get:yE.prototype.AA,set:yE.prototype.fD}),yE.prototype.get_m_kAST=yE.prototype.zA=function(){return rx(this.ly)},yE.prototype.set_m_kAST=yE.prototype.eD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ox(e,t)},Object.defineProperty(yE.prototype,"m_kAST",{get:yE.prototype.zA,set:yE.prototype.eD}),yE.prototype.get_m_kVST=yE.prototype.BA=function(){return ax(this.ly)},yE.prototype.set_m_kVST=yE.prototype.gD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),sx(e,t)},Object.defineProperty(yE.prototype,"m_kVST",{get:yE.prototype.BA,set:yE.prototype.gD}),yE.prototype.get_m_flags=yE.prototype.iA=function(){return lx(this.ly)},yE.prototype.set_m_flags=yE.prototype.OC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),cx(e,t)},Object.defineProperty(yE.prototype,"m_flags",{get:yE.prototype.iA,set:yE.prototype.OC}),yE.prototype.__destroy__=function(){ux(this.ly)},gE.prototype=Object.create(oT.prototype),gE.prototype.constructor=gE,gE.prototype.my=gE,gE.ny={},r.tMaterialArray=gE,gE.prototype.size=gE.prototype.size=function(){return px(this.ly)},gE.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(hx(e,t),yE)},gE.prototype.__destroy__=function(){dx(this.ly)},vE.prototype=Object.create(oT.prototype),vE.prototype.constructor=vE,vE.prototype.my=vE,vE.ny={},r.Anchor=vE,vE.prototype.get_m_node=vE.prototype.KA=function(){return sT(_x(this.ly),fE)},vE.prototype.set_m_node=vE.prototype.pD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fx(e,t)},Object.defineProperty(vE.prototype,"m_node",{get:vE.prototype.KA,set:vE.prototype.pD}),vE.prototype.get_m_local=vE.prototype.EA=function(){return sT(mx(this.ly),TT)},vE.prototype.set_m_local=vE.prototype.jD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),yx(e,t)},Object.defineProperty(vE.prototype,"m_local",{get:vE.prototype.EA,set:vE.prototype.jD}),vE.prototype.get_m_body=vE.prototype.Kz=function(){return sT(gx(this.ly),GC)},vE.prototype.set_m_body=vE.prototype.pC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vx(e,t)},Object.defineProperty(vE.prototype,"m_body",{get:vE.prototype.Kz,set:vE.prototype.pC}),vE.prototype.get_m_influence=vE.prototype.xA=function(){return bx(this.ly)},vE.prototype.set_m_influence=vE.prototype.cD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),xx(e,t)},Object.defineProperty(vE.prototype,"m_influence",{get:vE.prototype.xA,set:vE.prototype.cD}),vE.prototype.get_m_c0=vE.prototype.Nz=function(){return sT(Sx(this.ly),ZT)},vE.prototype.set_m_c0=vE.prototype.sC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),wx(e,t)},Object.defineProperty(vE.prototype,"m_c0",{get:vE.prototype.Nz,set:vE.prototype.sC}),vE.prototype.get_m_c1=vE.prototype.Oz=function(){return sT(Mx(this.ly),TT)},vE.prototype.set_m_c1=vE.prototype.tC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Tx(e,t)},Object.defineProperty(vE.prototype,"m_c1",{get:vE.prototype.Oz,set:vE.prototype.tC}),vE.prototype.get_m_c2=vE.prototype.Pz=function(){return Cx(this.ly)},vE.prototype.set_m_c2=vE.prototype.uC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ex(e,t)},Object.defineProperty(vE.prototype,"m_c2",{get:vE.prototype.Pz,set:vE.prototype.uC}),vE.prototype.__destroy__=function(){Ax(this.ly)},bE.prototype=Object.create(oT.prototype),bE.prototype.constructor=bE,bE.prototype.my=bE,bE.ny={},r.tAnchorArray=bE,bE.prototype.size=bE.prototype.size=function(){return Rx(this.ly)},bE.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Lx(e,t),vE)},bE.prototype.clear=bE.prototype.clear=function(){Px(this.ly)},bE.prototype.push_back=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Dx(e,t)},bE.prototype.pop_back=function(){Ix(this.ly)},bE.prototype.__destroy__=function(){kx(this.ly)},xE.prototype=Object.create(oT.prototype),xE.prototype.constructor=xE,xE.prototype.my=xE,xE.ny={},r.Config=xE,xE.prototype.get_kVCF=xE.prototype.zz=function(){return Ox(this.ly)},xE.prototype.set_kVCF=xE.prototype.eC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Bx(e,t)},Object.defineProperty(xE.prototype,"kVCF",{get:xE.prototype.zz,set:xE.prototype.eC}),xE.prototype.get_kDP=xE.prototype.lz=function(){return jx(this.ly)},xE.prototype.set_kDP=xE.prototype.SB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Fx(e,t)},Object.defineProperty(xE.prototype,"kDP",{get:xE.prototype.lz,set:xE.prototype.SB}),xE.prototype.get_kDG=xE.prototype.kz=function(){return Nx(this.ly)},xE.prototype.set_kDG=xE.prototype.RB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),zx(e,t)},Object.defineProperty(xE.prototype,"kDG",{get:xE.prototype.kz,set:xE.prototype.RB}),xE.prototype.get_kLF=xE.prototype.nz=function(){return Hx(this.ly)},xE.prototype.set_kLF=xE.prototype.UB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ux(e,t)},Object.defineProperty(xE.prototype,"kLF",{get:xE.prototype.nz,set:xE.prototype.UB}),xE.prototype.get_kPR=xE.prototype.pz=function(){return Wx(this.ly)},xE.prototype.set_kPR=xE.prototype.WB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Gx(e,t)},Object.defineProperty(xE.prototype,"kPR",{get:xE.prototype.pz,set:xE.prototype.WB}),xE.prototype.get_kVC=xE.prototype.yz=function(){return Vx(this.ly)},xE.prototype.set_kVC=xE.prototype.dC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),qx(e,t)},Object.defineProperty(xE.prototype,"kVC",{get:xE.prototype.yz,set:xE.prototype.dC}),xE.prototype.get_kDF=xE.prototype.jz=function(){return Xx(this.ly)},xE.prototype.set_kDF=xE.prototype.QB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Yx(e,t)},Object.defineProperty(xE.prototype,"kDF",{get:xE.prototype.jz,set:xE.prototype.QB}),xE.prototype.get_kMT=xE.prototype.oz=function(){return Zx(this.ly)},xE.prototype.set_kMT=xE.prototype.VB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Jx(e,t)},Object.defineProperty(xE.prototype,"kMT",{get:xE.prototype.oz,set:xE.prototype.VB}),xE.prototype.get_kCHR=xE.prototype.iz=function(){return Kx(this.ly)},xE.prototype.set_kCHR=xE.prototype.PB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Qx(e,t)},Object.defineProperty(xE.prototype,"kCHR",{get:xE.prototype.iz,set:xE.prototype.PB}),xE.prototype.get_kKHR=xE.prototype.mz=function(){return $x(this.ly)},xE.prototype.set_kKHR=xE.prototype.TB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tS(e,t)},Object.defineProperty(xE.prototype,"kKHR",{get:xE.prototype.mz,set:xE.prototype.TB}),xE.prototype.get_kSHR=xE.prototype.qz=function(){return eS(this.ly)},xE.prototype.set_kSHR=xE.prototype.XB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),nS(e,t)},Object.defineProperty(xE.prototype,"kSHR",{get:xE.prototype.qz,set:xE.prototype.XB}),xE.prototype.get_kAHR=xE.prototype.hz=function(){return iS(this.ly)},xE.prototype.set_kAHR=xE.prototype.OB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),rS(e,t)},Object.defineProperty(xE.prototype,"kAHR",{get:xE.prototype.hz,set:xE.prototype.OB}),xE.prototype.get_kSRHR_CL=xE.prototype.uz=function(){return oS(this.ly)},xE.prototype.set_kSRHR_CL=xE.prototype.$B=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),aS(e,t)},Object.defineProperty(xE.prototype,"kSRHR_CL",{get:xE.prototype.uz,set:xE.prototype.$B}),xE.prototype.get_kSKHR_CL=xE.prototype.rz=function(){return sS(this.ly)},xE.prototype.set_kSKHR_CL=xE.prototype.YB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),lS(e,t)},Object.defineProperty(xE.prototype,"kSKHR_CL",{get:xE.prototype.rz,set:xE.prototype.YB}),xE.prototype.get_kSSHR_CL=xE.prototype.wz=function(){return cS(this.ly)},xE.prototype.set_kSSHR_CL=xE.prototype.bC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),uS(e,t)},Object.defineProperty(xE.prototype,"kSSHR_CL",{get:xE.prototype.wz,set:xE.prototype.bC}),xE.prototype.get_kSR_SPLT_CL=xE.prototype.vz=function(){return pS(this.ly)},xE.prototype.set_kSR_SPLT_CL=xE.prototype.aC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),hS(e,t)},Object.defineProperty(xE.prototype,"kSR_SPLT_CL",{get:xE.prototype.vz,set:xE.prototype.aC}),xE.prototype.get_kSK_SPLT_CL=xE.prototype.sz=function(){return dS(this.ly)},xE.prototype.set_kSK_SPLT_CL=xE.prototype.ZB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_S(e,t)},Object.defineProperty(xE.prototype,"kSK_SPLT_CL",{get:xE.prototype.sz,set:xE.prototype.ZB}),xE.prototype.get_kSS_SPLT_CL=xE.prototype.xz=function(){return fS(this.ly)},xE.prototype.set_kSS_SPLT_CL=xE.prototype.cC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),mS(e,t)},Object.defineProperty(xE.prototype,"kSS_SPLT_CL",{get:xE.prototype.xz,set:xE.prototype.cC}),xE.prototype.get_maxvolume=xE.prototype.DB=function(){return yS(this.ly)},xE.prototype.set_maxvolume=xE.prototype.iE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gS(e,t)},Object.defineProperty(xE.prototype,"maxvolume",{get:xE.prototype.DB,set:xE.prototype.iE}),xE.prototype.get_timescale=xE.prototype.FB=function(){return vS(this.ly)},xE.prototype.set_timescale=xE.prototype.kE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),bS(e,t)},Object.defineProperty(xE.prototype,"timescale",{get:xE.prototype.FB,set:xE.prototype.kE}),xE.prototype.get_viterations=xE.prototype.GB=function(){return xS(this.ly)},xE.prototype.set_viterations=xE.prototype.lE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),SS(e,t)},Object.defineProperty(xE.prototype,"viterations",{get:xE.prototype.GB,set:xE.prototype.lE}),xE.prototype.get_piterations=xE.prototype.EB=function(){return wS(this.ly)},xE.prototype.set_piterations=xE.prototype.jE=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),MS(e,t)},Object.defineProperty(xE.prototype,"piterations",{get:xE.prototype.EB,set:xE.prototype.jE}),xE.prototype.get_diterations=xE.prototype.gz=function(){return TS(this.ly)},xE.prototype.set_diterations=xE.prototype.NB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),CS(e,t)},Object.defineProperty(xE.prototype,"diterations",{get:xE.prototype.gz,set:xE.prototype.NB}),xE.prototype.get_citerations=xE.prototype.ez=function(){return ES(this.ly)},xE.prototype.set_citerations=xE.prototype.LB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),AS(e,t)},Object.defineProperty(xE.prototype,"citerations",{get:xE.prototype.ez,set:xE.prototype.LB}),xE.prototype.get_collisions=xE.prototype.fz=function(){return RS(this.ly)},xE.prototype.set_collisions=xE.prototype.MB=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),LS(e,t)},Object.defineProperty(xE.prototype,"collisions",{get:xE.prototype.fz,set:xE.prototype.MB}),xE.prototype.__destroy__=function(){PS(this.ly)},SE.prototype=Object.create(bT.prototype),SE.prototype.constructor=SE,SE.prototype.my=SE,SE.ny={},r.btSoftBody=SE,SE.prototype.checkLink=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),!!IS(n,t,e)},SE.prototype.checkFace=function(t,e,n){var i=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),!!kS(i,t,e,n)},SE.prototype.appendMaterial=function(){return sT(OS(this.ly),yE)},SE.prototype.appendNode=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),BS(n,t,e)},SE.prototype.appendLink=function(t,e,n,i){var r=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),jS(r,t,e,n,i)},SE.prototype.appendFace=function(t,e,n,i){var r=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),FS(r,t,e,n,i)},SE.prototype.appendTetra=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),NS(o,t,e,n,i,r)},SE.prototype.appendAnchor=function(t,e,n,i){var r=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),zS(r,t,e,n,i)},SE.prototype.addForce=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===e?HS(n,t):US(n,t,e)},SE.prototype.addAeroForceToNode=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),WS(n,t,e)},SE.prototype.getTotalMass=function(){return GS(this.ly)},SE.prototype.setTotalMass=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),VS(n,t,e)},SE.prototype.setMass=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),qS(n,t,e)},SE.prototype.transform=SE.prototype.transform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),XS(e,t)},SE.prototype.translate=SE.prototype.translate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),YS(e,t)},SE.prototype.rotate=SE.prototype.rotate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ZS(e,t)},SE.prototype.scale=SE.prototype.scale=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),JS(e,t)},SE.prototype.generateClusters=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===e?KS(n,t):QS(n,t,e)},SE.prototype.generateBendingConstraints=function(t,e){var n=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),$S(n,t,e)},SE.prototype.upcast=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(tw(e,t),SE)},SE.prototype.getRestLengthScale=function(){return ew(this.ly)},SE.prototype.setRestLengthScale=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),nw(e,t)},SE.prototype.setAnisotropicFriction=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),iw(n,t,e)},SE.prototype.getCollisionShape=function(){return sT(rw(this.ly),gT)},SE.prototype.setContactProcessingThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ow(e,t)},SE.prototype.setActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),aw(e,t)},SE.prototype.forceActivationState=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),sw(e,t)},SE.prototype.activate=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),void 0===t?lw(e):cw(e,t)},SE.prototype.isActive=function(){return!!uw(this.ly)},SE.prototype.isKinematicObject=function(){return!!pw(this.ly)},SE.prototype.isStaticObject=function(){return!!hw(this.ly)},SE.prototype.isStaticOrKinematicObject=function(){return!!dw(this.ly)},SE.prototype.getRestitution=function(){return _w(this.ly)},SE.prototype.getFriction=function(){return fw(this.ly)},SE.prototype.getRollingFriction=function(){return mw(this.ly)},SE.prototype.setRestitution=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),yw(e,t)},SE.prototype.setFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),gw(e,t)},SE.prototype.setRollingFriction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vw(e,t)},SE.prototype.getWorldTransform=function(){return sT(bw(this.ly),JT)},SE.prototype.getCollisionFlags=function(){return xw(this.ly)},SE.prototype.setCollisionFlags=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Sw(e,t)},SE.prototype.setWorldTransform=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),ww(e,t)},SE.prototype.setCollisionShape=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Mw(e,t)},SE.prototype.setCcdMotionThreshold=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Tw(e,t)},SE.prototype.setCcdSweptSphereRadius=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Cw(e,t)},SE.prototype.getUserIndex=function(){return Ew(this.ly)},SE.prototype.setUserIndex=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Aw(e,t)},SE.prototype.getUserPointer=function(){return sT(Rw(this.ly),VT)},SE.prototype.setUserPointer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Lw(e,t)},SE.prototype.getBroadphaseHandle=function(){return sT(Pw(this.ly),UC)},SE.prototype.get_m_cfg=SE.prototype.Qz=function(){return sT(Dw(this.ly),xE)},SE.prototype.set_m_cfg=SE.prototype.vC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Iw(e,t)},Object.defineProperty(SE.prototype,"m_cfg",{get:SE.prototype.Qz,set:SE.prototype.vC}),SE.prototype.get_m_nodes=SE.prototype.LA=function(){return sT(kw(this.ly),mE)},SE.prototype.set_m_nodes=SE.prototype.qD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Ow(e,t)},Object.defineProperty(SE.prototype,"m_nodes",{get:SE.prototype.LA,set:SE.prototype.qD}),SE.prototype.get_m_faces=SE.prototype.Ky=function(){return sT(Bw(this.ly),_E)},SE.prototype.set_m_faces=SE.prototype.Uy=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),jw(e,t)},Object.defineProperty(SE.prototype,"m_faces",{get:SE.prototype.Ky,set:SE.prototype.Uy}),SE.prototype.get_m_materials=SE.prototype.IA=function(){return sT(Fw(this.ly),gE)},SE.prototype.set_m_materials=SE.prototype.nD=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Nw(e,t)},Object.defineProperty(SE.prototype,"m_materials",{get:SE.prototype.IA,set:SE.prototype.nD}),SE.prototype.get_m_anchors=SE.prototype.Gz=function(){return sT(zw(this.ly),bE)},SE.prototype.set_m_anchors=SE.prototype.lC=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),Hw(e,t)},Object.defineProperty(SE.prototype,"m_anchors",{get:SE.prototype.Gz,set:SE.prototype.lC}),SE.prototype.__destroy__=function(){Uw(this.ly)},wE.prototype=Object.create(jT.prototype),wE.prototype.constructor=wE,wE.prototype.my=wE,wE.ny={},r.btSoftBodyRigidBodyCollisionConfiguration=wE,wE.prototype.__destroy__=function(){Vw(this.ly)},ME.prototype=Object.create(GT.prototype),ME.prototype.constructor=ME,ME.prototype.my=ME,ME.ny={},r.btDefaultSoftBodySolver=ME,ME.prototype.__destroy__=function(){Xw(this.ly)},TE.prototype=Object.create(oT.prototype),TE.prototype.constructor=TE,TE.prototype.my=TE,TE.ny={},r.btSoftBodyArray=TE,TE.prototype.size=TE.prototype.size=function(){return Yw(this.ly)},TE.prototype.at=function(t){var e=this.ly;return t&&"object"===s()(t)&&(t=t.ly),sT(Zw(e,t),SE)},TE.prototype.__destroy__=function(){Jw(this.ly)},CE.prototype=Object.create(zT.prototype),CE.prototype.constructor=CE,CE.prototype.my=CE,CE.ny={},r.btSoftRigidDynamicsWorld=CE,CE.prototype.addSoftBody=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),Qw(i,t,e,n)},CE.prototype.removeSoftBody=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),$w(e,t)},CE.prototype.removeCollisionObject=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),tM(e,t)},CE.prototype.getWorldInfo=function(){return sT(eM(this.ly),hE)},CE.prototype.getSoftBodyArray=function(){return sT(nM(this.ly),TE)},CE.prototype.getDispatcher=function(){return sT(iM(this.ly),FT)},CE.prototype.rayTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),rM(i,t,e,n)},CE.prototype.getPairCache=function(){return sT(oM(this.ly),jC)},CE.prototype.getDispatchInfo=function(){return sT(aM(this.ly),tE)},CE.prototype.addCollisionObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?sM(i,t):void 0===n?lM(i,t,e):cM(i,t,e,n)},CE.prototype.getBroadphase=function(){return sT(uM(this.ly),NC)},CE.prototype.convexSweepTest=function(t,e,n,i,r){var o=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),pM(o,t,e,n,i,r)},CE.prototype.contactPairTest=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),hM(i,t,e,n)},CE.prototype.contactTest=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),dM(n,t,e)},CE.prototype.updateSingleAabb=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),_M(e,t)},CE.prototype.setDebugDrawer=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),fM(e,t)},CE.prototype.getDebugDrawer=function(){return sT(mM(this.ly),MT)},CE.prototype.debugDrawWorld=function(){yM(this.ly)},CE.prototype.debugDrawObject=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),gM(i,t,e,n)},CE.prototype.setGravity=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),vM(e,t)},CE.prototype.getGravity=function(){return sT(bM(this.ly),TT)},CE.prototype.addRigidBody=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?xM(i,t):void 0===n?_emscripten_bind_btSoftRigidDynamicsWorld_addRigidBody_2(i,t,e):SM(i,t,e,n)},CE.prototype.removeRigidBody=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),wM(e,t)},CE.prototype.addConstraint=function(t,e){var n=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),void 0===e?MM(n,t):TM(n,t,e)},CE.prototype.removeConstraint=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),CM(e,t)},CE.prototype.stepSimulation=function(t,e,n){var i=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?EM(i,t):void 0===n?AM(i,t,e):RM(i,t,e,n)},CE.prototype.setContactAddedCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),LM(e,t)},CE.prototype.setContactProcessedCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),PM(e,t)},CE.prototype.setContactDestroyedCallback=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),DM(e,t)},CE.prototype.addAction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),IM(e,t)},CE.prototype.removeAction=function(t){var e=this.ly;t&&"object"===s()(t)&&(t=t.ly),kM(e,t)},CE.prototype.getSolverInfo=function(){return sT(OM(this.ly),eE)},CE.prototype.setInternalTickCallback=function(t,e,n){var i=this.ly;t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),void 0===e?BM(i,t):void 0===n?jM(i,t,e):FM(i,t,e,n)},CE.prototype.__destroy__=function(){NM(this.ly)},EE.prototype=Object.create(oT.prototype),EE.prototype.constructor=EE,EE.prototype.my=EE,EE.ny={},r.btSoftBodyHelpers=EE,EE.prototype.CreateRope=function(t,e,n,i,r){var o=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),sT(HM(o,t,e,n,i,r),SE)},EE.prototype.CreatePatch=function(t,e,n,i,r,o,a,l,c){var u=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),l&&"object"===s()(l)&&(l=l.ly),c&&"object"===s()(c)&&(c=c.ly),sT(UM(u,t,e,n,i,r,o,a,l,c),SE)},EE.prototype.CreatePatchUV=function(t,e,n,i,r,o,a,l,c,u){var p=this.ly;return dT(),t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),o&&"object"===s()(o)&&(o=o.ly),a&&"object"===s()(a)&&(a=a.ly),l&&"object"===s()(l)&&(l=l.ly),c&&"object"===s()(c)&&(c=c.ly),"object"==s()(u)&&(u=yT(u)),sT(WM(p,t,e,n,i,r,o,a,l,c,u),SE)},EE.prototype.CreateEllipsoid=function(t,e,n,i){var r=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),sT(GM(r,t,e,n,i),SE)},EE.prototype.CreateFromTriMesh=function(t,e,n,i,r){var o=this.ly;if(dT(),t&&"object"===s()(t)&&(t=t.ly),"object"==s()(e)&&(e=yT(e)),"object"==s()(n)&&"object"===s()(n)){var a=_T(n,P);fT(n,P,a),n=a}return i&&"object"===s()(i)&&(i=i.ly),r&&"object"===s()(r)&&(r=r.ly),sT(VM(o,t,e,n,i,r),SE)},EE.prototype.CreateFromConvexHull=function(t,e,n,i){var r=this.ly;return t&&"object"===s()(t)&&(t=t.ly),e&&"object"===s()(e)&&(e=e.ly),n&&"object"===s()(n)&&(n=n.ly),i&&"object"===s()(i)&&(i=i.ly),sT(qM(r,t,e,n,i),SE)},EE.prototype.__destroy__=function(){XM(this.ly)},function(){function t(){r.PHY_FLOAT=YM(),r.PHY_DOUBLE=ZM(),r.PHY_INTEGER=JM(),r.PHY_SHORT=KM(),r.PHY_FIXEDPOINT88=QM(),r.PHY_UCHAR=$M(),r.BT_CONSTRAINT_ERP=tT(),r.BT_CONSTRAINT_STOP_ERP=eT(),r.BT_CONSTRAINT_CFM=nT(),r.BT_CONSTRAINT_STOP_CFM=iT()}U?t():z.unshift(t)}(),r.CONTACT_ADDED_CALLBACK_SIGNATURE="iiiiiiii",r.CONTACT_DESTROYED_CALLBACK_SIGNATURE="ii",r.CONTACT_PROCESSED_CALLBACK_SIGNATURE="iiii",r.INTERNAL_TICK_CALLBACK_SIGNATURE="vif",this.Ammo=r,t.ready});"object"===("undefined"==typeof exports?"undefined":s()(exports))&&"object"===s()(r)?r.exports=l:"function"==typeof define&&n(56)?define([],(function(){return l})):"object"===("undefined"==typeof exports?"undefined":s()(exports))&&(exports.Ammo=l)}.call(this,"/index.js",n(54),"/",n(69)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){},function(t,e,n){"use strict";n.r(e);var i=n(21),r=n.n(i),o=n(59),a=n.n(o),s=n(6),l=n.n(s),c=n(13),u=n.n(c),p=n(8),h=n.n(p),d=n(4),_=n.n(d),f=n(10),m=n.n(f),y=n(5),g=n.n(y),v=n(2),b=n.n(v),x=n(3),S=n.n(x),w=n(0),M=n.n(w),T=n(14),C=n.n(T);function E(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}
/**
 * @license
 * Copyright 2010-2021 Three.js Authors
 * SPDX-License-Identifier: MIT
 */();return function(){var n,i=g()(t);if(e){var r=g()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return m()(this,n)}}!function(e,i){"object"==("undefined"==typeof exports?"undefined":M()(exports))&&void 0!==t?i(exports):"function"==typeof define&&n(56)?define(["exports"],i):i((e="undefined"!=typeof globalThis?globalThis:e||self).THREE={})}(void 0,(function(t){for(var e,n="136",i=100,o=300,s=301,c=302,p=303,d=304,f=306,y=307,v=1e3,x=1001,w=1002,M=1003,T=1004,A=1005,P=1006,D=1007,I=1008,k=1009,O=1012,B=1014,j=1015,F=1016,N=1020,z=1022,H=1023,U=1026,W=1027,G=33776,V=33777,q=33778,X=33779,Y=35840,Z=35841,J=35842,K=35843,Q=37492,$=37496,tt=2300,et=2301,nt=2302,it=2400,rt=2401,ot=2402,at=2501,st=3e3,lt=3001,ct=7680,ut=35044,pt=35048,ht="300 es",dt=function(){function t(){b()(this,t)}return S()(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}}}]),t}(),_t=[],ft=0;ft<256;ft++)_t[ft]=(ft<16?"0":"")+ft.toString(16);var mt=1234567,yt=Math.PI/180,gt=180/Math.PI;function vt(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(_t[255&t]+_t[t>>8&255]+_t[t>>16&255]+_t[t>>24&255]+"-"+_t[255&e]+_t[e>>8&255]+"-"+_t[e>>16&15|64]+_t[e>>24&255]+"-"+_t[63&n|128]+_t[n>>8&255]+"-"+_t[n>>16&255]+_t[n>>24&255]+_t[255&i]+_t[i>>8&255]+_t[i>>16&255]+_t[i>>24&255]).toUpperCase()}function bt(t,e,n){return Math.max(e,Math.min(n,t))}function xt(t,e){return(t%e+e)%e}function St(t,e,n){return(1-n)*t+n*e}function wt(t){return 0==(t&t-1)&&0!==t}function Mt(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function Tt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Ct=Object.freeze({__proto__:null,DEG2RAD:yt,RAD2DEG:gt,generateUUID:vt,clamp:bt,euclideanModulo:xt,mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},inverseLerp:function(t,e,n){return t!==e?(n-t)/(e-t):0},lerp:St,damp:function(t,e,n,i){return St(t,e,1-Math.exp(-n*i))},pingpong:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e-Math.abs(xt(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(mt=t%2147483647),((mt=16807*mt%2147483647)-1)/2147483646},degToRad:function(t){return t*yt},radToDeg:function(t){return t*gt},isPowerOfTwo:wt,ceilPowerOfTwo:Mt,floorPowerOfTwo:Tt,setQuaternionFromProperEuler:function(t,e,n,i,r){var o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+i)/2),u=a((e+i)/2),p=o((e-i)/2),h=a((e-i)/2),d=o((i-e)/2),_=a((i-e)/2);switch(r){case"XYX":t.set(s*u,l*p,l*h,s*c);break;case"YZY":t.set(l*h,s*u,l*p,s*c);break;case"ZXZ":t.set(l*p,l*h,s*u,s*c);break;case"XZX":t.set(s*u,l*_,l*d,s*c);break;case"YXY":t.set(l*d,s*u,l*_,s*c);break;case"ZYZ":t.set(l*_,l*d,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}}),Et=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b()(this,e),this.x=t,this.y=n}return S()(e,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:t,value:C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);Et.prototype.isVector2=!0;var At=function(){function t(){b()(this,t),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return S()(t,[{key:"set",value:function(t,e,n,i,r,o,a,s,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],p=n[2],h=n[5],d=n[8],_=i[0],f=i[3],m=i[6],y=i[1],g=i[4],v=i[7],b=i[2],x=i[5],S=i[8];return r[0]=o*_+a*y+s*b,r[3]=o*f+a*g+s*x,r[6]=o*m+a*v+s*S,r[1]=l*_+c*y+u*b,r[4]=l*f+c*g+u*x,r[7]=l*m+c*v+u*S,r[2]=p*_+h*y+d*b,r[5]=p*f+h*g+d*x,r[8]=p*m+h*v+d*S,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=c*o-a*l,p=a*s-c*r,h=l*r-o*s,d=e*u+n*p+i*h;if(0===d)return this.set(0,0,0,0,0,0,0,0,0);var _=1/d;return t[0]=u*_,t[1]=(i*l-c*n)*_,t[2]=(a*n-i*o)*_,t[3]=p*_,t[4]=(c*e-i*s)*_,t[5]=(i*r-a*e)*_,t[6]=h*_,t[7]=(n*s-l*e)*_,t[8]=(o*e-n*r)*_,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,i,r,o,a){var s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1),this}},{key:"scale",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this}},{key:"translate",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();function Rt(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}At.prototype.isMatrix3=!0;var Lt,Pt={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Dt(t,e){return new Pt[t](e)}function It(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}var kt=function(){function t(){b()(this,t)}return S()(t,null,[{key:"getDataURL",value:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Lt&&(Lt=It("canvas")),Lt.width=t.width,Lt.height=t.height;var n=Lt.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Lt}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}}]),t}(),Ot=0,Bt=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1001,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1001,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1006,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1008,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1023,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1009,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:3e3;return b()(this,n),t=e.call(this),Object.defineProperty(h()(t),"id",{value:Ot++}),t.uuid=vt(),t.name="",t.image=i,t.mipmaps=[],t.mapping=r,t.wrapS=o,t.wrapT=a,t.magFilter=s,t.minFilter=l,t.anisotropy=p,t.format=c,t.internalFormat=null,t.type=u,t.offset=new Et(0,0),t.repeat=new Et(1,1),t.center=new Et(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new At,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=d,t.userData={},t.version=0,t.onUpdate=null,t.isRenderTargetTexture=!1,t}return S()(n,[{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=vt()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,a=i.length;o<a;o++)i[o].isDataTexture?r.push(jt(i[o].image)):r.push(jt(i[o]))}else r=jt(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e||(t.textures[this.uuid]=n),n}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(this.mapping!==o)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case v:t.x=t.x-Math.floor(t.x);break;case x:t.x=t.x<0?0:1;break;case w:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case v:t.y=t.y-Math.floor(t.y);break;case x:t.y=t.y<0?0:1;break;case w:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(dt);function jt(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?kt.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Bt.DEFAULT_IMAGE=void 0,Bt.DEFAULT_MAPPING=o,Bt.prototype.isTexture=!0;var Ft=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;b()(this,e),this.x=t,this.y=n,this.z=i,this.w=r}return S()(e,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,n,i,r,o=.01,a=.1,s=t.elements,l=s[0],c=s[4],u=s[8],p=s[1],h=s[5],d=s[9],_=s[2],f=s[6],m=s[10];if(Math.abs(c-p)<o&&Math.abs(u-_)<o&&Math.abs(d-f)<o){if(Math.abs(c+p)<a&&Math.abs(u+_)<a&&Math.abs(d+f)<a&&Math.abs(l+h+m-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var y=(l+1)/2,g=(h+1)/2,v=(m+1)/2,b=(c+p)/4,x=(u+_)/4,S=(d+f)/4;return y>g&&y>v?y<o?(n=0,i=.707106781,r=.707106781):(i=b/(n=Math.sqrt(y)),r=x/n):g>v?g<o?(n=.707106781,i=0,r=.707106781):(n=b/(i=Math.sqrt(g)),r=S/i):v<o?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(v)),i=S/r),this.set(n,i,r,e),this}var w=Math.sqrt((f-d)*(f-d)+(u-_)*(u-_)+(p-c)*(p-c));return Math.abs(w)<.001&&(w=1),this.x=(f-d)/w,this.y=(u-_)/w,this.z=(p-c)/w,this.w=Math.acos((l+h+m-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:t,value:C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:return t.next=8,this.w;case 8:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);Ft.prototype.isVector4=!0;var Nt=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b()(this,n),(r=e.call(this)).width=t,r.height=i,r.depth=1,r.scissor=new Ft(0,0,t,i),r.scissorTest=!1,r.viewport=new Ft(0,0,t,i),r.texture=new Bt(void 0,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),r.texture.isRenderTargetTexture=!0,r.texture.image={width:t,height:i,depth:1},r.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,r.texture.internalFormat=void 0!==o.internalFormat?o.internalFormat:null,r.texture.minFilter=void 0!==o.minFilter?o.minFilter:P,r.depthBuffer=void 0===o.depthBuffer||o.depthBuffer,r.stencilBuffer=void 0!==o.stencilBuffer&&o.stencilBuffer,r.depthTexture=void 0!==o.depthTexture?o.depthTexture:null,r}return S()(n,[{key:"setTexture",value:function(t){t.image={width:this.width,height:this.height,depth:this.depth},this.texture=t}},{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.image=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){u()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.texture.image),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(dt);Nt.prototype.isWebGLRenderTarget=!0;var zt=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;b()(this,n);var a=(o=e.call(this,t,i)).texture;o.texture=[];for(var s=0;s<r;s++)o.texture[s]=a.clone();return o}return S()(n,[{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=t,this.texture[i].image.height=e,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}},{key:"copy",value:function(t){this.dispose(),this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this.texture.length=0;for(var e=0,n=t.texture.length;e<n;e++)this.texture[e]=t.texture[e].clone();return this}}]),n}(Nt);zt.prototype.isWebGLMultipleRenderTargets=!0;var Ht=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b()(this,n),(r=e.call(this,t,i,o)).samples=4,r.ignoreDepthForMultisampleCopy=void 0===o.ignoreDepth||o.ignoreDepth,r.useRenderToTexture=void 0!==o.useRenderToTexture&&o.useRenderToTexture,r.useRenderbuffer=!1===r.useRenderToTexture,r}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.samples=t.samples,this.useRenderToTexture=t.useRenderToTexture,this.useRenderbuffer=t.useRenderbuffer,this}}]),n}(Nt);Ht.prototype.isWebGLMultisampleRenderTarget=!0;var Ut=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;b()(this,t),this._x=e,this._y=n,this._z=i,this._w=r}return S()(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),p=s(n/2),h=s(i/2),d=s(r/2);switch(o){case"XYZ":this._x=p*c*u+l*h*d,this._y=l*h*u-p*c*d,this._z=l*c*d+p*h*u,this._w=l*c*u-p*h*d;break;case"YXZ":this._x=p*c*u+l*h*d,this._y=l*h*u-p*c*d,this._z=l*c*d-p*h*u,this._w=l*c*u+p*h*d;break;case"ZXY":this._x=p*c*u-l*h*d,this._y=l*h*u+p*c*d,this._z=l*c*d+p*h*u,this._w=l*c*u-p*h*d;break;case"ZYX":this._x=p*c*u-l*h*d,this._y=l*h*u+p*c*d,this._z=l*c*d-p*h*u,this._w=l*c*u+p*h*d;break;case"YZX":this._x=p*c*u+l*h*d,this._y=l*h*u+p*c*d,this._z=l*c*d-p*h*u,this._w=l*c*u-p*h*d;break;case"XZY":this._x=p*c*u-l*h*d,this._y=l*h*u-p*c*d,this._z=l*c*d+p*h*u,this._w=l*c*u+p*h*d;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],c=e[6],u=e[10],p=n+a+u;if(p>0){var h=.5/Math.sqrt(p+1);this._w=.25/h,this._x=(c-s)*h,this._y=(r-l)*h,this._z=(o-i)*h}else if(n>a&&n>u){var d=2*Math.sqrt(1+n-a-u);this._w=(c-s)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(r+l)/d}else if(a>u){var _=2*Math.sqrt(1+a-n-u);this._w=(r-l)/_,this._x=(i+o)/_,this._y=.25*_,this._z=(s+c)/_}else{var f=2*Math.sqrt(1+u-n-a);this._w=(o-i)/f,this._x=(r+l)/f,this._y=(s+c)/f,this._z=.25*f}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(t){return 2*Math.acos(Math.abs(bt(this.dot(t),-1,1)))}},{key:"rotateTowards",value:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-e;return this._w=l*o+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),u=Math.atan2(c,a),p=Math.sin((1-e)*u)/c,h=Math.sin(e*u)/c;return this._w=o*p+this._w*h,this._x=n*p+this._x*h,this._y=i*p+this._y*h,this._z=r*p+this._z*h,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){this.copy(t).slerp(e,n)}},{key:"random",value:function(){var t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(e*Math.cos(i),n*Math.sin(r),n*Math.cos(r),e*Math.sin(i))}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(t,e,n,i){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,i)}},{key:"slerpFlat",value:function(t,e,n,i,r,o,a){var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],p=r[o+0],h=r[o+1],d=r[o+2],_=r[o+3];if(0===a)return t[e+0]=s,t[e+1]=l,t[e+2]=c,void(t[e+3]=u);if(1===a)return t[e+0]=p,t[e+1]=h,t[e+2]=d,void(t[e+3]=_);if(u!==_||s!==p||l!==h||c!==d){var f=1-a,m=s*p+l*h+c*d+u*_,y=m>=0?1:-1,g=1-m*m;if(g>Number.EPSILON){var v=Math.sqrt(g),b=Math.atan2(v,m*y);f=Math.sin(f*b)/v,a=Math.sin(a*b)/v}var x=a*y;if(s=s*f+p*x,l=l*f+h*x,c=c*f+d*x,u=u*f+_*x,f===1-a){var S=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=S,l*=S,c*=S,u*=S}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,i,r,o){var a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],p=r[o+1],h=r[o+2],d=r[o+3];return t[e]=a*d+c*u+s*h-l*p,t[e+1]=s*d+c*p+l*u-a*h,t[e+2]=l*d+c*h+a*p-s*u,t[e+3]=c*d-a*u-s*p-l*h,t}}]),t}();Ut.prototype.isQuaternion=!0;var Wt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;b()(this,e),this.x=t,this.y=n,this.z=i}return S()(e,[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this.z+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this.z-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Vt.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(Vt.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}},{key:"applyQuaternion",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,p=-r*e-o*n-a*i;return this.x=l*s+p*-r+c*-a-u*-o,this.y=c*s+p*-o+u*-r-l*-a,this.z=u*s+p*-a+l*-o-c*-r,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return Gt.copy(this).projectOnVector(t),this.sub(Gt)}},{key:"reflect",value:function(t){return this.sub(Gt.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(bt(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var t=2*(Math.random()-.5),e=Math.random()*Math.PI*2,n=Math.sqrt(1-Math.pow(t,2));return this.x=n*Math.cos(e),this.y=n*Math.sin(e),this.z=t,this}},{key:t,value:C.a.mark((function t(){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);Wt.prototype.isVector3=!0;var Gt=new Wt,Vt=new Ut,qt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt(-1/0,-1/0,-1/0);b()(this,t),this.min=e,this.max=n}return S()(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],u=t[s+1],p=t[s+2];c<e&&(e=c),u<n&&(n=u),p<i&&(i=p),c>r&&(r=c),u>o&&(o=u),p>a&&(a=p)}return this.min.set(e,n,i),this.max.set(r,o,a),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),u=t.getY(s),p=t.getZ(s);c<e&&(e=c),u<n&&(n=u),p<i&&(i=p),c>r&&(r=c),u>o&&(o=u),p>a&&(a=p)}return this.min.set(e,n,i),this.max.set(r,o,a),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Yt.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(t){return this.makeEmpty(),this.expandByObject(t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Zt.copy(e.boundingBox),Zt.applyMatrix4(t.matrixWorld),this.union(Zt));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,Yt),Yt.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(ne),ie.subVectors(this.max,ne),Jt.subVectors(t.a,ne),Kt.subVectors(t.b,ne),Qt.subVectors(t.c,ne),$t.subVectors(Kt,Jt),te.subVectors(Qt,Kt),ee.subVectors(Jt,Qt);var e=[0,-$t.z,$t.y,0,-te.z,te.y,0,-ee.z,ee.y,$t.z,0,-$t.x,te.z,0,-te.x,ee.z,0,-ee.x,-$t.y,$t.x,0,-te.y,te.x,0,-ee.y,ee.x,0];return!!ae(e,Jt,Kt,Qt,ie)&&(!!ae(e=[1,0,0,0,1,0,0,0,1],Jt,Kt,Qt,ie)&&(re.crossVectors($t,te),ae(e=[re.x,re.y,re.z],Jt,Kt,Qt,ie)))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Yt.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(Yt).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(Xt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Xt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Xt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Xt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Xt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Xt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Xt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Xt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Xt)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();qt.prototype.isBox3=!0;var Xt=[new Wt,new Wt,new Wt,new Wt,new Wt,new Wt,new Wt,new Wt],Yt=new Wt,Zt=new qt,Jt=new Wt,Kt=new Wt,Qt=new Wt,$t=new Wt,te=new Wt,ee=new Wt,ne=new Wt,ie=new Wt,re=new Wt,oe=new Wt;function ae(t,e,n,i,r){for(var o=0,a=t.length-3;o<=a;o+=3){oe.fromArray(t,o);var s=r.x*Math.abs(oe.x)+r.y*Math.abs(oe.y)+r.z*Math.abs(oe.z),l=e.dot(oe),c=n.dot(oe),u=i.dot(oe);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>s)return!1}return!0}var se=new qt,le=new Wt,ce=new Wt,ue=new Wt,pe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;b()(this,t),this.center=e,this.radius=n}return S()(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):se.setFromPoints(t).getCenter(n);for(var i=0,r=0,o=t.length;r<o;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){ue.subVectors(t,this.center);var e=ue.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),i=.5*(n-this.radius);this.center.add(ue.multiplyScalar(i/n)),this.radius+=i}return this}},{key:"union",value:function(t){return!0===this.center.equals(t.center)?ce.set(0,0,1).multiplyScalar(t.radius):ce.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(le.copy(t.center).add(ce)),this.expandByPoint(le.copy(t.center).sub(ce)),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),he=new Wt,de=new Wt,_e=new Wt,fe=new Wt,me=new Wt,ye=new Wt,ge=new Wt,ve=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt(0,0,-1);b()(this,t),this.origin=e,this.direction=n}return S()(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,he)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=he.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(he.copy(this.direction).multiplyScalar(e).add(this.origin),he.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,i){de.copy(t).add(e).multiplyScalar(.5),_e.copy(e).sub(t).normalize(),fe.copy(this.origin).sub(de);var r,o,a,s,l=.5*t.distanceTo(e),c=-this.direction.dot(_e),u=fe.dot(this.direction),p=-fe.dot(_e),h=fe.lengthSq(),d=Math.abs(1-c*c);if(d>0)if(o=c*u-p,s=l*d,(r=c*p-u)>=0)if(o>=-s)if(o<=s){var _=1/d;a=(r*=_)*(r+c*(o*=_)+2*u)+o*(c*r+o+2*p)+h}else o=l,a=-(r=Math.max(0,-(c*o+u)))*r+o*(o+2*p)+h;else o=-l,a=-(r=Math.max(0,-(c*o+u)))*r+o*(o+2*p)+h;else o<=-s?a=-(r=Math.max(0,-(-c*l+u)))*r+(o=r>0?-l:Math.min(Math.max(-l,-p),l))*(o+2*p)+h:o<=s?(r=0,a=(o=Math.min(Math.max(-l,-p),l))*(o+2*p)+h):a=-(r=Math.max(0,-(c*l+u)))*r+(o=r>0?l:Math.min(Math.max(-l,-p),l))*(o+2*p)+h;else o=c>0?-l:l,a=-(r=Math.max(0,-(c*o+u)))*r+o*(o+2*p)+h;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(_e).multiplyScalar(o).add(de),a}},{key:"intersectSphere",value:function(t,e){he.subVectors(t.center,this.origin);var n=he.dot(this.direction),i=he.dot(he)-n*n,r=t.radius*t.radius;if(i>r)return null;var o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n,i,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,p=this.origin;return l>=0?(n=(t.min.x-p.x)*l,i=(t.max.x-p.x)*l):(n=(t.max.x-p.x)*l,i=(t.min.x-p.x)*l),c>=0?(r=(t.min.y-p.y)*c,o=(t.max.y-p.y)*c):(r=(t.max.y-p.y)*c,o=(t.min.y-p.y)*c),n>o||r>i?null:((r>n||n!=n)&&(n=r),(o<i||i!=i)&&(i=o),u>=0?(a=(t.min.z-p.z)*u,s=(t.max.z-p.z)*u):(a=(t.max.z-p.z)*u,s=(t.min.z-p.z)*u),n>s||a>i?null:((a>n||n!=n)&&(n=a),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,he)}},{key:"intersectTriangle",value:function(t,e,n,i,r){me.subVectors(e,t),ye.subVectors(n,t),ge.crossVectors(me,ye);var o,a=this.direction.dot(ge);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}fe.subVectors(this.origin,t);var s=o*this.direction.dot(ye.crossVectors(fe,ye));if(s<0)return null;var l=o*this.direction.dot(me.cross(fe));if(l<0)return null;if(s+l>a)return null;var c=-o*fe.dot(ge);return c<0?null:this.at(c/a,r)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),be=function(){function t(){b()(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return S()(t,[{key:"set",value:function(t,e,n,i,r,o,a,s,l,c,u,p,h,d,_,f){var m=this.elements;return m[0]=t,m[4]=e,m[8]=n,m[12]=i,m[1]=r,m[5]=o,m[9]=a,m[13]=s,m[2]=l,m[6]=c,m[10]=u,m[14]=p,m[3]=h,m[7]=d,m[11]=_,m[15]=f,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,i=1/xe.setFromMatrixColumn(t,0).length(),r=1/xe.setFromMatrixColumn(t,1).length(),o=1/xe.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var p=o*c,h=o*u,d=a*c,_=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=h+d*l,e[5]=p-_*l,e[9]=-a*s,e[2]=_-p*l,e[6]=d+h*l,e[10]=o*s}else if("YXZ"===t.order){var f=s*c,m=s*u,y=l*c,g=l*u;e[0]=f+g*a,e[4]=y*a-m,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=m*a-y,e[6]=g+f*a,e[10]=o*s}else if("ZXY"===t.order){var v=s*c,b=s*u,x=l*c,S=l*u;e[0]=v-S*a,e[4]=-o*u,e[8]=x+b*a,e[1]=b+x*a,e[5]=o*c,e[9]=S-v*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){var w=o*c,M=o*u,T=a*c,C=a*u;e[0]=s*c,e[4]=T*l-M,e[8]=w*l+C,e[1]=s*u,e[5]=C*l+w,e[9]=M*l-T,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var E=o*s,A=o*l,R=a*s,L=a*l;e[0]=s*c,e[4]=L-E*u,e[8]=R*u+A,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=A*u+R,e[10]=E-L*u}else if("XZY"===t.order){var P=o*s,D=o*l,I=a*s,k=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=P*u+k,e[5]=o*c,e[9]=D*u-I,e[2]=I*u-D,e[6]=a*c,e[10]=k*u+P}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(t){return this.compose(we,t,Me)}},{key:"lookAt",value:function(t,e,n){var i=this.elements;return Ee.subVectors(t,e),0===Ee.lengthSq()&&(Ee.z=1),Ee.normalize(),Te.crossVectors(n,Ee),0===Te.lengthSq()&&(1===Math.abs(n.z)?Ee.x+=1e-4:Ee.z+=1e-4,Ee.normalize(),Te.crossVectors(n,Ee)),Te.normalize(),Ce.crossVectors(Ee,Te),i[0]=Te.x,i[4]=Ce.x,i[8]=Ee.x,i[1]=Te.y,i[5]=Ce.y,i[9]=Ee.y,i[2]=Te.z,i[6]=Ce.z,i[10]=Ee.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],p=n[9],h=n[13],d=n[2],_=n[6],f=n[10],m=n[14],y=n[3],g=n[7],v=n[11],b=n[15],x=i[0],S=i[4],w=i[8],M=i[12],T=i[1],C=i[5],E=i[9],A=i[13],R=i[2],L=i[6],P=i[10],D=i[14],I=i[3],k=i[7],O=i[11],B=i[15];return r[0]=o*x+a*T+s*R+l*I,r[4]=o*S+a*C+s*L+l*k,r[8]=o*w+a*E+s*P+l*O,r[12]=o*M+a*A+s*D+l*B,r[1]=c*x+u*T+p*R+h*I,r[5]=c*S+u*C+p*L+h*k,r[9]=c*w+u*E+p*P+h*O,r[13]=c*M+u*A+p*D+h*B,r[2]=d*x+_*T+f*R+m*I,r[6]=d*S+_*C+f*L+m*k,r[10]=d*w+_*E+f*P+m*O,r[14]=d*M+_*A+f*D+m*B,r[3]=y*x+g*T+v*R+b*I,r[7]=y*S+g*C+v*L+b*k,r[11]=y*w+g*E+v*P+b*O,r[15]=y*M+g*A+v*D+b*B,this}},{key:"multiplyScalar",value:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],p=t[10],h=t[14];return t[3]*(+r*s*u-i*l*u-r*a*p+n*l*p+i*a*h-n*s*h)+t[7]*(+e*s*h-e*l*p+r*o*p-i*o*h+i*l*c-r*s*c)+t[11]*(+e*l*u-e*a*h-r*o*u+n*o*h+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*u+e*a*p+i*o*u-n*o*p+n*s*c)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],p=t[10],h=t[11],d=t[12],_=t[13],f=t[14],m=t[15],y=u*f*l-_*p*l+_*s*h-a*f*h-u*s*m+a*p*m,g=d*p*l-c*f*l-d*s*h+o*f*h+c*s*m-o*p*m,v=c*_*l-d*u*l+d*a*h-o*_*h-c*a*m+o*u*m,b=d*u*s-c*_*s-d*a*p+o*_*p+c*a*f-o*u*f,x=e*y+n*g+i*v+r*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var S=1/x;return t[0]=y*S,t[1]=(_*p*r-u*f*r-_*i*h+n*f*h+u*i*m-n*p*m)*S,t[2]=(a*f*r-_*s*r+_*i*l-n*f*l-a*i*m+n*s*m)*S,t[3]=(u*s*r-a*p*r-u*i*l+n*p*l+a*i*h-n*s*h)*S,t[4]=g*S,t[5]=(c*f*r-d*p*r+d*i*h-e*f*h-c*i*m+e*p*m)*S,t[6]=(d*s*r-o*f*r-d*i*l+e*f*l+o*i*m-e*s*m)*S,t[7]=(o*p*r-c*s*r+c*i*l-e*p*l-o*i*h+e*s*h)*S,t[8]=v*S,t[9]=(d*u*r-c*_*r-d*n*h+e*_*h+c*n*m-e*u*m)*S,t[10]=(o*_*r-d*a*r+d*n*l-e*_*l-o*n*m+e*a*m)*S,t[11]=(c*a*r-o*u*r-c*n*l+e*u*l+o*n*h-e*a*h)*S,t[12]=b*S,t[13]=(c*_*i-d*u*i+d*n*p-e*_*p-c*n*f+e*u*f)*S,t[14]=(d*a*i-o*_*i-d*n*s+e*_*s+o*n*f-e*a*f)*S,t[15]=(o*u*i-c*a*i+c*n*s-e*u*s-o*n*p+e*a*p)*S,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}},{key:"makeTranslation",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n,i,r,o){return this.set(1,n,r,0,t,1,o,0,e,i,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,p=r*l,h=r*c,d=r*u,_=o*c,f=o*u,m=a*u,y=s*l,g=s*c,v=s*u,b=n.x,x=n.y,S=n.z;return i[0]=(1-(_+m))*b,i[1]=(h+v)*b,i[2]=(d-g)*b,i[3]=0,i[4]=(h-v)*x,i[5]=(1-(p+m))*x,i[6]=(f+y)*x,i[7]=0,i[8]=(d+g)*S,i[9]=(f-y)*S,i[10]=(1-(p+_))*S,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}},{key:"decompose",value:function(t,e,n){var i=this.elements,r=xe.set(i[0],i[1],i[2]).length(),o=xe.set(i[4],i[5],i[6]).length(),a=xe.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Se.copy(this);var s=1/r,l=1/o,c=1/a;return Se.elements[0]*=s,Se.elements[1]*=s,Se.elements[2]*=s,Se.elements[4]*=l,Se.elements[5]*=l,Se.elements[6]*=l,Se.elements[8]*=c,Se.elements[9]*=c,Se.elements[10]*=c,e.setFromRotationMatrix(Se),n.x=r,n.y=o,n.z=a,this}},{key:"makePerspective",value:function(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),p=-(o+r)/(o-r),h=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,p=(n+i)*l,h=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();be.prototype.isMatrix4=!0;var xe=new Wt,Se=new be,we=new Wt(0,0,0),Me=new Wt(1,1,1),Te=new Wt,Ce=new Wt,Ee=new Wt,Ae=new be,Re=new Ut,Le=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;b()(this,t),this._x=e,this._y=n,this._z=i,this._order=r}return S()(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=i,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.elements,r=i[0],o=i[4],a=i[8],s=i[1],l=i[5],c=i[9],u=i[2],p=i[6],h=i[10];switch(e){case"XYZ":this._y=Math.asin(bt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,h),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(p,l),this._z=0);break;case"YXZ":this._x=Math.asin(-bt(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,h),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(bt(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-u,h),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,r));break;case"ZYX":this._y=Math.asin(-bt(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(p,h),this._z=Math.atan2(s,r)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(bt(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,h));break;case"XZY":this._z=Math.asin(-bt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,h),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,n){return Ae.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ae,e,n)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return Re.setFromEuler(this),this.setFromQuaternion(Re,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new Wt(this._x,this._y,this._z)}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}]),t}();Le.prototype.isEuler=!0,Le.DefaultOrder="XYZ",Le.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Pe=function(){function t(){b()(this,t),this.mask=1}return S()(t,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),t}(),De=0,Ie=new Wt,ke=new Ut,Oe=new be,Be=new Wt,je=new Wt,Fe=new Wt,Ne=new Ut,ze=new Wt(1,0,0),He=new Wt(0,1,0),Ue=new Wt(0,0,1),We={type:"added"},Ge={type:"removed"},Ve=function(t){_()(n,t);var e=L(n);function n(){var t;b()(this,n),t=e.call(this),Object.defineProperty(h()(t),"id",{value:De++}),t.uuid=vt(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var i=new Wt,r=new Le,o=new Ut,a=new Wt(1,1,1);return r._onChange((function(){o.setFromEuler(r,!1)})),o._onChange((function(){r.setFromQuaternion(o,void 0,!1)})),Object.defineProperties(h()(t),{position:{configurable:!0,enumerable:!0,value:i},rotation:{configurable:!0,enumerable:!0,value:r},quaternion:{configurable:!0,enumerable:!0,value:o},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new be},normalMatrix:{value:new At}}),t.matrix=new be,t.matrixWorld=new be,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.layers=new Pe,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return S()(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(t){return this.quaternion.premultiply(t),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(t){this.quaternion.copy(t)}},{key:"rotateOnAxis",value:function(t,e){return ke.setFromAxisAngle(t,e),this.quaternion.multiply(ke),this}},{key:"rotateOnWorldAxis",value:function(t,e){return ke.setFromAxisAngle(t,e),this.quaternion.premultiply(ke),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(ze,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(He,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(Ue,t)}},{key:"translateOnAxis",value:function(t,e){return Ie.copy(t).applyQuaternion(this.quaternion),this.position.add(Ie.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(ze,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(He,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(Ue,t)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4(Oe.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?Be.copy(t):Be.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),je.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Oe.lookAt(je,Be,this.up):Oe.lookAt(Be,je,this.up),this.quaternion.setFromRotationMatrix(Oe),i&&(Oe.extractRotation(i.matrixWorld),ke.setFromRotationMatrix(Oe),this.quaternion.premultiply(ke.invert()))}},{key:"add",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(We)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}},{key:"remove",value:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Ge)),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++){var e=this.children[t];e.parent=null,e.dispatchEvent(Ge)}return this.children.length=0,this}},{key:"attach",value:function(t){return this.updateWorldMatrix(!0,!1),Oe.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Oe.multiply(t.parent.matrixWorld)),t.applyMatrix4(Oe),this.add(t),t.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(je,t,Fe),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(je,Ne,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];r(t.shapes,c)}else r(t.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var u=[],p=0,h=this.material.length;p<h;p++)u.push(r(t.materials,this.material[p]));i.material=u}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(var d=0;d<this.children.length;d++)i.children.push(this.children[d].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(var _=0;_<this.animations.length;_++){var f=this.animations[_];i.animations.push(r(t.animations,f))}}if(e){var m=w(t.geometries),y=w(t.materials),g=w(t.textures),v=w(t.images),b=w(t.shapes),x=w(t.skeletons),S=w(t.animations);m.length>0&&(n.geometries=m),y.length>0&&(n.materials=y),g.length>0&&(n.textures=g),v.length>0&&(n.images=v),b.length>0&&(n.shapes=b),x.length>0&&(n.skeletons=x),S.length>0&&(n.animations=S)}return n.object=i,n;function w(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}]),n}(dt);Ve.DefaultUp=new Wt(0,1,0),Ve.DefaultMatrixAutoUpdate=!0,Ve.prototype.isObject3D=!0;var qe=new Wt,Xe=new Wt,Ye=new Wt,Ze=new Wt,Je=new Wt,Ke=new Wt,Qe=new Wt,$e=new Wt,tn=new Wt,en=new Wt,nn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wt;b()(this,t),this.a=e,this.b=n,this.c=i}return S()(t,[{key:"set",value:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}},{key:"setFromAttributeAndIndices",value:function(t,e,n,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,i),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return qe.subVectors(this.c,this.b),Xe.subVectors(this.a,this.b),.5*qe.cross(Xe).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,i,r,o){return t.getUV(e,this.a,this.b,this.c,n,i,r,o)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(t,e){var n,i,r=this.a,o=this.b,a=this.c;Je.subVectors(o,r),Ke.subVectors(a,r),$e.subVectors(t,r);var s=Je.dot($e),l=Ke.dot($e);if(s<=0&&l<=0)return e.copy(r);tn.subVectors(t,o);var c=Je.dot(tn),u=Ke.dot(tn);if(c>=0&&u<=c)return e.copy(o);var p=s*u-c*l;if(p<=0&&s>=0&&c<=0)return n=s/(s-c),e.copy(r).addScaledVector(Je,n);en.subVectors(t,a);var h=Je.dot(en),d=Ke.dot(en);if(d>=0&&h<=d)return e.copy(a);var _=h*l-s*d;if(_<=0&&l>=0&&d<=0)return i=l/(l-d),e.copy(r).addScaledVector(Ke,i);var f=c*d-h*u;if(f<=0&&u-c>=0&&h-d>=0)return Qe.subVectors(a,o),i=(u-c)/(u-c+(h-d)),e.copy(o).addScaledVector(Qe,i);var m=1/(f+_+p);return n=_*m,i=p*m,e.copy(r).addScaledVector(Je,n).addScaledVector(Ke,i)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(t,e,n,i){i.subVectors(n,e),qe.subVectors(t,e),i.cross(qe);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}},{key:"getBarycoord",value:function(t,e,n,i,r){qe.subVectors(i,e),Xe.subVectors(n,e),Ye.subVectors(t,e);var o=qe.dot(qe),a=qe.dot(Xe),s=qe.dot(Ye),l=Xe.dot(Xe),c=Xe.dot(Ye),u=o*l-a*a;if(0===u)return r.set(-2,-1,-1);var p=1/u,h=(l*s-a*c)*p,d=(o*c-a*s)*p;return r.set(1-h-d,d,h)}},{key:"containsPoint",value:function(t,e,n,i){return this.getBarycoord(t,e,n,i,Ze),Ze.x>=0&&Ze.y>=0&&Ze.x+Ze.y<=1}},{key:"getUV",value:function(t,e,n,i,r,o,a,s){return this.getBarycoord(t,e,n,i,Ze),s.set(0,0),s.addScaledVector(r,Ze.x),s.addScaledVector(o,Ze.y),s.addScaledVector(a,Ze.z),s}},{key:"isFrontFacing",value:function(t,e,n,i){return qe.subVectors(n,e),Xe.subVectors(t,e),qe.cross(Xe).dot(i)<0}}]),t}(),rn=0,on=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),t=e.call(this),Object.defineProperty(h()(t),"id",{value:rn++}),t.uuid=vt(),t.name="",t.type="Material",t.fog=!0,t.blending=1,t.side=0,t.vertexColors=!1,t.opacity=1,t.format=H,t.transparent=!1,t.blendSrc=204,t.blendDst=205,t.blendEquation=i,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=3,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=519,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=ct,t.stencilZFail=ct,t.stencilZPass=ct,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return S()(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}}},{key:"toJSON",value:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==H&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),o=i(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.format=t.format,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(dt);on.prototype.isMaterial=!0;var an={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},sn={h:0,s:0,l:0},ln={h:0,s:0,l:0};function cn(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function un(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function pn(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var hn=function(){function t(e,n,i){return b()(this,t),void 0===n&&void 0===i?this.set(e):this.setRGB(e,n,i)}return S()(t,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,e,n){return this.r=t,this.g=e,this.b=n,this}},{key:"setHSL",value:function(t,e,n){if(t=xt(t,1),e=bt(e,0,1),n=bt(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=cn(r,i,t+1/3),this.g=cn(r,i,t),this.b=cn(r,i,t-1/3)}return this}},{key:"setStyle",value:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[4]),this;if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[4]),this;break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[4]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){var c=n[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}},{key:"setColorName",value:function(t){var e=an[t.toLowerCase()];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=un(t.r),this.g=un(t.g),this.b=un(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=pn(t.r),this.g=pn(t.g),this.b=pn(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),l=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=l<=.5?c/(a+s):c/(2-a-s),a){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=l,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,e,n){return this.getHSL(sn),sn.h+=t,sn.s+=e,sn.l+=n,this.setHSL(sn.h,sn.s,sn.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(t){return this.r+=t,this.g+=t,this.b+=t,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(t){return this.r*=t,this.g*=t,this.b*=t,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(sn),t.getHSL(ln);var n=St(sn.h,ln.h,e),i=St(sn.s,ln.s,e),r=St(sn.l,ln.l,e);return this.setHSL(n,i,r),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),t}();hn.NAMES=an,hn.prototype.isColor=!0,hn.prototype.r=1,hn.prototype.g=1,hn.prototype.b=1;var dn=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="MeshBasicMaterial",i.color=new hn(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=0,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),n}(on);dn.prototype.isMeshBasicMaterial=!0;var _n=new Wt,fn=new Et,mn=function(){function t(e,n,i){if(b()(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===i,this.usage=ut,this.updateRange={offset:0,count:-1},this.version=0}return S()(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"copyColorsArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new hn),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this}},{key:"copyVector2sArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new Et),e[n++]=o.x,e[n++]=o.y}return this}},{key:"copyVector3sArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Wt),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this}},{key:"copyVector4sArray",value:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new Ft),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)fn.fromBufferAttribute(this,e),fn.applyMatrix3(t),this.setXY(e,fn.x,fn.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)_n.fromBufferAttribute(this,i),_n.applyMatrix3(t),this.setXYZ(i,_n.x,_n.y,_n.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.count;e<n;e++)_n.x=this.getX(e),_n.y=this.getY(e),_n.z=this.getZ(e),_n.applyMatrix4(t),this.setXYZ(e,_n.x,_n.y,_n.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)_n.x=this.getX(e),_n.y=this.getY(e),_n.z=this.getZ(e),_n.applyNormalMatrix(t),this.setXYZ(e,_n.x,_n.y,_n.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)_n.x=this.getX(e),_n.y=this.getY(e),_n.z=this.getZ(e),_n.transformDirection(t),this.setXYZ(e,_n.x,_n.y,_n.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getX",value:function(t){return this.array[t*this.itemSize]}},{key:"setX",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){return this.array[t*this.itemSize+1]}},{key:"setY",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){return this.array[t*this.itemSize+2]}},{key:"setZ",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){return this.array[t*this.itemSize+3]}},{key:"setW",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this}},{key:"setXYZW",value:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),this.usage!==ut&&(t.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(t.updateRange=this.updateRange),t}}]),t}();mn.prototype.isBufferAttribute=!0;var yn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Int8Array(t),i,r)}return S()(n)}(mn),gn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Uint8Array(t),i,r)}return S()(n)}(mn),vn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Uint8ClampedArray(t),i,r)}return S()(n)}(mn),bn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Int16Array(t),i,r)}return S()(n)}(mn),xn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Uint16Array(t),i,r)}return S()(n)}(mn),Sn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Int32Array(t),i,r)}return S()(n)}(mn),wn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Uint32Array(t),i,r)}return S()(n)}(mn),Mn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Uint16Array(t),i,r)}return S()(n)}(mn);Mn.prototype.isFloat16BufferAttribute=!0;var Tn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Float32Array(t),i,r)}return S()(n)}(mn),Cn=function(t){_()(n,t);var e=L(n);function n(t,i,r){return b()(this,n),e.call(this,new Float64Array(t),i,r)}return S()(n)}(mn),En=0,An=new be,Rn=new Ve,Ln=new Wt,Pn=new qt,Dn=new qt,In=new Wt,kn=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),t=e.call(this),Object.defineProperty(h()(t),"id",{value:En++}),t.uuid=vt(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return S()(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(Rt(t)>65535?wn:xn)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new At).getNormalMatrix(t);n.applyNormalMatrix(i),n.needsUpdate=!0}var r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(t){return An.makeRotationFromQuaternion(t),this.applyMatrix4(An),this}},{key:"rotateX",value:function(t){return An.makeRotationX(t),this.applyMatrix4(An),this}},{key:"rotateY",value:function(t){return An.makeRotationY(t),this.applyMatrix4(An),this}},{key:"rotateZ",value:function(t){return An.makeRotationZ(t),this.applyMatrix4(An),this}},{key:"translate",value:function(t,e,n){return An.makeTranslation(t,e,n),this.applyMatrix4(An),this}},{key:"scale",value:function(t,e,n){return An.makeScale(t,e,n),this.applyMatrix4(An),this}},{key:"lookAt",value:function(t){return Rn.lookAt(t),Rn.updateMatrix(),this.applyMatrix4(Rn.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ln).negate(),this.translate(Ln.x,Ln.y,Ln.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Tn(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new qt);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Wt(-1/0,-1/0,-1/0),new Wt(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];Pn.setFromBufferAttribute(r),this.morphTargetsRelative?(In.addVectors(this.boundingBox.min,Pn.min),this.boundingBox.expandByPoint(In),In.addVectors(this.boundingBox.max,Pn.max),this.boundingBox.expandByPoint(In)):(this.boundingBox.expandByPoint(Pn.min),this.boundingBox.expandByPoint(Pn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new pe);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Wt,1/0);if(t){var n=this.boundingSphere.center;if(Pn.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var o=e[i];Dn.setFromBufferAttribute(o),this.morphTargetsRelative?(In.addVectors(Pn.min,Dn.min),Pn.expandByPoint(In),In.addVectors(Pn.max,Dn.max),Pn.expandByPoint(In)):(Pn.expandByPoint(Dn.min),Pn.expandByPoint(Dn.max))}Pn.getCenter(n);for(var a=0,s=0,l=t.count;s<l;s++)In.fromBufferAttribute(t,s),a=Math.max(a,n.distanceToSquared(In));if(e)for(var c=0,u=e.length;c<u;c++)for(var p=e[c],h=this.morphTargetsRelative,d=0,_=p.count;d<_;d++)In.fromBufferAttribute(p,d),h&&(Ln.fromBufferAttribute(t,d),In.add(Ln)),a=Math.max(a,n.distanceToSquared(In));this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array,i=e.position.array,r=e.normal.array,o=e.uv.array,a=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new mn(new Float32Array(4*a),4));for(var s=e.tangent.array,l=[],c=[],u=0;u<a;u++)l[u]=new Wt,c[u]=new Wt;var p=new Wt,h=new Wt,d=new Wt,_=new Et,f=new Et,m=new Et,y=new Wt,g=new Wt,v=this.groups;0===v.length&&(v=[{start:0,count:n.length}]);for(var b=0,x=v.length;b<x;++b)for(var S=v[b],w=S.start,M=w,T=w+S.count;M<T;M+=3)B(n[M+0],n[M+1],n[M+2]);for(var C=new Wt,E=new Wt,A=new Wt,R=new Wt,L=0,P=v.length;L<P;++L)for(var D=v[L],I=D.start,k=I,O=I+D.count;k<O;k+=3)j(n[k+0]),j(n[k+1]),j(n[k+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function B(t,e,n){p.fromArray(i,3*t),h.fromArray(i,3*e),d.fromArray(i,3*n),_.fromArray(o,2*t),f.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(p),d.sub(p),f.sub(_),m.sub(_);var r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(y.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),g.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[t].add(y),l[e].add(y),l[n].add(y),c[t].add(g),c[e].add(g),c[n].add(g))}function j(t){A.fromArray(r,3*t),R.copy(A);var e=l[t];C.copy(e),C.sub(A.multiplyScalar(A.dot(e))).normalize(),E.crossVectors(R,e);var n=E.dot(c[t])<0?-1:1;s[4*t]=C.x,s[4*t+1]=C.y,s[4*t+2]=C.z,s[4*t+3]=n}}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new mn(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var o=new Wt,a=new Wt,s=new Wt,l=new Wt,c=new Wt,u=new Wt,p=new Wt,h=new Wt;if(t)for(var d=0,_=t.count;d<_;d+=3){var f=t.getX(d+0),m=t.getX(d+1),y=t.getX(d+2);o.fromBufferAttribute(e,f),a.fromBufferAttribute(e,m),s.fromBufferAttribute(e,y),p.subVectors(s,a),h.subVectors(o,a),p.cross(h),l.fromBufferAttribute(n,f),c.fromBufferAttribute(n,m),u.fromBufferAttribute(n,y),l.add(p),c.add(p),u.add(p),n.setXYZ(f,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z),n.setXYZ(y,u.x,u.y,u.z)}else for(var g=0,v=e.count;g<v;g+=3)o.fromBufferAttribute(e,g+0),a.fromBufferAttribute(e,g+1),s.fromBufferAttribute(e,g+2),p.subVectors(s,a),h.subVectors(o,a),p.cross(h),n.setXYZ(g+0,p.x,p.y,p.z),n.setXYZ(g+1,p.x,p.y,p.z),n.setXYZ(g+2,p.x,p.y,p.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,o=t.attributes[i],a=o.array,s=o.itemSize*e,l=Math.min(a.length,r.length-s),c=0,u=s;c<l;c++,u++)r[u]=a[c];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)In.fromBufferAttribute(t,e),In.normalize(),t.setXYZ(e,In.x,In.y,In.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,o=new n.constructor(e.length*i),a=0,s=0,l=0,c=e.length;l<c;l++){a=t.isInterleavedBufferAttribute?e[l]*t.data.stride+t.offset:e[l]*i;for(var u=0;u<i;u++)o[s++]=n[a++]}return new mn(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new n,i=this.index.array,r=this.attributes;for(var o in r){var a=t(r[o],i);e.setAttribute(o,a)}var s=this.morphAttributes;for(var l in s){for(var c=[],u=s[l],p=0,h=u.length;p<h;p++){var d=t(u[p],i);c.push(d)}e.morphAttributes[l]=c}e.morphTargetsRelative=this.morphTargetsRelative;for(var _=this.groups,f=0,m=_.length;f<m;f++){var y=_[f];e.addGroup(y.start,y.count,y.materialIndex)}return e}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var o in r){var a=r[o];t.data.attributes[o]=a.toJSON(t.data)}var s={},l=!1;for(var c in this.morphAttributes){for(var u=this.morphAttributes[c],p=[],h=0,d=u.length;h<d;h++){var _=u[h];p.push(_.toJSON(t.data))}p.length>0&&(s[c]=p,l=!0)}l&&(t.data.morphAttributes=s,t.data.morphTargetsRelative=this.morphTargetsRelative);var f=this.groups;f.length>0&&(t.data.groups=JSON.parse(JSON.stringify(f)));var m=this.boundingSphere;return null!==m&&(t.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),t}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i){var o=i[r];this.setAttribute(r,o.clone(e))}var a=t.morphAttributes;for(var s in a){for(var l=[],c=a[s],u=0,p=c.length;u<p;u++)l.push(c[u].clone(e));this.morphAttributes[s]=l}this.morphTargetsRelative=t.morphTargetsRelative;for(var h=t.groups,d=0,_=h.length;d<_;d++){var f=h[d];this.addGroup(f.start,f.count,f.materialIndex)}var m=t.boundingBox;null!==m&&(this.boundingBox=m.clone());var y=t.boundingSphere;return null!==y&&(this.boundingSphere=y.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,void 0!==t.parameters&&(this.parameters=Object.assign({},t.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(dt);kn.prototype.isBufferGeometry=!0;var On=new be,Bn=new ve,jn=new pe,Fn=new Wt,Nn=new Wt,zn=new Wt,Hn=new Wt,Un=new Wt,Wn=new Wt,Gn=new Wt,Vn=new Wt,qn=new Wt,Xn=new Et,Yn=new Et,Zn=new Et,Jn=new Wt,Kn=new Wt,Qn=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kn,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new dn;return b()(this,n),(t=e.call(this)).type="Mesh",t.geometry=i,t.material=r,t.updateMorphTargets(),t}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=i.length;r<o;r++){var a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(t,e){var n,i=this.geometry,r=this.material,o=this.matrixWorld;if(void 0!==r&&(null===i.boundingSphere&&i.computeBoundingSphere(),jn.copy(i.boundingSphere),jn.applyMatrix4(o),!1!==t.ray.intersectsSphere(jn)&&(On.copy(o).invert(),Bn.copy(t.ray).applyMatrix4(On),null===i.boundingBox||!1!==Bn.intersectsBox(i.boundingBox))))if(i.isBufferGeometry){var a=i.index,s=i.attributes.position,l=i.morphAttributes.position,c=i.morphTargetsRelative,u=i.attributes.uv,p=i.attributes.uv2,h=i.groups,d=i.drawRange;if(null!==a)if(Array.isArray(r))for(var _=0,f=h.length;_<f;_++)for(var m=h[_],y=r[m.materialIndex],g=Math.max(m.start,d.start),v=Math.min(a.count,Math.min(m.start+m.count,d.start+d.count));g<v;g+=3){var b=a.getX(g),x=a.getX(g+1),S=a.getX(g+2);(n=$n(this,y,t,Bn,s,l,c,u,p,b,x,S))&&(n.faceIndex=Math.floor(g/3),n.face.materialIndex=m.materialIndex,e.push(n))}else for(var w=Math.max(0,d.start),M=Math.min(a.count,d.start+d.count);w<M;w+=3){var T=a.getX(w),C=a.getX(w+1),E=a.getX(w+2);(n=$n(this,r,t,Bn,s,l,c,u,p,T,C,E))&&(n.faceIndex=Math.floor(w/3),e.push(n))}else if(void 0!==s)if(Array.isArray(r))for(var A=0,R=h.length;A<R;A++)for(var L=h[A],P=r[L.materialIndex],D=Math.max(L.start,d.start),I=Math.min(s.count,Math.min(L.start+L.count,d.start+d.count));D<I;D+=3)(n=$n(this,P,t,Bn,s,l,c,u,p,D,D+1,D+2))&&(n.faceIndex=Math.floor(D/3),n.face.materialIndex=L.materialIndex,e.push(n));else for(var k=Math.max(0,d.start),O=Math.min(s.count,d.start+d.count);k<O;k+=3)(n=$n(this,r,t,Bn,s,l,c,u,p,k,k+1,k+2))&&(n.faceIndex=Math.floor(k/3),e.push(n))}else i.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(Ve);function $n(t,e,n,i,r,o,a,s,l,c,u,p){Fn.fromBufferAttribute(r,c),Nn.fromBufferAttribute(r,u),zn.fromBufferAttribute(r,p);var h=t.morphTargetInfluences;if(o&&h){Gn.set(0,0,0),Vn.set(0,0,0),qn.set(0,0,0);for(var d=0,_=o.length;d<_;d++){var f=h[d],m=o[d];0!==f&&(Hn.fromBufferAttribute(m,c),Un.fromBufferAttribute(m,u),Wn.fromBufferAttribute(m,p),a?(Gn.addScaledVector(Hn,f),Vn.addScaledVector(Un,f),qn.addScaledVector(Wn,f)):(Gn.addScaledVector(Hn.sub(Fn),f),Vn.addScaledVector(Un.sub(Nn),f),qn.addScaledVector(Wn.sub(zn),f)))}Fn.add(Gn),Nn.add(Vn),zn.add(qn)}t.isSkinnedMesh&&(t.boneTransform(c,Fn),t.boneTransform(u,Nn),t.boneTransform(p,zn));var y=function(t,e,n,i,r,o,a,s){if(null===(1===e.side?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,2!==e.side,s)))return null;Kn.copy(s),Kn.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(Kn);return l<n.near||l>n.far?null:{distance:l,point:Kn.clone(),object:t}}(t,e,n,i,Fn,Nn,zn,Jn);if(y){s&&(Xn.fromBufferAttribute(s,c),Yn.fromBufferAttribute(s,u),Zn.fromBufferAttribute(s,p),y.uv=nn.getUV(Jn,Fn,Nn,zn,Xn,Yn,Zn,new Et)),l&&(Xn.fromBufferAttribute(l,c),Yn.fromBufferAttribute(l,u),Zn.fromBufferAttribute(l,p),y.uv2=nn.getUV(Jn,Fn,Nn,zn,Xn,Yn,Zn,new Et));var g={a:c,b:u,c:p,normal:new Wt,materialIndex:0};nn.getNormal(Fn,Nn,zn,g.normal),y.face=g}return y}Qn.prototype.isMesh=!0;var ti=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;b()(this,n),(t=e.call(this)).type="BoxGeometry",t.parameters={width:i,height:r,depth:o,widthSegments:a,heightSegments:s,depthSegments:l};var c=h()(t);a=Math.floor(a),s=Math.floor(s),l=Math.floor(l);var u=[],p=[],d=[],_=[],f=0,m=0;function y(t,e,n,i,r,o,a,s,l,h,y){for(var g=o/l,v=a/h,b=o/2,x=a/2,S=s/2,w=l+1,M=h+1,T=0,C=0,E=new Wt,A=0;A<M;A++)for(var R=A*v-x,L=0;L<w;L++){var P=L*g-b;E[t]=P*i,E[e]=R*r,E[n]=S,p.push(E.x,E.y,E.z),E[t]=0,E[e]=0,E[n]=s>0?1:-1,d.push(E.x,E.y,E.z),_.push(L/l),_.push(1-A/h),T+=1}for(var D=0;D<h;D++)for(var I=0;I<l;I++){var k=f+I+w*D,O=f+I+w*(D+1),B=f+(I+1)+w*(D+1),j=f+(I+1)+w*D;u.push(k,O,j),u.push(O,B,j),C+=6}c.addGroup(m,C,y),m+=C,f+=T}return y("z","y","x",-1,-1,o,r,i,l,s,0),y("z","y","x",1,-1,o,r,-i,l,s,1),y("x","z","y",1,1,i,o,r,a,l,2),y("x","z","y",1,-1,i,o,-r,a,l,3),y("x","y","z",1,-1,i,r,o,a,s,4),y("x","y","z",-1,-1,i,r,-o,a,s,5),t.setIndex(u),t.setAttribute("position",new Tn(p,3)),t.setAttribute("normal",new Tn(d,3)),t.setAttribute("uv",new Tn(_,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}]),n}(kn);function ei(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function ni(t){for(var e={},n=0;n<t.length;n++){var i=ei(t[n]);for(var r in i)e[r]=i[r]}return e}var ii={clone:ei,merge:ni},ri=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="ShaderMaterial",i.defines={},i.uniforms={},i.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",i.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",i.linewidth=1,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.lights=!1,i.clipping=!1,i.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},i.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},i.index0AttributeName=void 0,i.uniformsNeedUpdate=!1,i.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),i.setValues(t)),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ei(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);for(var i in e.glslVersion=this.glslVersion,e.uniforms={},this.uniforms){var r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e}}]),n}(on);ri.prototype.isShaderMaterial=!0;var oi=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="Camera",t.matrixWorldInverse=new be,t.projectionMatrix=new be,t.projectionMatrixInverse=new be,t}return S()(n,[{key:"copy",value:function(t,e){return l()(g()(n.prototype),"copy",this).call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:"updateMatrixWorld",value:function(t){l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,e){l()(g()(n.prototype),"updateWorldMatrix",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(Ve);oi.prototype.isCamera=!0;var ai=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return b()(this,n),(t=e.call(this)).type="PerspectiveCamera",t.fov=i,t.zoom=1,t.near=o,t.far=a,t.focus=10,t.aspect=r,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return S()(n,[{key:"copy",value:function(t,e){return l()(g()(n.prototype),"copy",this).call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*gt*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*yt*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*gt*Math.atan(Math.tan(.5*yt*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*yt*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}]),n}(oi);ai.prototype.isPerspectiveCamera=!0;var si=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;if(b()(this,n),(o=e.call(this)).type="CubeCamera",!0!==r.isWebGLCubeRenderTarget)return m()(o,void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."));o.renderTarget=r;var a=new ai(90,1,t,i);a.layers=o.layers,a.up.set(0,-1,0),a.lookAt(new Wt(1,0,0)),o.add(a);var s=new ai(90,1,t,i);s.layers=o.layers,s.up.set(0,-1,0),s.lookAt(new Wt(-1,0,0)),o.add(s);var l=new ai(90,1,t,i);l.layers=o.layers,l.up.set(0,0,1),l.lookAt(new Wt(0,1,0)),o.add(l);var c=new ai(90,1,t,i);c.layers=o.layers,c.up.set(0,0,-1),c.lookAt(new Wt(0,-1,0)),o.add(c);var u=new ai(90,1,t,i);u.layers=o.layers,u.up.set(0,-1,0),u.lookAt(new Wt(0,0,1)),o.add(u);var p=new ai(90,1,t,i);return p.layers=o.layers,p.up.set(0,-1,0),p.lookAt(new Wt(0,0,-1)),o.add(p),m()(o)}return S()(n,[{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=a()(this.children,6),r=i[0],o=i[1],s=i[2],l=i[3],c=i[4],u=i[5],p=t.xr.enabled,h=t.getRenderTarget();t.xr.enabled=!1;var d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,r),t.setRenderTarget(n,1),t.render(e,o),t.setRenderTarget(n,2),t.render(e,s),t.setRenderTarget(n,3),t.render(e,l),t.setRenderTarget(n,4),t.render(e,c),n.texture.generateMipmaps=d,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(h),t.xr.enabled=p}}]),n}(Ve),li=function(t){_()(n,t);var e=L(n);function n(t,i,r,o,a,l,c,u,p,h){var d;return b()(this,n),(d=e.call(this,t=void 0!==t?t:[],i=void 0!==i?i:s,r,o,a,l,c,u,p,h)).flipY=!1,d}return S()(n,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}]),n}(Bt);li.prototype.isCubeTexture=!0;var ci=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;return b()(this,n),Number.isInteger(i)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),i=r),o=e.call(this,t,t,i),i=i||{},o.texture=new li(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),o.texture.isRenderTargetTexture=!0,o.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,o.texture.minFilter=void 0!==i.minFilter?i.minFilter:P,o.texture._needsFlipEnvMap=!1,o}return S()(n,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.format=H,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new ti(5,5,5),a=new ri({name:"CubemapFromEquirect",uniforms:ei(n),vertexShader:i,fragmentShader:r,side:1,blending:0});a.uniforms.tEquirect.value=e;var s=new Qn(o,a),l=e.minFilter;return e.minFilter===I&&(e.minFilter=P),new si(1,10,this).update(t,s),e.minFilter=l,s.geometry.dispose(),s.material.dispose(),this}},{key:"clear",value:function(t,e,n,i){for(var r=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,i);t.setRenderTarget(r)}}]),n}(Nt);ci.prototype.isWebGLCubeRenderTarget=!0;var ui=new Wt,pi=new Wt,hi=new At,di=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b()(this,t),this.normal=e,this.constant=n}return S()(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(t,e,n){var i=ui.subVectors(n,e).cross(pi.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(t,e){var n=t.delta(ui),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;var r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(n).multiplyScalar(r).add(t.start)}},{key:"intersectsLine",value:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||hi.getNormalMatrix(t),i=this.coplanarPoint(ui).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();di.prototype.isPlane=!0;var _i=new pe,fi=new Wt,mi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new di,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new di,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new di,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new di,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new di,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new di;b()(this,t),this.planes=[e,n,i,r,o,a]}return S()(t,[{key:"set",value:function(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}},{key:"copy",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],p=n[8],h=n[9],d=n[10],_=n[11],f=n[12],m=n[13],y=n[14],g=n[15];return e[0].setComponents(a-i,u-s,_-p,g-f).normalize(),e[1].setComponents(a+i,u+s,_+p,g+f).normalize(),e[2].setComponents(a+r,u+l,_+h,g+m).normalize(),e[3].setComponents(a-r,u-l,_-h,g-m).normalize(),e[4].setComponents(a-o,u-c,_-d,g-y).normalize(),e[5].setComponents(a+o,u+c,_+d,g+y).normalize(),this}},{key:"intersectsObject",value:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),_i.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(_i)}},{key:"intersectsSprite",value:function(t){return _i.center.set(0,0,0),_i.radius=.7071067811865476,_i.applyMatrix4(t.matrixWorld),this.intersectsSphere(_i)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(fi.x=i.normal.x>0?t.max.x:t.min.x,fi.y=i.normal.y>0?t.max.y:t.min.y,fi.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(fi)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();function yi(){var t=null,e=!1,n=null,i=null;function r(e,o){n(e,o),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function gi(t,e){var n=e.isWebGL2,i=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))},update:function(e,r){if(e.isGLBufferAttribute){var o=i.get(e);(!o||o.version<e.version)&&i.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var a=i.get(e);void 0===a?i.set(e,function(e,i){var r=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(i,a),t.bufferData(i,r,o),e.onUploadCallback();var s=5126;return r instanceof Float32Array?s=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:r instanceof Int16Array?s=5122:r instanceof Uint32Array?s=5125:r instanceof Int32Array?s=5124:r instanceof Int8Array?s=5120:(r instanceof Uint8Array||r instanceof Uint8ClampedArray)&&(s=5121),{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,r)):a.version<e.version&&(function(e,i,r){var o=i.array,a=i.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(a.buffer,e,r),a.version=e.version)}}}}var vi=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;b()(this,n),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:i,height:r,widthSegments:o,heightSegments:a};for(var s=i/2,l=r/2,c=Math.floor(o),u=Math.floor(a),p=c+1,h=u+1,d=i/c,_=r/u,f=[],m=[],y=[],g=[],v=0;v<h;v++)for(var x=v*_-l,S=0;S<p;S++){var w=S*d-s;m.push(w,-x,0),y.push(0,0,1),g.push(S/c),g.push(1-v/u)}for(var M=0;M<u;M++)for(var T=0;T<c;T++){var C=T+p*M,E=T+p*(M+1),A=T+1+p*(M+1),R=T+1+p*M;f.push(C,E,R),f.push(E,A,R)}return t.setIndex(f),t.setAttribute("position",new Tn(m,3)),t.setAttribute("normal",new Tn(y,3)),t.setAttribute("uv",new Tn(g,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.width,t.height,t.widthSegments,t.heightSegments)}}]),n}(kn),bi={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\treturn texture2D( envMap, uv ).rgb;\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= specularColorMapTexelToLinear( texture2D( specularColorMap, vUv ) ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= sheenColorMapTexelToLinear( texture2D( sheenColorMap, vUv ) ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\t#ifndef USE_MORPHNORMALS\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\t\t\t#else\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\t\t\t#endif\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},xi={common:{diffuse:{value:new hn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new At},uv2Transform:{value:new At},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Et(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new hn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new hn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new At}},sprite:{diffuse:{value:new hn(16777215)},opacity:{value:1},center:{value:new Et(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new At}}},Si={basic:{uniforms:ni([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.fog]),vertexShader:bi.meshbasic_vert,fragmentShader:bi.meshbasic_frag},lambert:{uniforms:ni([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.fog,xi.lights,{emissive:{value:new hn(0)}}]),vertexShader:bi.meshlambert_vert,fragmentShader:bi.meshlambert_frag},phong:{uniforms:ni([xi.common,xi.specularmap,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.fog,xi.lights,{emissive:{value:new hn(0)},specular:{value:new hn(1118481)},shininess:{value:30}}]),vertexShader:bi.meshphong_vert,fragmentShader:bi.meshphong_frag},standard:{uniforms:ni([xi.common,xi.envmap,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.roughnessmap,xi.metalnessmap,xi.fog,xi.lights,{emissive:{value:new hn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag},toon:{uniforms:ni([xi.common,xi.aomap,xi.lightmap,xi.emissivemap,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.gradientmap,xi.fog,xi.lights,{emissive:{value:new hn(0)}}]),vertexShader:bi.meshtoon_vert,fragmentShader:bi.meshtoon_frag},matcap:{uniforms:ni([xi.common,xi.bumpmap,xi.normalmap,xi.displacementmap,xi.fog,{matcap:{value:null}}]),vertexShader:bi.meshmatcap_vert,fragmentShader:bi.meshmatcap_frag},points:{uniforms:ni([xi.points,xi.fog]),vertexShader:bi.points_vert,fragmentShader:bi.points_frag},dashed:{uniforms:ni([xi.common,xi.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:bi.linedashed_vert,fragmentShader:bi.linedashed_frag},depth:{uniforms:ni([xi.common,xi.displacementmap]),vertexShader:bi.depth_vert,fragmentShader:bi.depth_frag},normal:{uniforms:ni([xi.common,xi.bumpmap,xi.normalmap,xi.displacementmap,{opacity:{value:1}}]),vertexShader:bi.meshnormal_vert,fragmentShader:bi.meshnormal_frag},sprite:{uniforms:ni([xi.sprite,xi.fog]),vertexShader:bi.sprite_vert,fragmentShader:bi.sprite_frag},background:{uniforms:{uvTransform:{value:new At},t2D:{value:null}},vertexShader:bi.background_vert,fragmentShader:bi.background_frag},cube:{uniforms:ni([xi.envmap,{opacity:{value:1}}]),vertexShader:bi.cube_vert,fragmentShader:bi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:bi.equirect_vert,fragmentShader:bi.equirect_frag},distanceRGBA:{uniforms:ni([xi.common,xi.displacementmap,{referencePosition:{value:new Wt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:bi.distanceRGBA_vert,fragmentShader:bi.distanceRGBA_frag},shadow:{uniforms:ni([xi.lights,xi.fog,{color:{value:new hn(0)},opacity:{value:1}}]),vertexShader:bi.shadow_vert,fragmentShader:bi.shadow_frag}};function wi(t,e,n,i,r){var o,a,s=new hn(0),l=0,c=null,u=0,p=null;function h(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return s},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(t),h(s,l=e)},getClearAlpha:function(){return l},setClearAlpha:function(t){h(s,l=t)},render:function(n,r){var d=!1,_=!0===r.isScene?r.background:null;_&&_.isTexture&&(_=e.get(_));var m=t.xr,y=m.getSession&&m.getSession();y&&"additive"===y.environmentBlendMode&&(_=null),null===_?h(s,l):_&&_.isColor&&(h(_,1),d=!0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===f)?(void 0===a&&((a=new Qn(new ti(1,1,1),new ri({name:"BackgroundCubeMaterial",uniforms:ei(Si.cube.uniforms),vertexShader:Si.cube.vertexShader,fragmentShader:Si.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),a.geometry.deleteAttribute("uv"),a.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(a)),a.material.uniforms.envMap.value=_,a.material.uniforms.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1,c===_&&u===_.version&&p===t.toneMapping||(a.material.needsUpdate=!0,c=_,u=_.version,p=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null)):_&&_.isTexture&&(void 0===o&&((o=new Qn(new vi(2,2),new ri({name:"BackgroundMaterial",uniforms:ei(Si.background.uniforms),vertexShader:Si.background.vertexShader,fragmentShader:Si.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=_,!0===_.matrixAutoUpdate&&_.updateMatrix(),o.material.uniforms.uvTransform.value.copy(_.matrix),c===_&&u===_.version&&p===t.toneMapping||(o.material.needsUpdate=!0,c=_,u=_.version,p=t.toneMapping),n.unshift(o,o.geometry,o.material,0,0,null))}}}function Mi(t,e,n,i){var r=t.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},l=h(null),c=l;function u(e){return i.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function p(e){return i.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function h(t){for(var e=[],n=[],i=[],o=0;o<r;o++)e[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function d(){for(var t=c.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function _(t){f(t,0)}function f(n,r){var o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function m(){for(var e=c.newAttributes,n=c.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function y(e,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,o,a,s):t.vertexAttribIPointer(e,n,r,a,s)}function g(){v(),c!==l&&u((c=l).object)}function v(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,p,g,v){var b=!1;if(a){var x=function(e,n,r){var a=!0===r.wireframe,l=s[e.id];void 0===l&&(l={},s[e.id]=l);var c=l[n.id];void 0===c&&(c={},l[n.id]=c);var u=c[a];return void 0===u&&(u=h(i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()),c[a]=u),u}(g,p,l);c!==x&&u((c=x).object),(b=function(t,e){var n=c.attributes,i=t.attributes,r=0;for(var o in i){var a=n[o],s=i[o];if(void 0===a)return!0;if(a.attribute!==s)return!0;if(a.data!==s.data)return!0;r++}return c.attributesNum!==r||c.index!==e}(g,v))&&function(t,e){var n={},i=t.attributes,r=0;for(var o in i){var a=i[o],s={};s.attribute=a,a.data&&(s.data=a.data),n[o]=s,r++}c.attributes=n,c.attributesNum=r,c.index=e}(g,v)}else{var S=!0===l.wireframe;c.geometry===g.id&&c.program===p.id&&c.wireframe===S||(c.geometry=g.id,c.program=p.id,c.wireframe=S,b=!0)}!0===r.isInstancedMesh&&(b=!0),null!==v&&n.update(v,34963),b&&(function(r,o,a,s){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){d();var l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(var p in c){var h=c[p];if(h.location>=0){var g=l[p];if(void 0===g&&("instanceMatrix"===p&&r.instanceMatrix&&(g=r.instanceMatrix),"instanceColor"===p&&r.instanceColor&&(g=r.instanceColor)),void 0!==g){var v=g.normalized,b=g.itemSize,x=n.get(g);if(void 0===x)continue;var S=x.buffer,w=x.type,M=x.bytesPerElement;if(g.isInterleavedBufferAttribute){var T=g.data,C=T.stride,E=g.offset;if(T&&T.isInstancedInterleavedBuffer){for(var A=0;A<h.locationSize;A++)f(h.location+A,T.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=T.meshPerAttribute*T.count)}else for(var R=0;R<h.locationSize;R++)_(h.location+R);t.bindBuffer(34962,S);for(var L=0;L<h.locationSize;L++)y(h.location+L,b/h.locationSize,w,v,C*M,(E+b/h.locationSize*L)*M)}else{if(g.isInstancedBufferAttribute){for(var P=0;P<h.locationSize;P++)f(h.location+P,g.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=g.meshPerAttribute*g.count)}else for(var D=0;D<h.locationSize;D++)_(h.location+D);t.bindBuffer(34962,S);for(var I=0;I<h.locationSize;I++)y(h.location+I,b/h.locationSize,w,v,b*M,b/h.locationSize*I*M)}}else if(void 0!==u){var k=u[p];if(void 0!==k)switch(k.length){case 2:t.vertexAttrib2fv(h.location,k);break;case 3:t.vertexAttrib3fv(h.location,k);break;case 4:t.vertexAttrib4fv(h.location,k);break;default:t.vertexAttrib1fv(h.location,k)}}}}m()}}(r,l,p,g),null!==v&&t.bindBuffer(34963,n.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){for(var t in g(),s){var e=s[t];for(var n in e){var i=e[n];for(var r in i)p(i[r].object),delete i[r];delete e[n]}delete s[t]}},releaseStatesOfGeometry:function(t){if(void 0!==s[t.id]){var e=s[t.id];for(var n in e){var i=e[n];for(var r in i)p(i[r].object),delete i[r];delete e[n]}delete s[t.id]}},releaseStatesOfProgram:function(t){for(var e in s){var n=s[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)p(i[r].object),delete i[r];delete n[t.id]}}},initAttributes:d,enableAttribute:_,disableUnusedAttributes:m}}function Ti(t,e,n,i){var r,o=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=function(i,a,s){if(0!==s){var l,c;if(o)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](r,i,a,s),n.update(a,r,s)}}}function Ci(t,e,n){var i;function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=r(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var l=o||e.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),p=t.getParameter(35660),h=t.getParameter(3379),d=t.getParameter(34076),_=t.getParameter(34921),f=t.getParameter(36347),m=t.getParameter(36348),y=t.getParameter(36349),g=p>0,v=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:p,maxTextureSize:h,maxCubemapSize:d,maxAttributes:_,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:y,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v,maxSamples:o?t.getParameter(36183):0}}function Ei(t){var e=this,n=null,i=0,r=!1,o=!1,a=new di,s=new At,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,n,i,r){var o=null!==t?t.length:0,c=null;if(0!==o){if(c=l.value,!0!==r||null===c){var u=i+4*o,p=n.matrixWorldInverse;s.getNormalMatrix(p),(null===c||c.length<u)&&(c=new Float32Array(u));for(var h=0,d=i;h!==o;++h,d+=4)a.copy(t[h]).applyMatrix4(p,s),a.normal.toArray(c,d),c[d+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){var a=0!==t.length||e||0!==i||r;return r=e,n=u(t,o,0),i=t.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,a,s){var p=e.clippingPlanes,h=e.clipIntersection,d=e.clipShadows,_=t.get(e);if(!r||null===p||0===p.length||o&&!d)o?u(null):c();else{var f=o?0:i,m=4*f,y=_.clippingState||null;l.value=y,y=u(p,a,m,s);for(var g=0;g!==m;++g)y[g]=n[g];_.clippingState=y,this.numIntersection=h?this.numPlanes:0,this.numPlanes+=f}}}function Ai(t){var e=new WeakMap;function n(t,e){return e===p?t.mapping=s:e===d&&(t.mapping=c),t}function i(t){var n=t.target;n.removeEventListener("dispose",i);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var o=r.mapping;if(o===p||o===d){if(e.has(r))return n(e.get(r).texture,r.mapping);var a=r.image;if(a&&a.height>0){var s=t.getRenderTarget(),l=new ci(a.height/2);return l.fromEquirectangularTexture(t,r),e.set(r,l),t.setRenderTarget(s),r.addEventListener("dispose",i),n(l.texture,r.mapping)}return null}}return r},dispose:function(){e=new WeakMap}}}Si.physical={uniforms:ni([Si.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Et(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new hn(0)},sheenColorMap:{value:null},sheenRoughness:{value:0},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Et},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new hn(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularColor:{value:new hn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:bi.meshphysical_vert,fragmentShader:bi.meshphysical_frag};var Ri=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return b()(this,n),(t=e.call(this)).type="OrthographicCamera",t.zoom=1,t.view=null,t.left=i,t.right=r,t.top=o,t.bottom=a,t.near=s,t.far=l,t.updateProjectionMatrix(),t}return S()(n,[{key:"copy",value:function(t,e){return l()(g()(n.prototype),"copy",this).call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}},{key:"setViewOffset",value:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(r+=l*this.view.offsetX)+l*this.view.width,s=(a-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}]),n}(oi);Ri.prototype.isOrthographicCamera=!0;var Li=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this,t)).type="RawShaderMaterial",i}return S()(n)}(ri);Li.prototype.isRawShaderMaterial=!0;var Pi=Math.pow(2,8),Di=[.125,.215,.35,.446,.526,.582],Ii=5+Di.length,ki=(e={},u()(e,st,0),u()(e,lt,1),e),Oi=new Ri,Bi=function(){for(var t=[],e=[],n=[],i=8,r=0;r<Ii;r++){var o=Math.pow(2,i);e.push(o);var a=1/o;r>4?a=Di[r-8+4-1]:0==r&&(a=0),n.push(a);for(var s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],p=new Float32Array(108),h=new Float32Array(72),d=new Float32Array(36),_=0;_<6;_++){var f=_%3*2/3-1,m=_>2?0:-1,y=[f,m,0,f+2/3,m,0,f+2/3,m+1,0,f,m,0,f+2/3,m+1,0,f,m+1,0];p.set(y,18*_),h.set(u,12*_);var g=[_,_,_,_,_,_];d.set(g,6*_)}var v=new kn;v.setAttribute("position",new mn(p,3)),v.setAttribute("uv",new mn(h,2)),v.setAttribute("faceIndex",new mn(d,1)),t.push(v),i>4&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),ji=Bi._lodPlanes,Fi=Bi._sizeLods,Ni=Bi._sigmas,zi=new hn,Hi=null,Ui=(1+Math.sqrt(5))/2,Wi=1/Ui,Gi=[new Wt(1,1,1),new Wt(-1,1,1),new Wt(1,1,-1),new Wt(-1,1,-1),new Wt(0,Ui,Wi),new Wt(0,Ui,-Wi),new Wt(Wi,0,Ui),new Wt(-Wi,0,Ui),new Wt(Ui,Wi,0),new Wt(-Ui,Wi,0)],Vi=function(){function t(e){b()(this,t),this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(t){var e=new Float32Array(20),n=new Wt(0,1,0);return new Li({name:"SphericalGaussianBlur",defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}(),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}return S()(t,[{key:"fromScene",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Hi=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}},{key:"fromEquirectangular",value:function(t){return this._fromTexture(t)}},{key:"fromCubemap",value:function(t){return this._fromTexture(t)}},{key:"compileCubemapShader",value:function(){null===this._cubemapShader&&(this._cubemapShader=Zi(),this._compileMaterial(this._cubemapShader))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectShader&&(this._equirectShader=Yi(),this._compileMaterial(this._equirectShader))}},{key:"dispose",value:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<ji.length;t++)ji[t].dispose()}},{key:"_cleanup",value:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(Hi),t.scissorTest=!1,Xi(t,0,0,t.width,t.height)}},{key:"_fromTexture",value:function(t){Hi=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}},{key:"_allocateTargets",value:function(t){var e={magFilter:P,minFilter:P,generateMipmaps:!1,type:F,format:H,encoding:st,depthBuffer:!1},n=qi(e);return n.depthBuffer=!t,this._pingPongRenderTarget=qi(e),n}},{key:"_compileMaterial",value:function(t){var e=new Qn(ji[0],t);this._renderer.compile(e,Oi)}},{key:"_sceneToCubeUV",value:function(t,e,n,i){var r=new ai(90,1,e,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(zi),s.toneMapping=0,s.autoClear=!1;var u=new dn({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),p=new Qn(new ti,u),h=!1,d=t.background;d?d.isColor&&(u.color.copy(d),t.background=null,h=!0):(u.color.copy(zi),h=!0);for(var _=0;_<6;_++){var f=_%3;0==f?(r.up.set(0,o[_],0),r.lookAt(a[_],0,0)):1==f?(r.up.set(0,0,o[_]),r.lookAt(0,a[_],0)):(r.up.set(0,o[_],0),r.lookAt(0,0,a[_])),Xi(i,f*Pi,_>2?Pi:0,Pi,Pi),s.setRenderTarget(i),h&&s.render(p,r),s.render(t,r)}p.geometry.dispose(),p.material.dispose(),s.toneMapping=c,s.autoClear=l,t.background=d}},{key:"_setEncoding",value:function(t,e){!0===this._renderer.capabilities.isWebGL2&&e.format===H&&e.type===k&&e.encoding===lt?t.value=ki[3e3]:t.value=ki[e.encoding]}},{key:"_textureToCubeUV",value:function(t,e){var n=this._renderer,i=t.mapping===s||t.mapping===c;i?null==this._cubemapShader&&(this._cubemapShader=Zi()):null==this._equirectShader&&(this._equirectShader=Yi());var r=i?this._cubemapShader:this._equirectShader,o=new Qn(ji[0],r),a=r.uniforms;a.envMap.value=t,i||a.texelSize.value.set(1/t.image.width,1/t.image.height),this._setEncoding(a.inputEncoding,t),Xi(e,0,0,3*Pi,2*Pi),n.setRenderTarget(e),n.render(o,Oi)}},{key:"_applyPMREM",value:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<Ii;i++){var r=Math.sqrt(Ni[i]*Ni[i]-Ni[i-1]*Ni[i-1]),o=Gi[(i-1)%Gi.length];this._blur(t,i-1,i,r,o)}e.autoClear=n}},{key:"_blur",value:function(t,e,n,i,r){var o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,i,"latitudinal",r),this._halfBlur(o,t,n,n,i,"longitudinal",r)}},{key:"_halfBlur",value:function(t,e,n,i,r,o,a){var s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var c=new Qn(ji[i],l),u=l.uniforms,p=Fi[n]-1,h=isFinite(r)?Math.PI/(2*p):2*Math.PI/39,d=r/h,_=isFinite(r)?1+Math.floor(3*d):20;_>20&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(_," samples when the maximum is set to 20"));for(var f=[],m=0,y=0;y<20;++y){var g=y/d,v=Math.exp(-g*g/2);f.push(v),0==y?m+=v:y<_&&(m+=2*v)}for(var b=0;b<f.length;b++)f[b]=f[b]/m;u.envMap.value=t.texture,u.samples.value=_,u.weights.value=f,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a),u.dTheta.value=h,u.mipInt.value=8-n;var x=Fi[i];Xi(e,3*Math.max(0,Pi-2*x),(0===i?0:2*Pi)+2*x*(i>4?i-8+4:0),3*x,2*x),s.setRenderTarget(e),s.render(c,Oi)}}]),t}();function qi(t){var e=new Nt(3*Pi,3*Pi,t);return e.texture.mapping=f,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Xi(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Yi(){var t=new Et(1,1);return new Li({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:ki[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function Zi(){return new Li({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:ki[3e3]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t".concat("\n\n\t\tuniform int inputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t","\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) );\n\n\t\t\t}\n\t\t"),blending:0,depthTest:!1,depthWrite:!1})}function Ji(t){var e=new WeakMap,n=null;function i(t){var n=t.target;n.removeEventListener("dispose",i);var r=e.get(n);void 0!==r&&(e.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){var o=r.mapping,a=o===p||o===d,l=o===s||o===c;if(a||l){if(e.has(r))return e.get(r).texture;var u=r.image;if(a&&u&&u.height>0||l&&u&&function(t){for(var e=0,n=0;n<6;n++)void 0!==t[n]&&e++;return 6===e}(u)){var h=t.getRenderTarget();null===n&&(n=new Vi(t));var _=a?n.fromEquirectangular(r):n.fromCubemap(r);return e.set(r,_),t.setRenderTarget(h),r.addEventListener("dispose",i),_.texture}return null}}return r},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ki(t){var e={};function n(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){var e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function Qi(t,e,n,i){var r={},o=new WeakMap;function a(t){var s=t.target;for(var l in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[l]);s.removeEventListener("dispose",a),delete r[s.id];var c=o.get(s);c&&(e.remove(c),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t){var n=[],i=t.index,r=t.attributes.position,a=0;if(null!==i){var s=i.array;a=i.version;for(var l=0,c=s.length;l<c;l+=3){var u=s[l+0],p=s[l+1],h=s[l+2];n.push(u,p,p,h,h,u)}}else{var d=r.array;a=r.version;for(var _=0,f=d.length/3-1;_<f;_+=3){var m=_+0,y=_+1,g=_+2;n.push(m,y,y,g,g,m)}}var v=new(Rt(n)>65535?wn:xn)(n,1);v.version=a;var b=o.get(t);b&&e.remove(b),o.set(t,v)}return{get:function(t,e){return!0===r[e.id]||(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++),e},update:function(t){var n=t.attributes;for(var i in n)e.update(n[i],34962);var r=t.morphAttributes;for(var o in r)for(var a=r[o],s=0,l=a.length;s<l;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var e=o.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&s(t)}else s(t);return o.get(t)}}}function $i(t,e,n,i){var r,o,a,s=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,o,e*a),n.update(i,r,1)},this.renderInstances=function(i,l,c){if(0!==c){var u,p;if(s)u=t,p="drawElementsInstanced";else if(p="drawElementsInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[p](r,l,o,i*a,c),n.update(l,r,c)}}}function tr(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}var er=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b()(this,n),(t=e.call(this,null)).image={data:i,width:r,height:o,depth:a},t.magFilter=M,t.minFilter=M,t.wrapR=x,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return S()(n)}(Bt);function nr(t,e){return t[0]-e[0]}function ir(t,e){return Math.abs(e[1])-Math.abs(t[1])}function rr(t,e){var n=1,i=e.isInterleavedBufferAttribute?e.data.array:e.array;i instanceof Int8Array?n=127:i instanceof Int16Array?n=32767:i instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",i),t.divideScalar(n)}function or(t,e,n){for(var i={},r=new Float32Array(8),o=new WeakMap,a=new Wt,s=[],l=0;l<8;l++)s[l]=[l,0];return{update:function(l,c,u,p){var h=l.morphTargetInfluences;if(!0===e.isWebGL2){var d=c.morphAttributes.position.length,_=o.get(c);if(void 0===_||_.count!==d){void 0!==_&&_.texture.dispose();var f=void 0!==c.morphAttributes.normal,m=c.morphAttributes.position,y=c.morphAttributes.normal||[],g=!0===f?2:1,v=c.attributes.position.count*g,b=1;v>e.maxTextureSize&&(b=Math.ceil(v/e.maxTextureSize),v=e.maxTextureSize);var x=new Float32Array(v*b*4*d),S=new er(x,v,b,d);S.format=H,S.type=j,S.needsUpdate=!0;for(var w=4*g,M=0;M<d;M++)for(var T=m[M],C=y[M],E=v*b*4*M,A=0;A<T.count;A++){a.fromBufferAttribute(T,A),!0===T.normalized&&rr(a,T);var R=A*w;x[E+R+0]=a.x,x[E+R+1]=a.y,x[E+R+2]=a.z,x[E+R+3]=0,!0===f&&(a.fromBufferAttribute(C,A),!0===C.normalized&&rr(a,C),x[E+R+4]=a.x,x[E+R+5]=a.y,x[E+R+6]=a.z,x[E+R+7]=0)}_={count:d,texture:S,size:new Et(v,b)},o.set(c,_)}for(var L=0,P=0;P<h.length;P++)L+=h[P];var D=c.morphTargetsRelative?1:1-L;p.getUniforms().setValue(t,"morphTargetBaseInfluence",D),p.getUniforms().setValue(t,"morphTargetInfluences",h),p.getUniforms().setValue(t,"morphTargetsTexture",_.texture,n),p.getUniforms().setValue(t,"morphTargetsTextureSize",_.size)}else{var I=void 0===h?0:h.length,k=i[c.id];if(void 0===k||k.length!==I){k=[];for(var O=0;O<I;O++)k[O]=[O,0];i[c.id]=k}for(var B=0;B<I;B++){var F=k[B];F[0]=B,F[1]=h[B]}k.sort(ir);for(var N=0;N<8;N++)N<I&&k[N][1]?(s[N][0]=k[N][0],s[N][1]=k[N][1]):(s[N][0]=Number.MAX_SAFE_INTEGER,s[N][1]=0);s.sort(nr);for(var z=c.morphAttributes.position,U=c.morphAttributes.normal,W=0,G=0;G<8;G++){var V=s[G],q=V[0],X=V[1];q!==Number.MAX_SAFE_INTEGER&&X?(z&&c.getAttribute("morphTarget"+G)!==z[q]&&c.setAttribute("morphTarget"+G,z[q]),U&&c.getAttribute("morphNormal"+G)!==U[q]&&c.setAttribute("morphNormal"+G,U[q]),r[G]=X,W+=X):(z&&!0===c.hasAttribute("morphTarget"+G)&&c.deleteAttribute("morphTarget"+G),U&&!0===c.hasAttribute("morphNormal"+G)&&c.deleteAttribute("morphNormal"+G),r[G]=0)}var Y=c.morphTargetsRelative?1:1-W;p.getUniforms().setValue(t,"morphTargetBaseInfluence",Y),p.getUniforms().setValue(t,"morphTargetInfluences",r)}}}}function ar(t,e,n,i){var r=new WeakMap;function o(t){var e=t.target;e.removeEventListener("dispose",o),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(t){var a=i.render.frame,s=t.geometry,l=e.get(t,s);return r.get(l)!==a&&(e.update(l),r.set(l,a)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",o)&&t.addEventListener("dispose",o),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}er.prototype.isDataTexture2DArray=!0;var sr=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b()(this,n),(t=e.call(this,null)).image={data:i,width:r,height:o,depth:a},t.magFilter=M,t.minFilter=M,t.wrapR=x,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return S()(n)}(Bt);sr.prototype.isDataTexture3D=!0;var lr=new Bt,cr=new er,ur=new sr,pr=new li,hr=[],dr=[],_r=new Float32Array(16),fr=new Float32Array(9),mr=new Float32Array(4);function yr(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=hr[r];if(void 0===o&&(o=new Float32Array(r),hr[r]=o),0!==e){i.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function gr(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function vr(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function br(t,e){var n=dr[e];void 0===n&&(n=new Int32Array(e),dr[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function xr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Sr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(gr(n,e))return;t.uniform2fv(this.addr,e),vr(n,e)}}function wr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(gr(n,e))return;t.uniform3fv(this.addr,e),vr(n,e)}}function Mr(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(gr(n,e))return;t.uniform4fv(this.addr,e),vr(n,e)}}function Tr(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(gr(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),vr(n,e)}else{if(gr(n,i))return;mr.set(i),t.uniformMatrix2fv(this.addr,!1,mr),vr(n,i)}}function Cr(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(gr(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),vr(n,e)}else{if(gr(n,i))return;fr.set(i),t.uniformMatrix3fv(this.addr,!1,fr),vr(n,i)}}function Er(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(gr(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),vr(n,e)}else{if(gr(n,i))return;_r.set(i),t.uniformMatrix4fv(this.addr,!1,_r),vr(n,i)}}function Ar(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Rr(t,e){var n=this.cache;gr(n,e)||(t.uniform2iv(this.addr,e),vr(n,e))}function Lr(t,e){var n=this.cache;gr(n,e)||(t.uniform3iv(this.addr,e),vr(n,e))}function Pr(t,e){var n=this.cache;gr(n,e)||(t.uniform4iv(this.addr,e),vr(n,e))}function Dr(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ir(t,e){var n=this.cache;gr(n,e)||(t.uniform2uiv(this.addr,e),vr(n,e))}function kr(t,e){var n=this.cache;gr(n,e)||(t.uniform3uiv(this.addr,e),vr(n,e))}function Or(t,e){var n=this.cache;gr(n,e)||(t.uniform4uiv(this.addr,e),vr(n,e))}function Br(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||lr,r)}function jr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||ur,r)}function Fr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||pr,r)}function Nr(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||cr,r)}function zr(t,e){t.uniform1fv(this.addr,e)}function Hr(t,e){var n=yr(e,this.size,2);t.uniform2fv(this.addr,n)}function Ur(t,e){var n=yr(e,this.size,3);t.uniform3fv(this.addr,n)}function Wr(t,e){var n=yr(e,this.size,4);t.uniform4fv(this.addr,n)}function Gr(t,e){var n=yr(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Vr(t,e){var n=yr(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function qr(t,e){var n=yr(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Xr(t,e){t.uniform1iv(this.addr,e)}function Yr(t,e){t.uniform2iv(this.addr,e)}function Zr(t,e){t.uniform3iv(this.addr,e)}function Jr(t,e){t.uniform4iv(this.addr,e)}function Kr(t,e){t.uniform1uiv(this.addr,e)}function Qr(t,e){t.uniform2uiv(this.addr,e)}function $r(t,e){t.uniform3uiv(this.addr,e)}function to(t,e){t.uniform4uiv(this.addr,e)}function eo(t,e,n){var i=e.length,r=br(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTexture2D(e[o]||lr,r[o])}function no(t,e,n){var i=e.length,r=br(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture3D(e[o]||ur,r[o])}function io(t,e,n){var i=e.length,r=br(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTextureCube(e[o]||pr,r[o])}function ro(t,e,n){var i=e.length,r=br(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2DArray(e[o]||cr,r[o])}function oo(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return xr;case 35664:return Sr;case 35665:return wr;case 35666:return Mr;case 35674:return Tr;case 35675:return Cr;case 35676:return Er;case 5124:case 35670:return Ar;case 35667:case 35671:return Rr;case 35668:case 35672:return Lr;case 35669:case 35673:return Pr;case 5125:return Dr;case 36294:return Ir;case 36295:return kr;case 36296:return Or;case 35678:case 36198:case 36298:case 36306:case 35682:return Br;case 35679:case 36299:case 36307:return jr;case 35680:case 36300:case 36308:case 36293:return Fr;case 36289:case 36303:case 36311:case 36292:return Nr}}(e.type)}function ao(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return zr;case 35664:return Hr;case 35665:return Ur;case 35666:return Wr;case 35674:return Gr;case 35675:return Vr;case 35676:return qr;case 5124:case 35670:return Xr;case 35667:case 35671:return Yr;case 35668:case 35672:return Zr;case 35669:case 35673:return Jr;case 5125:return Kr;case 36294:return Qr;case 36295:return $r;case 36296:return to;case 35678:case 36198:case 36298:case 36306:case 35682:return eo;case 35679:case 36299:case 36307:return no;case 35680:case 36300:case 36308:case 36293:return io;case 36289:case 36303:case 36311:case 36292:return ro}}(e.type)}function so(t){this.id=t,this.seq=[],this.map={}}ao.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),vr(e,t)},so.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var a=i[r];a.setValue(t,e[a.id],n)}};var lo=/(\w+)(\])?(\[|\.)?/g;function co(t,e){t.seq.push(e),t.map[e.id]=e}function uo(t,e,n){var i=t.name,r=i.length;for(lo.lastIndex=0;;){var o=lo.exec(i),a=lo.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){co(n,void 0===c?new oo(s,t,e):new ao(s,t,e));break}var u=n.map[s];void 0===u&&co(n,u=new so(s)),n=u}}function po(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);uo(r,t.getUniformLocation(e,r.name),this)}}function ho(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}po.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},po.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},po.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}},po.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n};var _o=0;function fo(t){switch(t){case st:return["Linear","( value )"];case lt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function mo(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":n.toUpperCase()+"\n\n"+r+"\n\n"+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function yo(t,e){var n=fo(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function go(t,e){var n=fo(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function vo(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function bo(t){return""!==t}function xo(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function So(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var wo=/^[ \t]*#include +<([\w\d./]+)>/gm;function Mo(t){return t.replace(wo,To)}function To(t,e){var n=bi[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Mo(n)}var Co=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Eo=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ao(t){return t.replace(Eo,Lo).replace(Co,Ro)}function Ro(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Lo(t,e,n,i)}function Lo(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function Po(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Do(t,e,n,i){var r,o,a=t.getContext(),l=n.defines,u=n.vertexShader,p=n.fragmentShader,h=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),d=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case s:case c:e="ENVMAP_TYPE_CUBE";break;case f:case y:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),_=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case c:case y:e="ENVMAP_MODE_REFRACTION"}return e}(n),m=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),g=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(bo).join("\n")}(n),v=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(l),b=a.createProgram(),x=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((r=[v].filter(bo).join("\n")).length>0&&(r+="\n"),(o=[g,v].filter(bo).join("\n")).length>0&&(o+="\n")):(r=[Po(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+_:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(bo).join("\n"),o=[g,Po(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.envMap?"#define "+_:"",n.envMap?"#define "+m:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?bi.tonemapping_pars_fragment:"",0!==n.toneMapping?vo("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===z?"#define OPAQUE":"",bi.encodings_pars_fragment,n.map?yo("mapTexelToLinear",n.mapEncoding):"",n.matcap?yo("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?yo("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?yo("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularColorMap?yo("specularColorMapTexelToLinear",n.specularColorMapEncoding):"",n.sheenColorMap?yo("sheenColorMapTexelToLinear",n.sheenColorMapEncoding):"",n.lightMap?yo("lightMapTexelToLinear",n.lightMapEncoding):"",go("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(bo).join("\n")),u=So(u=xo(u=Mo(u),n),n),p=So(p=xo(p=Mo(p),n),n),u=Ao(u),p=Ao(p),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(x="#version 300 es\n",r=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,o=["#define varying in",n.glslVersion===ht?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ht?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+o);var S,w,M=x+o+p,T=ho(a,35633,x+r+u),C=ho(a,35632,M);if(a.attachShader(b,T),a.attachShader(b,C),void 0!==n.index0AttributeName?a.bindAttribLocation(b,0,n.index0AttributeName):!0===n.morphTargets&&a.bindAttribLocation(b,0,"position"),a.linkProgram(b),t.debug.checkShaderErrors){var E=a.getProgramInfoLog(b).trim(),A=a.getShaderInfoLog(T).trim(),R=a.getShaderInfoLog(C).trim(),L=!0,P=!0;if(!1===a.getProgramParameter(b,35714)){L=!1;var D=mo(a,T,"vertex"),I=mo(a,C,"fragment");console.error("THREE.WebGLProgram: Shader Error "+a.getError()+" - VALIDATE_STATUS "+a.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+E+"\n"+D+"\n"+I)}else""!==E?console.warn("THREE.WebGLProgram: Program Info Log:",E):""!==A&&""!==R||(P=!1);P&&(this.diagnostics={runnable:L,programLog:E,vertexShader:{log:A,prefix:r},fragmentShader:{log:R,prefix:o}})}return a.deleteShader(T),a.deleteShader(C),this.getUniforms=function(){return void 0===S&&(S=new po(a,b)),S},this.getAttributes=function(){return void 0===w&&(w=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var o=t.getActiveAttrib(e,r),a=o.name,s=1;35674===o.type&&(s=2),35675===o.type&&(s=3),35676===o.type&&(s=4),n[a]={type:o.type,location:t.getAttribLocation(e,a),locationSize:s}}return n}(a,b)),w},this.destroy=function(){i.releaseStatesOfProgram(this),a.deleteProgram(b),this.program=void 0},this.name=n.shaderName,this.id=_o++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=T,this.fragmentShader=C,this}var Io=0,ko=function(){function t(){b()(this,t),this.shaderCache=new Map,this.materialCache=new Map}return S()(t,[{key:"update",value:function(t){var e=t.vertexShader,n=t.fragmentShader,i=this._getShaderStage(e),r=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(i)&&(o.add(i),i.usedTimes++),!1===o.has(r)&&(o.add(r),r.usedTimes++),this}},{key:"remove",value:function(t){var e,n=E(this.materialCache.get(t));try{for(n.s();!(e=n.n()).done;){var i=e.value;i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i)}}catch(t){n.e(t)}finally{n.f()}return this.materialCache.delete(t),this}},{key:"getVertexShaderID",value:function(t){return this._getShaderStage(t.vertexShader).id}},{key:"getFragmentShaderID",value:function(t){return this._getShaderStage(t.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(t){var e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}},{key:"_getShaderStage",value:function(t){var e=this.shaderCache;if(!1===e.has(t)){var n=new Oo;e.set(t,n)}return e.get(t)}}]),t}(),Oo=S()((function t(){b()(this,t),this.id=Io++,this.usedTimes=0}));function Bo(t,e,n,i,r,o,a){var s=new Pe,l=new ko,c=[],u=r.isWebGL2,p=r.logarithmicDepthBuffer,h=r.floatVertexTextures,d=r.maxVertexUniforms,_=r.vertexTextures,m=r.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(t){var e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=st,u&&t&&t.isTexture&&t.format===H&&t.type===k&&t.encoding===lt&&(e=st),e}return{getParameters:function(o,s,c,b,x){var S,w,M,T,C=b.fog,E=o.isMeshStandardMaterial?b.environment:null,A=(o.isMeshStandardMaterial?n:e).get(o.envMap||E),R=g[o.type],L=x.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(h)return 1024;var n=d,i=Math.floor((n-20)/4),r=Math.min(i,e.length);return r<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+r+"."),0):r}(x):0;if(null!==o.precision&&((m=r.getMaxPrecision(o.precision))!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead.")),R){var P=Si[R];S=P.vertexShader,w=P.fragmentShader}else S=o.vertexShader,w=o.fragmentShader,l.update(o),M=l.getVertexShaderID(o),T=l.getFragmentShaderID(o);var D=t.getRenderTarget(),I=o.alphaTest>0,k=o.clearcoat>0;return{isWebGL2:u,shaderID:R,shaderName:o.type,vertexShader:S,fragmentShader:w,defines:o.defines,customVertexShaderID:M,customFragmentShaderID:T,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:!0===x.isInstancedMesh,instancingColor:!0===x.isInstancedMesh&&null!==x.instanceColor,supportsVertexTextures:_,outputEncoding:null!==D?v(D.texture):t.outputEncoding,map:!!o.map,mapEncoding:v(o.map),matcap:!!o.matcap,matcapEncoding:v(o.matcap),envMap:!!A,envMapMode:A&&A.mapping,envMapEncoding:v(A),envMapCubeUV:!!A&&(A.mapping===f||A.mapping===y),lightMap:!!o.lightMap,lightMapEncoding:v(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:v(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:1===o.normalMapType,tangentSpaceNormalMap:0===o.normalMapType,clearcoat:k,clearcoatMap:k&&!!o.clearcoatMap,clearcoatRoughnessMap:k&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:k&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularColorMap:!!o.specularColorMap,specularColorMapEncoding:v(o.specularColorMap),alphaMap:!!o.alphaMap,alphaTest:I,gradientMap:!!o.gradientMap,sheen:o.sheen>0,sheenColorMap:!!o.sheenColorMap,sheenColorMapEncoding:v(o.sheenColorMap),sheenRoughnessMap:!!o.sheenRoughnessMap,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!x.geometry&&!!x.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!x.geometry&&!!x.geometry.attributes.color&&4===x.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheenColorMap||o.sheenRoughnessMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularColorMap||o.sheen>0||o.sheenColorMap||o.sheenRoughnessMap||!o.displacementMap),fog:!!C,useFog:o.fog,fogExp2:C&&C.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===x.isSkinnedMesh&&L>0,maxBones:L,useVertexTexture:h,morphTargets:!!x.geometry&&!!x.geometry.morphAttributes.position,morphNormals:!!x.geometry&&!!x.geometry.morphAttributes.normal,morphTargetsCount:x.geometry&&x.geometry.morphAttributes.position?x.geometry.morphAttributes.position.length:0,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:t.shadowMap.enabled&&c.length>0,shadowMapType:t.shadowMap.type,toneMapping:o.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:1===o.side,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.mapEncoding),t.push(e.matcapEncoding),t.push(e.envMapMode),t.push(e.envMapEncoding),t.push(e.lightMapEncoding),t.push(e.emissiveMapEncoding),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.maxBones),t.push(e.morphTargetsCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.format),t.push(e.specularColorMapEncoding),t.push(e.sheenColorMapEncoding)}(n,e),function(t,e){s.disableAll(),e.isWebGL2&&s.enable(0),e.supportsVertexTextures&&s.enable(1),e.instancing&&s.enable(2),e.instancingColor&&s.enable(3),e.map&&s.enable(4),e.matcap&&s.enable(5),e.envMap&&s.enable(6),e.envMapCubeUV&&s.enable(7),e.lightMap&&s.enable(8),e.aoMap&&s.enable(9),e.emissiveMap&&s.enable(10),e.bumpMap&&s.enable(11),e.normalMap&&s.enable(12),e.objectSpaceNormalMap&&s.enable(13),e.tangentSpaceNormalMap&&s.enable(14),e.clearcoat&&s.enable(15),e.clearcoatMap&&s.enable(16),e.clearcoatRoughnessMap&&s.enable(17),e.clearcoatNormalMap&&s.enable(18),e.displacementMap&&s.enable(19),e.specularMap&&s.enable(20),e.roughnessMap&&s.enable(21),e.metalnessMap&&s.enable(22),e.gradientMap&&s.enable(23),e.alphaMap&&s.enable(24),e.alphaTest&&s.enable(25),e.vertexColors&&s.enable(26),e.vertexAlphas&&s.enable(27),e.vertexUvs&&s.enable(28),e.vertexTangents&&s.enable(29),e.uvsVertexOnly&&s.enable(30),e.fog&&s.enable(31),t.push(s.mask),s.disableAll(),e.useFog&&s.enable(0),e.flatShading&&s.enable(1),e.logarithmicDepthBuffer&&s.enable(2),e.skinning&&s.enable(3),e.useVertexTexture&&s.enable(4),e.morphTargets&&s.enable(5),e.morphNormals&&s.enable(6),e.premultipliedAlpha&&s.enable(7),e.shadowMapEnabled&&s.enable(8),e.physicallyCorrectLights&&s.enable(9),e.doubleSided&&s.enable(10),e.flipSided&&s.enable(11),e.depthPacking&&s.enable(12),e.dithering&&s.enable(13),e.specularIntensityMap&&s.enable(14),e.specularColorMap&&s.enable(15),e.transmission&&s.enable(16),e.transmissionMap&&s.enable(17),e.thicknessMap&&s.enable(18),e.sheen&&s.enable(19),e.sheenColorMap&&s.enable(20),e.sheenRoughnessMap&&s.enable(21),t.push(s.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e,n=g[t.type];if(n){var i=Si[n];e=ii.clone(i.uniforms)}else e=t.uniforms;return e},acquireProgram:function(e,n){for(var i,r=0,a=c.length;r<a;r++){var s=c[r];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new Do(t,n,e,o),c.push(i)),i},releaseProgram:function(t){if(0==--t.usedTimes){var e=c.indexOf(t);c[e]=c[c.length-1],c.pop(),t.destroy()}},releaseShaderCache:function(t){l.remove(t)},programs:c,dispose:function(){l.dispose()}}}function jo(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Fo(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function No(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function zo(){var t=[],e=0,n=[],i=[],r=[];function o(n,i,r,o,a,s){var l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},t[e]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),e++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){e=0,n.length=0,i.length=0,r.length=0},push:function(t,e,a,s,l,c){var u=o(t,e,a,s,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(t,e,a,s,l,c){var u=o(t,e,a,s,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(var n=e,i=t.length;n<i;n++){var r=t[n];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Fo),i.length>1&&i.sort(e||No),r.length>1&&r.sort(e||No)}}}function Ho(){var t=new WeakMap;return{get:function(e,n){var i;return!1===t.has(e)?(i=new zo,t.set(e,[i])):n>=t.get(e).length?(i=new zo,t.get(e).push(i)):i=t.get(e)[n],i},dispose:function(){t=new WeakMap}}}function Uo(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Wt,color:new hn};break;case"SpotLight":n={position:new Wt,direction:new Wt,color:new hn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Wt,color:new hn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Wt,skyColor:new hn,groundColor:new hn};break;case"RectAreaLight":n={color:new hn,position:new Wt,halfWidth:new Wt,halfHeight:new Wt}}return t[e.id]=n,n}}}var Wo=0;function Go(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Vo(t,e){for(var n=new Uo,i=function(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Et,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},o=0;o<9;o++)r.probe.push(new Wt);var a=new Wt,s=new be,l=new be;return{setup:function(o,a){for(var s=0,l=0,c=0,u=0;u<9;u++)r.probe[u].set(0,0,0);var p=0,h=0,d=0,_=0,f=0,m=0,y=0,g=0;o.sort(Go);for(var v=!0!==a?Math.PI:1,b=0,x=o.length;b<x;b++){var S=o[b],w=S.color,M=S.intensity,T=S.distance,C=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)s+=w.r*M*v,l+=w.g*M*v,c+=w.b*M*v;else if(S.isLightProbe)for(var E=0;E<9;E++)r.probe[E].addScaledVector(S.sh.coefficients[E],M);else if(S.isDirectionalLight){var A=n.get(S);if(A.color.copy(S.color).multiplyScalar(S.intensity*v),S.castShadow){var R=S.shadow,L=i.get(S);L.shadowBias=R.bias,L.shadowNormalBias=R.normalBias,L.shadowRadius=R.radius,L.shadowMapSize=R.mapSize,r.directionalShadow[p]=L,r.directionalShadowMap[p]=C,r.directionalShadowMatrix[p]=S.shadow.matrix,m++}r.directional[p]=A,p++}else if(S.isSpotLight){var P=n.get(S);if(P.position.setFromMatrixPosition(S.matrixWorld),P.color.copy(w).multiplyScalar(M*v),P.distance=T,P.coneCos=Math.cos(S.angle),P.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),P.decay=S.decay,S.castShadow){var D=S.shadow,I=i.get(S);I.shadowBias=D.bias,I.shadowNormalBias=D.normalBias,I.shadowRadius=D.radius,I.shadowMapSize=D.mapSize,r.spotShadow[d]=I,r.spotShadowMap[d]=C,r.spotShadowMatrix[d]=S.shadow.matrix,g++}r.spot[d]=P,d++}else if(S.isRectAreaLight){var k=n.get(S);k.color.copy(w).multiplyScalar(M),k.halfWidth.set(.5*S.width,0,0),k.halfHeight.set(0,.5*S.height,0),r.rectArea[_]=k,_++}else if(S.isPointLight){var O=n.get(S);if(O.color.copy(S.color).multiplyScalar(S.intensity*v),O.distance=S.distance,O.decay=S.decay,S.castShadow){var B=S.shadow,j=i.get(S);j.shadowBias=B.bias,j.shadowNormalBias=B.normalBias,j.shadowRadius=B.radius,j.shadowMapSize=B.mapSize,j.shadowCameraNear=B.camera.near,j.shadowCameraFar=B.camera.far,r.pointShadow[h]=j,r.pointShadowMap[h]=C,r.pointShadowMatrix[h]=S.shadow.matrix,y++}r.point[h]=O,h++}else if(S.isHemisphereLight){var F=n.get(S);F.skyColor.copy(S.color).multiplyScalar(M*v),F.groundColor.copy(S.groundColor).multiplyScalar(M*v),r.hemi[f]=F,f++}}_>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=xi.LTC_FLOAT_1,r.rectAreaLTC2=xi.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=xi.LTC_HALF_1,r.rectAreaLTC2=xi.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=s,r.ambient[1]=l,r.ambient[2]=c;var N=r.hash;N.directionalLength===p&&N.pointLength===h&&N.spotLength===d&&N.rectAreaLength===_&&N.hemiLength===f&&N.numDirectionalShadows===m&&N.numPointShadows===y&&N.numSpotShadows===g||(r.directional.length=p,r.spot.length=d,r.rectArea.length=_,r.point.length=h,r.hemi.length=f,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=y,r.pointShadowMap.length=y,r.spotShadow.length=g,r.spotShadowMap.length=g,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=y,r.spotShadowMatrix.length=g,N.directionalLength=p,N.pointLength=h,N.spotLength=d,N.rectAreaLength=_,N.hemiLength=f,N.numDirectionalShadows=m,N.numPointShadows=y,N.numSpotShadows=g,r.version=Wo++)},setupView:function(t,e){for(var n=0,i=0,o=0,c=0,u=0,p=e.matrixWorldInverse,h=0,d=t.length;h<d;h++){var _=t[h];if(_.isDirectionalLight){var f=r.directional[n];f.direction.setFromMatrixPosition(_.matrixWorld),a.setFromMatrixPosition(_.target.matrixWorld),f.direction.sub(a),f.direction.transformDirection(p),n++}else if(_.isSpotLight){var m=r.spot[o];m.position.setFromMatrixPosition(_.matrixWorld),m.position.applyMatrix4(p),m.direction.setFromMatrixPosition(_.matrixWorld),a.setFromMatrixPosition(_.target.matrixWorld),m.direction.sub(a),m.direction.transformDirection(p),o++}else if(_.isRectAreaLight){var y=r.rectArea[c];y.position.setFromMatrixPosition(_.matrixWorld),y.position.applyMatrix4(p),l.identity(),s.copy(_.matrixWorld),s.premultiply(p),l.extractRotation(s),y.halfWidth.set(.5*_.width,0,0),y.halfHeight.set(0,.5*_.height,0),y.halfWidth.applyMatrix4(l),y.halfHeight.applyMatrix4(l),c++}else if(_.isPointLight){var g=r.point[i];g.position.setFromMatrixPosition(_.matrixWorld),g.position.applyMatrix4(p),i++}else if(_.isHemisphereLight){var v=r.hemi[u];v.direction.setFromMatrixPosition(_.matrixWorld),v.direction.transformDirection(p),v.direction.normalize(),u++}}},state:r}}function qo(t,e){var n=new Vo(t,e),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(t){n.setup(i,t)},setupLightsView:function(t){n.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function Xo(t,e){var n=new WeakMap;return{get:function(i){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(i)?(r=new qo(t,e),n.set(i,[r])):o>=n.get(i).length?(r=new qo(t,e),n.get(i).push(r)):r=n.get(i)[o],r},dispose:function(){n=new WeakMap}}}var Yo=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="MeshDepthMaterial",i.depthPacking=3200,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}]),n}(on);Yo.prototype.isMeshDepthMaterial=!0;var Zo=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="MeshDistanceMaterial",i.referencePosition=new Wt,i.nearDistance=1,i.farDistance=1e3,i.map=null,i.alphaMap=null,i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.fog=!1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}]),n}(on);function Jo(t,e,n){var i=new mi,r=new Et,o=new Et,a=new Ft,s=new Yo({depthPacking:3201}),l=new Zo,c={},u=n.maxTextureSize,p={0:1,1:0,2:2},h=new ri({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Et},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),d=h.clone();d.defines.HORIZONTAL_PASS=1;var _=new kn;_.setAttribute("position",new mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var f=new Qn(_,h),m=this;function y(n,i){var r=e.update(f);h.defines.VSM_SAMPLES!==n.blurSamples&&(h.defines.VSM_SAMPLES=n.blurSamples,d.defines.VSM_SAMPLES=n.blurSamples,h.needsUpdate=!0,d.needsUpdate=!0),h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,h,f,null),d.uniforms.shadow_pass.value=n.mapPass.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,d,f,null)}function g(e,n,i,r,o,a,u){var h=null,d=!0===r.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(h=void 0!==d?d:!0===r.isPointLight?l:s,t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){var _=h.uuid,f=i.uuid,m=c[_];void 0===m&&(m={},c[_]=m);var y=m[f];void 0===y&&(y=h.clone(),m[f]=y),h=y}return h.visible=i.visible,h.wireframe=i.wireframe,h.side=3===u?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:p[i.side],h.alphaMap=i.alphaMap,h.alphaTest=i.alphaTest,h.clipShadows=i.clipShadows,h.clippingPlanes=i.clippingPlanes,h.clipIntersection=i.clipIntersection,h.displacementMap=i.displacementMap,h.displacementScale=i.displacementScale,h.displacementBias=i.displacementBias,h.wireframeLinewidth=i.wireframeLinewidth,h.linewidth=i.linewidth,!0===r.isPointLight&&!0===h.isMeshDistanceMaterial&&(h.referencePosition.setFromMatrixPosition(r.matrixWorld),h.nearDistance=o,h.farDistance=a),h}function v(n,r,o,a,s){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&3===s)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var l=e.update(n),c=n.material;if(Array.isArray(c))for(var u=l.groups,p=0,h=u.length;p<h;p++){var d=u[p],_=c[d.materialIndex];if(_&&_.visible){var f=g(n,0,_,a,o.near,o.far,s);t.renderBufferDirect(o,null,l,f,n,d)}}else if(c.visible){var m=g(n,0,c,a,o.near,o.far,s);t.renderBufferDirect(o,null,l,m,n,null)}}for(var y=n.children,b=0,x=y.length;b<x;b++)v(y[b],r,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,s){if(!1!==m.enabled&&(!1!==m.autoUpdate||!1!==m.needsUpdate)&&0!==e.length){var l=t.getRenderTarget(),c=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),h=t.state;h.setBlending(0),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var d=0,_=e.length;d<_;d++){var f=e[d],g=f.shadow;if(void 0!==g){if(!1!==g.autoUpdate||!1!==g.needsUpdate){r.copy(g.mapSize);var b=g.getFrameExtents();if(r.multiply(b),o.copy(g.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(o.x=Math.floor(u/b.x),r.x=o.x*b.x,g.mapSize.x=o.x),r.y>u&&(o.y=Math.floor(u/b.y),r.y=o.y*b.y,g.mapSize.y=o.y)),null===g.map&&!g.isPointLightShadow&&3===this.type){var x={minFilter:P,magFilter:P,format:H};g.map=new Nt(r.x,r.y,x),g.map.texture.name=f.name+".shadowMap",g.mapPass=new Nt(r.x,r.y,x),g.camera.updateProjectionMatrix()}if(null===g.map){var S={minFilter:M,magFilter:M,format:H};g.map=new Nt(r.x,r.y,S),g.map.texture.name=f.name+".shadowMap",g.camera.updateProjectionMatrix()}t.setRenderTarget(g.map),t.clear();for(var w=g.getViewportCount(),T=0;T<w;T++){var C=g.getViewport(T);a.set(o.x*C.x,o.y*C.y,o.x*C.z,o.y*C.w),h.viewport(a),g.updateMatrices(f,T),i=g.getFrustum(),v(n,s,g.camera,f,this.type)}g.isPointLightShadow||3!==this.type||y(g,s),g.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}m.needsUpdate=!1,t.setRenderTarget(l,c,p)}}}function Ko(t,e,n){var r,o=n.isWebGL2,a=new function(){var e=!1,n=new Ft,i=null,r=new Ft(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?N(2929):z(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}},l=new function(){var e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?N(2960):z(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}},c={},p={},h=null,d=!1,_=null,f=null,m=null,y=null,g=null,v=null,b=null,x=!1,S=null,w=null,M=null,T=null,C=null,E=t.getParameter(35661),A=!1,R=0,L=t.getParameter(7938);-1!==L.indexOf("WebGL")?(R=parseFloat(/^WebGL (\d)/.exec(L)[1]),A=R>=1):-1!==L.indexOf("OpenGL ES")&&(R=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),A=R>=2);var P=null,D={},I=t.getParameter(3088),k=t.getParameter(2978),O=(new Ft).fromArray(I),B=(new Ft).fromArray(k);function j(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<i;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return o}var F={};function N(e){!0!==c[e]&&(t.enable(e),c[e]=!0)}function z(e){!1!==c[e]&&(t.disable(e),c[e]=!1)}F[3553]=j(3553,3553,1),F[34067]=j(34067,34069,6),a.setClear(0,0,0,1),s.setClear(1),l.setClear(0),N(2929),s.setFunc(3),V(!1),q(1),N(2884),G(0);var H=(r={},u()(r,i,32774),u()(r,101,32778),u()(r,102,32779),r);if(o)H[103]=32775,H[104]=32776;else{var U=e.get("EXT_blend_minmax");null!==U&&(H[103]=U.MIN_EXT,H[104]=U.MAX_EXT)}var W={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function G(e,n,r,o,a,s,l,c){if(0!==e){if(!1===d&&(N(3042),d=!0),5===e)a=a||n,s=s||r,l=l||o,n===f&&a===g||(t.blendEquationSeparate(H[n],H[a]),f=n,g=a),r===m&&o===y&&s===v&&l===b||(t.blendFuncSeparate(W[r],W[o],W[s],W[l]),m=r,y=o,v=s,b=l),_=e,x=null;else if(e!==_||c!==x){if(f===i&&g===i||(t.blendEquation(32774),f=i,g=i),c)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,0,769,771);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFunc(0,769);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}m=null,y=null,v=null,b=null,_=e,x=c}}else!0===d&&(z(3042),d=!1)}function V(e){S!==e&&(e?t.frontFace(2304):t.frontFace(2305),S=e)}function q(e){0!==e?(N(2884),e!==w&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):z(2884),w=e}function X(e,n,i){e?(N(32823),T===n&&C===i||(t.polygonOffset(n,i),T=n,C=i)):z(32823)}function Y(e){void 0===e&&(e=33984+E-1),P!==e&&(t.activeTexture(e),P=e)}return{buffers:{color:a,depth:s,stencil:l},enable:N,disable:z,bindFramebuffer:function(e,n){return p[e]!==n&&(t.bindFramebuffer(e,n),p[e]=n,o&&(36009===e&&(p[36160]=n),36160===e&&(p[36009]=n)),!0)},useProgram:function(e){return h!==e&&(t.useProgram(e),h=e,!0)},setBlending:G,setMaterial:function(t,e){2===t.side?z(2884):N(2884);var n=1===t.side;e&&(n=!n),V(n),1===t.blending&&!1===t.transparent?G(0):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),s.setFunc(t.depthFunc),s.setTest(t.depthTest),s.setMask(t.depthWrite),a.setMask(t.colorWrite);var i=t.stencilWrite;l.setTest(i),i&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),X(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?N(32926):z(32926)},setFlipSided:V,setCullFace:q,setLineWidth:function(e){e!==M&&(A&&t.lineWidth(e),M=e)},setPolygonOffset:X,setScissorTest:function(t){t?N(3089):z(3089)},activeTexture:Y,bindTexture:function(e,n){null===P&&Y();var i=D[P];void 0===i&&(i={type:void 0,texture:void 0},D[P]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||F[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=D[P];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===O.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),O.copy(e))},viewport:function(e){!1===B.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),B.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===o&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),c={},P=null,D={},p={},h=null,d=!1,_=null,f=null,m=null,y=null,g=null,v=null,b=null,x=!1,S=null,w=null,M=null,T=null,C=null,O.set(0,0,t.canvas.width,t.canvas.height),B.set(0,0,t.canvas.width,t.canvas.height),a.reset(),s.reset(),l.reset()}}}function Qo(t,e,n,i,r,o,a){var s,l,c,p=r.isWebGL2,h=r.maxTextures,d=r.maxCubemapSize,_=r.maxTextureSize,f=r.maxSamples,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):void 0,y=new WeakMap,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function b(t,e){return g?new OffscreenCanvas(t,e):It("canvas")}function S(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?Tt:Math.floor,a=o(r*t.width),s=o(r*t.height);void 0===c&&(c=b(a,s));var l=n?b(a,s):c;return l.width=a,l.height=s,l.getContext("2d").drawImage(t,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+s+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function C(t){return wt(t.width)&&wt(t.height)}function E(t,e){return t.generateMipmaps&&e&&t.minFilter!==M&&t.minFilter!==P}function R(e){t.generateMipmap(e)}function L(n,i,r,o){if(!1===p)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=o===lt?35907:32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function k(t,e,n){return!0===E(t,n)||t.isFramebufferTexture&&t.minFilter!==M&&t.minFilter!==P?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function G(t){return t===M||t===T||t===A?9728:9729}function V(e){var n=e.target;n.removeEventListener("dispose",V),function(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}(n),n.isVideoTexture&&y.delete(n),a.memory.textures--}function q(e){var n=e.target;n.removeEventListener("dispose",q),function(e){var n=e.texture,r=i.get(e),o=i.get(n);if(e){if(void 0!==o.__webglTexture&&(t.deleteTexture(o.__webglTexture),a.memory.textures--),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var s=0;s<6;s++)t.deleteFramebuffer(r.__webglFramebuffer[s]),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer[s]);else t.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&t.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&t.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer&&t.deleteRenderbuffer(r.__webglColorRenderbuffer),r.__webglDepthRenderbuffer&&t.deleteRenderbuffer(r.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var l=0,c=n.length;l<c;l++){var u=i.get(n[l]);u.__webglTexture&&(t.deleteTexture(u.__webglTexture),a.memory.textures--),i.remove(n[l])}i.remove(n),i.remove(e)}}(n)}var X=0;function Y(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=a.render.frame;y.get(t)!==e&&(y.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void tt(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function Z(e,r){var a=i.get(e);e.version>0&&a.__version!==e.version?function(e,i,r){if(6===i.image.length){$(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);for(var a=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),s=i.image[0]&&i.image[0].isDataTexture,l=[],c=0;c<6;c++)l[c]=a||s?s?i.image[c].image:i.image[c]:S(i.image[c],!1,!0,d);var u,h=l[0],_=C(h)||p,f=o.convert(i.format),m=o.convert(i.type),y=L(i.internalFormat,f,m,i.encoding),g=p&&!0!==i.isVideoTexture,v=void 0===e.__version,b=k(i,h,_);if(Q(34067,i,_),a){g&&v&&n.texStorage2D(34067,b,y,h.width,h.height);for(var x=0;x<6;x++){u=l[x].mipmaps;for(var w=0;w<u.length;w++){var M=u[w];i.format!==H&&i.format!==z?null!==f?g?n.compressedTexSubImage2D(34069+x,w,0,0,M.width,M.height,f,M.data):n.compressedTexImage2D(34069+x,w,y,M.width,M.height,0,M.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):g?n.texSubImage2D(34069+x,w,0,0,M.width,M.height,f,m,M.data):n.texImage2D(34069+x,w,y,M.width,M.height,0,f,m,M.data)}}}else{u=i.mipmaps,g&&v&&(u.length>0&&b++,n.texStorage2D(34067,b,y,l[0].width,l[0].height));for(var T=0;T<6;T++)if(s){g?n.texSubImage2D(34069+T,0,0,0,l[T].width,l[T].height,f,m,l[T].data):n.texImage2D(34069+T,0,y,l[T].width,l[T].height,0,f,m,l[T].data);for(var A=0;A<u.length;A++){var P=u[A].image[T].image;g?n.texSubImage2D(34069+T,A+1,0,0,P.width,P.height,f,m,P.data):n.texImage2D(34069+T,A+1,y,P.width,P.height,0,f,m,P.data)}}else{g?n.texSubImage2D(34069+T,0,0,0,f,m,l[T]):n.texImage2D(34069+T,0,y,f,m,l[T]);for(var D=0;D<u.length;D++){var I=u[D];g?n.texSubImage2D(34069+T,D+1,0,0,f,m,I.image[T]):n.texImage2D(34069+T,D+1,y,f,m,I.image[T])}}}E(i,_)&&R(34067),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}}(a,e,r):(n.activeTexture(33984+r),n.bindTexture(34067,a.__webglTexture))}var J=(s={},u()(s,v,10497),u()(s,x,33071),u()(s,w,33648),s),K=(l={},u()(l,M,9728),u()(l,T,9984),u()(l,A,9986),u()(l,P,9729),u()(l,D,9985),u()(l,I,9987),l);function Q(n,o,a){if(a?(t.texParameteri(n,10242,J[o.wrapS]),t.texParameteri(n,10243,J[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,J[o.wrapR]),t.texParameteri(n,10240,K[o.magFilter]),t.texParameteri(n,10241,K[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===x&&o.wrapT===x||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,G(o.magFilter)),t.texParameteri(n,10241,G(o.minFilter)),o.minFilter!==M&&o.minFilter!==P&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var s=e.get("EXT_texture_filter_anisotropic");if(o.type===j&&!1===e.has("OES_texture_float_linear"))return;if(!1===p&&o.type===F&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function $(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",V),e.__webglTexture=t.createTexture(),a.memory.textures++)}function tt(e,i,r){var a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),$(e,i),n.activeTexture(33984+r),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment),t.pixelStorei(37443,0);var s,l=function(t){return!p&&(t.wrapS!==x||t.wrapT!==x||t.minFilter!==M&&t.minFilter!==P)}(i)&&!1===C(i.image),c=S(i.image,l,!1,_),u=C(c)||p,h=o.convert(i.format),d=o.convert(i.type),f=L(i.internalFormat,h,d,i.encoding);Q(a,i,u);var m=i.mipmaps,y=p&&!0!==i.isVideoTexture,g=void 0===e.__version,v=k(i,c,u);if(i.isDepthTexture)f=6402,p?f=i.type===j?36012:i.type===B?33190:i.type===N?35056:33189:i.type===j&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===U&&6402===f&&i.type!==O&&i.type!==B&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=O,d=o.convert(i.type)),i.format===W&&6402===f&&(f=34041,i.type!==N&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=N,d=o.convert(i.type))),y&&g?n.texStorage2D(3553,1,f,c.width,c.height):n.texImage2D(3553,0,f,c.width,c.height,0,h,d,null);else if(i.isDataTexture)if(m.length>0&&u){y&&g&&n.texStorage2D(3553,v,f,m[0].width,m[0].height);for(var b=0,w=m.length;b<w;b++)s=m[b],y?n.texSubImage2D(3553,0,0,0,s.width,s.height,h,d,s.data):n.texImage2D(3553,b,f,s.width,s.height,0,h,d,s.data);i.generateMipmaps=!1}else y?(g&&n.texStorage2D(3553,v,f,c.width,c.height),n.texSubImage2D(3553,0,0,0,c.width,c.height,h,d,c.data)):n.texImage2D(3553,0,f,c.width,c.height,0,h,d,c.data);else if(i.isCompressedTexture){y&&g&&n.texStorage2D(3553,v,f,m[0].width,m[0].height);for(var T=0,A=m.length;T<A;T++)s=m[T],i.format!==H&&i.format!==z?null!==h?y?n.compressedTexSubImage2D(3553,T,0,0,s.width,s.height,h,s.data):n.compressedTexImage2D(3553,T,f,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):y?n.texSubImage2D(3553,T,0,0,s.width,s.height,h,d,s.data):n.texImage2D(3553,T,f,s.width,s.height,0,h,d,s.data)}else if(i.isDataTexture2DArray)y?(g&&n.texStorage3D(35866,v,f,c.width,c.height,c.depth),n.texSubImage3D(35866,0,0,0,0,c.width,c.height,c.depth,h,d,c.data)):n.texImage3D(35866,0,f,c.width,c.height,c.depth,0,h,d,c.data);else if(i.isDataTexture3D)y?(g&&n.texStorage3D(32879,v,f,c.width,c.height,c.depth),n.texSubImage3D(32879,0,0,0,0,c.width,c.height,c.depth,h,d,c.data)):n.texImage3D(32879,0,f,c.width,c.height,c.depth,0,h,d,c.data);else if(i.isFramebufferTexture)y&&g?n.texStorage2D(3553,v,f,c.width,c.height):n.texImage2D(3553,0,f,c.width,c.height,0,h,d,null);else if(m.length>0&&u){y&&g&&n.texStorage2D(3553,v,f,m[0].width,m[0].height);for(var D=0,I=m.length;D<I;D++)s=m[D],y?n.texSubImage2D(3553,D,0,0,h,d,s):n.texImage2D(3553,D,f,h,d,s);i.generateMipmaps=!1}else y?(g&&n.texStorage2D(3553,v,f,c.width,c.height),n.texSubImage2D(3553,0,0,0,h,d,c)):n.texImage2D(3553,0,f,h,d,c);E(i,u)&&R(a),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function et(e,r,a,s,l){var c=o.convert(a.format),u=o.convert(a.type),p=L(a.internalFormat,c,u,a.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,p,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,p,r.width,r.height,0,c,u,null)),n.bindFramebuffer(36160,e),r.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,s,l,i.get(a).__webglTexture,0,rt(r)):t.framebufferTexture2D(36160,s,l,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function nt(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i||n.useRenderToTexture){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===j?r=36012:a.type===B&&(r=33190));var s=rt(n);n.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,s,r,n.width,n.height):t.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){var l=rt(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,l,35056,n.width,n.height):n.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,l,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{var c=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,u=o.convert(c.format),p=o.convert(c.type),h=L(c.internalFormat,u,p,c.encoding),d=rt(n);i&&n.useRenderbuffer?t.renderbufferStorageMultisample(36161,d,h,n.width,n.height):n.useRenderToTexture?m.renderbufferStorageMultisampleEXT(36161,d,h,n.width,n.height):t.renderbufferStorage(36161,h,n.width,n.height)}t.bindRenderbuffer(36161,null)}function it(e){var r=i.get(e),o=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!r.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),Y(r.depthTexture,0);var o=i.get(r.depthTexture).__webglTexture,a=rt(r);if(r.depthTexture.format===U)r.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,36096,3553,o,0,a):t.framebufferTexture2D(36160,36096,3553,o,0);else{if(r.depthTexture.format!==W)throw new Error("Unknown depthTexture format");r.useRenderToTexture?m.framebufferTexture2DMultisampleEXT(36160,33306,3553,o,0,a):t.framebufferTexture2D(36160,33306,3553,o,0)}}(r.__webglFramebuffer,e)}else if(o){r.__webglDepthbuffer=[];for(var a=0;a<6;a++)n.bindFramebuffer(36160,r.__webglFramebuffer[a]),r.__webglDepthbuffer[a]=t.createRenderbuffer(),nt(r.__webglDepthbuffer[a],e,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=t.createRenderbuffer(),nt(r.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function rt(t){return p&&(t.useRenderbuffer||t.useRenderToTexture)?Math.min(f,t.samples):0}var ot=!1,at=!1;this.allocateTextureUnit=function(){var t=X;return t>=h&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+h),X+=1,t},this.resetTextureUnits=function(){X=0},this.setTexture2D=Y,this.setTexture2DArray=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?tt(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?tt(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=Z,this.rebindTextures=function(t,e,n){var r=i.get(t);void 0!==e&&et(r.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&it(t)},this.setupRenderTarget=function(e){var s=e.texture,l=i.get(e),c=i.get(s);e.addEventListener("dispose",q),!0!==e.isWebGLMultipleRenderTargets&&(void 0===c.__webglTexture&&(c.__webglTexture=t.createTexture()),c.__version=s.version,a.memory.textures++);var u=!0===e.isWebGLCubeRenderTarget,h=!0===e.isWebGLMultipleRenderTargets,d=s.isDataTexture3D||s.isDataTexture2DArray,_=C(e)||p;if(!p||s.format!==z||s.type!==j&&s.type!==F||(s.format=H,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),u){l.__webglFramebuffer=[];for(var f=0;f<6;f++)l.__webglFramebuffer[f]=t.createFramebuffer()}else if(l.__webglFramebuffer=t.createFramebuffer(),h)if(r.drawBuffers)for(var m=e.texture,y=0,g=m.length;y<g;y++){var v=i.get(m[y]);void 0===v.__webglTexture&&(v.__webglTexture=t.createTexture(),a.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(e.useRenderbuffer)if(p){l.__webglMultisampledFramebuffer=t.createFramebuffer(),l.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,l.__webglColorRenderbuffer);var b=o.convert(s.format),x=o.convert(s.type),S=L(s.internalFormat,b,x,s.encoding),w=rt(e);t.renderbufferStorageMultisample(36161,w,S,e.width,e.height),n.bindFramebuffer(36160,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,l.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(l.__webglDepthRenderbuffer=t.createRenderbuffer(),nt(l.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,c.__webglTexture),Q(34067,s,_);for(var M=0;M<6;M++)et(l.__webglFramebuffer[M],e,s,36064,34069+M);E(s,_)&&R(34067),n.unbindTexture()}else if(h){for(var T=e.texture,A=0,P=T.length;A<P;A++){var D=T[A],I=i.get(D);n.bindTexture(3553,I.__webglTexture),Q(3553,D,_),et(l.__webglFramebuffer,e,D,36064+A,3553),E(D,_)&&R(3553)}n.unbindTexture()}else{var k=3553;d&&(p?k=s.isDataTexture3D?32879:35866:console.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.")),n.bindTexture(k,c.__webglTexture),Q(k,s,_),et(l.__webglFramebuffer,e,s,36064,k),E(s,_)&&R(k),n.unbindTexture()}e.depthBuffer&&it(e)},this.updateRenderTargetMipmap=function(t){for(var e=C(t)||p,r=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],o=0,a=r.length;o<a;o++){var s=r[o];if(E(s,e)){var l=t.isWebGLCubeRenderTarget?34067:3553,c=i.get(s).__webglTexture;n.bindTexture(l,c),R(l),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.useRenderbuffer)if(p){var r=e.width,o=e.height,a=16384,s=[36064],l=e.stencilBuffer?33306:36096;e.depthBuffer&&s.push(l),e.ignoreDepthForMultisampleCopy||(e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024));var c=i.get(e);n.bindFramebuffer(36008,c.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,c.__webglFramebuffer),e.ignoreDepthForMultisampleCopy&&(t.invalidateFramebuffer(36008,[l]),t.invalidateFramebuffer(36009,[l])),t.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),t.invalidateFramebuffer(36008,s),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,c.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.setupDepthRenderbuffer=it,this.setupFrameBufferTexture=et,this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===ot&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ot=!0),t=t.texture),Y(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===at&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),at=!0),t=t.texture),Z(t,e)}}function $o(t,e,n){var i=n.isWebGL2;return{convert:function(t){var n;if(t===k)return 5121;if(1017===t)return 32819;if(1018===t)return 32820;if(1019===t)return 33635;if(1010===t)return 5120;if(1011===t)return 5122;if(t===O)return 5123;if(1013===t)return 5124;if(t===B)return 5125;if(t===j)return 5126;if(t===F)return i?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(1021===t)return 6406;if(t===z)return 6407;if(t===H)return 6408;if(1024===t)return 6409;if(1025===t)return 6410;if(t===U)return 6402;if(t===W)return 34041;if(1028===t)return 6403;if(1029===t)return 36244;if(1030===t)return 33319;if(1031===t)return 33320;if(1032===t)return 36248;if(1033===t)return 36249;if(t===G||t===V||t===q||t===X){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===G)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===V)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===q)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===X)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Y||t===Z||t===J||t===K){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===Y)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Z)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===J)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===K)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===t)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===Q||t===$)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(t===Q)return n.COMPRESSED_RGB8_ETC2;if(t===$)return n.COMPRESSED_RGBA8_ETC2_EAC}return 37808===t||37809===t||37810===t||37811===t||37812===t||37813===t||37814===t||37815===t||37816===t||37817===t||37818===t||37819===t||37820===t||37821===t||37840===t||37841===t||37842===t||37843===t||37844===t||37845===t||37846===t||37847===t||37848===t||37849===t||37850===t||37851===t||37852===t||37853===t?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:36492===t?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:t===N?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}Zo.prototype.isMeshDistanceMaterial=!0;var ta=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return b()(this,n),(t=e.call(this)).cameras=i,t}return S()(n)}(ai);ta.prototype.isArrayCamera=!0;var ea=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="Group",t}return S()(n)}(Ve);ea.prototype.isGroup=!0;var na={type:"move"},ia=function(){function t(){b()(this,t),this._targetRay=null,this._grip=null,this._hand=null}return S()(t,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new ea,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new ea,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Wt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Wt),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new ea,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Wt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Wt),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,e,n){var i=null,r=null,o=null,a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==a&&(null!==(i=e.getPose(t.targetRaySpace,n))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(na))),l&&t.hand){o=!0;var c,u=E(t.hand.values());try{for(u.s();!(c=u.n()).done;){var p=c.value,h=e.getJointPose(p,n);if(void 0===l.joints[p.jointName]){var d=new ea;d.matrixAutoUpdate=!1,d.visible=!1,l.joints[p.jointName]=d,l.add(d)}var _=l.joints[p.jointName];null!==h&&(_.matrix.fromArray(h.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=h.radius),_.visible=null!==h}}catch(t){u.e(t)}finally{u.f()}var f=l.joints["index-finger-tip"],m=l.joints["thumb-tip"],y=f.position.distanceTo(m.position);l.inputState.pinching&&y>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&y<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==s&&t.gripSpace&&(null!==(r=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}}]),t}(),ra=function(t){_()(n,t);var e=L(n);function n(t,i,r,o,a,s,l,c,u,p){var h;if(b()(this,n),(p=void 0!==p?p:U)!==U&&p!==W)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===r&&p===U&&(r=O),void 0===r&&p===W&&(r=N),(h=e.call(this,null,o,a,s,l,c,p,r,u)).image={width:t,height:i},h.magFilter=void 0!==l?l:M,h.minFilter=void 0!==c?c:M,h.flipY=!1,h.generateMipmaps=!1,h}return S()(n)}(Bt);ra.prototype.isDepthTexture=!0;var oa=function(t){_()(n,t);var e=L(n);function n(t,i){var o;b()(this,n),o=e.call(this);var a=h()(o),s=null,l=1,c=null,u="local-floor",p=t.extensions.has("WEBGL_multisampled_render_to_texture"),d=null,_=null,f=null,m=null,y=!1,g=null,v=i.getContextAttributes(),x=null,S=null,w=[],M=new Map,T=new ai;T.layers.enable(1),T.viewport=new Ft;var E=new ai;E.layers.enable(2),E.viewport=new Ft;var A=[T,E],R=new ta;R.layers.enable(1),R.layers.enable(2);var L=null,P=null;function D(t){var e=M.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function I(){M.forEach((function(t,e){t.disconnect(e)})),M.clear(),L=null,P=null,t.setRenderTarget(x),m=null,f=null,_=null,s=null,S=null,q.stop(),a.isPresenting=!1,a.dispatchEvent({type:"sessionend"})}function B(t){for(var e=s.inputSources,n=0;n<w.length;n++)M.set(e[n],w[n]);for(var i=0;i<t.removed.length;i++){var r=t.removed[i],o=M.get(r);o&&(o.dispatchEvent({type:"disconnected",data:r}),M.delete(r))}for(var a=0;a<t.added.length;a++){var l=t.added[a],c=M.get(l);c&&c.dispatchEvent({type:"connected",data:l})}}o.cameraAutoUpdate=!0,o.enabled=!1,o.isPresenting=!1,o.getController=function(t){var e=w[t];return void 0===e&&(e=new ia,w[t]=e),e.getTargetRaySpace()},o.getControllerGrip=function(t){var e=w[t];return void 0===e&&(e=new ia,w[t]=e),e.getGripSpace()},o.getHand=function(t){var e=w[t];return void 0===e&&(e=new ia,w[t]=e),e.getHandSpace()},o.setFramebufferScaleFactor=function(t){l=t,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},o.setReferenceSpaceType=function(t){u=t,!0===a.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},o.getReferenceSpace=function(){return c},o.getBaseLayer=function(){return null!==f?f:m},o.getBinding=function(){return _},o.getFrame=function(){return g},o.getSession=function(){return s},o.setSession=function(){var e=r()(C.a.mark((function e(n){var r,o,h,d,g;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(s=n)){e.next=32;break}if(x=t.getRenderTarget(),s.addEventListener("select",D),s.addEventListener("selectstart",D),s.addEventListener("selectend",D),s.addEventListener("squeeze",D),s.addEventListener("squeezestart",D),s.addEventListener("squeezeend",D),s.addEventListener("end",I),s.addEventListener("inputsourceschange",B),e.t0=!0!==v.xrCompatible,!e.t0){e.next=14;break}return e.next=14,i.makeXRCompatible();case 14:if(void 0!==s.renderState.layers&&!1!==t.capabilities.isWebGL2){e.next=19;break}r={antialias:void 0!==s.renderState.layers||v.antialias,alpha:v.alpha,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:l},m=new XRWebGLLayer(s,i,r),s.updateRenderState({baseLayer:m}),S=new Nt(m.framebufferWidth,m.framebufferHeight,{format:H,type:k,encoding:t.outputEncoding}),e.next=24;break;case 19:y=v.antialias,o=null,h=null,d=null,v.depth&&(d=v.stencil?35056:33190,o=v.stencil?W:U,h=v.stencil?N:O),g={colorFormat:v.alpha||y?32856:32849,depthFormat:d,scaleFactor:l},_=new XRWebGLBinding(s,i),f=_.createProjectionLayer(g),s.updateRenderState({layers:[f]}),S=y?new Ht(f.textureWidth,f.textureHeight,{format:H,type:k,depthTexture:new ra(f.textureWidth,f.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:v.stencil,ignoreDepth:f.ignoreDepthValues,useRenderToTexture:p,encoding:t.outputEncoding}):new Nt(f.textureWidth,f.textureHeight,{format:v.alpha?H:z,type:k,depthTexture:new ra(f.textureWidth,f.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,o),stencilBuffer:v.stencil,ignoreDepth:f.ignoreDepthValues,encoding:t.outputEncoding});case 24:return this.setFoveation(1),e.next=27,s.requestReferenceSpace(u);case 27:c=e.sent,q.setContext(s),q.start(),a.isPresenting=!0,a.dispatchEvent({type:"sessionstart"});case 32:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var j=new Wt,F=new Wt;function G(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}o.updateCamera=function(t){if(null!==s){R.near=E.near=T.near=t.near,R.far=E.far=T.far=t.far,L===R.near&&P===R.far||(s.updateRenderState({depthNear:R.near,depthFar:R.far}),L=R.near,P=R.far);var e=t.parent,n=R.cameras;G(R,e);for(var i=0;i<n.length;i++)G(n[i],e);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),t.position.copy(R.position),t.quaternion.copy(R.quaternion),t.scale.copy(R.scale),t.matrix.copy(R.matrix),t.matrixWorld.copy(R.matrixWorld);for(var r=t.children,o=0,a=r.length;o<a;o++)r[o].updateMatrixWorld(!0);2===n.length?function(t,e,n){j.setFromMatrixPosition(e.matrixWorld),F.setFromMatrixPosition(n.matrixWorld);var i=j.distanceTo(F),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],p=(o[8]+1)/o[0],h=a*u,d=a*p,_=i/(-u+p),f=_*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(f),t.translateZ(_),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var m=a+_,y=s+_,g=h-f,v=d+(i-f),b=l*s/y*m,x=c*s/y*m;t.projectionMatrix.makePerspective(g,v,b,x,m,y)}(R,T,E):R.projectionMatrix.copy(T.projectionMatrix)}},o.getCamera=function(){return R},o.getFoveation=function(){return null!==f?f.fixedFoveation:null!==m?m.fixedFoveation:void 0},o.setFoveation=function(t){null!==f&&(f.fixedFoveation=t),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=t)};var V=null,q=new yi;return q.setAnimationLoop((function(e,n){if(d=n.getViewerPose(c),g=n,null!==d){var i=d.views;null!==m&&(t.setRenderTargetFramebuffer(S,m.framebuffer),t.setRenderTarget(S));var r=!1;i.length!==R.cameras.length&&(R.cameras.length=0,r=!0);for(var o=0;o<i.length;o++){var a=i[o],l=null;if(null!==m)l=m.getViewport(a);else{var u=_.getViewSubImage(f,a);l=u.viewport,0===o&&(t.setRenderTargetTextures(S,u.colorTexture,f.ignoreDepthValues?void 0:u.depthStencilTexture),t.setRenderTarget(S))}var p=A[o];p.matrix.fromArray(a.transform.matrix),p.projectionMatrix.fromArray(a.projectionMatrix),p.viewport.set(l.x,l.y,l.width,l.height),0===o&&R.matrix.copy(p.matrix),!0===r&&R.cameras.push(p)}}for(var h=s.inputSources,y=0;y<w.length;y++){var v=w[y],b=h[y];v.update(b,n,c)}V&&V(e,n),g=null})),o.setAnimationLoop=function(t){V=t},o.dispose=function(){},o}return S()(n)}(dt);function aa(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);var i,r,o=t.get(n).envMap;o&&(e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularColorMap?i=n.specularColorMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap?i=n.thicknessMap:n.sheenColorMap?i=n.sheenColorMap:n.sheenRoughnessMap&&(i=n.sheenRoughnessMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix)),n.aoMap?r=n.aoMap:n.lightMap&&(r=n.lightMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uv2Transform.value.copy(r.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,o,a){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap)),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate())),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=i.texture,t.transmissionSamplerSize.value.set(i.width,i.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,i,a):n(t,i)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){var r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,r,o):i.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function sa(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=void 0!==t.canvas?t.canvas:function(){var t=It("canvas");return t.style.display="block",t}(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,p=null,h=null,d=[],_=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=st,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var f=this,m=!1,y=0,g=0,v=null,b=-1,S=null,w=new Ft,T=new Ft,C=null,E=e.width,A=e.height,R=1,L=null,P=null,D=new Ft(0,0,E,A),O=new Ft(0,0,E,A),B=!1,N=[],z=new mi,U=!1,W=!1,G=null,V=new be,q=new Wt,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Y(){return null===v?R:1}var Z,J,K,Q,$,tt,et,nt,it,rt,ot,at,lt,ct,ut,pt,ht,dt,_t,ft,mt,yt,gt,vt=n;function bt(t,n){for(var i=0;i<t.length;i++){var r=t[i],o=e.getContext(r,n);if(null!==o)return o}return null}try{var xt={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r136"),e.addEventListener("webglcontextlost",Tt,!1),e.addEventListener("webglcontextrestored",Ct,!1),null===vt){var St=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&St.shift(),null===(vt=bt(St,xt)))throw bt(St)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===vt.getShaderPrecisionFormat&&(vt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function wt(){Z=new Ki(vt),J=new Ci(vt,Z,t),Z.init(J),yt=new $o(vt,Z,J),K=new Ko(vt,Z,J),N[0]=1029,Q=new tr(vt),$=new jo,tt=new Qo(vt,Z,K,$,J,yt,Q),et=new Ai(f),nt=new Ji(f),it=new gi(vt,J),gt=new Mi(vt,Z,it,J),rt=new Qi(vt,it,Q,gt),ot=new ar(vt,rt,it,Q),_t=new or(vt,J,tt),pt=new Ei($),at=new Bo(f,et,nt,Z,J,gt,pt),lt=new aa($),ct=new Ho,ut=new Xo(Z,J),dt=new wi(f,et,K,ot,s),ht=new Jo(f,ot,J),ft=new Ti(vt,Z,Q,J),mt=new $i(vt,Z,Q,J),Q.programs=at.programs,f.capabilities=J,f.extensions=Z,f.properties=$,f.renderLists=ct,f.shadowMap=ht,f.state=K,f.info=Q}wt();var Mt=new oa(f,vt);function Tt(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function Ct(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1;var t=Q.autoReset,e=ht.enabled,n=ht.autoUpdate,i=ht.needsUpdate,r=ht.type;wt(),Q.autoReset=t,ht.enabled=e,ht.autoUpdate=n,ht.needsUpdate=i,ht.type=r}function Et(t){var e=t.target;e.removeEventListener("dispose",Et),function(t){(function(t){var e=$.get(t).programs;void 0!==e&&(e.forEach((function(t){at.releaseProgram(t)})),t.isShaderMaterial&&at.releaseShaderCache(t))})(t),$.remove(t)}(e)}this.xr=Mt,this.getContext=function(){return vt},this.getContextAttributes=function(){return vt.getContextAttributes()},this.forceContextLoss=function(){var t=Z.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=Z.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(E,A,!1))},this.getSize=function(t){return t.set(E,A)},this.setSize=function(t,n,i){Mt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(E=t,A=n,e.width=Math.floor(t*R),e.height=Math.floor(n*R),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return t.set(E*R,A*R).floor()},this.setDrawingBufferSize=function(t,n,i){E=t,A=n,R=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return t.copy(w)},this.getViewport=function(t){return t.copy(D)},this.setViewport=function(t,e,n,i){t.isVector4?D.set(t.x,t.y,t.z,t.w):D.set(t,e,n,i),K.viewport(w.copy(D).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(O)},this.setScissor=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),K.scissor(T.copy(O).multiplyScalar(R).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(t){K.setScissorTest(B=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){P=t},this.getClearColor=function(t){return t.copy(dt.getClearColor())},this.setClearColor=function(){dt.setClearColor.apply(dt,arguments)},this.getClearAlpha=function(){return dt.getClearAlpha()},this.setClearAlpha=function(){dt.setClearAlpha.apply(dt,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),vt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Tt,!1),e.removeEventListener("webglcontextrestored",Ct,!1),ct.dispose(),ut.dispose(),$.dispose(),et.dispose(),nt.dispose(),ot.dispose(),gt.dispose(),at.dispose(),Mt.dispose(),Mt.removeEventListener("sessionstart",Rt),Mt.removeEventListener("sessionend",Lt),G&&(G.dispose(),G=null),Pt.stop()},this.renderBufferDirect=function(t,e,n,i,r,o){null===e&&(e=X);var a=r.isMesh&&r.matrixWorld.determinant()<0,s=function(t,e,n,i,r){!0!==e.isScene&&(e=X),tt.resetTextureUnits();var o=e.fog,a=i.isMeshStandardMaterial?e.environment:null,s=null===v?f.outputEncoding:v.texture.encoding,l=(i.isMeshStandardMaterial?nt:et).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,p=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,_=n.morphAttributes.position?n.morphAttributes.position.length:0,m=i.toneMapped?f.toneMapping:0,y=$.get(i),g=h.state.lights;if(!0===U&&(!0===W||t!==S)){var x=t===S&&i.id===b;pt.setState(i,t,x)}var w=!1;i.version===y.__version?y.needsLights&&y.lightsStateVersion!==g.state.version||y.outputEncoding!==s||r.isInstancedMesh&&!1===y.instancing?w=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?w=!0:r.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||i.fog&&y.fog!==o?w=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===pt.numPlanes&&y.numIntersection===pt.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==u||y.morphTargets!==p||y.morphNormals!==d||y.toneMapping!==m||!0===J.isWebGL2&&y.morphTargetsCount!==_)&&(w=!0):w=!0:w=!0:w=!0:(w=!0,y.__version=i.version);var M=y.currentProgram;!0===w&&(M=jt(i,e,r));var T,C,E=!1,L=!1,P=!1,D=M.getUniforms(),I=y.uniforms;if(K.useProgram(M.program)&&(E=!0,L=!0,P=!0),i.id!==b&&(b=i.id,L=!0),E||S!==t){if(D.setValue(vt,"projectionMatrix",t.projectionMatrix),J.logarithmicDepthBuffer&&D.setValue(vt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),S!==t&&(S=t,L=!0,P=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){var k=D.map.cameraPosition;void 0!==k&&k.setValue(vt,q.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&D.setValue(vt,"isOrthographic",!0===t.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&D.setValue(vt,"viewMatrix",t.matrixWorldInverse)}if(r.isSkinnedMesh){D.setOptional(vt,r,"bindMatrix"),D.setOptional(vt,r,"bindMatrixInverse");var O=r.skeleton;O&&(J.floatVertexTextures?(null===O.boneTexture&&O.computeBoneTexture(),D.setValue(vt,"boneTexture",O.boneTexture,tt),D.setValue(vt,"boneTextureSize",O.boneTextureSize)):D.setOptional(vt,O,"boneMatrices"))}return!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||_t.update(r,n,i,M),(L||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,D.setValue(vt,"receiveShadow",r.receiveShadow)),L&&(D.setValue(vt,"toneMappingExposure",f.toneMappingExposure),y.needsLights&&(C=P,(T=I).ambientLightColor.needsUpdate=C,T.lightProbe.needsUpdate=C,T.directionalLights.needsUpdate=C,T.directionalLightShadows.needsUpdate=C,T.pointLights.needsUpdate=C,T.pointLightShadows.needsUpdate=C,T.spotLights.needsUpdate=C,T.spotLightShadows.needsUpdate=C,T.rectAreaLights.needsUpdate=C,T.hemisphereLights.needsUpdate=C),o&&i.fog&&lt.refreshFogUniforms(I,o),lt.refreshMaterialUniforms(I,i,R,A,G),po.upload(vt,y.uniformsList,I,tt)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(po.upload(vt,y.uniformsList,I,tt),i.uniformsNeedUpdate=!1),i.isSpriteMaterial&&D.setValue(vt,"center",r.center),D.setValue(vt,"modelViewMatrix",r.modelViewMatrix),D.setValue(vt,"normalMatrix",r.normalMatrix),D.setValue(vt,"modelMatrix",r.matrixWorld),M}(t,e,n,i,r);K.setMaterial(i,a);var l=n.index,c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;var u,p=1;!0===i.wireframe&&(l=rt.getWireframeAttribute(n),p=2),gt.setup(r,i,s,n,l);var d=ft;null!==l&&(u=it.get(l),(d=mt).setIndex(u));var _=null!==l?l.count:c.count,m=n.drawRange.start*p,y=n.drawRange.count*p,g=null!==o?o.start*p:0,x=null!==o?o.count*p:1/0,w=Math.max(m,g),M=Math.min(_,m+y,g+x)-1,T=Math.max(0,M-w+1);if(0!==T){if(r.isMesh)!0===i.wireframe?(K.setLineWidth(i.wireframeLinewidth*Y()),d.setMode(1)):d.setMode(4);else if(r.isLine){var C=i.linewidth;void 0===C&&(C=1),K.setLineWidth(C*Y()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(w,T,r.count);else if(n.isInstancedBufferGeometry){var E=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(w,T,E)}else d.render(w,T)}},this.compile=function(t,e){(h=ut.get(t)).init(),_.push(h),t.traverseVisible((function(t){t.isLight&&t.layers.test(e.layers)&&(h.pushLight(t),t.castShadow&&h.pushShadow(t))})),h.setupLights(f.physicallyCorrectLights),t.traverse((function(e){var n=e.material;if(n)if(Array.isArray(n))for(var i=0;i<n.length;i++)jt(n[i],t,e);else jt(n,t,e)})),_.pop(),h=null};var At=null;function Rt(){Pt.stop()}function Lt(){Pt.start()}var Pt=new yi;function Dt(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||z.intersectsSprite(t)){i&&q.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);var r=ot.update(t),o=t.material;o.visible&&p.push(t,r,o,n,q.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==Q.render.frame&&(t.skeleton.update(),t.skeleton.frame=Q.render.frame),!t.frustumCulled||z.intersectsObject(t))){i&&q.setFromMatrixPosition(t.matrixWorld).applyMatrix4(V);var a=ot.update(t),s=t.material;if(Array.isArray(s))for(var l=a.groups,c=0,u=l.length;c<u;c++){var d=l[c],_=s[d.materialIndex];_&&_.visible&&p.push(t,a,_,n,q.z,d)}else s.visible&&p.push(t,a,s,n,q.z,null)}for(var f=t.children,m=0,y=f.length;m<y;m++)Dt(f[m],e,n,i)}}function kt(t,e,n,i){var r=t.opaque,o=t.transmissive,s=t.transparent;h.setupLightsView(n),o.length>0&&function(t,e,n){if(null===G){var i=!0===a&&!0===J.isWebGL2;G=new(i?Ht:Nt)(1024,1024,{generateMipmaps:!0,type:null!==yt.convert(F)?F:k,minFilter:I,magFilter:M,wrapS:x,wrapT:x,useRenderToTexture:Z.has("WEBGL_multisampled_render_to_texture")})}var r=f.getRenderTarget();f.setRenderTarget(G),f.clear();var o=f.toneMapping;f.toneMapping=0,Ot(t,e,n),f.toneMapping=o,tt.updateMultisampleRenderTarget(G),tt.updateRenderTargetMipmap(G),f.setRenderTarget(r)}(r,e,n),i&&K.viewport(w.copy(i)),r.length>0&&Ot(r,e,n),o.length>0&&Ot(o,e,n),s.length>0&&Ot(s,e,n)}function Ot(t,e,n){for(var i=!0===e.isScene?e.overrideMaterial:null,r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,l=a.geometry,c=null===i?a.material:i,u=a.group;s.layers.test(n.layers)&&Bt(s,e,n,l,c,u)}}function Bt(t,e,n,i,r,o){t.onBeforeRender(f,e,n,i,r,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),r.onBeforeRender(f,e,n,i,t,o),!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,f.renderBufferDirect(n,e,i,r,t,o),r.side=0,r.needsUpdate=!0,f.renderBufferDirect(n,e,i,r,t,o),r.side=2):f.renderBufferDirect(n,e,i,r,t,o),t.onAfterRender(f,e,n,i,r,o)}function jt(t,e,n){!0!==e.isScene&&(e=X);var i=$.get(t),r=h.state.lights,o=h.state.shadowsArray,a=r.state.version,s=at.getParameters(t,r.state,o,e,n),l=at.getProgramCacheKey(s),c=i.programs;i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=(t.isMeshStandardMaterial?nt:et).get(t.envMap||i.environment),void 0===c&&(t.addEventListener("dispose",Et),c=new Map,i.programs=c);var u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return zt(t,s),u}else s.uniforms=at.getUniforms(t),t.onBuild(n,s,f),t.onBeforeCompile(s,f),u=at.acquireProgram(s,l),c.set(l,u),i.uniforms=s.uniforms;var p=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(p.clippingPlanes=pt.uniform),zt(t,s),i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=a,i.needsLights&&(p.ambientLightColor.value=r.state.ambient,p.lightProbe.value=r.state.probe,p.directionalLights.value=r.state.directional,p.directionalLightShadows.value=r.state.directionalShadow,p.spotLights.value=r.state.spot,p.spotLightShadows.value=r.state.spotShadow,p.rectAreaLights.value=r.state.rectArea,p.ltc_1.value=r.state.rectAreaLTC1,p.ltc_2.value=r.state.rectAreaLTC2,p.pointLights.value=r.state.point,p.pointLightShadows.value=r.state.pointShadow,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);var d=u.getUniforms(),_=po.seqWithValue(d.seq,p);return i.currentProgram=u,i.uniformsList=_,u}function zt(t,e){var n=$.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}Pt.setAnimationLoop((function(t){At&&At(t)})),"undefined"!=typeof window&&Pt.setContext(window),this.setAnimationLoop=function(t){At=t,Mt.setAnimationLoop(t),null===t?Pt.stop():Pt.start()},Mt.addEventListener("sessionstart",Rt),Mt.addEventListener("sessionend",Lt),this.render=function(t,e){if(void 0===e||!0===e.isCamera){if(!0!==m){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===Mt.enabled&&!0===Mt.isPresenting&&(!0===Mt.cameraAutoUpdate&&Mt.updateCamera(e),e=Mt.getCamera()),!0===t.isScene&&t.onBeforeRender(f,t,e,v),(h=ut.get(t,_.length)).init(),_.push(h),V.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),z.setFromProjectionMatrix(V),W=this.localClippingEnabled,U=pt.init(this.clippingPlanes,W,e),(p=ct.get(t,d.length)).init(),d.push(p),Dt(t,e,0,f.sortObjects),p.finish(),!0===f.sortObjects&&p.sort(L,P),!0===U&&pt.beginShadows();var n=h.state.shadowsArray;if(ht.render(n,t,e),!0===U&&pt.endShadows(),!0===this.info.autoReset&&this.info.reset(),dt.render(p,t),h.setupLights(f.physicallyCorrectLights),e.isArrayCamera)for(var i=e.cameras,r=0,o=i.length;r<o;r++){var a=i[r];kt(p,t,a,a.viewport)}else kt(p,t,e);null!==v&&(tt.updateMultisampleRenderTarget(v),tt.updateRenderTargetMipmap(v)),!0===t.isScene&&t.onAfterRender(f,t,e),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1),gt.resetDefaultState(),b=-1,S=null,_.pop(),h=_.length>0?_[_.length-1]:null,d.pop(),p=d.length>0?d[d.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return g},this.getRenderTarget=function(){return v},this.setRenderTargetTextures=function(t,e,n){$.get(t.texture).__webglTexture=e,$.get(t.depthTexture).__webglTexture=n;var i=$.get(t);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||t.useRenderToTexture&&(console.warn("render-to-texture extension was disabled because an external texture was provided"),t.useRenderToTexture=!1,t.useRenderbuffer=!0))},this.setRenderTargetFramebuffer=function(t,e){var n=$.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;v=t,y=e,g=n;var i=!0;if(t){var r=$.get(t);void 0!==r.__useDefaultFramebuffer?(K.bindFramebuffer(36160,null),i=!1):void 0===r.__webglFramebuffer?tt.setupRenderTarget(t):r.__hasExternalTextures&&tt.rebindTextures(t,$.get(t.texture).__webglTexture,$.get(t.depthTexture).__webglTexture)}var o=null,a=!1,s=!1;if(t){var l=t.texture;(l.isDataTexture3D||l.isDataTexture2DArray)&&(s=!0);var c=$.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(o=c[e],a=!0):o=t.useRenderbuffer?$.get(t).__webglMultisampledFramebuffer:c,w.copy(t.viewport),T.copy(t.scissor),C=t.scissorTest}else w.copy(D).multiplyScalar(R).floor(),T.copy(O).multiplyScalar(R).floor(),C=B;if(K.bindFramebuffer(36160,o)&&J.drawBuffers&&i){var u=!1;if(t)if(t.isWebGLMultipleRenderTargets){var p=t.texture;if(N.length!==p.length||36064!==N[0]){for(var h=0,d=p.length;h<d;h++)N[h]=36064+h;N.length=p.length,u=!0}}else 1===N.length&&36064===N[0]||(N[0]=36064,N.length=1,u=!0);else 1===N.length&&1029===N[0]||(N[0]=1029,N.length=1,u=!0);u&&(J.isWebGL2?vt.drawBuffers(N):Z.get("WEBGL_draw_buffers").drawBuffersWEBGL(N))}if(K.viewport(w),K.scissor(T),K.setScissorTest(C),a){var _=$.get(t.texture);vt.framebufferTexture2D(36160,36064,34069+e,_.__webglTexture,n)}else if(s){var f=$.get(t.texture),m=e||0;vt.framebufferTextureLayer(36160,36064,f.__webglTexture,n||0,m)}b=-1},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(t&&t.isWebGLRenderTarget){var s=$.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){K.bindFramebuffer(36160,s);try{var l=t.texture,c=l.format,u=l.type;if(c!==H&&yt.convert(c)!==vt.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var p=u===F&&(Z.has("EXT_color_buffer_half_float")||J.isWebGL2&&Z.has("EXT_color_buffer_float"));if(!(u===k||yt.convert(u)===vt.getParameter(35738)||u===j&&(J.isWebGL2||Z.has("OES_texture_float")||Z.has("WEBGL_color_buffer_float"))||p))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===vt.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&vt.readPixels(e,n,i,r,yt.convert(c),yt.convert(u),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var h=null!==v?$.get(v).__webglFramebuffer:null;K.bindFramebuffer(36160,h)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!0===e.isFramebufferTexture){var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i);tt.setTexture2D(e,0),vt.copyTexSubImage2D(3553,n,0,0,t.x,t.y,r,o),K.unbindTexture()}else console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.")},this.copyTextureToTexture=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.image.width,o=e.image.height,a=yt.convert(n.format),s=yt.convert(n.type);tt.setTexture2D(n,0),vt.pixelStorei(37440,n.flipY),vt.pixelStorei(37441,n.premultiplyAlpha),vt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?vt.texSubImage2D(3553,i,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?vt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):vt.texSubImage2D(3553,i,t.x,t.y,a,s,e.image),0===i&&n.generateMipmaps&&vt.generateMipmap(3553),K.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(f.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var o,a=t.max.x-t.min.x+1,s=t.max.y-t.min.y+1,l=t.max.z-t.min.z+1,c=yt.convert(i.format),u=yt.convert(i.type);if(i.isDataTexture3D)tt.setTexture3D(i,0),o=32879;else{if(!i.isDataTexture2DArray)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");tt.setTexture2DArray(i,0),o=35866}vt.pixelStorei(37440,i.flipY),vt.pixelStorei(37441,i.premultiplyAlpha),vt.pixelStorei(3317,i.unpackAlignment);var p=vt.getParameter(3314),h=vt.getParameter(32878),d=vt.getParameter(3316),_=vt.getParameter(3315),m=vt.getParameter(32877),y=n.isCompressedTexture?n.mipmaps[0]:n.image;vt.pixelStorei(3314,y.width),vt.pixelStorei(32878,y.height),vt.pixelStorei(3316,t.min.x),vt.pixelStorei(3315,t.min.y),vt.pixelStorei(32877,t.min.z),n.isDataTexture||n.isDataTexture3D?vt.texSubImage3D(o,r,e.x,e.y,e.z,a,s,l,c,u,y.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),vt.compressedTexSubImage3D(o,r,e.x,e.y,e.z,a,s,l,c,y.data)):vt.texSubImage3D(o,r,e.x,e.y,e.z,a,s,l,c,u,y),vt.pixelStorei(3314,p),vt.pixelStorei(32878,h),vt.pixelStorei(3316,d),vt.pixelStorei(3315,_),vt.pixelStorei(32877,m),0===r&&i.generateMipmaps&&vt.generateMipmap(o),K.unbindTexture()}},this.initTexture=function(t){tt.setTexture2D(t,0),K.unbindTexture()},this.resetState=function(){y=0,g=0,v=null,K.reset(),gt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}sa.prototype.isWebGLRenderer=!0;var la=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n)}(sa);la.prototype.isWebGL1Renderer=!0;var ca=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;b()(this,t),this.name="",this.color=new hn(e),this.density=n}return S()(t,[{key:"clone",value:function(){return new t(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),t}();ca.prototype.isFogExp2=!0;var ua=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;b()(this,t),this.name="",this.color=new hn(e),this.near=n,this.far=i}return S()(t,[{key:"clone",value:function(){return new t(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),t}();ua.prototype.isFog=!0;var pa=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:h()(t)})),t}return S()(n,[{key:"copy",value:function(t,e){return l()(g()(n.prototype),"copy",this).call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}]),n}(Ve);pa.prototype.isScene=!0;var ha=function(){function t(e,n){b()(this,t),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=ut,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=vt()}return S()(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=vt()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),t}();ha.prototype.isInterleavedBuffer=!0;var da=new Wt,_a=function(){function t(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];b()(this,t),this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=!0===r}return S()(t,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.data.count;e<n;e++)da.x=this.getX(e),da.y=this.getY(e),da.z=this.getZ(e),da.applyMatrix4(t),this.setXYZ(e,da.x,da.y,da.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)da.x=this.getX(e),da.y=this.getY(e),da.z=this.getZ(e),da.applyNormalMatrix(t),this.setXYZ(e,da.x,da.y,da.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)da.x=this.getX(e),da.y=this.getY(e),da.z=this.getZ(e),da.transformDirection(t),this.setXYZ(e,da.x,da.y,da.z);return this}},{key:"setX",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:"getY",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:"getZ",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:"getW",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this}},{key:"setXYZW",value:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}},{key:"clone",value:function(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var n=[],i=0;i<this.count;i++)for(var r=i*this.data.stride+this.offset,o=0;o<this.itemSize;o++)n.push(this.data.array[r+o]);return new mn(new this.array.constructor(n),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new t(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),t}();_a.prototype.isInterleavedBufferAttribute=!0;var fa,ma=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="SpriteMaterial",i.color=new hn(16777215),i.map=null,i.alphaMap=null,i.rotation=0,i.sizeAttenuation=!0,i.transparent=!0,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(on);ma.prototype.isSpriteMaterial=!0;var ya=new Wt,ga=new Wt,va=new Wt,ba=new Et,xa=new Et,Sa=new be,wa=new Wt,Ma=new Wt,Ta=new Wt,Ca=new Et,Ea=new Et,Aa=new Et,Ra=function(t){_()(n,t);var e=L(n);function n(t){var i;if(b()(this,n),(i=e.call(this)).type="Sprite",void 0===fa){fa=new kn;var r=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),o=new ha(r,5);fa.setIndex([0,1,2,0,2,3]),fa.setAttribute("position",new _a(o,3,0,!1)),fa.setAttribute("uv",new _a(o,2,3,!1))}return i.geometry=fa,i.material=void 0!==t?t:new ma,i.center=new Et(.5,.5),m()(i)}return S()(n,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ga.setFromMatrixScale(this.matrixWorld),Sa.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),va.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&ga.multiplyScalar(-va.z);var n,i,r=this.material.rotation;0!==r&&(i=Math.cos(r),n=Math.sin(r));var o=this.center;La(wa.set(-.5,-.5,0),va,o,ga,n,i),La(Ma.set(.5,-.5,0),va,o,ga,n,i),La(Ta.set(.5,.5,0),va,o,ga,n,i),Ca.set(0,0),Ea.set(1,0),Aa.set(1,1);var a=t.ray.intersectTriangle(wa,Ma,Ta,!1,ya);if(null!==a||(La(Ma.set(-.5,.5,0),va,o,ga,n,i),Ea.set(0,1),null!==(a=t.ray.intersectTriangle(wa,Ta,Ma,!1,ya)))){var s=t.ray.origin.distanceTo(ya);s<t.near||s>t.far||e.push({distance:s,point:ya.clone(),uv:nn.getUV(ya,wa,Ma,Ta,Ca,Ea,Aa,new Et),face:null,object:this})}}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}}]),n}(Ve);function La(t,e,n,i,r,o){ba.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(xa.x=o*ba.x-r*ba.y,xa.y=r*ba.x+o*ba.y):xa.copy(ba),t.copy(e),t.x+=xa.x,t.y+=xa.y,t.applyMatrix4(Sa)}Ra.prototype.isSprite=!0;var Pa=new Wt,Da=new Wt,Ia=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this))._currentLevel=0,t.type="LOD",Object.defineProperties(h()(t),{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),t.autoUpdate=!0,t}return S()(n,[{key:"copy",value:function(t){l()(g()(n.prototype),"copy",this).call(this,t,!1);for(var e=t.levels,i=0,r=e.length;i<r;i++){var o=e[i];this.addLevel(o.object.clone(),o.distance)}return this.autoUpdate=t.autoUpdate,this}},{key:"addLevel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e=Math.abs(e);var n,i=this.levels;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this}},{key:"getCurrentLevel",value:function(){return this._currentLevel}},{key:"getObjectForDistance",value:function(t){var e=this.levels;if(e.length>0){var n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null}},{key:"raycast",value:function(t,e){if(this.levels.length>0){Pa.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(Pa);this.getObjectForDistance(n).raycast(t,e)}}},{key:"update",value:function(t){var e=this.levels;if(e.length>1){Pa.setFromMatrixPosition(t.matrixWorld),Da.setFromMatrixPosition(this.matrixWorld);var n,i,r=Pa.distanceTo(Da)/t.zoom;for(e[0].object.visible=!0,n=1,i=e.length;n<i&&r>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var i=this.levels,r=0,o=i.length;r<o;r++){var a=i[r];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}]),n}(Ve),ka=new Wt,Oa=new Ft,Ba=new Ft,ja=new Wt,Fa=new be,Na=function(t){_()(n,t);var e=L(n);function n(t,i){var r;return b()(this,n),(r=e.call(this,t,i)).type="SkinnedMesh",r.bindMode="attached",r.bindMatrix=new be,r.bindMatrixInverse=new be,r}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new Ft,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(t,e){var n=this.skeleton,i=this.geometry;Oa.fromBufferAttribute(i.attributes.skinIndex,t),Ba.fromBufferAttribute(i.attributes.skinWeight,t),ka.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var r=0;r<4;r++){var o=Ba.getComponent(r);if(0!==o){var a=Oa.getComponent(r);Fa.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(ja.copy(ka).applyMatrix4(Fa),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}]),n}(Qn);Na.prototype.isSkinnedMesh=!0;var za=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="Bone",t}return S()(n)}(Ve);za.prototype.isBone=!0;var Ha=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,l=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,u=arguments.length>7?arguments[7]:void 0,p=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1003,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1003,d=arguments.length>10?arguments[10]:void 0,_=arguments.length>11?arguments[11]:void 0;return b()(this,n),(t=e.call(this,null,l,c,u,p,h,a,s,d,_)).image={data:i,width:r,height:o},t.magFilter=p,t.minFilter=h,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return S()(n)}(Bt);Ha.prototype.isDataTexture=!0;var Ua=new be,Wa=new be,Ga=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];b()(this,t),this.uuid=vt(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}return S()(t,[{key:"init",value:function(){var t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new be)}}},{key:"calculateInverses",value:function(){this.boneInverses.length=0;for(var t=0,e=this.bones.length;t<e;t++){var n=new be;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}},{key:"pose",value:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(var i=0,r=this.bones.length;i<r;i++){var o=this.bones[i];o&&(o.parent&&o.parent.isBone?(o.matrix.copy(o.parent.matrixWorld).invert(),o.matrix.multiply(o.matrixWorld)):o.matrix.copy(o.matrixWorld),o.matrix.decompose(o.position,o.quaternion,o.scale))}}},{key:"update",value:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,o=t.length;r<o;r++){var a=t[r]?t[r].matrixWorld:Wa;Ua.multiplyMatrices(a,e[r]),Ua.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}},{key:"clone",value:function(){return new t(this.bones,this.boneInverses)}},{key:"computeBoneTexture",value:function(){var t=Math.sqrt(4*this.bones.length);t=Mt(t),t=Math.max(t,4);var e=new Float32Array(t*t*4);e.set(this.boneMatrices);var n=new Ha(e,t,t,H,j);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this.boneTextureSize=t,this}},{key:"getBoneByName",value:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}},{key:"dispose",value:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}},{key:"fromJSON",value:function(t,e){this.uuid=t.uuid;for(var n=0,i=t.bones.length;n<i;n++){var r=t.bones[n],o=e[r];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new za),this.bones.push(o),this.boneInverses.push((new be).fromArray(t.boneInverses[n]))}return this.init(),this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;for(var e=this.bones,n=this.boneInverses,i=0,r=e.length;i<r;i++){var o=e[i];t.bones.push(o.uuid);var a=n[i];t.boneInverses.push(a.toArray())}return t}}]),t}(),Va=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b()(this,n),"number"==typeof r&&(a=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(o=e.call(this,t,i,r)).meshPerAttribute=a,o}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}]),n}(mn);Va.prototype.isInstancedBufferAttribute=!0;var qa=new be,Xa=new be,Ya=[],Za=new Qn,Ja=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;return b()(this,n),(o=e.call(this,t,i)).instanceMatrix=new Va(new Float32Array(16*r),16),o.instanceColor=null,o.count=r,o.frustumCulled=!1,o}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,i=this.count;if(Za.geometry=this.geometry,Za.material=this.material,void 0!==Za.material)for(var r=0;r<i;r++){this.getMatrixAt(r,qa),Xa.multiplyMatrices(n,qa),Za.matrixWorld=Xa,Za.raycast(t,Ya);for(var o=0,a=Ya.length;o<a;o++){var s=Ya[o];s.instanceId=r,s.object=this,e.push(s)}Ya.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new Va(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Qn);Ja.prototype.isInstancedMesh=!0;var Ka=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="LineBasicMaterial",i.color=new hn(16777215),i.linewidth=1,i.linecap="round",i.linejoin="round",i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this}}]),n}(on);Ka.prototype.isLineBasicMaterial=!0;var Qa=new Wt,$a=new Wt,ts=new be,es=new ve,ns=new pe,is=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kn,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ka;return b()(this,n),(t=e.call(this)).type="Line",t.geometry=i,t.material=r,t.updateMorphTargets(),t}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)Qa.fromBufferAttribute(e,i-1),$a.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=Qa.distanceTo($a);t.setAttribute("lineDistance",new Tn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ns.copy(n.boundingSphere),ns.applyMatrix4(i),ns.radius+=r,!1!==t.ray.intersectsSphere(ns)){ts.copy(i).invert(),es.copy(t.ray).applyMatrix4(ts);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=new Wt,c=new Wt,u=new Wt,p=new Wt,h=this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,_=n.attributes.position;if(null!==d)for(var f=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count)-1;f<m;f+=h){var y=d.getX(f),g=d.getX(f+1);if(l.fromBufferAttribute(_,y),c.fromBufferAttribute(_,g),!(es.distanceSqToSegment(l,c,p,u)>s)){p.applyMatrix4(this.matrixWorld);var v=t.ray.origin.distanceTo(p);v<t.near||v>t.far||e.push({distance:v,point:u.clone().applyMatrix4(this.matrixWorld),index:f,face:null,faceIndex:null,object:this})}}else for(var b=Math.max(0,o.start),x=Math.min(_.count,o.start+o.count)-1;b<x;b+=h)if(l.fromBufferAttribute(_,b),c.fromBufferAttribute(_,b+1),!(es.distanceSqToSegment(l,c,p,u)>s)){p.applyMatrix4(this.matrixWorld);var S=t.ray.origin.distanceTo(p);S<t.near||S>t.far||e.push({distance:S,point:u.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=i.length;r<o;r++){var a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Ve);is.prototype.isLine=!0;var rs=new Wt,os=new Wt,as=function(t){_()(n,t);var e=L(n);function n(t,i){var r;return b()(this,n),(r=e.call(this,t,i)).type="LineSegments",r}return S()(n,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)rs.fromBufferAttribute(e,i),os.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+rs.distanceTo(os);t.setAttribute("lineDistance",new Tn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(is);as.prototype.isLineSegments=!0;var ss=function(t){_()(n,t);var e=L(n);function n(t,i){var r;return b()(this,n),(r=e.call(this,t,i)).type="LineLoop",r}return S()(n)}(is);ss.prototype.isLineLoop=!0;var ls=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="PointsMaterial",i.color=new hn(16777215),i.map=null,i.alphaMap=null,i.size=1,i.sizeAttenuation=!0,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this}}]),n}(on);ls.prototype.isPointsMaterial=!0;var cs=new be,us=new ve,ps=new pe,hs=new Wt,ds=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new kn,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ls;return b()(this,n),(t=e.call(this)).type="Points",t.geometry=i,t.material=r,t.updateMorphTargets(),t}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.material=t.material,this.geometry=t.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ps.copy(n.boundingSphere),ps.applyMatrix4(i),ps.radius+=r,!1!==t.ray.intersectsSphere(ps)){cs.copy(i).invert(),us.copy(t.ray).applyMatrix4(cs);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){var l=n.index,c=n.attributes.position;if(null!==l)for(var u=Math.max(0,o.start),p=Math.min(l.count,o.start+o.count);u<p;u++){var h=l.getX(u);hs.fromBufferAttribute(c,h),_s(hs,h,s,i,t,e,this)}else for(var d=Math.max(0,o.start),_=Math.min(c.count,o.start+o.count);d<_;d++)hs.fromBufferAttribute(c,d),_s(hs,d,s,i,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,o=i.length;r<o;r++){var a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(Ve);function _s(t,e,n,i,r,o,a){var s=us.distanceSqToPoint(t);if(s<n){var l=new Wt;us.closestPointToPoint(t,l),l.applyMatrix4(i);var c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:l,index:e,face:null,object:a})}}ds.prototype.isPoints=!0;var fs=function(t){_()(n,t);var e=L(n);function n(t,i,r,o,a,s,l,c,u){var p;b()(this,n),(p=e.call(this,t,i,r,o,a,s,l,c,u)).format=void 0!==l?l:z,p.minFilter=void 0!==s?s:P,p.magFilter=void 0!==a?a:P,p.generateMipmaps=!1;var d=h()(p);return"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback((function e(){d.needsUpdate=!0,t.requestVideoFrameCallback(e)})),p}return S()(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var t=this.image;!1=="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(Bt);fs.prototype.isVideoTexture=!0;var ms=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;return b()(this,n),(o=e.call(this,{width:t,height:i})).format=r,o.magFilter=M,o.minFilter=M,o.generateMipmaps=!1,o.needsUpdate=!0,o}return S()(n)}(Bt);ms.prototype.isFramebufferTexture=!0;var ys=function(t){_()(n,t);var e=L(n);function n(t,i,r,o,a,s,l,c,u,p,h,d){var _;return b()(this,n),(_=e.call(this,null,s,l,c,u,p,o,a,h,d)).image={width:i,height:r},_.mipmaps=t,_.flipY=!1,_.generateMipmaps=!1,_}return S()(n)}(Bt);ys.prototype.isCompressedTexture=!0;var gs=function(t){_()(n,t);var e=L(n);function n(t,i,r,o,a,s,l,c,u){var p;return b()(this,n),(p=e.call(this,t,i,r,o,a,s,l,c,u)).needsUpdate=!0,p}return S()(n)}(Bt);gs.prototype.isCanvasTexture=!0;var vs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;b()(this,n),(t=e.call(this)).type="CircleGeometry",t.parameters={radius:i,segments:r,thetaStart:o,thetaLength:a},r=Math.max(3,r);var s=[],l=[],c=[],u=[],p=new Wt,h=new Et;l.push(0,0,0),c.push(0,0,1),u.push(.5,.5);for(var d=0,_=3;d<=r;d++,_+=3){var f=o+d/r*a;p.x=i*Math.cos(f),p.y=i*Math.sin(f),l.push(p.x,p.y,p.z),c.push(0,0,1),h.x=(l[_]/i+1)/2,h.y=(l[_+1]/i+1)/2,u.push(h.x,h.y)}for(var m=1;m<=r;m++)s.push(m,m+1,0);return t.setIndex(s),t.setAttribute("position",new Tn(l,3)),t.setAttribute("normal",new Tn(c,3)),t.setAttribute("uv",new Tn(u,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.segments,t.thetaStart,t.thetaLength)}}]),n}(kn),bs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;b()(this,n),(t=e.call(this)).type="CylinderGeometry",t.parameters={radiusTop:i,radiusBottom:r,height:o,radialSegments:a,heightSegments:s,openEnded:l,thetaStart:c,thetaLength:u};var p=h()(t);a=Math.floor(a),s=Math.floor(s);var d=[],_=[],f=[],m=[],y=0,g=[],v=o/2,x=0;function S(t){for(var e=y,n=new Et,o=new Wt,s=0,l=!0===t?i:r,h=!0===t?1:-1,g=1;g<=a;g++)_.push(0,v*h,0),f.push(0,h,0),m.push(.5,.5),y++;for(var b=y,S=0;S<=a;S++){var w=S/a*u+c,M=Math.cos(w),T=Math.sin(w);o.x=l*T,o.y=v*h,o.z=l*M,_.push(o.x,o.y,o.z),f.push(0,h,0),n.x=.5*M+.5,n.y=.5*T*h+.5,m.push(n.x,n.y),y++}for(var C=0;C<a;C++){var E=e+C,A=b+C;!0===t?d.push(A,A+1,E):d.push(A+1,A,E),s+=3}p.addGroup(x,s,!0===t?1:2),x+=s}return function(){for(var t=new Wt,e=new Wt,n=0,l=(r-i)/o,h=0;h<=s;h++){for(var b=[],S=h/s,w=S*(r-i)+i,M=0;M<=a;M++){var T=M/a,C=T*u+c,E=Math.sin(C),A=Math.cos(C);e.x=w*E,e.y=-S*o+v,e.z=w*A,_.push(e.x,e.y,e.z),t.set(E,l,A).normalize(),f.push(t.x,t.y,t.z),m.push(T,1-S),b.push(y++)}g.push(b)}for(var R=0;R<a;R++)for(var L=0;L<s;L++){var P=g[L][R],D=g[L+1][R],I=g[L+1][R+1],k=g[L][R+1];d.push(P,D,k),d.push(D,I,k),n+=6}p.addGroup(x,n,0),x+=n}(),!1===l&&(i>0&&S(!0),r>0&&S(!1)),t.setIndex(d),t.setAttribute("position",new Tn(_,3)),t.setAttribute("normal",new Tn(f,3)),t.setAttribute("uv",new Tn(m,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}]),n}(kn),xs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return b()(this,n),(t=e.call(this,0,i,r,o,a,s,l,c)).type="ConeGeometry",t.parameters={radius:i,height:r,radialSegments:o,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:c},t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}]),n}(bs),Ss=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;b()(this,n),(t=e.call(this)).type="PolyhedronGeometry",t.parameters={vertices:i,indices:r,radius:o,detail:a};var s=[],l=[];function c(t,e,n,i){for(var r=i+1,o=[],a=0;a<=r;a++){o[a]=[];for(var s=t.clone().lerp(n,a/r),l=e.clone().lerp(n,a/r),c=r-a,p=0;p<=c;p++)o[a][p]=0===p&&a===r?s:s.clone().lerp(l,p/c)}for(var h=0;h<r;h++)for(var d=0;d<2*(r-h)-1;d++){var _=Math.floor(d/2);d%2==0?(u(o[h][_+1]),u(o[h+1][_]),u(o[h][_])):(u(o[h][_+1]),u(o[h+1][_+1]),u(o[h+1][_]))}}function u(t){s.push(t.x,t.y,t.z)}function p(t,e){var n=3*t;e.x=i[n+0],e.y=i[n+1],e.z=i[n+2]}function h(t,e,n,i){i<0&&1===t.x&&(l[e]=t.x-1),0===n.x&&0===n.z&&(l[e]=i/2/Math.PI+.5)}function d(t){return Math.atan2(t.z,-t.x)}return function(t){for(var e=new Wt,n=new Wt,i=new Wt,o=0;o<r.length;o+=3)p(r[o+0],e),p(r[o+1],n),p(r[o+2],i),c(e,n,i,t)}(a),function(t){for(var e=new Wt,n=0;n<s.length;n+=3)e.x=s[n+0],e.y=s[n+1],e.z=s[n+2],e.normalize().multiplyScalar(t),s[n+0]=e.x,s[n+1]=e.y,s[n+2]=e.z}(o),function(){for(var t,e=new Wt,n=0;n<s.length;n+=3){e.x=s[n+0],e.y=s[n+1],e.z=s[n+2];var i=d(e)/2/Math.PI+.5,r=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);l.push(i,1-r)}(function(){for(var t=new Wt,e=new Wt,n=new Wt,i=new Wt,r=new Et,o=new Et,a=new Et,c=0,u=0;c<s.length;c+=9,u+=6){t.set(s[c+0],s[c+1],s[c+2]),e.set(s[c+3],s[c+4],s[c+5]),n.set(s[c+6],s[c+7],s[c+8]),r.set(l[u+0],l[u+1]),o.set(l[u+2],l[u+3]),a.set(l[u+4],l[u+5]),i.copy(t).add(e).add(n).divideScalar(3);var p=d(i);h(r,u+0,t,p),h(o,u+2,e,p),h(a,u+4,n,p)}})(),function(){for(var t=0;t<l.length;t+=6){var e=l[t+0],n=l[t+2],i=l[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(l[t+0]+=1),n<.2&&(l[t+2]+=1),i<.2&&(l[t+4]+=1))}}()}(),t.setAttribute("position",new Tn(s,3)),t.setAttribute("normal",new Tn(s.slice(),3)),t.setAttribute("uv",new Tn(l,2)),0===a?t.computeVertexNormals():t.normalizeNormals(),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.vertices,t.indices,t.radius,t.details)}}]),n}(kn),ws=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b()(this,n);var o=(1+Math.sqrt(5))/2,a=1/o;return(t=e.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-a,-o,0,-a,o,0,a,-o,0,a,o,-a,-o,0,-a,o,0,a,-o,0,a,o,0,-o,0,-a,o,0,-a,-o,0,a,o,0,a],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],i,r)).type="DodecahedronGeometry",t.parameters={radius:i,detail:r},t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ss),Ms=new Wt,Ts=new Wt,Cs=new Wt,Es=new nn,As=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(b()(this,n),(t=e.call(this)).type="EdgesGeometry",t.parameters={geometry:i,thresholdAngle:r},null!==i){for(var o=4,a=Math.pow(10,o),s=Math.cos(yt*r),l=i.getIndex(),c=i.getAttribute("position"),u=l?l.count:c.count,p=[0,0,0],h=["a","b","c"],d=new Array(3),_={},f=[],y=0;y<u;y+=3){l?(p[0]=l.getX(y),p[1]=l.getX(y+1),p[2]=l.getX(y+2)):(p[0]=y,p[1]=y+1,p[2]=y+2);var g=Es.a,v=Es.b,x=Es.c;if(g.fromBufferAttribute(c,p[0]),v.fromBufferAttribute(c,p[1]),x.fromBufferAttribute(c,p[2]),Es.getNormal(Cs),d[0]="".concat(Math.round(g.x*a),",").concat(Math.round(g.y*a),",").concat(Math.round(g.z*a)),d[1]="".concat(Math.round(v.x*a),",").concat(Math.round(v.y*a),",").concat(Math.round(v.z*a)),d[2]="".concat(Math.round(x.x*a),",").concat(Math.round(x.y*a),",").concat(Math.round(x.z*a)),d[0]!==d[1]&&d[1]!==d[2]&&d[2]!==d[0])for(var S=0;S<3;S++){var w=(S+1)%3,M=d[S],T=d[w],C=Es[h[S]],E=Es[h[w]],A="".concat(M,"_").concat(T),R="".concat(T,"_").concat(M);R in _&&_[R]?(Cs.dot(_[R].normal)<=s&&(f.push(C.x,C.y,C.z),f.push(E.x,E.y,E.z)),_[R]=null):A in _||(_[A]={index0:p[S],index1:p[w],normal:Cs.clone()})}}for(var L in _)if(_[L]){var P=_[L],D=P.index0,I=P.index1;Ms.fromBufferAttribute(c,D),Ts.fromBufferAttribute(c,I),f.push(Ms.x,Ms.y,Ms.z),f.push(Ts.x,Ts.y,Ts.z)}t.setAttribute("position",new Tn(f,3))}return m()(t)}return S()(n)}(kn),Rs=function(){function t(){b()(this,t),this.type="Curve",this.arcLengthDivisions=200}return S()(t,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;n.push(0);for(var o=1;o<=t;o++)r+=(e=this.getPoint(o/t)).distanceTo(i),n.push(r),i=e;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var a,s=0,l=o-1;s<=l;)if((a=i[r=Math.floor(s+(l-s)/2)]-n)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(i[r=l]===n)return r/(o-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(o-1)}},{key:"getTangent",value:function(t,e){var n=1e-4,i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);var o=this.getPoint(i),a=this.getPoint(r),s=e||(o.isVector2?new Et:new Wt);return s.copy(a).sub(o).normalize(),s}},{key:"getTangentAt",value:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)}},{key:"computeFrenetFrames",value:function(t,e){for(var n=new Wt,i=[],r=[],o=[],a=new Wt,s=new be,l=0;l<=t;l++){var c=l/t;i[l]=this.getTangentAt(c,new Wt)}r[0]=new Wt,o[0]=new Wt;var u=Number.MAX_VALUE,p=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);p<=u&&(u=p,n.set(1,0,0)),h<=u&&(u=h,n.set(0,1,0)),d<=u&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(var _=1;_<=t;_++){if(r[_]=r[_-1].clone(),o[_]=o[_-1].clone(),a.crossVectors(i[_-1],i[_]),a.length()>Number.EPSILON){a.normalize();var f=Math.acos(bt(i[_-1].dot(i[_]),-1,1));r[_].applyMatrix4(s.makeRotationAxis(a,f))}o[_].crossVectors(i[_],r[_])}if(!0===e){var m=Math.acos(bt(r[0].dot(r[t]),-1,1));m/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(m=-m);for(var y=1;y<=t;y++)r[y].applyMatrix4(s.makeRotationAxis(i[y],m*y)),o[y].crossVectors(i[y],r[y])}return{tangents:i,normals:r,binormals:o}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}},{key:"toJSON",value:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),Ls=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return b()(this,n),(t=e.call(this)).type="EllipseCurve",t.aX=i,t.aY=r,t.xRadius=o,t.yRadius=a,t.aStartAngle=s,t.aEndAngle=l,t.aClockwise=c,t.aRotation=u,t}return S()(n,[{key:"getPoint",value:function(t,e){for(var n=e||new Et,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var a=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),p=s-this.aX,h=l-this.aY;s=p*c-h*u+this.aX,l=p*u+h*c+this.aY}return n.set(s,l)}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),n}(Rs);Ls.prototype.isEllipseCurve=!0;var Ps=function(t){_()(n,t);var e=L(n);function n(t,i,r,o,a,s){var l;return b()(this,n),(l=e.call(this,t,i,r,r,o,a,s)).type="ArcCurve",l}return S()(n)}(Ls);function Ds(){var t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){var l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+s)+(i-n)/s;r(e,n,l*=a,c*=a)},calc:function(r){var o=r*r;return t+e*r+n*o+i*(o*r)}}}Ps.prototype.isArcCurve=!0;var Is=new Wt,ks=new Ds,Os=new Ds,Bs=new Ds,js=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return b()(this,n),(t=e.call(this)).type="CatmullRomCurve3",t.points=i,t.closed=r,t.curveType=o,t.tension=a,t}return S()(n,[{key:"getPoint",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,r=i,o=this.points,a=o.length,s=(a-(this.closed?0:1))*t,l=Math.floor(s),c=s-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/a)+1)*a:0===c&&l===a-1&&(l=a-2,c=1),this.closed||l>0?e=o[(l-1)%a]:(Is.subVectors(o[0],o[1]).add(o[0]),e=Is);var u=o[l%a],p=o[(l+1)%a];if(this.closed||l+2<a?n=o[(l+2)%a]:(Is.subVectors(o[a-1],o[a-2]).add(o[a-1]),n=Is),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,d=Math.pow(e.distanceToSquared(u),h),_=Math.pow(u.distanceToSquared(p),h),f=Math.pow(p.distanceToSquared(n),h);_<1e-4&&(_=1),d<1e-4&&(d=_),f<1e-4&&(f=_),ks.initNonuniformCatmullRom(e.x,u.x,p.x,n.x,d,_,f),Os.initNonuniformCatmullRom(e.y,u.y,p.y,n.y,d,_,f),Bs.initNonuniformCatmullRom(e.z,u.z,p.z,n.z,d,_,f)}else"catmullrom"===this.curveType&&(ks.initCatmullRom(e.x,u.x,p.x,n.x,this.tension),Os.initCatmullRom(e.y,u.y,p.y,n.y,this.tension),Bs.initCatmullRom(e.z,u.z,p.z,n.z,this.tension));return r.set(ks.calc(c),Os.calc(c),Bs.calc(c)),r}},{key:"copy",value:function(t){l()(g()(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}},{key:"fromJSON",value:function(t){l()(g()(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new Wt).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),n}(Rs);function Fs(t,e,n,i,r){var o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function Ns(t,e,n,i){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function zs(t,e,n,i,r){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}js.prototype.isCatmullRomCurve3=!0;var Hs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Et,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Et,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Et;return b()(this,n),(t=e.call(this)).type="CubicBezierCurve",t.v0=i,t.v1=r,t.v2=o,t.v3=a,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et,n=e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(zs(t,i.x,r.x,o.x,a.x),zs(t,i.y,r.y,o.y,a.y)),n}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Rs);Hs.prototype.isCubicBezierCurve=!0;var Us=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wt,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Wt;return b()(this,n),(t=e.call(this)).type="CubicBezierCurve3",t.v0=i,t.v1=r,t.v2=o,t.v3=a,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,n=e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(zs(t,i.x,r.x,o.x,a.x),zs(t,i.y,r.y,o.y,a.y),zs(t,i.z,r.z,o.z,a.z)),n}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(Rs);Us.prototype.isCubicBezierCurve3=!0;var Ws=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Et,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et;return b()(this,n),(t=e.call(this)).type="LineCurve",t.v1=i,t.v2=r,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"getTangent",value:function(t,e){var n=e||new Et;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Rs);Ws.prototype.isLineCurve=!0;var Gs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt;return b()(this,n),(t=e.call(this)).type="LineCurve3",t.isLineCurve3=!0,t.v1=i,t.v2=r,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(t,e){return this.getPoint(t,e)}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Rs),Vs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Et,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Et;return b()(this,n),(t=e.call(this)).type="QuadraticBezierCurve",t.v0=i,t.v1=r,t.v2=o,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et,n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Ns(t,i.x,r.x,o.x),Ns(t,i.y,r.y,o.y)),n}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Rs);Vs.prototype.isQuadraticBezierCurve=!0;var qs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wt;return b()(this,n),(t=e.call(this)).type="QuadraticBezierCurve3",t.v0=i,t.v1=r,t.v2=o,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt,n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Ns(t,i.x,r.x,o.x),Ns(t,i.y,r.y,o.y),Ns(t,i.z,r.z,o.z)),n}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(Rs);qs.prototype.isQuadraticBezierCurve3=!0;var Xs=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return b()(this,n),(t=e.call(this)).type="SplineCurve",t.points=i,t}return S()(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et,n=e,i=this.points,r=(i.length-1)*t,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Fs(a,s.x,l.x,c.x,u.x),Fs(a,s.y,l.y,c.y,u.y)),n}},{key:"copy",value:function(t){l()(g()(n.prototype),"copy",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);t.points=[];for(var e=0,i=this.points.length;e<i;e++){var r=this.points[e];t.points.push(r.toArray())}return t}},{key:"fromJSON",value:function(t){l()(g()(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new Et).fromArray(r))}return this}}]),n}(Rs);Xs.prototype.isSplineCurve=!0;var Ys=Object.freeze({__proto__:null,ArcCurve:Ps,CatmullRomCurve3:js,CubicBezierCurve:Hs,CubicBezierCurve3:Us,EllipseCurve:Ls,LineCurve:Ws,LineCurve3:Gs,QuadraticBezierCurve:Vs,QuadraticBezierCurve3:qs,SplineCurve:Xs}),Zs=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return S()(n,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Ws(e,t))}},{key:"getPoint",value:function(t,e){for(var n=t*this.getLength(),i=this.getCurveLengths(),r=0;r<i.length;){if(i[r]>=n){var o=i[r]-n,a=this.curves[r],s=a.getLength(),l=0===s?0:1-o/s;return a.getPointAt(l,e)}r++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];t&&t.equals(c)||(n.push(c),t=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(t){l()(g()(n.prototype),"copy",this).call(this,t),this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,i=this.curves.length;e<i;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t}},{key:"fromJSON",value:function(t){l()(g()(n.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,i=t.curves.length;e<i;e++){var r=t.curves[e];this.curves.push((new Ys[r.type]).fromJSON(r))}return this}}]),n}(Rs),Js=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="Path",i.currentPoint=new Et,t&&i.setFromPoints(t),i}return S()(n,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new Ws(this.currentPoint.clone(),new Et(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,i){var r=new Vs(this.currentPoint.clone(),new Et(t,e),new Et(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){var a=new Hs(this.currentPoint.clone(),new Et(t,e),new Et(n,i),new Et(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Xs(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,i,r,o),this}},{key:"absarc",value:function(t,e,n,i,r,o){return this.absellipse(t,e,n,n,i,r,o),this}},{key:"ellipse",value:function(t,e,n,i,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,o,a,s),this}},{key:"absellipse",value:function(t,e,n,i,r,o,a,s){var l=new Ls(t,e,n,i,r,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);return this.currentPoint.copy(u),this}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.currentPoint.copy(t.currentPoint),this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.currentPoint=this.currentPoint.toArray(),t}},{key:"fromJSON",value:function(t){return l()(g()(n.prototype),"fromJSON",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),n}(Zs),Ks=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this,t)).uuid=vt(),i.type="Shape",i.holes=[],i}return S()(n,[{key:"getPointsHoles",value:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(t){l()(g()(n.prototype),"copy",this).call(this,t),this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,i=this.holes.length;e<i;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t}},{key:"fromJSON",value:function(t){l()(g()(n.prototype),"fromJSON",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,i=t.holes.length;e<i;e++){var r=t.holes[e];this.holes.push((new Js).fromJSON(r))}return this}}]),n}(Js);function Qs(t,e,n,i,r){var o,a;if(r===function(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}(t,e,n,i)>0)for(o=e;o<n;o+=i)a=vl(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=vl(o,t[o],t[o+1],a);return a&&dl(a,a.next)&&(bl(a),a=a.next),a}function $s(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!dl(i,i.next)&&0!==hl(i.prev,i,i.next))i=i.next;else{if(bl(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function tl(t,e,n,i,r,o,a){if(t){!a&&o&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=ll(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1)}(r)}(t,i,r,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?nl(t,i,r,o):el(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),bl(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?tl(t=il($s(t),e,n),e,n,i,r,o,2):2===a&&rl(t,e,n,i,r,o):tl($s(t),e,n,i,r,o,1);break}}}function el(t){var e=t.prev,n=t,i=t.next;if(hl(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(ul(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&hl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function nl(t,e,n,i){var r=t.prev,o=t,a=t.next;if(hl(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,p=ll(s,l,e,n,i),h=ll(c,u,e,n,i),d=t.prevZ,_=t.nextZ;d&&d.z>=p&&_&&_.z<=h;){if(d!==t.prev&&d!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&hl(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,_!==t.prev&&_!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,_.x,_.y)&&hl(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;d&&d.z>=p;){if(d!==t.prev&&d!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&hl(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;_&&_.z<=h;){if(_!==t.prev&&_!==t.next&&ul(r.x,r.y,o.x,o.y,a.x,a.y,_.x,_.y)&&hl(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function il(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!dl(r,o)&&_l(r,i,i.next,o)&&yl(r,o)&&yl(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),bl(i),bl(i.next),i=t=o),i=i.next}while(i!==t);return $s(i)}function rl(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&pl(a,s)){var l=gl(a,s);return a=$s(a,a.next),l=$s(l,l.next),tl(a,e,n,i,r,o),void tl(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function ol(t,e){return t.x-e.x}function al(t,e){if(e=function(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n;var l,c=n,u=n.x,p=n.y,h=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&ul(o<p?r:a,o,u,p,o<p?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),yl(i,t)&&(l<h||l===h&&(i.x>n.x||i.x===n.x&&sl(n,i)))&&(n=i,h=l)),i=i.next}while(i!==c);return n}(t,e)){var n=gl(e,t);$s(e,e.next),$s(n,n.next)}}function sl(t,e){return hl(t.prev,t,e.prev)<0&&hl(e.next,t,t.next)<0}function ll(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function cl(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function ul(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function pl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_l(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(yl(t,e)&&yl(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(hl(t.prev,t,e.prev)||hl(t,e.prev,e))||dl(t,e)&&hl(t.prev,t,t.next)>0&&hl(e.prev,e,e.next)>0)}function hl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function dl(t,e){return t.x===e.x&&t.y===e.y}function _l(t,e,n,i){var r=ml(hl(t,e,n)),o=ml(hl(t,e,i)),a=ml(hl(n,i,t)),s=ml(hl(n,i,e));return r!==o&&a!==s||!(0!==r||!fl(t,n,e))||!(0!==o||!fl(t,i,e))||!(0!==a||!fl(n,t,i))||!(0!==s||!fl(n,e,i))}function fl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ml(t){return t>0?1:t<0?-1:0}function yl(t,e){return hl(t.prev,t,t.next)<0?hl(t,e,t.next)>=0&&hl(t,t.prev,e)>=0:hl(t,e,t.prev)<0||hl(t,t.next,e)<0}function gl(t,e){var n=new xl(t.i,t.x,t.y),i=new xl(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function vl(t,e,n,i){var r=new xl(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function bl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function xl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Sl=function(){function t(){b()(this,t)}return S()(t,null,[{key:"area",value:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],i=[],r=[];wl(t),Ml(n,t);var o=t.length;e.forEach(wl);for(var a=0;a<e.length;a++)i.push(o),o+=e[a].length,Ml(n,e[a]);for(var s=function(t,e){var n,i,r,o,a,s,l,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,u=e&&e.length,p=u?e[0]*c:t.length,h=Qs(t,0,p,c,!0),d=[];if(!h||h.next===h.prev)return d;if(u&&(h=function(t,e,n,i){var r,o,a,s=[];for(r=0,o=e.length;r<o;r++)(a=Qs(t,e[r]*i,r<o-1?e[r+1]*i:t.length,i,!1))===a.next&&(a.steiner=!0),s.push(cl(a));for(s.sort(ol),r=0;r<s.length;r++)al(s[r],n),n=$s(n,n.next);return n}(t,e,h,c)),t.length>80*c){n=r=t[0],i=o=t[1];for(var _=c;_<p;_+=c)(a=t[_])<n&&(n=a),(s=t[_+1])<i&&(i=s),a>r&&(r=a),s>o&&(o=s);l=0!==(l=Math.max(r-n,o-i))?1/l:0}return tl(h,d,c,n,i,l),d}(n,i),l=0;l<s.length;l+=3)r.push(s.slice(l,l+3));return r}}]),t}();function wl(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ml(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var Tl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ks([new Et(.5,.5),new Et(-.5,.5),new Et(-.5,-.5),new Et(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b()(this,n),(t=e.call(this)).type="ExtrudeGeometry",t.parameters={shapes:i,options:r},i=Array.isArray(i)?i:[i];for(var o=h()(t),a=[],s=[],l=0,c=i.length;l<c;l++)u(i[l]);function u(t){var e=[],n=void 0!==r.curveSegments?r.curveSegments:12,i=void 0!==r.steps?r.steps:1,l=void 0!==r.depth?r.depth:1,c=void 0===r.bevelEnabled||r.bevelEnabled,u=void 0!==r.bevelThickness?r.bevelThickness:.2,p=void 0!==r.bevelSize?r.bevelSize:u-.1,h=void 0!==r.bevelOffset?r.bevelOffset:0,d=void 0!==r.bevelSegments?r.bevelSegments:3,_=r.extrudePath,f=void 0!==r.UVGenerator?r.UVGenerator:Cl;void 0!==r.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=r.amount);var m,y,g,v,b,x=!1;_&&(m=_.getSpacedPoints(i),x=!0,c=!1,y=_.computeFrenetFrames(i,!1),g=new Wt,v=new Wt,b=new Wt),c||(d=0,u=0,p=0,h=0);var S=t.extractPoints(n),w=S.shape,M=S.holes;if(!Sl.isClockWise(w)){w=w.reverse();for(var T=0,C=M.length;T<C;T++){var E=M[T];Sl.isClockWise(E)&&(M[T]=E.reverse())}}for(var A=Sl.triangulateShape(w,M),R=w,L=0,P=M.length;L<P;L++){var D=M[L];w=w.concat(D)}function I(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var k=w.length,O=A.length;function B(t,e,n){var i,r,o,a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+s*s,p=a*c-s*l;if(Math.abs(p)>Number.EPSILON){var h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),_=e.x-s/h,f=e.y+a/h,m=((n.x-c/d-_)*c-(n.y+l/d-f)*l)/(a*c-s*l),y=(i=_+a*m-t.x)*i+(r=f+s*m-t.y)*r;if(y<=2)return new Et(i,r);o=Math.sqrt(y/2)}else{var g=!1;a>Number.EPSILON?l>Number.EPSILON&&(g=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(g=!0):Math.sign(s)===Math.sign(c)&&(g=!0),g?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new Et(i/o,r/o)}for(var j=[],F=0,N=R.length,z=N-1,H=F+1;F<N;F++,z++,H++)z===N&&(z=0),H===N&&(H=0),j[F]=B(R[F],R[z],R[H]);for(var U,W=[],G=j.concat(),V=0,q=M.length;V<q;V++){var X=M[V];U=[];for(var Y=0,Z=X.length,J=Z-1,K=Y+1;Y<Z;Y++,J++,K++)J===Z&&(J=0),K===Z&&(K=0),U[Y]=B(X[Y],X[J],X[K]);W.push(U),G=G.concat(U)}for(var Q=0;Q<d;Q++){for(var $=Q/d,tt=u*Math.cos($*Math.PI/2),et=p*Math.sin($*Math.PI/2)+h,nt=0,it=R.length;nt<it;nt++){var rt=I(R[nt],j[nt],et);Dt(rt.x,rt.y,-tt)}for(var ot=0,at=M.length;ot<at;ot++){var st=M[ot];U=W[ot];for(var lt=0,ct=st.length;lt<ct;lt++){var ut=I(st[lt],U[lt],et);Dt(ut.x,ut.y,-tt)}}}for(var pt=p+h,ht=0;ht<k;ht++){var dt=c?I(w[ht],G[ht],pt):w[ht];x?(v.copy(y.normals[0]).multiplyScalar(dt.x),g.copy(y.binormals[0]).multiplyScalar(dt.y),b.copy(m[0]).add(v).add(g),Dt(b.x,b.y,b.z)):Dt(dt.x,dt.y,0)}for(var _t=1;_t<=i;_t++)for(var ft=0;ft<k;ft++){var mt=c?I(w[ft],G[ft],pt):w[ft];x?(v.copy(y.normals[_t]).multiplyScalar(mt.x),g.copy(y.binormals[_t]).multiplyScalar(mt.y),b.copy(m[_t]).add(v).add(g),Dt(b.x,b.y,b.z)):Dt(mt.x,mt.y,l/i*_t)}for(var yt=d-1;yt>=0;yt--){for(var gt=yt/d,vt=u*Math.cos(gt*Math.PI/2),bt=p*Math.sin(gt*Math.PI/2)+h,xt=0,St=R.length;xt<St;xt++){var wt=I(R[xt],j[xt],bt);Dt(wt.x,wt.y,l+vt)}for(var Mt=0,Tt=M.length;Mt<Tt;Mt++){var Ct=M[Mt];U=W[Mt];for(var At=0,Rt=Ct.length;At<Rt;At++){var Lt=I(Ct[At],U[At],bt);x?Dt(Lt.x,Lt.y+m[i-1].y,m[i-1].x+vt):Dt(Lt.x,Lt.y,l+vt)}}}function Pt(t,e){for(var n=t.length;--n>=0;){var r=n,o=n-1;o<0&&(o=t.length-1);for(var a=0,s=i+2*d;a<s;a++){var l=k*a,c=k*(a+1);kt(e+r+l,e+o+l,e+o+c,e+r+c)}}}function Dt(t,n,i){e.push(t),e.push(n),e.push(i)}function It(t,e,n){Ot(t),Ot(e),Ot(n);var i=a.length/3,r=f.generateTopUV(o,a,i-3,i-2,i-1);Bt(r[0]),Bt(r[1]),Bt(r[2])}function kt(t,e,n,i){Ot(t),Ot(e),Ot(i),Ot(e),Ot(n),Ot(i);var r=a.length/3,s=f.generateSideWallUV(o,a,r-6,r-3,r-2,r-1);Bt(s[0]),Bt(s[1]),Bt(s[3]),Bt(s[1]),Bt(s[2]),Bt(s[3])}function Ot(t){a.push(e[3*t+0]),a.push(e[3*t+1]),a.push(e[3*t+2])}function Bt(t){s.push(t.x),s.push(t.y)}!function(){var t=a.length/3;if(c){for(var e=0,n=k*e,r=0;r<O;r++){var s=A[r];It(s[2]+n,s[1]+n,s[0]+n)}n=k*(e=i+2*d);for(var l=0;l<O;l++){var u=A[l];It(u[0]+n,u[1]+n,u[2]+n)}}else{for(var p=0;p<O;p++){var h=A[p];It(h[2],h[1],h[0])}for(var _=0;_<O;_++){var f=A[_];It(f[0]+k*i,f[1]+k*i,f[2]+k*i)}}o.addGroup(t,a.length/3-t,0)}(),function(){var t=a.length/3,e=0;Pt(R,e),e+=R.length;for(var n=0,i=M.length;n<i;n++){var r=M[n];Pt(r,e),e+=r.length}o.addGroup(t,a.length/3-t,1)}()}return t.setAttribute("position",new Tn(a,3)),t.setAttribute("uv",new Tn(s,2)),t.computeVertexNormals(),t}return S()(n,[{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return function(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}(this.parameters.shapes,this.parameters.options,t)}}],[{key:"fromJSON",value:function(t,e){for(var i=[],r=0,o=t.shapes.length;r<o;r++){var a=e[t.shapes[r]];i.push(a)}var s=t.options.extrudePath;return void 0!==s&&(t.options.extrudePath=(new Ys[s.type]).fromJSON(s)),new n(i,t.options)}}]),n}(kn),Cl={generateTopUV:function(t,e,n,i,r){var o=e[3*n],a=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new Et(o,a),new Et(s,l),new Et(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){var a=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],p=e[3*i+2],h=e[3*r],d=e[3*r+1],_=e[3*r+2],f=e[3*o],m=e[3*o+1],y=e[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new Et(a,1-l),new Et(c,1-p),new Et(h,1-_),new Et(f,1-y)]:[new Et(s,1-l),new Et(u,1-p),new Et(d,1-_),new Et(m,1-y)]}},El=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;b()(this,n);var o=(1+Math.sqrt(5))/2;return(t=e.call(this,[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],i,r)).type="IcosahedronGeometry",t.parameters={radius:i,detail:r},t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ss),Al=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new Et(0,.5),new Et(.5,0),new Et(0,-.5)],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;b()(this,n),(t=e.call(this)).type="LatheGeometry",t.parameters={points:i,segments:r,phiStart:o,phiLength:a},r=Math.floor(r),a=bt(a,0,2*Math.PI);for(var s=[],l=[],c=[],u=[],p=[],h=1/r,d=new Wt,_=new Et,f=new Wt,m=new Wt,y=new Wt,g=0,v=0,x=0;x<=i.length-1;x++)switch(x){case 0:g=i[x+1].x-i[x].x,v=i[x+1].y-i[x].y,f.x=1*v,f.y=-g,f.z=0*v,y.copy(f),f.normalize(),u.push(f.x,f.y,f.z);break;case i.length-1:u.push(y.x,y.y,y.z);break;default:g=i[x+1].x-i[x].x,v=i[x+1].y-i[x].y,f.x=1*v,f.y=-g,f.z=0*v,m.copy(f),f.x+=y.x,f.y+=y.y,f.z+=y.z,f.normalize(),u.push(f.x,f.y,f.z),y.copy(m)}for(var S=0;S<=r;S++)for(var w=o+S*h*a,M=Math.sin(w),T=Math.cos(w),C=0;C<=i.length-1;C++){d.x=i[C].x*M,d.y=i[C].y,d.z=i[C].x*T,l.push(d.x,d.y,d.z),_.x=S/r,_.y=C/(i.length-1),c.push(_.x,_.y);var E=u[3*C+0]*M,A=u[3*C+1],R=u[3*C+0]*T;p.push(E,A,R)}for(var L=0;L<r;L++)for(var P=0;P<i.length-1;P++){var D=P+L*i.length,I=D,k=D+i.length,O=D+i.length+1,B=D+1;s.push(I,k,B),s.push(k,O,B)}return t.setIndex(s),t.setAttribute("position",new Tn(l,3)),t.setAttribute("uv",new Tn(c,2)),t.setAttribute("normal",new Tn(p,3)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.points,t.segments,t.phiStart,t.phiLength)}}]),n}(kn),Rl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return b()(this,n),(t=e.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],i,r)).type="OctahedronGeometry",t.parameters={radius:i,detail:r},t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ss),Ll=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;b()(this,n),(t=e.call(this)).type="RingGeometry",t.parameters={innerRadius:i,outerRadius:r,thetaSegments:o,phiSegments:a,thetaStart:s,thetaLength:l},o=Math.max(3,o);for(var c=[],u=[],p=[],h=[],d=i,_=(r-i)/(a=Math.max(1,a)),f=new Wt,m=new Et,y=0;y<=a;y++){for(var g=0;g<=o;g++){var v=s+g/o*l;f.x=d*Math.cos(v),f.y=d*Math.sin(v),u.push(f.x,f.y,f.z),p.push(0,0,1),m.x=(f.x/r+1)/2,m.y=(f.y/r+1)/2,h.push(m.x,m.y)}d+=_}for(var x=0;x<a;x++)for(var S=x*(o+1),w=0;w<o;w++){var M=w+S,T=M,C=M+o+1,E=M+o+2,A=M+1;c.push(T,C,A),c.push(C,E,A)}return t.setIndex(c),t.setAttribute("position",new Tn(u,3)),t.setAttribute("normal",new Tn(p,3)),t.setAttribute("uv",new Tn(h,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.innerRadius,t.outerRadius,t.thetaSegments,t.phiSegments,t.thetaStart,t.thetaLength)}}]),n}(kn),Pl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ks([new Et(0,.5),new Et(-.5,-.5),new Et(.5,-.5)]),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;b()(this,n),(t=e.call(this)).type="ShapeGeometry",t.parameters={shapes:i,curveSegments:r};var o=[],a=[],s=[],l=[],c=0,u=0;if(!1===Array.isArray(i))h(i);else for(var p=0;p<i.length;p++)h(i[p]),t.addGroup(c,u,p),c+=u,u=0;function h(t){var e=a.length/3,n=t.extractPoints(r),i=n.shape,c=n.holes;!1===Sl.isClockWise(i)&&(i=i.reverse());for(var p=0,h=c.length;p<h;p++){var d=c[p];!0===Sl.isClockWise(d)&&(c[p]=d.reverse())}for(var _=Sl.triangulateShape(i,c),f=0,m=c.length;f<m;f++){var y=c[f];i=i.concat(y)}for(var g=0,v=i.length;g<v;g++){var b=i[g];a.push(b.x,b.y,0),s.push(0,0,1),l.push(b.x,b.y)}for(var x=0,S=_.length;x<S;x++){var w=_[x],M=w[0]+e,T=w[1]+e,C=w[2]+e;o.push(M,T,C),u+=3}}return t.setIndex(o),t.setAttribute("position",new Tn(a,3)),t.setAttribute("normal",new Tn(s,3)),t.setAttribute("uv",new Tn(l,2)),t}return S()(n,[{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return function(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}(this.parameters.shapes,t)}}],[{key:"fromJSON",value:function(t,e){for(var i=[],r=0,o=t.shapes.length;r<o;r++){var a=e[t.shapes[r]];i.push(a)}return new n(i,t.curveSegments)}}]),n}(kn),Dl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;b()(this,n),(t=e.call(this)).type="SphereGeometry",t.parameters={radius:i,widthSegments:r,heightSegments:o,phiStart:a,phiLength:s,thetaStart:l,thetaLength:c},r=Math.max(3,Math.floor(r)),o=Math.max(2,Math.floor(o));for(var u=Math.min(l+c,Math.PI),p=0,h=[],d=new Wt,_=new Wt,f=[],m=[],y=[],g=[],v=0;v<=o;v++){var x=[],S=v/o,w=0;0==v&&0==l?w=.5/r:v==o&&u==Math.PI&&(w=-.5/r);for(var M=0;M<=r;M++){var T=M/r;d.x=-i*Math.cos(a+T*s)*Math.sin(l+S*c),d.y=i*Math.cos(l+S*c),d.z=i*Math.sin(a+T*s)*Math.sin(l+S*c),m.push(d.x,d.y,d.z),_.copy(d).normalize(),y.push(_.x,_.y,_.z),g.push(T+w,1-S),x.push(p++)}h.push(x)}for(var C=0;C<o;C++)for(var E=0;E<r;E++){var A=h[C][E+1],R=h[C][E],L=h[C+1][E],P=h[C+1][E+1];(0!==C||l>0)&&f.push(A,R,P),(C!==o-1||u<Math.PI)&&f.push(R,L,P)}return t.setIndex(f),t.setAttribute("position",new Tn(m,3)),t.setAttribute("normal",new Tn(y,3)),t.setAttribute("uv",new Tn(g,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}]),n}(kn),Il=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return b()(this,n),(t=e.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],i,r)).type="TetrahedronGeometry",t.parameters={radius:i,detail:r},t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.detail)}}]),n}(Ss),kl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:6,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;b()(this,n),(t=e.call(this)).type="TorusGeometry",t.parameters={radius:i,tube:r,radialSegments:o,tubularSegments:a,arc:s},o=Math.floor(o),a=Math.floor(a);for(var l=[],c=[],u=[],p=[],h=new Wt,d=new Wt,_=new Wt,f=0;f<=o;f++)for(var m=0;m<=a;m++){var y=m/a*s,g=f/o*Math.PI*2;d.x=(i+r*Math.cos(g))*Math.cos(y),d.y=(i+r*Math.cos(g))*Math.sin(y),d.z=r*Math.sin(g),c.push(d.x,d.y,d.z),h.x=i*Math.cos(y),h.y=i*Math.sin(y),_.subVectors(d,h).normalize(),u.push(_.x,_.y,_.z),p.push(m/a),p.push(f/o)}for(var v=1;v<=o;v++)for(var x=1;x<=a;x++){var S=(a+1)*v+x-1,w=(a+1)*(v-1)+x-1,M=(a+1)*(v-1)+x,T=(a+1)*v+x;l.push(S,w,T),l.push(w,M,T)}return t.setIndex(l),t.setAttribute("position",new Tn(c,3)),t.setAttribute("normal",new Tn(u,3)),t.setAttribute("uv",new Tn(p,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}}]),n}(kn),Ol=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;b()(this,n),(t=e.call(this)).type="TorusKnotGeometry",t.parameters={radius:i,tube:r,tubularSegments:o,radialSegments:a,p:s,q:l},o=Math.floor(o),a=Math.floor(a);for(var c=[],u=[],p=[],h=[],d=new Wt,_=new Wt,f=new Wt,m=new Wt,y=new Wt,g=new Wt,v=new Wt,x=0;x<=o;++x){var S=x/o*s*Math.PI*2;I(S,s,l,i,f),I(S+.01,s,l,i,m),g.subVectors(m,f),v.addVectors(m,f),y.crossVectors(g,v),v.crossVectors(y,g),y.normalize(),v.normalize();for(var w=0;w<=a;++w){var M=w/a*Math.PI*2,T=-r*Math.cos(M),C=r*Math.sin(M);d.x=f.x+(T*v.x+C*y.x),d.y=f.y+(T*v.y+C*y.y),d.z=f.z+(T*v.z+C*y.z),u.push(d.x,d.y,d.z),_.subVectors(d,f).normalize(),p.push(_.x,_.y,_.z),h.push(x/o),h.push(w/a)}}for(var E=1;E<=o;E++)for(var A=1;A<=a;A++){var R=(a+1)*(E-1)+(A-1),L=(a+1)*E+(A-1),P=(a+1)*E+A,D=(a+1)*(E-1)+A;c.push(R,L,D),c.push(L,P,D)}function I(t,e,n,i,r){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}return t.setIndex(c),t.setAttribute("position",new Tn(u,3)),t.setAttribute("normal",new Tn(p,3)),t.setAttribute("uv",new Tn(h,2)),t}return S()(n,null,[{key:"fromJSON",value:function(t){return new n(t.radius,t.tube,t.tubularSegments,t.radialSegments,t.p,t.q)}}]),n}(kn),Bl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qs(new Wt(-1,-1,0),new Wt(-1,1,0),new Wt(1,1,0)),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];b()(this,n),(t=e.call(this)).type="TubeGeometry",t.parameters={path:i,tubularSegments:r,radius:o,radialSegments:a,closed:s};var l=i.computeFrenetFrames(r,s);t.tangents=l.tangents,t.normals=l.normals,t.binormals=l.binormals;var c=new Wt,u=new Wt,p=new Et,h=new Wt,d=[],_=[],f=[],m=[];function y(t){h=i.getPointAt(t/r,h);for(var e=l.normals[t],n=l.binormals[t],s=0;s<=a;s++){var p=s/a*Math.PI*2,f=Math.sin(p),m=-Math.cos(p);u.x=m*e.x+f*n.x,u.y=m*e.y+f*n.y,u.z=m*e.z+f*n.z,u.normalize(),_.push(u.x,u.y,u.z),c.x=h.x+o*u.x,c.y=h.y+o*u.y,c.z=h.z+o*u.z,d.push(c.x,c.y,c.z)}}return function(){for(var t=0;t<r;t++)y(t);y(!1===s?r:0),function(){for(var t=0;t<=r;t++)for(var e=0;e<=a;e++)p.x=t/r,p.y=e/a,f.push(p.x,p.y)}(),function(){for(var t=1;t<=r;t++)for(var e=1;e<=a;e++){var n=(a+1)*(t-1)+(e-1),i=(a+1)*t+(e-1),o=(a+1)*t+e,s=(a+1)*(t-1)+e;m.push(n,i,s),m.push(i,o,s)}}()}(),t.setIndex(m),t.setAttribute("position",new Tn(d,3)),t.setAttribute("normal",new Tn(_,3)),t.setAttribute("uv",new Tn(f,2)),t}return S()(n,[{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this);return t.path=this.parameters.path.toJSON(),t}}],[{key:"fromJSON",value:function(t){return new n((new Ys[t.path.type]).fromJSON(t.path),t.tubularSegments,t.radius,t.radialSegments,t.closed)}}]),n}(kn),jl=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(b()(this,n),(t=e.call(this)).type="WireframeGeometry",t.parameters={geometry:i},null!==i){var r=[],o=new Set,a=new Wt,s=new Wt;if(null!==i.index){var l=i.attributes.position,c=i.index,u=i.groups;0===u.length&&(u=[{start:0,count:c.count,materialIndex:0}]);for(var p=0,h=u.length;p<h;++p)for(var d=u[p],_=d.start,f=_,y=_+d.count;f<y;f+=3)for(var g=0;g<3;g++){var v=c.getX(f+g),x=c.getX(f+(g+1)%3);a.fromBufferAttribute(l,v),s.fromBufferAttribute(l,x),!0===Fl(a,s,o)&&(r.push(a.x,a.y,a.z),r.push(s.x,s.y,s.z))}}else for(var S=i.attributes.position,w=0,M=S.count/3;w<M;w++)for(var T=0;T<3;T++){var C=3*w+T,E=3*w+(T+1)%3;a.fromBufferAttribute(S,C),s.fromBufferAttribute(S,E),!0===Fl(a,s,o)&&(r.push(a.x,a.y,a.z),r.push(s.x,s.y,s.z))}t.setAttribute("position",new Tn(r,3))}return m()(t)}return S()(n)}(kn);function Fl(t,e,n){var i="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z),r="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i,r),!0)}var Nl=Object.freeze({__proto__:null,BoxGeometry:ti,BoxBufferGeometry:ti,CircleGeometry:vs,CircleBufferGeometry:vs,ConeGeometry:xs,ConeBufferGeometry:xs,CylinderGeometry:bs,CylinderBufferGeometry:bs,DodecahedronGeometry:ws,DodecahedronBufferGeometry:ws,EdgesGeometry:As,ExtrudeGeometry:Tl,ExtrudeBufferGeometry:Tl,IcosahedronGeometry:El,IcosahedronBufferGeometry:El,LatheGeometry:Al,LatheBufferGeometry:Al,OctahedronGeometry:Rl,OctahedronBufferGeometry:Rl,PlaneGeometry:vi,PlaneBufferGeometry:vi,PolyhedronGeometry:Ss,PolyhedronBufferGeometry:Ss,RingGeometry:Ll,RingBufferGeometry:Ll,ShapeGeometry:Pl,ShapeBufferGeometry:Pl,SphereGeometry:Dl,SphereBufferGeometry:Dl,TetrahedronGeometry:Il,TetrahedronBufferGeometry:Il,TorusGeometry:kl,TorusBufferGeometry:kl,TorusKnotGeometry:Ol,TorusKnotBufferGeometry:Ol,TubeGeometry:Bl,TubeBufferGeometry:Bl,WireframeGeometry:jl}),zl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="ShadowMaterial",i.color=new hn(0),i.transparent=!0,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this}}]),n}(on);zl.prototype.isShadowMaterial=!0;var Hl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).defines={STANDARD:""},i.type="MeshStandardMaterial",i.color=new hn(16777215),i.roughness=1,i.metalness=0,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new hn(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new Et(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.roughnessMap=null,i.metalnessMap=null,i.alphaMap=null,i.envMap=null,i.envMapIntensity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}]),n}(on);Hl.prototype.isMeshStandardMaterial=!0;var Ul=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).defines={STANDARD:"",PHYSICAL:""},i.type="MeshPhysicalMaterial",i.clearcoatMap=null,i.clearcoatRoughness=0,i.clearcoatRoughnessMap=null,i.clearcoatNormalScale=new Et(1,1),i.clearcoatNormalMap=null,i.ior=1.5,Object.defineProperty(h()(i),"reflectivity",{get:function(){return bt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),i.sheenColor=new hn(0),i.sheenColorMap=null,i.sheenRoughness=1,i.sheenRoughnessMap=null,i.transmissionMap=null,i.thickness=0,i.thicknessMap=null,i.attenuationDistance=0,i.attenuationColor=new hn(1,1,1),i.specularIntensity=1,i.specularIntensityMap=null,i.specularColor=new hn(1,1,1),i.specularColorMap=null,i._sheen=0,i._clearcoat=0,i._transmission=0,i.setValues(t),i}return S()(n,[{key:"sheen",get:function(){return this._sheen},set:function(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}},{key:"transmission",get:function(){return this._transmission},set:function(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}]),n}(Hl);Ul.prototype.isMeshPhysicalMaterial=!0;var Wl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="MeshPhongMaterial",i.color=new hn(16777215),i.specular=new hn(1118481),i.shininess=30,i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new hn(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new Et(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=0,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.flatShading=!1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this}}]),n}(on);Wl.prototype.isMeshPhongMaterial=!0;var Gl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).defines={TOON:""},i.type="MeshToonMaterial",i.color=new hn(16777215),i.map=null,i.gradientMap=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new hn(0),i.emissiveIntensity=1,i.emissiveMap=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new Et(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),n}(on);Gl.prototype.isMeshToonMaterial=!0;var Vl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="MeshNormalMaterial",i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new Et(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.wireframe=!1,i.wireframeLinewidth=1,i.fog=!1,i.flatShading=!1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}]),n}(on);Vl.prototype.isMeshNormalMaterial=!0;var ql=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="MeshLambertMaterial",i.color=new hn(16777215),i.map=null,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=null,i.aoMapIntensity=1,i.emissive=new hn(0),i.emissiveIntensity=1,i.emissiveMap=null,i.specularMap=null,i.alphaMap=null,i.envMap=null,i.combine=0,i.reflectivity=1,i.refractionRatio=.98,i.wireframe=!1,i.wireframeLinewidth=1,i.wireframeLinecap="round",i.wireframeLinejoin="round",i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this}}]),n}(on);ql.prototype.isMeshLambertMaterial=!0;var Xl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).defines={MATCAP:""},i.type="MeshMatcapMaterial",i.color=new hn(16777215),i.matcap=null,i.map=null,i.bumpMap=null,i.bumpScale=1,i.normalMap=null,i.normalMapType=0,i.normalScale=new Et(1,1),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.alphaMap=null,i.flatShading=!1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this}}]),n}(on);Xl.prototype.isMeshMatcapMaterial=!0;var Yl=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="LineDashedMaterial",i.scale=1,i.dashSize=3,i.gapSize=1,i.setValues(t),i}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}]),n}(Ka);Yl.prototype.isLineDashedMaterial=!0;var Zl=Object.freeze({__proto__:null,ShadowMaterial:zl,SpriteMaterial:ma,RawShaderMaterial:Li,ShaderMaterial:ri,PointsMaterial:ls,MeshPhysicalMaterial:Ul,MeshStandardMaterial:Hl,MeshPhongMaterial:Wl,MeshToonMaterial:Gl,MeshNormalMaterial:Vl,MeshLambertMaterial:ql,MeshDepthMaterial:Yo,MeshDistanceMaterial:Zo,MeshBasicMaterial:dn,MeshMatcapMaterial:Xl,LineDashedMaterial:Yl,LineBasicMaterial:Ka,Material:on}),Jl={arraySlice:function(t,e,n){return Jl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*e,l=0;l!==e;++l)r[a++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[i])&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[i])&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{void 0!==(a=o[i])&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)}},subclip:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var l=o.tracks[s],c=l.getValueSize(),u=[],p=[],h=0;h<l.times.length;++h){var d=l.times[h]*r;if(!(d<n||d>=i)){u.push(l.times[h]);for(var _=0;_<c;++_)p.push(l.values[h*c+_])}}0!==u.length&&(l.times=Jl.convertArray(u,l.times.constructor),l.values=Jl.convertArray(p,l.values.constructor),a.push(l))}o.tracks=a;for(var f=1/0,m=0;m<o.tracks.length;++m)f>o.tracks[m].times[0]&&(f=o.tracks[m].times[0]);for(var y=0;y<o.tracks.length;++y)o.tracks[y].shift(-1*f);return o.resetDuration(),o},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);for(var r=n.tracks.length,o=e/i,a=function(e){var i=n.tracks[e],r=i.ValueTypeName;if("bool"===r||"string"===r)return"continue";var a=t.tracks.find((function(t){return t.name===i.name&&t.ValueTypeName===r}));if(void 0===a)return"continue";var s=0,l=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);var c=0,u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);var p=i.times.length-1,h=void 0;if(o<=i.times[0]){var d=s,_=l-s;h=Jl.arraySlice(i.values,d,_)}else if(o>=i.times[p]){var f=p*l+s,m=f+l-s;h=Jl.arraySlice(i.values,f,m)}else{var y=i.createInterpolant(),g=s,v=l-s;y.evaluate(o),h=Jl.arraySlice(y.resultBuffer,g,v)}"quaternion"===r&&(new Ut).fromArray(h).normalize().conjugate().toArray(h);for(var b=a.times.length,x=0;x<b;++x){var S=x*u+c;if("quaternion"===r)Ut.multiplyQuaternionsFlat(a.values,S,h,0,a.values,S);else for(var w=u-2*c,M=0;M<w;++M)a.values[S+M]-=h[M]}},s=0;s<r;++s)a(s);return t.blendMode=at,t}},Kl=function(){function t(e,n,i,r){b()(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}return S()(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,t<(i=e[++n]))break e}o=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(var l=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===l)break;if(i=r,t>=(r=e[--n-1]))break e}o=n,n=0}for(;n<o;){var c=n+o>>>1;t<e[c]?o=c:n=c+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}();Kl.prototype.beforeStart_=Kl.prototype.copySampleValue_,Kl.prototype.afterEnd_=Kl.prototype.copySampleValue_;var Ql=function(t){_()(n,t);var e=L(n);function n(t,i,r,o){var a;return b()(this,n),(a=e.call(this,t,i,r,o))._weightPrev=-0,a._offsetPrev=-0,a._weightNext=-0,a._offsetNext=-0,a.DefaultSettings_={endingStart:it,endingEnd:it},a}return S()(n,[{key:"intervalChanged_",value:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case rt:r=t,a=2*e-n;break;case ot:a=e+i[r=i.length-2]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case rt:o=t,s=2*n-e;break;case ot:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c}},{key:"interpolate_",value:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,p=this._weightPrev,h=this._weightNext,d=(n-e)/(i-e),_=d*d,f=_*d,m=-p*f+2*p*_-p*d,y=(1+p)*f+(-1.5-2*p)*_+(-.5+p)*d+1,g=(-1-h)*f+(1.5+h)*_+.5*d,v=h*f-h*_,b=0;b!==a;++b)r[b]=m*o[c+b]+y*o[l+b]+g*o[s+b]+v*o[u+b];return r}}]),n}(Kl),$l=function(t){_()(n,t);var e=L(n);function n(t,i,r,o){return b()(this,n),e.call(this,t,i,r,o)}return S()(n,[{key:"interpolate_",value:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c,p=0;p!==a;++p)r[p]=o[l+p]*u+o[s+p]*c;return r}}]),n}(Kl),tc=function(t){_()(n,t);var e=L(n);function n(t,i,r,o){return b()(this,n),e.call(this,t,i,r,o)}return S()(n,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),n}(Kl),ec=function(){function t(e,n,i,r){if(b()(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jl.convertArray(n,this.TimeBufferType),this.values=Jl.convertArray(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}return S()(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new tc(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new $l(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new Ql(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case tt:e=this.InterpolantFactoryMethodDiscrete;break;case et:e=this.InterpolantFactoryMethodLinear;break;case nt:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tt;case this.InterpolantFactoryMethodLinear:return et;case this.InterpolantFactoryMethodSmooth:return nt}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Jl.arraySlice(n,r,o),this.values=Jl.arraySlice(this.values,r*a,o*a)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==i&&Jl.isTypedArray(i))for(var l=0,c=i.length;l!==c;++l){var u=i[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=Jl.arraySlice(this.times),e=Jl.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===nt,r=t.length-1,o=1,a=1;a<r;++a){var s=!1,l=t[a];if(l!==t[a+1]&&(1!==a||l!==t[0]))if(i)s=!0;else for(var c=a*n,u=c-n,p=c+n,h=0;h!==n;++h){var d=e[c+h];if(d!==e[u+h]||d!==e[p+h]){s=!0;break}}if(s){if(a!==o){t[o]=t[a];for(var _=a*n,f=o*n,m=0;m!==n;++m)e[f+m]=e[_+m]}++o}}if(r>0){t[o]=t[r];for(var y=r*n,g=o*n,v=0;v!==n;++v)e[g+v]=e[y+v];++o}return o!==t.length?(this.times=Jl.arraySlice(t,0,o),this.values=Jl.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=Jl.arraySlice(this.times,0),e=Jl.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}],[{key:"toJSON",value:function(t){var e,n=t.constructor;if(n.toJSON!==this.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Jl.convertArray(t.times,Array),values:Jl.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}]),t}();ec.prototype.TimeBufferType=Float32Array,ec.prototype.ValueBufferType=Float32Array,ec.prototype.DefaultInterpolation=et;var nc=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n)}(ec);nc.prototype.ValueTypeName="bool",nc.prototype.ValueBufferType=Array,nc.prototype.DefaultInterpolation=tt,nc.prototype.InterpolantFactoryMethodLinear=void 0,nc.prototype.InterpolantFactoryMethodSmooth=void 0;var ic=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n)}(ec);ic.prototype.ValueTypeName="color";var rc=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n)}(ec);rc.prototype.ValueTypeName="number";var oc=function(t){_()(n,t);var e=L(n);function n(t,i,r,o){return b()(this,n),e.call(this,t,i,r,o)}return S()(n,[{key:"interpolate_",value:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(i-e),l=t*a,c=l+a;l!==c;l+=4)Ut.slerpFlat(r,0,o,l-a,o,l,s);return r}}]),n}(Kl),ac=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new oc(this.times,this.values,this.getValueSize(),t)}}]),n}(ec);ac.prototype.ValueTypeName="quaternion",ac.prototype.DefaultInterpolation=et,ac.prototype.InterpolantFactoryMethodSmooth=void 0;var sc=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n)}(ec);sc.prototype.ValueTypeName="string",sc.prototype.ValueBufferType=Array,sc.prototype.DefaultInterpolation=tt,sc.prototype.InterpolantFactoryMethodLinear=void 0,sc.prototype.InterpolantFactoryMethodSmooth=void 0;var lc=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.apply(this,arguments)}return S()(n)}(ec);lc.prototype.ValueTypeName="vector";var cc=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2500;b()(this,t),this.name=e,this.tracks=i,this.duration=n,this.blendMode=r,this.uuid=vt(),this.duration<0&&this.resetDuration()}return S()(t,[{key:"resetDuration",value:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(uc(n[r]).scale(i));var a=new this(t.name,t.duration,e,t.blendMode);return a.uuid=t.uuid,a}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,o=n.length;r!==o;++r)e.push(ec.toJSON(n[r]));return i}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=Jl.getKeyframeOrder(s);s=Jl.sortedArray(s,1,c),l=Jl.sortedArray(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new rc(".morphTargetInfluences["+e[a].name+"]",s,l).scale(1/n))}return new this(t,-1,o)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],l=s.name.match(r);if(l&&l.length>1){var c=l[1],u=i[c];u||(i[c]=u=[]),u.push(s)}}var p=[];for(var h in i)p.push(this.CreateFromMorphTargetSequence(h,i[h],e,n));return p}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var o=[],a=[];Jl.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.fps||30,a=t.blendMode,s=t.length||-1,l=t.hierarchy||[],c=0;c<l.length;c++){var u=l[c].keys;if(u&&0!==u.length)if(u[0].morphTargets){var p={},h=void 0;for(h=0;h<u.length;h++)if(u[h].morphTargets)for(var d=0;d<u[h].morphTargets.length;d++)p[u[h].morphTargets[d]]=-1;for(var _ in p){for(var f=[],m=[],y=0;y!==u[h].morphTargets.length;++y){var g=u[h];f.push(g.time),m.push(g.morphTarget===_?1:0)}i.push(new rc(".morphTargetInfluence["+_+"]",f,m))}s=p.length*(o||1)}else{var v=".bones["+e[c].name+"]";n(lc,v+".position",u,"pos",i),n(ac,v+".quaternion",u,"rot",i),n(lc,v+".scale",u,"scl",i)}}return 0===i.length?null:new this(r,s,i,a)}}]),t}();function uc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return rc;case"vector":case"vector2":case"vector3":case"vector4":return lc;case"color":return ic;case"quaternion":return ac;case"bool":case"boolean":return nc;case"string":return sc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];Jl.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var pc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},hc=S()((function t(e,n,i){b()(this,t);var r,o=this,a=!1,s=0,l=0,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(t){l++,!1===a&&void 0!==o.onStart&&o.onStart(t,s,l),a=!0},this.itemEnd=function(t){s++,void 0!==o.onProgress&&o.onProgress(t,s,l),s===l&&(a=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(t){void 0!==o.onError&&o.onError(t)},this.resolveURL=function(t){return r?r(t):t},this.setURLModifier=function(t){return r=t,this},this.addHandler=function(t,e){return c.push(t,e),this},this.removeHandler=function(t){var e=c.indexOf(t);return-1!==e&&c.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=c.length;e<n;e+=2){var i=c[e],r=c[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}})),dc=new hc,_c=function(){function t(e){b()(this,t),this.manager=void 0!==e?e:dc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return S()(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new Promise((function(i,r){n.load(t,i,e,r)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(t){return this.path=t,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}(),fc={},mc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this;void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=pc.get(t);if(void 0!==o)return this.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;if(void 0===fc[t]){fc[t]=[],fc[t].push({onLoad:e,onProgress:n,onError:i});var a=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(a).then((function(e){if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body.getReader)return e;var n=fc[t],i=e.body.getReader(),r=e.headers.get("Content-Length"),o=r?parseInt(r):0,a=0!==o,s=0,l=new ReadableStream({start:function(t){!function e(){i.read().then((function(i){var r=i.done,l=i.value;if(r)t.close();else{s+=l.byteLength;for(var c=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o}),u=0,p=n.length;u<p;u++){var h=n[u];h.onProgress&&h.onProgress(c)}t.enqueue(l),e()}}))}()}});return new Response(l)}throw Error('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText))})).then((function(t){switch(r.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((function(t){return(new DOMParser).parseFromString(t,r.mimeType)}));case"json":return t.json();default:return t.text()}})).then((function(e){pc.add(t,e);var n=fc[t];delete fc[t];for(var i=0,r=n.length;i<r;i++){var o=n[i];o.onLoad&&o.onLoad(e)}})).catch((function(e){var n=fc[t];if(void 0===n)throw r.manager.itemError(t),e;delete fc[t];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(e)}r.manager.itemError(t)})).finally((function(){r.manager.itemEnd(t)})),this.manager.itemStart(t)}else fc[t].push({onLoad:e,onProgress:n,onError:i})}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}]),n}(_c),yc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=pc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;var a=It("img");function s(){c(),pc.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){c(),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}]),n}(_c),gc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=new li,o=new yc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){r.images[n]=t,6===++a&&(r.needsUpdate=!0,e&&e(r))}),void 0,i)}for(var l=0;l<t.length;++l)s(l);return r}}]),n}(_c),vc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this,o=new Ha,a=new mc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,(function(t){var n=r.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:x,o.wrapT=void 0!==n.wrapT?n.wrapT:x,o.magFilter=void 0!==n.magFilter?n.magFilter:P,o.minFilter=void 0!==n.minFilter?n.minFilter:P,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=I),1===n.mipmapCount&&(o.minFilter=P),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,e&&e(o,n))}),n,i),o}}]),n}(_c),bc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=new Bt,o=new yc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(t){r.image=t,r.needsUpdate=!0,void 0!==e&&e(r)}),n,i),r}}]),n}(_c),xc=function(t){_()(n,t);var e=L(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return b()(this,n),(i=e.call(this)).type="Light",i.color=new hn(t),i.intensity=r,i}return S()(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}]),n}(Ve);xc.prototype.isLight=!0;var Sc=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;return b()(this,n),(o=e.call(this,t,r)).type="HemisphereLight",o.position.copy(Ve.DefaultUp),o.updateMatrix(),o.groundColor=new hn(i),o}return S()(n,[{key:"copy",value:function(t){return xc.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}]),n}(xc);Sc.prototype.isHemisphereLight=!0;var wc=new be,Mc=new Wt,Tc=new Wt,Cc=function(){function t(e){b()(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Et(512,512),this.map=null,this.mapPass=null,this.matrix=new be,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new mi,this._frameExtents=new Et(1,1),this._viewportCount=1,this._viewports=[new Ft(0,0,1,1)]}return S()(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;Mc.setFromMatrixPosition(t.matrixWorld),e.position.copy(Mc),Tc.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(Tc),e.updateMatrixWorld(),wc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wc),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}]),t}(),Ec=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this,new ai(50,1,.5,500))).focus=1,t}return S()(n,[{key:"updateMatrices",value:function(t){var e=this.camera,i=2*gt*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,o=t.distance||e.far;i===e.fov&&r===e.aspect&&o===e.far||(e.fov=i,e.aspect=r,e.far=o,e.updateProjectionMatrix()),l()(g()(n.prototype),"updateMatrices",this).call(this,t)}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.focus=t.focus,this}}]),n}(Cc);Ec.prototype.isSpotLightShadow=!0;var Ac=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return b()(this,n),(r=e.call(this,t,i)).type="SpotLight",r.position.copy(Ve.DefaultUp),r.updateMatrix(),r.target=new Ve,r.distance=o,r.angle=a,r.penumbra=s,r.decay=l,r.shadow=new Ec,r}return S()(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(xc);Ac.prototype.isSpotLight=!0;var Rc=new be,Lc=new Wt,Pc=new Wt,Dc=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this,new ai(90,1,.5,500)))._frameExtents=new Et(4,2),t._viewportCount=6,t._viewports=[new Ft(2,1,1,1),new Ft(0,1,1,1),new Ft(3,1,1,1),new Ft(1,1,1,1),new Ft(3,0,1,1),new Ft(1,0,1,1)],t._cubeDirections=[new Wt(1,0,0),new Wt(-1,0,0),new Wt(0,0,1),new Wt(0,0,-1),new Wt(0,1,0),new Wt(0,-1,0)],t._cubeUps=[new Wt(0,1,0),new Wt(0,1,0),new Wt(0,1,0),new Wt(0,1,0),new Wt(0,0,1),new Wt(0,0,-1)],t}return S()(n,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,i=this.matrix,r=t.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),Lc.setFromMatrixPosition(t.matrixWorld),n.position.copy(Lc),Pc.copy(n.position),Pc.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(Pc),n.updateMatrixWorld(),i.makeTranslation(-Lc.x,-Lc.y,-Lc.z),Rc.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Rc)}}]),n}(Cc);Dc.prototype.isPointLightShadow=!0;var Ic=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return b()(this,n),(r=e.call(this,t,i)).type="PointLight",r.distance=o,r.decay=a,r.shadow=new Dc,r}return S()(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}]),n}(xc);Ic.prototype.isPointLight=!0;var kc=function(t){_()(n,t);var e=L(n);function n(){return b()(this,n),e.call(this,new Ri(-5,5,5,-5,.5,500))}return S()(n)}(Cc);kc.prototype.isDirectionalLightShadow=!0;var Oc=function(t){_()(n,t);var e=L(n);function n(t,i){var r;return b()(this,n),(r=e.call(this,t,i)).type="DirectionalLight",r.position.copy(Ve.DefaultUp),r.updateMatrix(),r.target=new Ve,r.shadow=new kc,r}return S()(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}]),n}(xc);Oc.prototype.isDirectionalLight=!0;var Bc=function(t){_()(n,t);var e=L(n);function n(t,i){var r;return b()(this,n),(r=e.call(this,t,i)).type="AmbientLight",r}return S()(n)}(xc);Bc.prototype.isAmbientLight=!0;var jc=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return b()(this,n),(r=e.call(this,t,i)).type="RectAreaLight",r.width=o,r.height=a,r}return S()(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(t){this.intensity=t/(this.width*this.height*Math.PI)}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.width=t.width,this.height=t.height,this}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}]),n}(xc);jc.prototype.isRectAreaLight=!0;var Fc=function(){function t(){b()(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Wt)}return S()(t,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*i),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*i*1.092548),e.addScaledVector(o[5],i*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],n*r*1.092548),e.addScaledVector(o[8],.546274*(n*n-i*i)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*i),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*i),e.addScaledVector(o[5],.858086*i*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*n*r),e.addScaledVector(o[8],.429043*(n*n-i*i)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}},{key:"scale",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}},{key:"lerp",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}]),t}();Fc.prototype.isSphericalHarmonics3=!0;var Nc=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fc,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return b()(this,n),(t=e.call(this,void 0,r)).sh=i,t}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.sh.copy(t.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return e.object.sh=this.sh.toArray(),e}}]),n}(xc);Nc.prototype.isLightProbe=!0;var zc=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this,t)).textures={},i}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this,o=new mc(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}},{key:"parse",value:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new Zl[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=t.sheen),void 0!==t.sheenColor&&(i.sheenColor=(new hn).setHex(t.sheenColor)),void 0!==t.sheenRoughness&&(i.sheenRoughness=t.sheenRoughness),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.specularIntensity&&(i.specularIntensity=t.specularIntensity),void 0!==t.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(t.specularColor),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.thickness&&(i.thickness=t.thickness),void 0!==t.attenuationDistance&&(i.attenuationDistance=t.attenuationDistance),void 0!==t.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(t.attenuationColor),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.shadowSide&&(i.shadowSide=t.shadowSide),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.format&&(i.format=t.format),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.alphaToCoverage&&(i.alphaToCoverage=t.alphaToCoverage),void 0!==t.premultipliedAlpha&&(i.premultipliedAlpha=t.premultipliedAlpha),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var r in t.uniforms){var o=t.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=n(o.value);break;case"c":i.uniforms[r].value=(new hn).setHex(o.value);break;case"v2":i.uniforms[r].value=(new Et).fromArray(o.value);break;case"v3":i.uniforms[r].value=(new Wt).fromArray(o.value);break;case"v4":i.uniforms[r].value=(new Ft).fromArray(o.value);break;case"m3":i.uniforms[r].value=(new At).fromArray(o.value);break;case"m4":i.uniforms[r].value=(new be).fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)i.extensions[a]=t.extensions[a];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new Et).fromArray(s)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.specularIntensityMap&&(i.specularIntensityMap=n(t.specularIntensityMap)),void 0!==t.specularColorMap&&(i.specularColorMap=n(t.specularColorMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new Et).fromArray(t.clearcoatNormalScale)),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),void 0!==t.thicknessMap&&(i.thicknessMap=n(t.thicknessMap)),void 0!==t.sheenColorMap&&(i.sheenColorMap=n(t.sheenColorMap)),void 0!==t.sheenRoughnessMap&&(i.sheenRoughnessMap=n(t.sheenRoughnessMap)),i}},{key:"setTextures",value:function(t){return this.textures=t,this}}]),n}(_c),Hc=function(){function t(){b()(this,t)}return S()(t,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}},{key:"resolveURL",value:function(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}]),t}(),Uc=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="InstancedBufferGeometry",t.instanceCount=1/0,t}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.instanceCount=t.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var t=l()(g()(n.prototype),"toJSON",this).call(this,this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}]),n}(kn);Uc.prototype.isInstancedBufferGeometry=!0;var Wc,Gc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this,o=new mc(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}},{key:"parse",value:function(t){var e={},n={};function i(t,i){if(void 0!==e[i])return e[i];var r=t.interleavedBuffers[i],o=function(t,e){if(void 0!==n[e])return n[e];var i=t.arrayBuffers[e],r=new Uint32Array(i).buffer;return n[e]=r,r}(t,r.buffer),a=Dt(r.type,o),s=new ha(a,r.stride);return s.uuid=r.uuid,e[i]=s,s}var r=t.isInstancedBufferGeometry?new Uc:new kn,o=t.data.index;if(void 0!==o){var a=Dt(o.type,o.array);r.setIndex(new mn(a,1))}var s=t.data.attributes;for(var l in s){var c=s[l],u=void 0;if(c.isInterleavedBufferAttribute){var p=i(t.data,c.data);u=new _a(p,c.itemSize,c.offset,c.normalized)}else{var h=Dt(c.type,c.array);u=new(c.isInstancedBufferAttribute?Va:mn)(h,c.itemSize,c.normalized)}void 0!==c.name&&(u.name=c.name),void 0!==c.usage&&u.setUsage(c.usage),void 0!==c.updateRange&&(u.updateRange.offset=c.updateRange.offset,u.updateRange.count=c.updateRange.count),r.setAttribute(l,u)}var d=t.data.morphAttributes;if(d)for(var _ in d){for(var f=d[_],m=[],y=0,g=f.length;y<g;y++){var v=f[y],b=void 0;if(v.isInterleavedBufferAttribute){var x=i(t.data,v.data);b=new _a(x,v.itemSize,v.offset,v.normalized)}else{var S=Dt(v.type,v.array);b=new mn(S,v.itemSize,v.normalized)}void 0!==v.name&&(b.name=v.name),m.push(b)}r.morphAttributes[_]=m}t.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);var w=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==w)for(var M=0,T=w.length;M!==T;++M){var C=w[M];r.addGroup(C.start,C.count,C.materialIndex)}var E=t.data.boundingSphere;if(void 0!==E){var A=new Wt;void 0!==E.center&&A.fromArray(E.center),r.boundingSphere=new pe(A,E.radius)}return t.name&&(r.name=t.name),t.userData&&(r.userData=t.userData),r}}]),n}(_c),Vc={UVMapping:o,CubeReflectionMapping:s,CubeRefractionMapping:c,EquirectangularReflectionMapping:p,EquirectangularRefractionMapping:d,CubeUVReflectionMapping:f,CubeUVRefractionMapping:y},qc={RepeatWrapping:v,ClampToEdgeWrapping:x,MirroredRepeatWrapping:w},Xc={NearestFilter:M,NearestMipmapNearestFilter:T,NearestMipmapLinearFilter:A,LinearFilter:P,LinearMipmapNearestFilter:D,LinearMipmapLinearFilter:I},Yc=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),i=e.call(this,t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),i.options={premultiplyAlpha:"none"},i}return S()(n,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=pc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout((function(){e&&e(o),r.manager.itemEnd(t)}),0),o;var a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(t,a).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(n){pc.add(t,n),e&&e(n),r.manager.itemEnd(t)})).catch((function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)})),r.manager.itemStart(t)}}]),n}(_c);Yc.prototype.isImageBitmapLoader=!0;var Zc={getContext:function(){return void 0===Wc&&(Wc=new(window.AudioContext||window.webkitAudioContext)),Wc},setContext:function(t){Wc=t}},Jc=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this,o=new mc(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{var o=n.slice(0);Zc.getContext().decodeAudioData(o,(function(t){e(t)}))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}}]),n}(_c),Kc=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;b()(this,n),r=e.call(this,void 0,o);var a=(new hn).set(t),s=(new hn).set(i),l=new Wt(a.r,a.g,a.b),c=new Wt(s.r,s.g,s.b),u=Math.sqrt(Math.PI),p=u*Math.sqrt(.75);return r.sh.coefficients[0].copy(l).add(c).multiplyScalar(u),r.sh.coefficients[1].copy(l).sub(c).multiplyScalar(p),r}return S()(n)}(Nc);Kc.prototype.isHemisphereLightProbe=!0;var Qc=function(t){_()(n,t);var e=L(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;b()(this,n),i=e.call(this,void 0,r);var o=(new hn).set(t);return i.sh.coefficients[0].set(o.r,o.g,o.b).multiplyScalar(2*Math.sqrt(Math.PI)),i}return S()(n)}(Nc);Qc.prototype.isAmbientLightProbe=!0;var $c=new be,tu=new be,eu=new be,nu=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];b()(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return S()(t,[{key:"start",value:function(){this.startTime=iu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=iu();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}();function iu(){return("undefined"==typeof performance?Date:performance).now()}var ru=new Wt,ou=new Ut,au=new Wt,su=new Wt,lu=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this)).type="Audio",i.listener=t,i.context=t.context,i.gain=i.context.createGain(),i.gain.connect(t.getInput()),i.autoplay=!1,i.buffer=null,i.detune=0,i.loop=!1,i.loopStart=0,i.loopEnd=0,i.offset=0,i.duration=void 0,i.playbackRate=1,i.isPlaying=!1,i.hasPlaybackControl=!0,i.source=null,i.sourceType="empty",i._startedAt=0,i._progress=0,i._connected=!1,i.filters=[],i}return S()(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(t){return this.setFilters(t?[t]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),n}(Ve),cu=new Wt,uu=new Ut,pu=new Wt,hu=new Wt,du=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;b()(this,t),this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}return S()(t,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}]),t}(),_u=function(){function t(e,n,i){var r,o,a;switch(b()(this,t),this.binding=e,this.valueSize=i,n){case"quaternion":r=this._slerp,o=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":r=this._select,o=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:r=this._lerp,o=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=o,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return S()(t,[{key:"accumulate",value:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=e*this._origIndex;this._mixBufferRegion(n,i,s,1-r,e)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var l=e,c=e+e;l!==c;++l)if(n[l]!==n[l+e]){a.setValue(n,i);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:"_select",value:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]}},{key:"_slerp",value:function(t,e,n,i){Ut.slerpFlat(t,e,t,e,t,n,i)}},{key:"_slerpAdditive",value:function(t,e,n,i,r){var o=this._workIndex*r;Ut.multiplyQuaternionsFlat(t,o,t,e,t,n),Ut.slerpFlat(t,e,t,e,t,o,i)}},{key:"_lerp",value:function(t,e,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*i}}},{key:"_lerpAdditive",value:function(t,e,n,i,r){for(var o=0;o!==r;++o){var a=e+o;t[a]=t[a]+t[n+o]*i}}}]),t}(),fu=new RegExp("[\\[\\]\\.:\\/]","g"),mu="[^\\[\\]\\.:\\/]",yu="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",gu=/((?:WC+[\/:])*)/.source.replace("WC",mu),vu=/(WCOD+)?/.source.replace("WCOD",yu),bu=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mu),xu=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mu),Su=new RegExp("^"+gu+vu+bu+xu+"$"),wu=["material","materials","bones"],Mu=function(){function t(e,n,i){b()(this,t),this.path=n,this.parsedPath=i||t.parseTrackName(n),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return S()(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,i=n.objectName,r=n.propertyName,o=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var a=n.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===a){a=s;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var l=e[r];if(void 0!==l){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var u=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}u=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=o}else void 0!==l.fromArray&&void 0!==l.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(u=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][c]}else{var p=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+p+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,n,i){return e&&e.isAnimationObjectGroup?new t.Composite(e,n,i):new t(e,n,i)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(fu,"")}},{key:"parseTrackName",value:function(t){var e=Su.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==wu.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function t(n){for(var i=0;i<n.length;i++){var r=n[i];if(r.name===e||r.uuid===e)return r;var o=t(r.children);if(o)return o}return null}(t.children);if(i)return i}return null}}]),t}();Mu.Composite=function(){function t(e,n,i){b()(this,t);var r=i||Mu.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,r)}return S()(t,[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),Mu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Mu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Mu.prototype.GetterByBindingType=[Mu.prototype._getValue_direct,Mu.prototype._getValue_array,Mu.prototype._getValue_arrayElement,Mu.prototype._getValue_toArray],Mu.prototype.SetterByBindingTypeAndVersioning=[[Mu.prototype._setValue_direct,Mu.prototype._setValue_direct_setNeedsUpdate,Mu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Mu.prototype._setValue_array,Mu.prototype._setValue_array_setNeedsUpdate,Mu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Mu.prototype._setValue_arrayElement,Mu.prototype._setValue_arrayElement_setNeedsUpdate,Mu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Mu.prototype._setValue_fromArray,Mu.prototype._setValue_fromArray_setNeedsUpdate,Mu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Tu=function(){function t(){b()(this,t),this.uuid=vt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}return S()(t,[{key:"add",value:function(){for(var t,e=this._objects,n=this._indicesByUUID,i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length,s=e.length,l=this.nCachedObjects_,c=0,u=arguments.length;c!==u;++c){var p=arguments[c],h=p.uuid,d=n[h];if(void 0===d){d=s++,n[h]=d,e.push(p);for(var _=0,f=a;_!==f;++_)o[_].push(new Mu(p,i[_],r[_]))}else if(d<l){t=e[d];var m=--l,y=e[m];n[y.uuid]=d,e[d]=y,n[h]=m,e[m]=p;for(var g=0,v=a;g!==v;++g){var b=o[g],x=b[m],S=b[d];b[d]=x,void 0===S&&(S=new Mu(p,i[g],r[g])),b[m]=S}}else e[d]!==t&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}},{key:"remove",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=e[l];if(void 0!==c&&c>=r){var u=r++,p=t[u];e[p.uuid]=c,t[c]=p,e[l]=u,t[u]=s;for(var h=0,d=i;h!==d;++h){var _=n[h],f=_[u],m=_[c];_[c]=f,_[u]=m}}}this.nCachedObjects_=r}},{key:"uncache",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,o=t.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,c=e[l];if(void 0!==c)if(delete e[l],c<r){var u=--r,p=t[u],h=--o,d=t[h];e[p.uuid]=c,t[c]=p,e[d.uuid]=u,t[u]=d,t.pop();for(var _=0,f=i;_!==f;++_){var m=n[_],y=m[u],g=m[h];m[c]=y,m[u]=g,m.pop()}}else{var v=--o,b=t[v];v>0&&(e[b.uuid]=c),t[c]=b,t.pop();for(var x=0,S=i;x!==S;++x){var w=n[x];w[c]=w[v],w.pop()}}}this.nCachedObjects_=r}},{key:"subscribe_",value:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(var p=c,h=s.length;p!==h;++p){var d=s[p];u[p]=new Mu(d,t,e)}return u}},{key:"unsubscribe_",value:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}]),t}();Tu.prototype.isAnimationObjectGroup=!0;var Cu=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;b()(this,t),this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=r;for(var o=n.tracks,a=o.length,s=new Array(a),l={endingStart:it,endingEnd:it},c=0;c!==a;++c){var u=o[c].createInterpolant(null);s[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return S()(t,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(t){return this._startTime=t,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=r/i,a=i/r;t.warp(1,o,e),this.warp(a,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var i=this._mixer,r=i.time,o=this.timeScale,a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0){var l=this._interpolants,c=this._propertyBindings;if(this.blendMode===at)for(var u=0,p=l.length;u!==p;++u)l[u].evaluate(a),c[u].accumulateAdditive(s);else for(var h=0,d=l.length;h!==d;++h)l[h].evaluate(a),c[h].accumulate(i,s)}}else this._updateWeight(t)}},{key:"_updateWeight",value:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}},{key:"_updateTimeScale",value:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,i=this.time+t,r=this._loopCount,o=2202===n;if(0===t)return-1===r?i:o&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=e||i<0){var a=Math.floor(i/e);i-=e*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&1==(1&r))return e-i}return i}},{key:"_setEndings",value:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=rt,i.endingEnd=rt):(i.endingStart=t?this.zeroSlopeAtStart?rt:it:ot,i.endingEnd=e?this.zeroSlopeAtEnd?rt:it:ot)}},{key:"_scheduleFading",value:function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}]),t}(),Eu=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this))._root=t,i._initMemoryManager(),i._accuIndex=0,i.time=0,i.timeScale=1,i}return S()(n,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var p=i[u],h=p.name,d=c[h];if(void 0!==d)o[u]=d;else{if(void 0!==(d=o[u])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,h));continue}var _=e&&e._propertyBindings[u].binding.parsedPath;++(d=new _u(Mu.create(n,h,_),p.ValueTypeName,p.getValueSize())).referenceCount,this._addInactiveBinding(d,s,h),o[u]=d}a[u].resultBuffer=d.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_addInactiveBinding",value:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,o=i[e];void 0===o&&(o={},i[e]=o),o[n]=t,t._cacheIndex=r.length,r.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new $l(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r}},{key:"clipAction",value:function(t,e,n){var i=e||this._root,r=i.uuid,o="string"==typeof t?cc.findByName(i,t):t,a=null!==o?o.uuid:t,s=this._actionsByClip[a],l=null;if(void 0===n&&(n=null!==o?o.blendMode:2500),void 0!==s){var c=s.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;var u=new Cu(this,o,e,n);return this._bindAction(u,l),this._addInactiveAction(u,a,r),u}},{key:"existingAction",value:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?cc.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null}},{key:"stopAllAction",value:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(i,t,r,o);for(var s=this._bindings,l=this._nActiveBindings,c=0;c!==l;++c)s[c].apply(o);return this}},{key:"setTime",value:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,e[c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n}(dt);Eu.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Au=function(){function t(e){b()(this,t),"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}return S()(t,[{key:"clone",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}]),t}(),Ru=function(t){_()(n,t);var e=L(n);function n(t,i){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return b()(this,n),(r=e.call(this,t,i)).meshPerAttribute=o,r}return S()(n,[{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}},{key:"clone",value:function(t){var e=l()(g()(n.prototype),"clone",this).call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e}},{key:"toJSON",value:function(t){var e=l()(g()(n.prototype),"toJSON",this).call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}]),n}(ha);Ru.prototype.isInstancedInterleavedBuffer=!0;var Lu=function(){function t(e,n,i,r,o){b()(this,t),this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=r,this.count=o,this.version=0}return S()(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setBuffer",value:function(t){return this.buffer=t,this}},{key:"setType",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:"setItemSize",value:function(t){return this.itemSize=t,this}},{key:"setCount",value:function(t){return this.count=t,this}}]),t}();function Pu(t,e){return t.distance-e.distance}function Du(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i)for(var r=t.children,o=0,a=r.length;o<a;o++)Du(r[o],e,n,!0)}Lu.prototype.isGLBufferAttribute=!0;var Iu=new Et,ku=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Et(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Et(-1/0,-1/0);b()(this,t),this.min=e,this.max=n}return S()(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Iu.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Iu.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();ku.prototype.isBox2=!0;var Ou=new Wt,Bu=new Wt,ju=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt;b()(this,t),this.start=e,this.end=n}return S()(t,[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"copy",value:function(t){return this.start.copy(t.start),this.end.copy(t.end),this}},{key:"getCenter",value:function(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return t.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){Ou.subVectors(t,this.start),Bu.subVectors(this.end,this.start);var n=Bu.dot(Bu),i=Bu.dot(Ou)/n;return e&&(i=bt(i,0,1)),i}},{key:"closestPointToPoint",value:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(i).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),Fu=new Wt,Nu=new Wt,zu=new be,Hu=new be,Uu=function(t){_()(n,t);var e=L(n);function n(t){var i;b()(this,n);for(var r=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),o=new kn,a=[],s=[],l=new hn(0,0,1),c=new hn(0,1,0),u=0;u<r.length;u++){var p=r[u];p.parent&&p.parent.isBone&&(a.push(0,0,0),a.push(0,0,0),s.push(l.r,l.g,l.b),s.push(c.r,c.g,c.b))}return o.setAttribute("position",new Tn(a,3)),o.setAttribute("color",new Tn(s,3)),(i=e.call(this,o,new Ka({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0}))).type="SkeletonHelper",i.isSkeletonHelper=!0,i.root=t,i.bones=r,i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i}return S()(n,[{key:"updateMatrixWorld",value:function(t){var e=this.bones,i=this.geometry,r=i.getAttribute("position");Hu.copy(this.root.matrixWorld).invert();for(var o=0,a=0;o<e.length;o++){var s=e[o];s.parent&&s.parent.isBone&&(zu.multiplyMatrices(Hu,s.matrixWorld),Nu.setFromMatrixPosition(zu),r.setXYZ(a,Nu.x,Nu.y,Nu.z),zu.multiplyMatrices(Hu,s.parent.matrixWorld),Nu.setFromMatrixPosition(zu),r.setXYZ(a+1,Nu.x,Nu.y,Nu.z),a+=2)}i.getAttribute("position").needsUpdate=!0,l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(as);var Wu=new Wt,Gu=new hn,Vu=new hn,qu=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;b()(this,n),o=new hn(o),a=new hn(a);for(var s=r/2,l=i/r,c=i/2,u=[],p=[],h=0,d=0,_=-c;h<=r;h++,_+=l){u.push(-c,0,_,c,0,_),u.push(_,0,-c,_,0,c);var f=h===s?o:a;f.toArray(p,d),d+=3,f.toArray(p,d),d+=3,f.toArray(p,d),d+=3,f.toArray(p,d),d+=3}var m=new kn;return m.setAttribute("position",new Tn(u,3)),m.setAttribute("color",new Tn(p,3)),(t=e.call(this,m,new Ka({vertexColors:!0,toneMapped:!1}))).type="GridHelper",t}return S()(n)}(as),Xu=new Wt,Yu=new Wt,Zu=new Wt,Ju=new Wt,Ku=new oi;function Qu(t,e,n,i,r,o,a){Ju.set(r,o,a).unproject(i);var s=e[t];if(void 0!==s)for(var l=n.getAttribute("position"),c=0,u=s.length;c<u;c++)l.setXYZ(s[c],Ju.x,Ju.y,Ju.z)}var $u,tp,ep=new qt,np=function(t){_()(n,t);var e=L(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;b()(this,n);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new Float32Array(24),s=new kn;return s.setIndex(new mn(o,1)),s.setAttribute("position",new mn(a,3)),(i=e.call(this,s,new Ka({color:r,toneMapped:!1}))).object=t,i.type="BoxHelper",i.matrixAutoUpdate=!1,i.update(),i}return S()(n,[{key:"update",value:function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ep.setFromObject(this.object),!ep.isEmpty()){var e=ep.min,n=ep.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}},{key:"setFromObject",value:function(t){return this.object=t,this.update(),this}},{key:"copy",value:function(t){return as.prototype.copy.call(this,t),this.object=t.object,this}}]),n}(as),ip=new Wt,rp=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;b()(this,n);var r=[0,0,0,i,0,0,0,0,0,0,i,0,0,0,0,0,0,i],o=new kn;return o.setAttribute("position",new Tn(r,3)),o.setAttribute("color",new Tn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),(t=e.call(this,o,new Ka({vertexColors:!0,toneMapped:!1}))).type="AxesHelper",t}return S()(n,[{key:"setColors",value:function(t,e,n){var i=new hn,r=this.geometry.attributes.color.array;return i.set(t),i.toArray(r,0),i.toArray(r,3),i.set(e),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(as),op=new Float32Array(1),ap=new Int32Array(op.buffer);Rs.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Rs.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Js.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},qu.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Uu.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},_c.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Hc.extractUrlBase(t)},_c.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},ku.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},ku.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},ku.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},ku.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},qt.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},qt.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},qt.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},qt.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},qt.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},pe.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},mi.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},ju.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},At.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},At.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},At.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},At.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},At.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},At.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},be.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},be.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},be.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Wt).setFromMatrixColumn(this,3)},be.prototype.setRotationFromQuaternion=function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},be.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},be.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},be.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},be.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},be.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},be.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},be.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},be.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},be.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},be.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},be.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},be.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},be.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},be.prototype.makeFrustum=function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)},be.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},di.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ut.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Ut.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},ve.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},ve.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},ve.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},nn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},nn.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},nn.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},nn.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},nn.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},nn.barycoordFromPoint=function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),nn.getBarycoord(t,e,n,i,r)},nn.normal=function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),nn.getNormal(t,e,n,i)},Ks.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Ks.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Tl(this,t)},Ks.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Pl(this,t)},Et.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Et.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Et.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Wt.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},Wt.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},Wt.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},Wt.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},Wt.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},Wt.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},Wt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Wt.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Wt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ft.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Ft.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},Ve.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},Ve.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},Ve.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},Ve.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},Ve.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Ve.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Qn.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Qn.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Na.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},ai.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(xc.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(mn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===pt},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(pt)}}}),mn.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?pt:ut),this},mn.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},mn.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},kn.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},kn.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new mn(arguments[1],arguments[2])))},kn.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},kn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},kn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},kn.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},kn.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(kn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ha.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?pt:ut),this},ha.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Tl.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Tl.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Tl.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},pa.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Au.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(on.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new hn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(ri.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),sa.prototype.clearTarget=function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},sa.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},sa.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},sa.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},sa.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},sa.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},sa.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},sa.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},sa.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},sa.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},sa.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},sa.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},sa.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},sa.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},sa.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},sa.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},sa.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},sa.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},sa.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},sa.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},sa.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},sa.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},sa.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},sa.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},sa.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(sa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?lt:st}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(Jo.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Nt.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),lu.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Jc).load(t,(function(t){e.setBuffer(t)})),this},du.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},si.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},si.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)},kt.crossOrigin=void 0,kt.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new bc;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},kt.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new gc;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},kt.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},kt.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var sp={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n),t.ACESFilmicToneMapping=4,t.AddEquation=i,t.AddOperation=2,t.AdditiveAnimationBlendMode=at,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=Bc,t.AmbientLightProbe=Qc,t.AnimationClip=cc,t.AnimationLoader=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this,o=new mc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,(function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i?i(e):console.error(e),r.manager.itemError(t)}}),n,i)}},{key:"parse",value:function(t){for(var e=[],n=0;n<t.length;n++){var i=cc.parse(t[n]);e.push(i)}return e}}]),n}(_c),t.AnimationMixer=Eu,t.AnimationObjectGroup=Tu,t.AnimationUtils=Jl,t.ArcCurve=Ps,t.ArrayCamera=ta,t.ArrowHelper=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wt(0,0,1),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Wt(0,0,0),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*o,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*s;return b()(this,n),(t=e.call(this)).type="ArrowHelper",void 0===$u&&(($u=new kn).setAttribute("position",new Tn([0,0,0,0,1,0],3)),(tp=new bs(0,.5,1,5,1)).translate(0,-.5,0)),t.position.copy(r),t.line=new is($u,new Ka({color:a,toneMapped:!1})),t.line.matrixAutoUpdate=!1,t.add(t.line),t.cone=new Qn(tp,new dn({color:a,toneMapped:!1})),t.cone.matrixAutoUpdate=!1,t.add(t.cone),t.setDirection(i),t.setLength(o,s,l),t}return S()(n,[{key:"setDirection",value:function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{ip.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(ip,e)}}},{key:"setLength",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*e;this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}},{key:"setColor",value:function(t){this.line.material.color.set(t),this.cone.material.color.set(t)}},{key:"copy",value:function(t){return l()(g()(n.prototype),"copy",this).call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}]),n}(Ve),t.Audio=lu,t.AudioAnalyser=du,t.AudioContext=Zc,t.AudioListener=function(t){_()(n,t);var e=L(n);function n(){var t;return b()(this,n),(t=e.call(this)).type="AudioListener",t.context=Zc.getContext(),t.gain=t.context.createGain(),t.gain.connect(t.context.destination),t.filter=null,t.timeDelta=0,t._clock=new nu,t}return S()(n,[{key:"getInput",value:function(){return this.gain}},{key:"removeFilter",value:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}},{key:"getFilter",value:function(){return this.filter}},{key:"setFilter",value:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}},{key:"getMasterVolume",value:function(){return this.gain.gain.value}},{key:"setMasterVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}},{key:"updateMatrixWorld",value:function(t){l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t);var e=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ru,ou,au),su.set(0,0,-1).applyQuaternion(ou),e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ru.x,r),e.positionY.linearRampToValueAtTime(ru.y,r),e.positionZ.linearRampToValueAtTime(ru.z,r),e.forwardX.linearRampToValueAtTime(su.x,r),e.forwardY.linearRampToValueAtTime(su.y,r),e.forwardZ.linearRampToValueAtTime(su.z,r),e.upX.linearRampToValueAtTime(i.x,r),e.upY.linearRampToValueAtTime(i.y,r),e.upZ.linearRampToValueAtTime(i.z,r)}else e.setPosition(ru.x,ru.y,ru.z),e.setOrientation(su.x,su.y,su.z,i.x,i.y,i.z)}}]),n}(Ve),t.AudioLoader=Jc,t.AxesHelper=rp,t.AxisHelper=function(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new rp(t)},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new vc(t)},t.Bone=za,t.BooleanKeyframeTrack=nc,t.BoundingBoxHelper=function(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new np(t,e)},t.Box2=ku,t.Box3=qt,t.Box3Helper=function(t){_()(n,t);var e=L(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;b()(this,n);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new kn;return a.setIndex(new mn(o,1)),a.setAttribute("position",new Tn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),(i=e.call(this,a,new Ka({color:r,toneMapped:!1}))).box=t,i.type="Box3Helper",i.geometry.computeBoundingSphere(),i}return S()(n,[{key:"updateMatrixWorld",value:function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t))}}]),n}(as),t.BoxBufferGeometry=ti,t.BoxGeometry=ti,t.BoxHelper=np,t.BufferAttribute=mn,t.BufferGeometry=kn,t.BufferGeometryLoader=Gc,t.ByteType=1010,t.Cache=pc,t.Camera=oi,t.CameraHelper=function(t){_()(n,t);var e=L(n);function n(t){var i;b()(this,n);var r=new kn,o=new Ka({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],s=[],l={},c=new hn(16755200),u=new hn(16711680),p=new hn(43775),h=new hn(16777215),d=new hn(3355443);function _(t,e,n){f(t,n),f(e,n)}function f(t,e){a.push(0,0,0),s.push(e.r,e.g,e.b),void 0===l[t]&&(l[t]=[]),l[t].push(a.length/3-1)}return _("n1","n2",c),_("n2","n4",c),_("n4","n3",c),_("n3","n1",c),_("f1","f2",c),_("f2","f4",c),_("f4","f3",c),_("f3","f1",c),_("n1","f1",c),_("n2","f2",c),_("n3","f3",c),_("n4","f4",c),_("p","n1",u),_("p","n2",u),_("p","n3",u),_("p","n4",u),_("u1","u2",p),_("u2","u3",p),_("u3","u1",p),_("c","t",h),_("p","c",d),_("cn1","cn2",d),_("cn3","cn4",d),_("cf1","cf2",d),_("cf3","cf4",d),r.setAttribute("position",new Tn(a,3)),r.setAttribute("color",new Tn(s,3)),(i=e.call(this,r,o)).type="CameraHelper",i.camera=t,i.camera.updateProjectionMatrix&&i.camera.updateProjectionMatrix(),i.matrix=t.matrixWorld,i.matrixAutoUpdate=!1,i.pointMap=l,i.update(),i}return S()(n,[{key:"update",value:function(){var t=this.geometry,e=this.pointMap;Ku.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qu("c",e,t,Ku,0,0,-1),Qu("t",e,t,Ku,0,0,1),Qu("n1",e,t,Ku,-1,-1,-1),Qu("n2",e,t,Ku,1,-1,-1),Qu("n3",e,t,Ku,-1,1,-1),Qu("n4",e,t,Ku,1,1,-1),Qu("f1",e,t,Ku,-1,-1,1),Qu("f2",e,t,Ku,1,-1,1),Qu("f3",e,t,Ku,-1,1,1),Qu("f4",e,t,Ku,1,1,1),Qu("u1",e,t,Ku,.7,1.1,-1),Qu("u2",e,t,Ku,-.7,1.1,-1),Qu("u3",e,t,Ku,0,2,-1),Qu("cf1",e,t,Ku,-1,0,1),Qu("cf2",e,t,Ku,1,0,1),Qu("cf3",e,t,Ku,0,-1,1),Qu("cf4",e,t,Ku,0,1,1),Qu("cn1",e,t,Ku,-1,0,-1),Qu("cn2",e,t,Ku,1,0,-1),Qu("cn3",e,t,Ku,0,-1,-1),Qu("cn4",e,t,Ku,0,1,-1),t.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}}]),n}(as),t.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been removed")},t.CanvasTexture=gs,t.CatmullRomCurve3=js,t.CineonToneMapping=3,t.CircleBufferGeometry=vs,t.CircleGeometry=vs,t.ClampToEdgeWrapping=x,t.Clock=nu,t.Color=hn,t.ColorKeyframeTrack=ic,t.CompressedTexture=ys,t.CompressedTextureLoader=function(t){_()(n,t);var e=L(n);function n(t){return b()(this,n),e.call(this,t)}return S()(n,[{key:"load",value:function(t,e,n,i){var r=this,o=[],a=new ys,s=new mc(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);var l=0;function c(c){s.load(t[c],(function(t){var n=r.parse(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=P),a.image=o,a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,i)}if(Array.isArray(t))for(var u=0,p=t.length;u<p;++u)c(u);else s.load(t,(function(t){var n=r.parse(t,!0);if(n.isCubemap){for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=P),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,i);return a}}]),n}(_c),t.ConeBufferGeometry=xs,t.ConeGeometry=xs,t.CubeCamera=si,t.CubeReflectionMapping=s,t.CubeRefractionMapping=c,t.CubeTexture=li,t.CubeTextureLoader=gc,t.CubeUVReflectionMapping=f,t.CubeUVRefractionMapping=y,t.CubicBezierCurve=Hs,t.CubicBezierCurve3=Us,t.CubicInterpolant=Ql,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Rs,t.CurvePath=Zs,t.CustomBlending=5,t.CustomToneMapping=5,t.CylinderBufferGeometry=bs,t.CylinderGeometry=bs,t.Cylindrical=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return b()(this,t),this.radius=e,this.theta=n,this.y=i,this}return S()(t,[{key:"set",value:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),t.DataTexture=Ha,t.DataTexture2DArray=er,t.DataTexture3D=sr,t.DataTextureLoader=vc,t.DataUtils=function(){function t(){b()(this,t)}return S()(t,null,[{key:"toHalfFloat",value:function(t){t>65504&&(console.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),t=65504),op[0]=t;var e=ap[0],n=e>>16&32768,i=e>>12&2047,r=e>>23&255;return r<103?n:r>142?(n|=31744,n|=(255==r?0:1)&&8388607&e):r<113?n|=((i|=2048)>>114-r)+(i>>113-r&1):(n|=r-112<<10|i>>1,n+=1&i)}}]),t}(),t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=dc,t.DepthFormat=U,t.DepthStencilFormat=W,t.DepthTexture=ra,t.DirectionalLight=Oc,t.DirectionalLightHelper=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;b()(this,n),(o=e.call(this)).light=t,o.light.updateMatrixWorld(),o.matrix=t.matrixWorld,o.matrixAutoUpdate=!1,o.color=r,void 0===i&&(i=1);var a=new kn;a.setAttribute("position",new Tn([-i,i,0,i,i,0,i,-i,0,-i,-i,0,-i,i,0],3));var s=new Ka({fog:!1,toneMapped:!1});return o.lightPlane=new is(a,s),o.add(o.lightPlane),(a=new kn).setAttribute("position",new Tn([0,0,0,0,0,1],3)),o.targetLine=new is(a,s),o.add(o.targetLine),o.update(),o}return S()(n,[{key:"dispose",value:function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function(){Xu.setFromMatrixPosition(this.light.matrixWorld),Yu.setFromMatrixPosition(this.light.target.matrixWorld),Zu.subVectors(Yu,Xu),this.lightPlane.lookAt(Yu),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Yu),this.targetLine.scale.z=Zu.length()}}]),n}(Ve),t.DiscreteInterpolant=tc,t.DodecahedronBufferGeometry=ws,t.DodecahedronGeometry=ws,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicBufferAttribute=function(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new mn(t,e).setUsage(pt)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=pt,t.DynamicReadUsage=35049,t.EdgesGeometry=As,t.EdgesHelper=function(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new as(new As(t.geometry),new Ka({color:void 0!==e?e:16777215}))},t.EllipseCurve=Ls,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=p,t.EquirectangularRefractionMapping=d,t.Euler=Le,t.EventDispatcher=dt,t.ExtrudeBufferGeometry=Tl,t.ExtrudeGeometry=Tl,t.FaceColors=1,t.FileLoader=mc,t.FlatShading=1,t.Float16BufferAttribute=Mn,t.Float32Attribute=function(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Tn(t,e)},t.Float32BufferAttribute=Tn,t.Float64Attribute=function(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Cn(t,e)},t.Float64BufferAttribute=Cn,t.FloatType=j,t.Fog=ua,t.FogExp2=ca,t.Font=function(){console.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")},t.FontLoader=function(){console.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")},t.FramebufferTexture=ms,t.FrontSide=0,t.Frustum=mi,t.GLBufferAttribute=Lu,t.GLSL1="100",t.GLSL3=ht,t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=qu,t.Group=ea,t.HalfFloatType=F,t.HemisphereLight=Sc,t.HemisphereLightHelper=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;b()(this,n),(o=e.call(this)).light=t,o.light.updateMatrixWorld(),o.matrix=t.matrixWorld,o.matrixAutoUpdate=!1,o.color=r;var a=new Rl(i);a.rotateY(.5*Math.PI),o.material=new dn({wireframe:!0,fog:!1,toneMapped:!1}),void 0===o.color&&(o.material.vertexColors=!0);var s=a.getAttribute("position"),l=new Float32Array(3*s.count);return a.setAttribute("color",new mn(l,3)),o.add(new Qn(a,o.material)),o.update(),o}return S()(n,[{key:"dispose",value:function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}},{key:"update",value:function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Gu.copy(this.light.color),Vu.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Gu:Vu;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Wu.setFromMatrixPosition(this.light.matrixWorld).negate())}}]),n}(Ve),t.HemisphereLightProbe=Kc,t.IcosahedronBufferGeometry=El,t.IcosahedronGeometry=El,t.ImageBitmapLoader=Yc,t.ImageLoader=yc,t.ImageUtils=kt,t.ImmediateRenderObject=function(){console.error("THREE.ImmediateRenderObject has been removed.")},t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=Va,t.InstancedBufferGeometry=Uc,t.InstancedInterleavedBuffer=Ru,t.InstancedMesh=Ja,t.Int16Attribute=function(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new bn(t,e)},t.Int16BufferAttribute=bn,t.Int32Attribute=function(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Sn(t,e)},t.Int32BufferAttribute=Sn,t.Int8Attribute=function(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new yn(t,e)},t.Int8BufferAttribute=yn,t.IntType=1013,t.InterleavedBuffer=ha,t.InterleavedBufferAttribute=_a,t.Interpolant=Kl,t.InterpolateDiscrete=tt,t.InterpolateLinear=et,t.InterpolateSmooth=nt,t.InvertStencilOp=5386,t.JSONLoader=function(){console.error("THREE.JSONLoader has been removed.")},t.KeepStencilOp=ct,t.KeyframeTrack=ec,t.LOD=Ia,t.LatheBufferGeometry=Al,t.LatheGeometry=Al,t.Layers=Pe,t.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")},t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=xc,t.LightProbe=Nc,t.Line=is,t.Line3=ju,t.LineBasicMaterial=Ka,t.LineCurve=Ws,t.LineCurve3=Gs,t.LineDashedMaterial=Yl,t.LineLoop=ss,t.LinePieces=1,t.LineSegments=as,t.LineStrip=0,t.LinearEncoding=st,t.LinearFilter=P,t.LinearInterpolant=$l,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=I,t.LinearMipmapNearestFilter=D,t.LinearToneMapping=1,t.Loader=_c,t.LoaderUtils=Hc,t.LoadingManager=hc,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=on,t.MaterialLoader=zc,t.Math=Ct,t.MathUtils=Ct,t.Matrix3=At,t.Matrix4=be,t.MaxEquation=104,t.Mesh=Qn,t.MeshBasicMaterial=dn,t.MeshDepthMaterial=Yo,t.MeshDistanceMaterial=Zo,t.MeshFaceMaterial=function(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t},t.MeshLambertMaterial=ql,t.MeshMatcapMaterial=Xl,t.MeshNormalMaterial=Vl,t.MeshPhongMaterial=Wl,t.MeshPhysicalMaterial=Ul,t.MeshStandardMaterial=Hl,t.MeshToonMaterial=Gl,t.MinEquation=103,t.MirroredRepeatWrapping=w,t.MixOperation=1,t.MultiMaterial=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=4,t.MultiplyOperation=0,t.NearestFilter=M,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=A,t.NearestMipmapNearestFilter=T,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColors=0,t.NoToneMapping=0,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=rc,t.Object3D=Ve,t.ObjectLoader=function(t){_()(a,t);var e,n,i,o=L(a);function a(t){return b()(this,a),o.call(this,t)}return S()(a,[{key:"load",value:function(t,e,n,i){var r=this,o=""===this.path?Hc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new mc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,i)}},{key:"loadAsync",value:(i=r()(C.a.mark((function t(e,n){var i,r,o,a,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=""===this.path?Hc.extractUrlBase(e):this.path,this.resourcePath=this.resourcePath||i,(r=new mc(this.manager)).setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),t.next=6,r.loadAsync(e,n);case 6:if(o=t.sent,a=JSON.parse(o),void 0!==(s=a.metadata)&&void 0!==s.type&&"geometry"!==s.type.toLowerCase()){t.next=11;break}throw new Error("THREE.ObjectLoader: Can't load "+e);case 11:return t.next=13,this.parseAsync(a);case 13:return t.abrupt("return",t.sent);case 14:case"end":return t.stop()}}),t,this)}))),function(t,e){return i.apply(this,arguments)})},{key:"parse",value:function(t,e){var n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),o=this.parseImages(t.images,(function(){void 0!==e&&e(l)})),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,r,s,a,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){var u=!1;for(var p in o)if(o[p]instanceof HTMLImageElement){u=!0;break}!1===u&&e(l)}return l}},{key:"parseAsync",value:(n=r()(C.a.mark((function t(e){var n,i,r,o,a,s,l,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),t.next=5,this.parseImagesAsync(e.images);case 5:return o=t.sent,a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,s,a,n),c=this.parseSkeletons(e.skeletons,l),t.abrupt("return",(this.bindSkeletons(l,c),l));case 11:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"parseShapes",value:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Ks).fromJSON(t[n]);e[r.uuid]=r}return e}},{key:"parseSkeletons",value:function(t,e){var n={},i={};if(e.traverse((function(t){t.isBone&&(i[t.uuid]=t)})),void 0!==t)for(var r=0,o=t.length;r<o;r++){var a=(new Ga).fromJSON(t[r],i);n[a.uuid]=a}return n}},{key:"parseGeometries",value:function(t,e){var n={};if(void 0!==t)for(var i=new Gc,r=0,o=t.length;r<o;r++){var a=void 0,s=t[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":console.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in Nl?a=Nl[s.type].fromJSON(s,e):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(s.type,'"'))}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n}},{key:"parseMaterials",value:function(t,e){var n={},i={};if(void 0!==t){var r=new zc;r.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=r.parse(u)),l.push(n[u.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}},{key:"parseAnimations",value:function(t){var e={};if(void 0!==t)for(var n=0;n<t.length;n++){var i=t[n],r=cc.parse(i);e[r.uuid]=r}return e}},{key:"parseImages",value:function(t,e){var n,i=this,r={};function o(t){if("string"==typeof t){var e=t;return function(t){return i.manager.itemStart(t),n.load(t,(function(){i.manager.itemEnd(t)}),void 0,(function(){i.manager.itemError(t),i.manager.itemEnd(t)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:i.resourcePath+e)}return t.data?{data:Dt(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){var a=new hc(e);(n=new yc(a)).setCrossOrigin(this.crossOrigin);for(var s=0,l=t.length;s<l;s++){var c=t[s],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(var p=0,h=u.length;p<h;p++){var d=o(u[p]);null!==d&&(d instanceof HTMLImageElement?r[c.uuid].push(d):r[c.uuid].push(new Ha(d.data,d.width,d.height)))}}else{var _=o(c.url);null!==_&&(r[c.uuid]=_)}}}return r}},{key:"parseImagesAsync",value:(e=r()(C.a.mark((function t(e){var n,i,o,a,s,l,c,u,p,h,d,_,f,m;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=function(){return(s=r()(C.a.mark((function t(e){var i,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!=typeof e){t.next=5;break}return r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i=e)?i:n.resourcePath+i,t.next=4,o.loadAsync(r);case 4:return t.abrupt("return",t.sent);case 5:return t.abrupt("return",e.data?{data:Dt(e.type,e.data),width:e.width,height:e.height}:null);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)},a=function(t){return s.apply(this,arguments)},n=this,i={},!(void 0!==e&&e.length>0)){t.next=29;break}(o=new yc(this.manager)).setCrossOrigin(this.crossOrigin),l=0,c=e.length;case 6:if(!(l<c)){t.next=29;break}if(u=e[l],p=u.url,!Array.isArray(p)){t.next=22;break}i[u.uuid]=[],h=0,d=p.length;case 11:if(!(h<d)){t.next=20;break}return _=p[h],t.next=15,a(_);case 15:null!==(f=t.sent)&&(f instanceof HTMLImageElement?i[u.uuid].push(f):i[u.uuid].push(new Ha(f.data,f.width,f.height)));case 17:h++,t.next=11;break;case 20:t.next=26;break;case 22:return t.next=24,a(u.url);case 24:null!==(m=t.sent)&&(i[u.uuid]=m);case 26:l++,t.next=6;break;case 29:return t.abrupt("return",i);case 30:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"parseTextures",value:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a=t[r],s=void 0;void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===e[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var l=e[a.image];Array.isArray(l)?(s=new li(l),6===l.length&&(s.needsUpdate=!0)):(s=l&&l.data?new Ha(l.data,l.width,l.height):new Bt(l),l&&(s.needsUpdate=!0)),s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.mapping&&(s.mapping=n(a.mapping,Vc)),void 0!==a.offset&&s.offset.fromArray(a.offset),void 0!==a.repeat&&s.repeat.fromArray(a.repeat),void 0!==a.center&&s.center.fromArray(a.center),void 0!==a.rotation&&(s.rotation=a.rotation),void 0!==a.wrap&&(s.wrapS=n(a.wrap[0],qc),s.wrapT=n(a.wrap[1],qc)),void 0!==a.format&&(s.format=a.format),void 0!==a.type&&(s.type=a.type),void 0!==a.encoding&&(s.encoding=a.encoding),void 0!==a.minFilter&&(s.minFilter=n(a.minFilter,Xc)),void 0!==a.magFilter&&(s.magFilter=n(a.magFilter,Xc)),void 0!==a.anisotropy&&(s.anisotropy=a.anisotropy),void 0!==a.flipY&&(s.flipY=a.flipY),void 0!==a.premultiplyAlpha&&(s.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(s.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(s.userData=a.userData),i[a.uuid]=s}return i}},{key:"parseObject",value:function(t,e,n,i,r){var o,a,s;function l(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function c(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}function u(t){return void 0===i[t]&&console.warn("THREE.ObjectLoader: Undefined texture",t),i[t]}switch(t.type){case"Scene":o=new pa,void 0!==t.background&&(Number.isInteger(t.background)?o.background=new hn(t.background):o.background=u(t.background)),void 0!==t.environment&&(o.environment=u(t.environment)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new ua(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new ca(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new ai(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Ri(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new Bc(t.color,t.intensity);break;case"DirectionalLight":o=new Oc(t.color,t.intensity);break;case"PointLight":o=new Ic(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new jc(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Ac(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Sc(t.color,t.groundColor,t.intensity);break;case"LightProbe":o=(new Nc).fromJSON(t);break;case"SkinnedMesh":a=l(t.geometry),s=c(t.material),o=new Na(a,s),void 0!==t.bindMode&&(o.bindMode=t.bindMode),void 0!==t.bindMatrix&&o.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(o.skeleton=t.skeleton);break;case"Mesh":a=l(t.geometry),s=c(t.material),o=new Qn(a,s);break;case"InstancedMesh":a=l(t.geometry),s=c(t.material);var p=t.count,h=t.instanceMatrix,d=t.instanceColor;(o=new Ja(a,s,p)).instanceMatrix=new Va(new Float32Array(h.array),16),void 0!==d&&(o.instanceColor=new Va(new Float32Array(d.array),d.itemSize));break;case"LOD":o=new Ia;break;case"Line":o=new is(l(t.geometry),c(t.material));break;case"LineLoop":o=new ss(l(t.geometry),c(t.material));break;case"LineSegments":o=new as(l(t.geometry),c(t.material));break;case"PointCloud":case"Points":o=new ds(l(t.geometry),c(t.material));break;case"Sprite":o=new Ra(c(t.material));break;case"Group":o=new ea;break;case"Bone":o=new za;break;default:o=new Ve}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(o.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children)for(var _=t.children,f=0;f<_.length;f++)o.add(this.parseObject(_[f],e,n,i,r));if(void 0!==t.animations)for(var m=t.animations,y=0;y<m.length;y++){var g=m[y];o.animations.push(r[g])}if("LOD"===t.type){void 0!==t.autoUpdate&&(o.autoUpdate=t.autoUpdate);for(var v=t.levels,b=0;b<v.length;b++){var x=v[b],S=o.getObjectByProperty("uuid",x.object);void 0!==S&&o.addLevel(S,x.distance)}}return o}},{key:"bindSkeletons",value:function(t,e){0!==Object.keys(e).length&&t.traverse((function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){var n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}}))}},{key:"setTexturePath",value:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}]),a}(_c),t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=Rl,t.OctahedronGeometry=Rl,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=Ri,t.PCFShadowMap=1,t.PCFSoftShadowMap=2,t.PMREMGenerator=Vi,t.ParametricGeometry=function(){return console.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new kn},t.Particle=function(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Ra(t)},t.ParticleBasicMaterial=function(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new ls(t)},t.ParticleSystem=function(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ds(t,e)},t.ParticleSystemMaterial=function(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new ls(t)},t.Path=Js,t.PerspectiveCamera=ai,t.Plane=di,t.PlaneBufferGeometry=vi,t.PlaneGeometry=vi,t.PlaneHelper=function(t){_()(n,t);var e=L(n);function n(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960;b()(this,n);var a=o,s=new kn;s.setAttribute("position",new Tn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),s.computeBoundingSphere(),(i=e.call(this,s,new Ka({color:a,toneMapped:!1}))).type="PlaneHelper",i.plane=t,i.size=r;var l=new kn;return l.setAttribute("position",new Tn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),l.computeBoundingSphere(),i.add(new Qn(l,new dn({color:a,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1}))),i}return S()(n,[{key:"updateMatrixWorld",value:function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?1:0,this.lookAt(this.plane.normal),l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(is),t.PointCloud=function(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ds(t,e)},t.PointCloudMaterial=function(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new ls(t)},t.PointLight=Ic,t.PointLightHelper=function(t){_()(n,t);var e=L(n);function n(t,i,r){var o;return b()(this,n),(o=e.call(this,new Dl(i,4,2),new dn({wireframe:!0,fog:!1,toneMapped:!1}))).light=t,o.light.updateMatrixWorld(),o.color=r,o.type="PointLightHelper",o.matrix=o.light.matrixWorld,o.matrixAutoUpdate=!1,o.update(),o}return S()(n,[{key:"dispose",value:function(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),n}(Qn),t.Points=ds,t.PointsMaterial=ls,t.PolarGridHelper=function(t){_()(n,t);var e=L(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;b()(this,n),s=new hn(s),l=new hn(l);for(var c=[],u=[],p=0;p<=r;p++){var h=p/r*(2*Math.PI),d=Math.sin(h)*i,_=Math.cos(h)*i;c.push(0,0,0),c.push(d,0,_);var f=1&p?s:l;u.push(f.r,f.g,f.b),u.push(f.r,f.g,f.b)}for(var m=0;m<=o;m++)for(var y=1&m?s:l,g=i-i/o*m,v=0;v<a;v++){var x=v/a*(2*Math.PI),S=Math.sin(x)*g,w=Math.cos(x)*g;c.push(S,0,w),u.push(y.r,y.g,y.b),x=(v+1)/a*(2*Math.PI),S=Math.sin(x)*g,w=Math.cos(x)*g,c.push(S,0,w),u.push(y.r,y.g,y.b)}var M=new kn;return M.setAttribute("position",new Tn(c,3)),M.setAttribute("color",new Tn(u,3)),(t=e.call(this,M,new Ka({vertexColors:!0,toneMapped:!1}))).type="PolarGridHelper",t}return S()(n)}(as),t.PolyhedronBufferGeometry=Ss,t.PolyhedronGeometry=Ss,t.PositionalAudio=function(t){_()(n,t);var e=L(n);function n(t){var i;return b()(this,n),(i=e.call(this,t)).panner=i.context.createPanner(),i.panner.panningModel="HRTF",i.panner.connect(i.gain),i}return S()(n,[{key:"getOutput",value:function(){return this.panner}},{key:"getRefDistance",value:function(){return this.panner.refDistance}},{key:"setRefDistance",value:function(t){return this.panner.refDistance=t,this}},{key:"getRolloffFactor",value:function(){return this.panner.rolloffFactor}},{key:"setRolloffFactor",value:function(t){return this.panner.rolloffFactor=t,this}},{key:"getDistanceModel",value:function(){return this.panner.distanceModel}},{key:"setDistanceModel",value:function(t){return this.panner.distanceModel=t,this}},{key:"getMaxDistance",value:function(){return this.panner.maxDistance}},{key:"setMaxDistance",value:function(t){return this.panner.maxDistance=t,this}},{key:"setDirectionalCone",value:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}},{key:"updateMatrixWorld",value:function(t){if(l()(g()(n.prototype),"updateMatrixWorld",this).call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(cu,uu,pu),hu.set(0,0,1).applyQuaternion(uu);var e=this.panner;if(e.positionX){var i=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(cu.x,i),e.positionY.linearRampToValueAtTime(cu.y,i),e.positionZ.linearRampToValueAtTime(cu.z,i),e.orientationX.linearRampToValueAtTime(hu.x,i),e.orientationY.linearRampToValueAtTime(hu.y,i),e.orientationZ.linearRampToValueAtTime(hu.z,i)}else e.setPosition(cu.x,cu.y,cu.z),e.setOrientation(hu.x,hu.y,hu.z)}}}]),n}(lu),t.PropertyBinding=Mu,t.PropertyMixer=_u,t.QuadraticBezierCurve=Vs,t.QuadraticBezierCurve3=qs,t.Quaternion=Ut,t.QuaternionKeyframeTrack=ac,t.QuaternionLinearInterpolant=oc,t.REVISION=n,t.RGBADepthPacking=3201,t.RGBAFormat=H,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=37819,t.RGBA_ASTC_10x5_Format=37816,t.RGBA_ASTC_10x6_Format=37817,t.RGBA_ASTC_10x8_Format=37818,t.RGBA_ASTC_12x10_Format=37820,t.RGBA_ASTC_12x12_Format=37821,t.RGBA_ASTC_4x4_Format=37808,t.RGBA_ASTC_5x4_Format=37809,t.RGBA_ASTC_5x5_Format=37810,t.RGBA_ASTC_6x5_Format=37811,t.RGBA_ASTC_6x6_Format=37812,t.RGBA_ASTC_8x5_Format=37813,t.RGBA_ASTC_8x6_Format=37814,t.RGBA_ASTC_8x8_Format=37815,t.RGBA_BPTC_Format=36492,t.RGBA_ETC2_EAC_Format=$,t.RGBA_PVRTC_2BPPV1_Format=K,t.RGBA_PVRTC_4BPPV1_Format=J,t.RGBA_S3TC_DXT1_Format=V,t.RGBA_S3TC_DXT3_Format=q,t.RGBA_S3TC_DXT5_Format=X,t.RGBFormat=z,t.RGBIntegerFormat=1032,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=Q,t.RGB_PVRTC_2BPPV1_Format=Z,t.RGB_PVRTC_4BPPV1_Format=Y,t.RGB_S3TC_DXT1_Format=G,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=Li,t.Ray=ve,t.Raycaster=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;b()(this,t),this.ray=new ve(e,n),this.near=i,this.far=r,this.camera=null,this.layers=new Pe,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return S()(t,[{key:"set",value:function(t,e){this.ray.set(t,e)}},{key:"setFromCamera",value:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)}},{key:"intersectObject",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Du(t,this,n,e),n.sort(Pu),n}},{key:"intersectObjects",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=0,r=t.length;i<r;i++)Du(t[i],this,n,e);return n.sort(Pu),n}}]),t}(),t.RectAreaLight=jc,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=2,t.RepeatWrapping=v,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=Ll,t.RingGeometry=Ll,t.SRGB8_ALPHA8_ASTC_10x10_Format=37851,t.SRGB8_ALPHA8_ASTC_10x5_Format=37848,t.SRGB8_ALPHA8_ASTC_10x6_Format=37849,t.SRGB8_ALPHA8_ASTC_10x8_Format=37850,t.SRGB8_ALPHA8_ASTC_12x10_Format=37852,t.SRGB8_ALPHA8_ASTC_12x12_Format=37853,t.SRGB8_ALPHA8_ASTC_4x4_Format=37840,t.SRGB8_ALPHA8_ASTC_5x4_Format=37841,t.SRGB8_ALPHA8_ASTC_5x5_Format=37842,t.SRGB8_ALPHA8_ASTC_6x5_Format=37843,t.SRGB8_ALPHA8_ASTC_6x6_Format=37844,t.SRGB8_ALPHA8_ASTC_8x5_Format=37845,t.SRGB8_ALPHA8_ASTC_8x6_Format=37846,t.SRGB8_ALPHA8_ASTC_8x8_Format=37847,t.Scene=pa,t.SceneUtils=sp,t.ShaderChunk=bi,t.ShaderLib=Si,t.ShaderMaterial=ri,t.ShadowMaterial=zl,t.Shape=Ks,t.ShapeBufferGeometry=Pl,t.ShapeGeometry=Pl,t.ShapePath=function(){function t(){b()(this,t),this.type="ShapePath",this.color=new hn,this.subPaths=[],this.currentPath=null}return S()(t,[{key:"moveTo",value:function(t,e){return this.currentPath=new Js,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this}},{key:"lineTo",value:function(t,e){return this.currentPath.lineTo(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this}},{key:"bezierCurveTo",value:function(t,e,n,i,r,o){return this.currentPath.bezierCurveTo(t,e,n,i,r,o),this}},{key:"splineThru",value:function(t){return this.currentPath.splineThru(t),this}},{key:"toShapes",value:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new Ks;o.curves=r.curves,e.push(o)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],l=-l,s=e[r],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var u=c*(t.x-a.x)-l*(t.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return i}var r,o,a,s=Sl.isClockWise,l=this.subPaths;if(0===l.length)return[];if(!0===e)return n(l);var c=[];if(1===l.length)return o=l[0],(a=new Ks).curves=o.curves,c.push(a),c;var u=!s(l[0].getPoints());u=t?!u:u;var p,h,d=[],_=[],f=[],m=0;_[m]=void 0,f[m]=[];for(var y=0,g=l.length;y<g;y++)r=s(p=(o=l[y]).getPoints()),(r=t?!r:r)?(!u&&_[m]&&m++,_[m]={s:new Ks,p:p},_[m].s.curves=o.curves,u&&m++,f[m]=[]):f[m].push({h:o,p:p[0]});if(!_[0])return n(l);if(_.length>1){for(var v=!1,b=[],x=0,S=_.length;x<S;x++)d[x]=[];for(var w=0,M=_.length;w<M;w++)for(var T=f[w],C=0;C<T.length;C++){for(var E=T[C],A=!0,R=0;R<_.length;R++)i(E.p,_[R].p)&&(w!==R&&b.push({froms:w,tos:R,hole:C}),A?(A=!1,d[R].push(E)):v=!0);A&&d[w].push(E)}b.length>0&&(v||(f=d))}for(var L=0,P=_.length;L<P;L++){a=_[L].s,c.push(a);for(var D=0,I=(h=f[L]).length;D<I;D++)a.holes.push(h[D].h)}return c}}]),t}(),t.ShapeUtils=Sl,t.ShortType=1011,t.Skeleton=Ga,t.SkeletonHelper=Uu,t.SkinnedMesh=Na,t.SmoothShading=2,t.Sphere=pe,t.SphereBufferGeometry=Dl,t.SphereGeometry=Dl,t.Spherical=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return b()(this,t),this.radius=e,this.phi=n,this.theta=i,this}return S()(t,[{key:"set",value:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}},{key:"copy",value:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}},{key:"makeSafe",value:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}},{key:"setFromVector3",value:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}},{key:"setFromCartesianCoords",value:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(bt(e/this.radius,-1,1))),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),t.SphericalHarmonics3=Fc,t.SplineCurve=Xs,t.SpotLight=Ac,t.SpotLightHelper=function(t){_()(n,t);var e=L(n);function n(t,i){var r;b()(this,n),(r=e.call(this)).light=t,r.light.updateMatrixWorld(),r.matrix=t.matrixWorld,r.matrixAutoUpdate=!1,r.color=i;for(var o=new kn,a=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],s=0,l=1;s<32;s++,l++){var c=s/32*Math.PI*2,u=l/32*Math.PI*2;a.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}o.setAttribute("position",new Tn(a,3));var p=new Ka({fog:!1,toneMapped:!1});return r.cone=new as(o,p),r.add(r.cone),r.update(),r}return S()(n,[{key:"dispose",value:function(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Fu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Fu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),n}(Ve),t.Sprite=Ra,t.SpriteMaterial=ma,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=ut,t.StaticReadUsage=35045,t.StereoCamera=function(){function t(){b()(this,t),this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ai,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ai,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}return S()(t,[{key:"update",value:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep,eu.copy(t.projectionMatrix);var n,i,r=e.eyeSep/2,o=r*e.near/e.focus,a=e.near*Math.tan(yt*e.fov*.5)/e.zoom;tu.elements[12]=-r,$c.elements[12]=r,n=-a*e.aspect+o,i=a*e.aspect+o,eu.elements[0]=2*e.near/(i-n),eu.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(eu),n=-a*e.aspect-o,i=a*e.aspect-o,eu.elements[0]=2*e.near/(i-n),eu.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(eu)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(tu),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply($c)}}]),t}(),t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=sc,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=Il,t.TetrahedronGeometry=Il,t.TextGeometry=function(){return console.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new kn},t.Texture=Bt,t.TextureLoader=bc,t.TorusBufferGeometry=kl,t.TorusGeometry=kl,t.TorusKnotBufferGeometry=Ol,t.TorusKnotGeometry=Ol,t.Triangle=nn,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=Bl,t.TubeGeometry=Bl,t.UVMapping=o,t.Uint16Attribute=function(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new xn(t,e)},t.Uint16BufferAttribute=xn,t.Uint32Attribute=function(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new wn(t,e)},t.Uint32BufferAttribute=wn,t.Uint8Attribute=function(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new gn(t,e)},t.Uint8BufferAttribute=gn,t.Uint8ClampedAttribute=function(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new vn(t,e)},t.Uint8ClampedBufferAttribute=vn,t.Uniform=Au,t.UniformsLib=xi,t.UniformsUtils=ii,t.UnsignedByteType=k,t.UnsignedInt248Type=N,t.UnsignedIntType=B,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShort565Type=1019,t.UnsignedShortType=O,t.VSMShadowMap=3,t.Vector2=Et,t.Vector3=Wt,t.Vector4=Ft,t.VectorKeyframeTrack=lc,t.Vertex=function(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Wt(t,e,n)},t.VertexColors=2,t.VideoTexture=fs,t.WebGL1Renderer=la,t.WebGLCubeRenderTarget=ci,t.WebGLMultipleRenderTargets=zt,t.WebGLMultisampleRenderTarget=Ht,t.WebGLRenderTarget=Nt,t.WebGLRenderTargetCube=function(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new ci(t,n)},t.WebGLRenderer=sa,t.WebGLUtils=$o,t.WireframeGeometry=jl,t.WireframeHelper=function(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new as(new jl(t.geometry),new Ka({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=ot,t.XHRLoader=function(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new mc(t)},t.ZeroCurvatureEnding=it,t.ZeroFactor=200,t.ZeroSlopeEnding=rt,t.ZeroStencilOp=0,t.sRGBEncoding=lt,Object.defineProperty(t,"__esModule",{value:!0})}))},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},function(t,e,n){"use strict";n.r(e);var i=n(28),r=n(9),o=(n(24),n(51),n(15),n(17),n(50),n(2)),a=n.n(o),s=n(3),l=n.n(s),c=n(19),u=(n(18),n(22),n(32),n(12),n(8)),p=n.n(u),h=n(4),d=n.n(h),_=n(10),f=n.n(_),m=n(5),y=n.n(m);var g=function(){function t(e){a()(this,t),this.dom=e}return l()(t,[{key:"add",value:function(){for(var e=0;e<arguments.length;e++){var n=arguments[e];n instanceof t?this.dom.appendChild(n.dom):console.error("UIElement:",n,"is not an instance of UIElement.")}return this}},{key:"remove",value:function(){for(var e=0;e<arguments.length;e++){var n=arguments[e];n instanceof t?this.dom.removeChild(n.dom):console.error("UIElement:",n,"is not an instance of UIElement.")}return this}},{key:"clear",value:function(){for(;this.dom.children.length;)this.dom.removeChild(this.dom.lastChild)}},{key:"setId",value:function(t){return this.dom.id=t,this}},{key:"getId",value:function(){return this.dom.id}},{key:"setClass",value:function(t){return this.dom.className=t,this}},{key:"addClass",value:function(t){return this.dom.classList.add(t),this}},{key:"removeClass",value:function(t){return this.dom.classList.remove(t),this}},{key:"setStyle",value:function(t,e){for(var n=0;n<e.length;n++)this.dom.style[t]=e[n];return this}},{key:"setDisabled",value:function(t){return this.dom.disabled=t,this}},{key:"setTextContent",value:function(t){return this.dom.textContent=t,this}},{key:"setInnerHTML",value:function(t){this.dom.innerHTML=t}},{key:"getIndexOfChild",value:function(t){return Array.prototype.indexOf.call(this.dom.children,t.dom)}}]),t}();["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","verticalAlign","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach((function(t){var e="set"+t.substr(0,1).toUpperCase()+t.substr(1,t.length);g.prototype[e]=function(){return this.setStyle(t,arguments),this}}));["KeyUp","KeyDown","MouseOver","MouseOut","Click","DblClick","Change","Input"].forEach((function(t){var e="on"+t;g.prototype[e]=function(e){return this.dom.addEventListener(t.toLowerCase(),e.bind(this),!1),this}}));var v=l()((function t(){a()(this,t)})),b=n(34),x=n.n(b);function S(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=y()(t);if(e){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return f()(this,n)}}c.a,n(23),n(33),n(35);Array.prototype.RemoveAt=function(t){this.splice(t,1)},Array.prototype.Remove=function(t){var e=this.indexOf(t);e>=0&&this.RemoveAt(e,1)};n(36),n(26);var w=n(1);w.bb.prototype.Update=function(t){},w.bb.prototype.UpdateChildren=function(t){this.children.forEach((function(e){e.Update&&e.Update(t),e.UpdateChildren&&e.UpdateChildren(t)}))},w.bb.prototype.OnCollisionEnter=function(t){};w.bb;w.cb.prototype.load=function(t,e,n,i){var r=this,o=""===this.path?w.N.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new w.v(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}if(o.meta)e(o);else{var a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void console.error("THREE.ObjectLoader: Can't load "+t);r.parse(o,e)}}),n,i)};w.cb;w.rb.prototype.Update=function(t){},w.rb.prototype.UpdateChildren=function(t){this.children.forEach((function(e){e.Update&&e.Update(t),e.UpdateChildren&&e.UpdateChildren(t)}))};w.rb,n(27),n(11),n(66),n(40),n(41),n(42),n(39),n(31),n(38),n(49),n(46),n(48),n(45),n(43),n(47),n(37),n(44),n(25),n(16);new i.a(r.a.GameWidth,r.a.GameHeight).StartAnimating()}]);